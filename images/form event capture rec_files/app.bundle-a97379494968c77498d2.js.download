/*! For license information please see app.bundle-a97379494968c77498d2.js.LICENSE.txt */
"use strict";(self.webpackChunkawesomescreenshot_website=self.webpackChunkawesomescreenshot_website||[]).push([[143],{21711:()=>{},94489:()=>{},70892:()=>{},48865:()=>{},59331:()=>{},53607:(e,t,n)=>{n.d(t,{IH:()=>_,PU:()=>L,R7:()=>E,Tb:()=>k,i:()=>O,kk:()=>P,sd:()=>A,zH:()=>C});n(94969);var r=n(45777),i=n(67294),a=n(85907),o=n(84737),s=n(94184),c=n.n(s),l=n(85893);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var w=["rgba(255, 0, 0,1)","rgba(255, 92, 0, 1)","rgba(250, 255, 0, 1)","rgba(36, 255, 0, 1)","rgba(0, 255, 240, 1)","rgba(0, 163, 255, 1)","rgba(144, 75, 255, 1)","rgba(255, 0, 229, 1)","rgba(255, 255, 255, 1)","rgba(0, 0, 0, 1)","rgba(244, 219, 121, 1)","rgba(248, 202, 65, 1)","rgba(246, 130, 61, 1)","rgba(226, 90, 59, 1)","rgba(242, 155, 126, 1)","rgba(217, 72, 70, 1)","rgba(160, 67, 72, 1)","rgba(228, 123, 135, 1)","rgba(198, 57, 69, 1)","rgba(198, 69, 101, 1)","rgba(165, 65, 90, 1)","rgba(151, 55, 143, 1)","rgba(112, 70, 140, 1)","rgba(79, 74, 142, 1)","rgba(94, 69, 128, 1)","rgba(67, 84, 104, 1)","rgba(34, 126, 169, 1)","rgba(59, 77, 105, 1)","rgba(47, 86, 165, 1)","rgba(25, 104, 173, 1)","rgba(72, 86, 145, 1)","rgba(11, 123, 185, 1)","rgba(74, 176, 209, 1)","rgba(22, 140, 152, 1)","rgba(22, 161, 134, 1)","rgba(33, 143, 106, 1)","rgba(45, 98, 90, 1)","rgba(80, 111, 80, 1)","rgba(93, 150, 73, 1)","rgba(120, 120, 71, 1)","transparent"],I=["Times New Roman","Arial","Craft Girls","OpenSans","Roboto","Montserrat","Limelight","Lobster","Anton","Chewy","Frijole","Spirax","Dancing Script","Changa One","Griffy"],S=[2,4,6,8,16],N=[6,8,16,32,48],O=function(e){v(n,e);var t=g(n);function n(e){return m(this,n),t.call(this,e)}return p(n,[{key:"shouldComponentUpdate",value:function(e){return e.disabled!==this.props.disabled||this.props.allowAdvancedTool!==e.allowAdvancedTool}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.action,i=e.title,a=e.handleClick,o=c()("tool-btn single-btn",{disabled:t}),s=c()(this.props.allowAdvancedTool?"":"pro");return(0,l.jsx)(r.Z,{title:i,children:(0,l.jsx)("div",{className:o,"data-action":n,onClick:a.bind(this,"action",{actionType:n}),children:(0,l.jsx)("b",{className:s})})})}}]),n}(i.Component),E=function(e){v(n,e);var t=g(n);function n(e){var r;return m(this,n),(r=t.call(this,e)).state={haveClickShape:!1},r.clickShape=r.clickShape.bind(j(r)),r.visibleChange=r.visibleChange.bind(j(r)),r}return p(n,[{key:"shouldComponentUpdate",value:function(e,t){return e.current!==this.props.current||this.props.allowAdvancedTool!==e.allowAdvancedTool||this.props.selectShape!==e.selectShape||this.state.haveClickShape!==t.haveClickShape}},{key:"clickShape",value:function(){this.setState({haveClickShape:!1}),this.props.handleClick("shape",{shape:this.props.shape,shapeKey:this.props.shapeGroup})}},{key:"visibleChange",value:function(e){this.setState({haveClickShape:e})}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.shape,i=e.title,a=e.active,o=e.selectShape,s=!1;o?o===n&&(s=!0):s=n===t||a;var u=c()("tool-btn single-btn "+n,{active:s}),d=c()(this.props.allowAdvancedTool?"":"pro");return(0,l.jsx)(r.Z,{title:i,placement:"bottom",visible:this.state.haveClickShape,mouseEnterDelay:0,mouseLeaveDelay:0,onVisibleChange:this.visibleChange,children:(0,l.jsx)("div",{className:u,"data-shape":n,onClick:this.clickShape,children:(0,l.jsx)("b",{className:d})})})}}]),n}(i.Component);function D(e){var t,n,r,a=e.current,o=e.defaultShape,s=e.handleClick,u=e.btns,d=e.allowAdvancedTool,f=e.selectShape,m=e.shapeGroup;(0,i.useEffect)((function(){}),[f]);return function(){var i;i=!1,u&&u.forEach((function(e){f?e.shape==f&&(i=!0,t=e.title,n=e.shape):(e.shape===a&&(i=!0),e.shape===o&&(t=e.title,n=e.shape))})),f&&!i&&u.forEach((function(e){e.shape===o&&(t=e.title,n=e.shape)})),r=i;var h=c()("menu",{active:r});return(0,l.jsxs)("div",{className:"subMenu",children:[(0,l.jsx)(E,{title:t,shape:n,active:r,selectShape:f||"",current:a,shapeGroup:m,handleClick:s,onToolBar:!0,allowAdvancedTool:d}),(0,l.jsx)("div",{className:h,children:e.children()})]})}()}var A=i.memo(D,(function(e,t){return t.currentShapeKey!==e.shapeGroup&&e.currentShapeKey!==e.shapeGroup&&e.allowAdvancedTool===t.allowAdvancedTool&&e.currentShape===t.currentShape&&e.defaultShape!==t.selectShape})),C=i.memo(T,(function(e,t){return e.currentColor===t.currentColor}));function T(e){var t=this,n=e.recentColors,s=e.currentColor,c=e.stroke,u=e.handleColorClick,f=e.shapeKey,m=d((0,i.useState)(!0),2),h=m[0],p=m[1],v=d((0,i.useState)(s),2),y=v[0],g=v[1];function b(e){return"rgb(239, 239, 239)"===e||"rgb(243, 243, 243)"===e||"rgb(255, 255, 255)"===e||"rgb(252, 229, 205)"===e||"rgb(255, 242, 204)"===e?"#bdc1c6":"transparent"}function j(e,t){u(e,!!t),g(e)}return(0,i.useEffect)((function(){s!==y&&g(s)}),[s]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"color-header",children:[(0,l.jsxs)("div",{className:"color-values",children:[(0,l.jsx)("div",{className:"color-icon","data-color":y,style:{backgroundColor:y}}),(0,l.jsx)(a.ZE,{color:(0,o.jg)(y),onChange:j,onClick:function(e){e.target.select()},alpha:!0,prefixed:!0})]}),(0,l.jsx)(r.Z,{title:"More Colors",placement:"right",children:(0,l.jsx)("div",{className:"change-action",style:{backgroundColor:h?"":"#26272D"},onClick:function(){p(!h)}.bind(this),children:(0,l.jsx)("b",{})})})]}),(0,l.jsx)("div",{className:"color-content",children:h?w.map((function(e,n){return"transparent"!==e?(0,l.jsx)("div",{className:"color-item","data-color":e,title:e,style:{backgroundColor:e,borderColor:b(e)},onClick:j.bind(t,e,"item")},f+e+n):c?(0,l.jsx)("div",{className:"color-item transparent","data-color":"transparent",title:"transparent",style:{backgroundColor:"#666666",borderColor:b("transparent")},onClick:j.bind(t,"transparent","item")},"transparent"+f):void 0})):(0,l.jsx)(a.gW,{color:(0,o.jg)(y),onChange:j})}),(0,l.jsxs)("div",{className:"color-foot",children:[(0,l.jsx)("span",{children:"Recent Colors"}),(0,l.jsx)("div",{className:"recent-colors",children:n.map((function(e,n){return(0,l.jsx)("div",{className:"color-item recent-item","data-color":e,title:e,style:{backgroundColor:e,borderColor:b(e)},onClick:j.bind(t,e,"item")},e+f+n)}))})]})]})}function P(e){var t=this,n=e.style,a=e.selectShape,o=e.shapeKey,s=e.clickItem,u=d((0,i.useState)(!1),2),f=u[0],m=u[1],h=!1;if(n)var p=n.width;"highlight"!==o||n&&n.width||(p=16);var v="highlight"===o;a&&(p=a.penWidth,"highlight"===a.shapeName&&(v=!0));var y=p;function g(e){m((!e||!h)&&e)}return(0,l.jsx)(L,{className:"tool-pen-width multi-btn",children:function(e,n){var i=c()("panel",{active:e.isExpand});e.isExpand&&m(!1),h=e.isExpand;var a=function(e){n(),y=e,s("action",{actionType:"changePenWidth",value:e,shapeKey:o})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{title:"Stroke width",placement:"bottom",visible:f,onVisibleChange:g,children:(0,l.jsxs)("div",{className:"current",id:"tool-current-width","data-width":y||p,children:[(0,l.jsxs)("div",{className:"tool-current-width "+(v?"highlight":""),children:[(0,l.jsx)("span",{children:y||p}),(0,l.jsx)("b",{})]}),(0,l.jsx)("div",{className:"multi-btn-arrow"})]})}),(0,l.jsx)("div",{className:i,children:v?N.map((function(e,n){return(0,l.jsxs)("div",{className:"pen-width-item "+(e===y?"checked":""),"data-width":n+1,onClick:a.bind(t,e),children:[(0,l.jsx)("span",{children:e}),(0,l.jsx)("b",{})]},e)})):S.map((function(e,n){return(0,l.jsxs)("div",{className:"pen-width-item "+(e===y?"checked":""),"data-width":n+1,onClick:a.bind(t,e),children:[(0,l.jsx)("span",{children:e}),(0,l.jsx)("b",{})]},e)}))})]})}})}function _(e){var t=this,n=e.style,a=e.selectShape,o=e.shapeKey,s=e.clickItem,u=d((0,i.useState)(!1),2),f=u[0],m=u[1],h=!1,p=n.fontFamily;a&&a.fontName&&(p=a.fontName);var v=p;function y(e){m((!e||!h)&&e)}return(0,l.jsx)(L,{className:"tool-font-family multi-btn",children:function(e,n){var i=c()("panel",{active:e.isExpand});h=e.isExpand,e.isExpand&&m(!1);var a=function(e){n(),v=e,s("action",{actionType:"changeFontFamily",value:e,shapeKey:o})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{title:"Font",placement:"bottom",visible:f,onVisibleChange:y,children:(0,l.jsxs)("div",{className:"tool-current-font-family btn-border current",id:"tool-current-font-family","data-ff":v||p,children:[(0,l.jsx)("span",{children:v||p}),(0,l.jsx)("div",{className:"btn-down-arrow"})]})}),(0,l.jsx)("div",{className:i,children:I.map((function(e){return(0,l.jsx)("div",{className:"font-f-item "+(v===e?"checked":""),"data-ff":e,onClick:a.bind(t,e),children:e},e)}))})]})}})}var k=function(e){v(n,e);var t=g(n);function n(e){var r;return m(this,n),(r=t.call(this,e)).state={isExpand:!1},r.toggle=r.toggle.bind(j(r)),r.clickView=r.clickView.bind(j(r)),r.elementContains=r.elementContains.bind(j(r)),r.el=(0,i.createRef)(),r}return p(n,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.clickView)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.clickView)}},{key:"elementContains",value:function(e,t){return e!==t&&e.contains(t)||e===t}},{key:"shouldComponentUpdate",value:function(e,t){return!(t.isExpand===this.state.isExpand&&e.allowAdvancedTool===this.props.allowAdvancedTool&&!t.isExpand&&e.color===this.props.color)}},{key:"clickView",value:function(e){var t=this.el.current.querySelector("."+this.props.checkView);this.elementContains(t,e.target)||(this.elementContains(this.el.current,e.target)?(this.toggle(),this.props.handleClick&&this.props.handleClick("action",{actionType:"ToolColorSelect"})):this.state.isExpand&&this.setState({isExpand:!this.state.isExpand}))}},{key:"toggle",value:function(){this.setState({isExpand:!this.state.isExpand})}},{key:"render",value:function(){var e=c()("tool-select "+(this.state.isExpand?"expand":""),this.props.className);return(0,l.jsx)("div",{className:e,tabIndex:"0",ref:this.el,children:this.props.children(this.state,this.toggle)})}}]),n}(i.Component),L=function(e){v(n,e);var t=g(n);function n(e){var r;return m(this,n),(r=t.call(this,e)).state={isExpand:!1},r.toggle=r.toggle.bind(j(r)),r.el=(0,i.createRef)(),r}return p(n,[{key:"shouldComponentUpdate",value:function(){return!0}},{key:"toggle",value:function(){var e=this;this.state.isExpand&&this.el.current.blur(),this.setState({isExpand:!this.state.isExpand},(function(){e.props.onPopupShown&&e.props.onPopupShown(e.state.isExpand)}))}},{key:"render",value:function(){var e=c()("tool-select "+(this.state.isExpand?"expand":""),this.props.className);return(0,l.jsx)("div",{className:e,tabIndex:"0",onFocus:this.toggle,onBlur:this.toggle,ref:this.el,children:this.props.children(this.state,this.toggle)})}}]),n}(i.Component)},80442:(e,t,n)=>{n.d(t,{Z:()=>v});n(37135);var r=n(48889),i=(n(38691),n(71577));const a=n.p+"images/f9b939c51a78a590b2ba.png",o=n.p+"images/534a9fb4242d793c9941.png",s=n.p+"images/68f3e6b1a633df7ae925.png",c=n.p+"images/5d9b6fa5d20d4df7e53f.png";var l=n(52186),u=n(73935),d=n(67294),f=n(56010);const m=function(e){var t=e.type;return(0,d.useEffect)((function(){(0,f.I1)(t,{event_category:"upgrade modal show"})}),[]),null};var h=n(85893),p=["callout","list","image","insertImage"];function v(e){var t="workspace"===e.type?"Go to workspace":(0,h.jsx)(h.Fragment,{children:"Upgrade now"});return(0,h.jsx)(r.Z,{visible:e.visible,onCancel:e.onCancel,footer:null,width:436,getContainer:!1,maskClosable:!1,wrapClassName:"upgrade-modal ".concat("video-record-50"===e.type?"limit-alert":""),destroyOnClose:!0,maskStyle:"video-record-50"===e.type?{position:"absolute"}:"",centered:!0,closable:!e.unClosable,closeIcon:(0,h.jsx)(l.T,{style:{fontSize:"12px"}}),children:(0,h.jsxs)("div",{className:"upgrade-panel",children:[(0,h.jsx)(m,{type:e.type}),(0,h.jsx)("div",{className:"crown",children:(0,h.jsx)(l.C,{})}),(0,h.jsx)("div",{className:"title",children:"5limit"===e.type?"Your free trial has ended":"workspace"===e.type?"Workspace Limit Reached":"download-duration"===e.type||"edit-duration"===e.type?"Get more with professional plan":"trash-restore"===e.type?"Item Limit Reached":"video-record-50"===e.type?"Limited access":"Item Limit Reached"}),(0,h.jsx)("p",{children:-1!==p.indexOf(e.type)?"This is a basic plan feature. Please upgrade to unlock it.":"dropbox"===e.type?"Upgrade to premium plans to save to Dropbox.":"box"===e.type?"Upgrade to premium plans to save to Box.":"team"===e.type?"Upgrade to team plan to unlock the feature.":"project"===e.type?"Upgrade to premium plans to get unlimited folders.":"uploadImage"===e.type?"Upgrade to premium plans to host unlimited images.":"uploadVideo"===e.type?(0,h.jsxs)(h.Fragment,{children:["Upgrade to ",(0,h.jsx)("b",{children:"professional plan"})," to host unlimited videos."]}):"recordResolution"===e.type?(0,h.jsxs)(h.Fragment,{children:["Upgrade to ",(0,h.jsx)("b",{children:"professional plan"})," to unlock the high resolution recording feature.",(0,h.jsx)("br",{}),"High resolution video takes lots of disk space, so you need to upgrade to use this feature."]}):"video-record-50"===e.type?(0,h.jsx)(h.Fragment,{children:"You have reached a limit for sharing and downloading your video. Upgrade to Professional plan for unlimited access."}):"image-view"===e.type?(0,h.jsx)(h.Fragment,{children:"This image is not accessible because you have reached the limit on image access. Please upgrade your plan for unlimited access."}):"image-alert"===e.type||"duplicate"===e.type?(0,h.jsxs)(h.Fragment,{children:["You have reached the limit on image. Please upgrade to"," ",(0,h.jsx)("b",{children:"Professional plan"})," for unlimited images."]}):"video-alert"===e.type?(0,h.jsxs)(h.Fragment,{children:["You have reached the limit on video. Please upgrade to"," ",(0,h.jsx)("b",{children:"Professional plan"})," for unlimited recording."]}):"download"===e.type||"editor"===e.type?(0,h.jsxs)(h.Fragment,{children:["Please upgrade to ",(0,h.jsx)("b",{children:"Professional plan"})," to unlock this feature."]}):"5limit"===e.type?(0,h.jsx)(h.Fragment,{children:"Your video can be up to 5 minutes long. To access unlimited video length, please upgrade your account to Professional."}):"video-editor"===e.type?(0,h.jsxs)(h.Fragment,{children:["Please upgrade to ",(0,h.jsx)("b",{children:"Professional plan"})," to unlock this feature."]}):"workspace"===e.type?"This workspace has reached the limit. Pleace upgrade the workspace.":"download-duration"===e.type?(0,h.jsxs)(h.Fragment,{children:["Upgrade to ",(0,h.jsx)("b",{children:"professional plan"})," to download videos longer than one hour in MP4."]}):"edit-duration"===e.type?(0,h.jsxs)(h.Fragment,{children:["Upgrade to ",(0,h.jsx)("b",{children:"professional plan"})," to edit videos longer than one hour."]}):"trash-restore"===e.type?(0,h.jsxs)(h.Fragment,{children:["Upgrade to ",(0,h.jsx)("b",{children:"professional plan"})," to unlock unlimited videos and images."]}):"Upgrade to Professional to unlock the feature."}),function(){switch(e.type){case"callout":return(0,h.jsx)("img",{src:o,alt:""});case"list":return(0,h.jsx)("img",{src:s,alt:""});case"image":return(0,h.jsx)("img",{src:a,alt:""});case"insertImage":return(0,h.jsx)("img",{src:c,alt:""});default:return""}}(),(0,h.jsx)(i.Z,{className:"up-btn",size:"large",type:"primary",onClick:function(){window.open("https://www.awesomescreenshot.com/pricing?from="+e.type)},icon:(0,h.jsx)(l.C,{}),children:t}),"download-duration"===e.type&&(0,h.jsxs)("div",{className:"more-btn",children:[(0,h.jsx)("a",{onClick:e.openDownloadWebmModal,children:"Download in webm"})," ","instead"]})]})})}v.show=function(e){var t=!0,n=document.createDocumentFragment();function r(){t=!1,u.render((0,h.jsx)(v,{type:e,visible:t,onCancel:r}),n)}setTimeout((function(){u.render((0,h.jsx)(v,{type:e,visible:t,onCancel:r}),n)}))}},72586:(e,t,n)=>{n.d(t,{Z:()=>Yt});n(37135);var r=n(48889),i=n(67294),a=(n(38691),n(71577)),o=(n(6212),n(34041)),s=n(1646),c=n.n(s),l=n(6700),u=n(94184),d=n.n(u),f=n(84737),m=n(61135),h=n(71925),p=(n(45623),n(71257)),v=(n(37043),n(47933)),y=n(85893);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=o.Z.Option,x=o.Z.OptGroup,w=v.ZP.Group,I={};const S=function(e){var t=e.currentAccount,n=g((0,i.useState)([]),2),r=n[0],s=n[1],c=g((0,i.useState)(!1),2),l=c[0],u=c[1],d=g((0,i.useState)([]),2),f=d[0],b=d[1];(0,i.useEffect)((function(){u(!0),Promise.all([(0,m.VY)({accountID:t.id,what:"channel"}),(0,m.VY)({accountID:t.id,what:"member"})]).then((function(e){var t=e[0].items.concat(e[1].items);s(t.filter((function(e){return e.added}))),b(t.filter((function(e){return!e.added}))),I={},t.forEach((function(e){I[e.id]=e})),u(!1)})).catch((function(){u(!1)}))}),[t.id]);var S=h.xR.slack;return(0,y.jsxs)(p.Z,{onFinish:function(n){(0,m.HK)(t.id,I[n.channel].type,n.channel,I[n.channel].name,n.privacy,I[n.channel].info).then((function(t){e.handleDesCreated(t.destination)}))},children:[(0,y.jsx)("div",{className:"label",children:S.targetName}),(0,y.jsx)(p.Z.Item,{name:"channel",rules:[{required:!0,message:"Please choose a channel or member"}],children:(0,y.jsxs)(o.Z,{size:"large",showSearch:!0,placeholder:S.placeHolder,disabled:l,loading:r.length+f.length===0||l,filterOption:function(e,t){if(t.name)return t.name.toLowerCase().indexOf(e.toLowerCase())>=0},children:[r.length&&(0,y.jsx)(x,{label:"Already Added",children:r.map((function(e){return(0,y.jsx)(j,{value:e.id,name:e.name,disabled:!0,children:h.BT[e.type]+e.name},e.id)}))}),(0,y.jsx)(x,{label:"Available",children:f.map((function(e){return(0,y.jsx)(j,{value:e.id,name:e.name,children:h.BT[e.type]+e.name},e.id)}))})]})}),(0,y.jsx)(p.Z.Item,{className:"des-share-option",name:"privacy",initialValue:"private",children:(0,y.jsxs)(w,{children:[(0,y.jsx)(v.ZP,{value:"private",children:"Private"}),(0,y.jsx)(v.ZP,{value:"shared",children:"Shared"})]})}),(0,y.jsx)(a.Z,{type:"primary",className:"add-des-btn",size:"large",block:!0,htmlType:"submit",children:"Create Destination"})]})};function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=o.Z.Option,D=o.Z.OptGroup,A=v.ZP.Group,C={};const T=function(e){var t=e.currentAccount,n=N((0,i.useState)([]),2),r=n[0],s=n[1],c=N((0,i.useState)([]),2),l=c[0],u=c[1];(0,i.useEffect)((function(){(0,m.VY)({accountID:t.id,what:"board"}).then((function(e){var t=e.items;s(t.filter((function(e){return e.added}))),u(t.filter((function(e){return!e.added}))),C={},t.forEach((function(e){C[e.id]=e}))}))}),[]);var d=h.xR.trello;return(0,y.jsxs)(p.Z,{onFinish:function(n){(0,m.HK)(t.id,C[n.channel].type,n.channel,C[n.channel].name,n.privacy,C[n.channel].info).then((function(t){e.handleDesCreated(t.destination)}))},children:[(0,y.jsx)("div",{className:"label",children:d.targetName}),(0,y.jsx)(p.Z.Item,{name:"channel",rules:[{required:!0,message:"Please choose a board"}],children:(0,y.jsxs)(o.Z,{size:"large",showSearch:!0,placeholder:d.placeHolder,loading:r.length+l.length===0,filterOption:function(e,t){if(t.name)return t.name.toLowerCase().indexOf(e.toLowerCase())>=0},children:[r.length&&(0,y.jsx)(D,{label:"Already Added",children:r.map((function(e){return(0,y.jsx)(E,{value:e.id,name:e.name,disabled:!0,children:h.BT[e.type]+e.name},e.id)}))}),(0,y.jsx)(D,{label:"Available",children:l.map((function(e){return(0,y.jsx)(E,{value:e.id,name:e.name,children:h.BT[e.type]+e.name},e.id)}))})]})}),(0,y.jsx)(p.Z.Item,{className:"des-share-option",name:"privacy",initialValue:"private",children:(0,y.jsxs)(A,{children:[(0,y.jsx)(v.ZP,{value:"private",children:"Private"}),(0,y.jsx)(v.ZP,{value:"shared",children:"Shared"})]})}),(0,y.jsx)(a.Z,{type:"primary",className:"add-des-btn",size:"large",block:!0,htmlType:"submit",children:"Create Destination"})]})};function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=o.Z.Option,L=o.Z.OptGroup,R=v.ZP.Group,M={},Z={};const U=function(e){var t=e.currentAccount,n=P((0,i.useState)([]),2),r=n[0],s=n[1],c=P((0,i.useState)([]),2),l=c[0],u=c[1],d=P((0,i.useState)([]),2),f=d[0],g=d[1];(0,i.useEffect)((function(){(0,m.VY)({accountID:t.id,what:"workspace"}).then((function(e){var t=e.items;s(t),j(t[0].id),Z={},t.forEach((function(e){Z[e.id]=e}))}))}),[]);var b=h.xR.asana;function j(e){u([]),g([]),(0,m.VY)({accountID:t.id,what:"project",workspaceID:e}).then((function(e){var t=e.items;u(t.filter((function(e){return e.added}))),g(t.filter((function(e){return!e.added}))),M={},t.forEach((function(e){M[e.id]=e}))}))}return(0,y.jsxs)(p.Z,{onFinish:function(n){(0,m.HK)(t.id,"project",n.project,M[n.project].name,n.privacy,M[n.project].info).then((function(t){e.handleDesCreated(t.destination)}))},children:[(0,y.jsx)("div",{className:"label",children:b.targetName1}),(0,y.jsx)(p.Z.Item,{name:"workspace",rules:[{required:!0,message:"Please choose a workspace"}],children:(0,y.jsx)(o.Z,{size:"large",placeholder:b.placeHolder1,loading:0===r.length,onChange:function(e){j(e)},children:r.map((function(e){return(0,y.jsx)(k,{value:e.id,children:e.name},e.id)}))})}),(0,y.jsx)("div",{className:"label",children:b.targetName2}),(0,y.jsx)(p.Z.Item,{name:"project",rules:[{required:!0,message:"Please choose a project"}],children:(0,y.jsxs)(o.Z,{size:"large",showSearch:!0,placeholder:b.placeHolder2,loading:l.length+f.length===0,filterOption:function(e,t){if(t.name)return t.name.toLowerCase().indexOf(e.toLowerCase())>=0},children:[l.length&&(0,y.jsx)(L,{label:"Already Added",children:l.map((function(e){return(0,y.jsx)(k,{value:e.id,name:e.name,disabled:!0,children:h.BT[e.type]+e.name},e.id)}))}),(0,y.jsx)(L,{label:"Available",children:f.map((function(e){return(0,y.jsx)(k,{value:e.id,name:e.name,children:h.BT[e.type]+e.name},e.id)}))})]})}),(0,y.jsx)(p.Z.Item,{className:"des-share-option",name:"privacy",initialValue:"private",children:(0,y.jsxs)(R,{children:[(0,y.jsx)(v.ZP,{value:"private",children:"Private"}),(0,y.jsx)(v.ZP,{value:"shared",children:"Shared"})]})}),(0,y.jsx)(a.Z,{type:"primary",className:"add-des-btn",size:"large",block:!0,htmlType:"submit",children:"Create Destination"})]})};function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=o.Z.Option,V=o.Z.OptGroup,B=v.ZP.Group,W={};const z=function(e){var t=e.currentAccount,n=H((0,i.useState)([]),2),r=n[0],s=n[1],c=H((0,i.useState)([]),2),l=c[0],u=c[1],d=function(e){(0,m.VY)({accountID:t.id,what:"folder",query:e}).then((function(e){var t=e.items;s(t.filter((function(e){return e.added}))),u(t.filter((function(e){return!e.added}))),W={},t.forEach((function(e){W[e.id]=e}))}))};(0,i.useEffect)((function(){d()}),[]);var f=h.xR.googleDrive;return(0,y.jsxs)(p.Z,{onFinish:function(n){(0,m.HK)(t.id,W[n.folder].type,n.folder,W[n.folder].name,n.privacy,W[n.folder].info).then((function(t){e.handleDesCreated(t.destination)}))},children:[(0,y.jsx)("div",{className:"label",children:f.targetName}),(0,y.jsxs)(p.Z.Item,{name:"folder",rules:[{required:!0,message:"choose a folder"}],children:[(0,y.jsxs)(o.Z,{size:"large",showSearch:!0,placeholder:f.placeHolder,loading:r.length+l.length===0,onSearch:function(e){d(e)},filterOption:!1,children:[r.length&&(0,y.jsx)(V,{label:"Already Added",children:r.map((function(e){return(0,y.jsx)(G,{value:e.id,disabled:!0,children:h.BT[e.type]+e.name},e.id)}))}),(0,y.jsx)(V,{label:"Available",children:l.map((function(e){return(0,y.jsx)(G,{value:e.id,children:h.BT[e.type]+e.name},e.id)}))})]}),(0,y.jsx)("div",{className:"tip",children:"Only 10 recent folders are listed. Type and search for other folders."})]}),(0,y.jsx)(p.Z.Item,{className:"des-share-option",name:"privacy",initialValue:"private",children:(0,y.jsxs)(B,{children:[(0,y.jsx)(v.ZP,{value:"private",children:"Private"}),(0,y.jsx)(v.ZP,{value:"shared",children:"Shared"})]})}),(0,y.jsx)(a.Z,{type:"primary",className:"add-des-btn",size:"large",block:!0,htmlType:"submit",children:"Create Destination"})]})};function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q=o.Z.Option,Y=o.Z.OptGroup,J=v.ZP.Group,Q={};const X=function(e){var t=e.currentAccount,n=K((0,i.useState)([]),2),r=n[0],s=n[1],c=K((0,i.useState)([]),2),l=c[0],u=c[1];(0,i.useEffect)((function(){(0,m.VY)({accountID:t.id,what:"repo"}).then((function(e){var t=e.items;s(t.filter((function(e){return e.added}))),u(t.filter((function(e){return!e.added}))),Q={},t.forEach((function(e){Q[e.id]=e}))}))}),[]);var d=h.xR.github;return(0,y.jsxs)(p.Z,{onFinish:function(n){(0,m.HK)(t.id,Q[n.repo].type,n.repo,Q[n.repo].name,n.privacy,Q[n.repo].info).then((function(t){e.handleDesCreated(t.destination)}))},children:[(0,y.jsx)("div",{className:"label",children:d.targetName}),(0,y.jsx)(p.Z.Item,{name:"repo",rules:[{required:!0,message:"Please choose a channel or member"}],children:(0,y.jsxs)(o.Z,{size:"large",placeholder:d.placeHolder,loading:r.length+l.length===0,showSearch:!0,onSearch:function(e){},filterOption:function(e,t){if(t.name)return t.name.toLowerCase().indexOf(e.toLowerCase())>=0},children:[r.length&&(0,y.jsx)(Y,{label:"Already Added",children:r.map((function(e){return(0,y.jsx)(q,{value:e.id,name:e.info.owner+e.name,disabled:!0,children:h.BT[e.type]+e.info.owner+"/"+e.name},e.id)}))}),(0,y.jsx)(Y,{label:"Available",children:l.map((function(e){return(0,y.jsx)(q,{value:e.id,name:e.info.owner+e.name,children:h.BT[e.type]+e.info.owner+"/"+e.name},e.id)}))})]})}),(0,y.jsx)(p.Z.Item,{className:"des-share-option",name:"privacy",initialValue:"private",children:(0,y.jsxs)(J,{children:[(0,y.jsx)(v.ZP,{value:"private",children:"Private"}),(0,y.jsx)(v.ZP,{value:"shared",children:"Shared"})]})}),(0,y.jsx)(a.Z,{type:"primary",className:"add-des-btn",size:"large",block:!0,htmlType:"submit",children:"Create Destination"})]})};function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=o.Z.Option,re=o.Z.OptGroup,ie=v.ZP.Group,ae={},oe={};const se=function(e){var t=e.currentAccount,n=ee((0,i.useState)([]),2),r=n[0],s=n[1],c=ee((0,i.useState)([]),2),l=c[0],u=c[1],d=ee((0,i.useState)([]),2),f=d[0],g=d[1];(0,i.useEffect)((function(){(0,m.VY)({accountID:t.id,what:"cloud"}).then((function(e){var t=e.items;s(t),j(t[0].id,t[0].name),oe={},t.forEach((function(e){oe[e.id]=e}))}))}),[]);var b=h.xR.jira;function j(e,n){u([]),g([]),(0,m.VY)({accountID:t.id,what:"project",cloudID:e,cloudName:n}).then((function(e){var t=e.items;u(t.filter((function(e){return e.added}))),g(t.filter((function(e){return!e.added}))),ae={},t.forEach((function(e){ae[e.id]=e}))}))}return(0,y.jsxs)(p.Z,{onFinish:function(n){(0,m.HK)(t.id,"project",n.project,ae[n.project].name,n.privacy,ae[n.project].info).then((function(t){e.handleDesCreated(t.destination)}))},children:[(0,y.jsx)("div",{className:"label",children:b.targetName1}),(0,y.jsx)(p.Z.Item,{name:"site",rules:[{required:!0,message:"Please choose a site"}],children:(0,y.jsx)(o.Z,{size:"large",placeholder:b.placeHolder1,loading:0===r.length,onChange:function(e){j(e,oe[e].name)},children:r.map((function(e){return(0,y.jsx)(ne,{value:e.id,children:e.name},e.id)}))})}),(0,y.jsx)("div",{className:"label",children:b.targetName2}),(0,y.jsx)(p.Z.Item,{name:"project",rules:[{required:!0,message:"Please choose a project"}],children:(0,y.jsxs)(o.Z,{size:"large",showSearch:!0,placeholder:b.placeHolder2,loading:l.length+f.length===0,filterOption:function(e,t){if(t.name)return t.name.toLowerCase().indexOf(e.toLowerCase())>=0},children:[l.length&&(0,y.jsx)(re,{label:"Already Added",children:l.map((function(e){return(0,y.jsx)(ne,{value:e.id,name:e.name,disabled:!0,children:h.BT[e.type]+e.name},e.id)}))}),(0,y.jsx)(re,{label:"Available",children:f.map((function(e){return(0,y.jsx)(ne,{value:e.id,name:e.name,children:h.BT[e.type]+e.name},e.id)}))})]})}),(0,y.jsx)(p.Z.Item,{className:"des-share-option",name:"privacy",initialValue:"private",children:(0,y.jsxs)(ie,{children:[(0,y.jsx)(v.ZP,{value:"private",children:"Private"}),(0,y.jsx)(v.ZP,{value:"shared",children:"Shared"})]})}),(0,y.jsx)(a.Z,{type:"primary",className:"add-des-btn",size:"large",block:!0,htmlType:"submit",children:"Create Destination"})]})};var ce=n(80442),le=n(27484),ue=n.n(le);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);if(t){var i=ye(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(e,t){if(t&&("object"===de(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ve(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}var ge={},be=o.Z.Option;o.Z.OptGroup;ue().extend(c());const je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(s,e);var t,n,r,i=he(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).state={isInAuthMode:!1,isLoadList:!1,currentResources:[],createAccount:"",createPrivacy:"private",createResource:null,isCreating:!1,currentAccount:e.currentAccount||(e.accounts?e.accounts[0]:null)||null,isShownUpgrade:!1},t.chooseDes=t.chooseDes.bind(ve(t)),t.back=t.back.bind(ve(t)),t.handleAccountChange=t.handleAccountChange.bind(ve(t)),t.handleConnect=t.handleConnect.bind(ve(t)),t.handlePrivacyChange=t.handlePrivacyChange.bind(ve(t)),t.handleResourceChange=t.handleResourceChange.bind(ve(t)),t.updateCurrentResources=t.updateCurrentResources.bind(ve(t)),t.handleMessage=t.handleMessage.bind(ve(t)),t.onAccountConnected=t.onAccountConnected.bind(ve(t)),t.handleUpgradeCancel=t.handleUpgradeCancel.bind(ve(t)),t.getPermissionByName=t.getPermissionByName.bind(ve(t)),t.getFreeTrialTip=t.getFreeTrialTip.bind(ve(t)),t.getIsShowPro=t.getIsShowPro.bind(ve(t)),t}return t=s,(n=[{key:"componentDidMount",value:function(){window.addEventListener("message",this.handleMessage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessage)}},{key:"handleMessage",value:function(e){if("accountConnected"===e.data.name){var t=JSON.parse(e.data.data);this.setState({isInAuthMode:!1}),this.onAccountConnected(t)}}},{key:"handleUpgradeCancel",value:function(){this.setState({isShownUpgrade:!1})}},{key:"onAccountConnected",value:function(e){this.props.handleAccountConnected(e),this.setState({currentAccount:e})}},{key:"chooseDes",value:function(e){this.getPermissionByName(e)?this.setState({isInAuthMode:!0,createAccount:e}):this.setState({isShownUpgrade:!0})}},{key:"getPermissionByName",value:function(e){return"googleDrive"===e?this.props.permissions["allow".concat((0,f.fm)(e))]:this.props.permissions["allow".concat((0,f.fm)(e))]||"free"!==this.props.currentPlan.PlanName}},{key:"getFreeTrialTip",value:function(){var e=this.props.permissions;if(e.trailConnectedAccountExpireTimeSecond>0){if(e.trailConnectedAccountExpireTimeSecond>Date.now()/1e3){var t=1e3*e.trailConnectedAccountExpireTimeSecond-Date.now(),n=ue().duration(t,"milliseconds").asDays();if(n<1)var r="less than a day";else r=Math.ceil(n)+" days";return(0,y.jsxs)(y.Fragment,{children:["Free trial for pro services ends in ",r,".",(0,y.jsxs)("a",{target:"_blank",href:"https://www.awesomescreenshot.com/pricing",children:[" ","Upgrade now"]})]})}return(0,y.jsxs)(y.Fragment,{children:["The 7-days free trial was expired.",(0,y.jsxs)("a",{target:"_blank",href:"https://www.awesomescreenshot.com/pricing",children:[" ","Upgrade now"]})]})}return-1===e.trailConnectedAccountExpireTimeSecond?"":0===e.trailConnectedAccountExpireTimeSecond?"7-days free trial for pro services":void 0}},{key:"handleConnect",value:function(){(0,m.N6)(this.state.createAccount).then((function(e){var t="width=800,height=700,top="+(window.screen.availHeight-30-700)/2+",left="+(window.screen.availWidth-10-800)/2;window.open(e.URI,"",t)}))}},{key:"handlePrivacyChange",value:function(e){this.setState({createPrivacy:e.target.value})}},{key:"handleResourceChange",value:function(e){this.setState({createResource:e})}},{key:"updateCurrentResources",value:function(e){ge={},e.forEach((function(e){ge[e.id]=e})),this.setState({currentResources:e,isLoadList:!1})}},{key:"handleAccountChange",value:function(e){this.setState({currentAccount:"add"===e?null:this.props.accountHash[e]})}},{key:"getIsShowPro",value:function(){return"free"===this.props.currentPlan.PlanName||"basic"===this.props.currentPlan.PlanName}},{key:"back",value:function(){this.setState({isInAuthMode:!1})}},{key:"render",value:function(){var e=this,t=this.props.accounts,n=this.state,r=n.currentResources,i=(n.isLoadList,n.createResource,n.createPrivacy,n.createAccount),s=(n.isCreating,n.currentAccount),c=n.isShownUpgrade;return r.filter((function(e){return e.added})),r.filter((function(e){return!e.added})),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"add-des-panel",children:this.state.isInAuthMode?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"top",children:(0,y.jsxs)("div",{className:"back-btn",onClick:this.back,children:[(0,y.jsx)(l.Z,{}),"Choose another integration"]})}),(0,y.jsx)("div",{className:"connect-panel",children:(0,y.jsxs)("div",{className:"box",children:[(0,y.jsxs)("div",{className:"main-box",children:[(0,y.jsx)("div",{className:"pic",children:(0,y.jsx)("div",{className:"logo ".concat(i)})}),(0,y.jsxs)("div",{className:"content",children:[(0,y.jsx)("div",{className:"logo ".concat(i)}),(0,y.jsxs)("div",{className:"title",children:["Integrate ",h.xR[i].displayName]}),(0,y.jsx)("div",{className:"sub-title",children:h.xR[i].panelSubTitle}),(0,y.jsx)("ul",{children:h.xR[i].featureLists.map((function(e,t){return(0,y.jsx)("li",{children:e},t)}))})]})]}),(0,y.jsxs)(a.Z,{type:"primary",size:"large",onClick:this.handleConnect,children:["Connect with ",h.xR[i].displayName]})]})})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"title",children:s?"Create a new destination":"Connect a new account"}),(t&&t.length)>0&&(0,y.jsxs)("div",{className:"account-select",children:[(0,y.jsx)("div",{className:"label",children:"Connected account"}),(0,y.jsxs)(o.Z,{size:"large",value:s?s.id:"add",onChange:this.handleAccountChange,children:[t.map((function(e){var t=d()("account-logo",e.service);return(0,y.jsxs)(be,{value:e.id,children:[(0,y.jsx)("div",{className:t}),h.xR[e.service].displayName," (",e.userInfo.name,")"]},e.id)})),(0,y.jsxs)(be,{value:"add",children:[(0,y.jsx)("div",{className:"account-logo add"}),"Connect to a new account"]})]})]}),function(){if(s)return(0,y.jsx)("div",{className:"des-select",children:(0,y.jsx)("div",{className:"account-des-select",children:"slack"===s.service?(0,y.jsx)(S,{currentAccount:s,handleDesCreated:e.props.handleDesCreated}):"trello"===s.service?(0,y.jsx)(T,{currentAccount:s,handleDesCreated:e.props.handleDesCreated}):"asana"===s.service?(0,y.jsx)(U,{currentAccount:s,handleDesCreated:e.props.handleDesCreated}):"googleDrive"===s.service?(0,y.jsx)(z,{currentAccount:s,handleDesCreated:e.props.handleDesCreated}):"github"===s.service?(0,y.jsx)(X,{currentAccount:s,handleDesCreated:e.props.handleDesCreated}):"jira"===s.service?(0,y.jsx)(se,{currentAccount:s,handleDesCreated:e.props.handleDesCreated}):void 0})});var t="saveElsewhere"===e.props.servicesType?h.Br:h.SX;return(0,y.jsxs)("div",{className:"service-container",children:["saveElsewhere"!==e.props.servicesType&&(0,y.jsx)("div",{className:"trial-tip",children:e.getFreeTrialTip()}),(0,y.jsx)("div",{className:"label",children:"Services"}),(0,y.jsx)("div",{className:"account-container",children:t.map((function(t){var n=d()("account-item",t.name,{pro:e.getIsShowPro()});return(0,y.jsx)("div",{className:n,"data-des":t.name,onClick:e.chooseDes.bind(null,t.name),children:(0,y.jsx)("b",{})},t.name)}))})]})}()]})}),(0,y.jsx)(ce.Z,{visible:c,onCancel:this.handleUpgradeCancel,type:"destination"})]})}}])&&fe(t.prototype,n),r&&fe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(i.Component);n(84663);var xe=n(27049),we=(n(96309),n(54458)),Ie=(n(94507),n(48086)),Se=(n(35668),n(38648)),Ne=n(7085),Oe=(n(38920),n(32787));const Ee=function(e){return(0,y.jsx)("div",{className:"slack-form",children:(0,y.jsxs)(p.Z,{onFinish:function(t){e.handleSend(t)},children:[(0,y.jsx)("div",{className:"label",children:"Message"}),(0,y.jsx)(p.Z.Item,{name:"description",children:(0,y.jsx)(Oe.Z.TextArea,{size:"large",autoSize:{minRows:4},onChange:e.handleSlackMsgChange})}),(0,y.jsx)(p.Z.Item,{children:(0,y.jsx)(a.Z,{className:"send-btn",size:"large",type:"primary",block:!0,htmlType:"submit",children:"Send message"})})]})})};n(60046);var De=n(68351),Ae=(n(23990),n(3748)),Ce=n(58491),Te=n(57254);function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ke=o.Z.Option;const Le=function(e){var t=Pe((0,i.useState)(!1),2),n=t[0],r=t[1],s=Pe((0,i.useState)([]),2),c=s[0],l=s[1],u=Pe((0,i.useState)([]),2),d=u[0],f=u[1],h=Pe((0,i.useState)([]),2),v=h[0],g=h[1],b=e.resourceID,j=e.currentDes;return(0,i.useEffect)((function(){(0,m.VY)({accountID:j.accountID,what:"list",boardID:b}).then((function(e){l(e.items)})),(0,m.VY)({accountID:j.accountID,what:"member",boardID:b}).then((function(e){f(e.items)})),(0,m.VY)({accountID:j.accountID,what:"label",boardID:b}).then((function(e){g(e.items)}))}),[b]),(0,y.jsx)("div",{className:"trello-form",children:(0,y.jsxs)(p.Z,{onFinish:function(t){var n={};t.description&&(n.description=void 0===t.description?"":t.description),n.listID=t.list,t.title&&(n.title=t.title),t.members&&(n.membersID=t.members.join(",")),t.labels&&(n.labelsID=t.labels.join(",")),t.dueDate&&!t.dueTime?n.date=t.dueDate.format("YYYY-MM-DD"):t.dueDate&&t.dueTime&&(n.datetime=ue().utc(t.dueDate.format("YYYY-MM-DD")+"T"+t.dueTime.format().replace(/(.*)T/,""))),e.handleSend(n)},children:[(0,y.jsx)("div",{className:"label",children:"List"}),(0,y.jsx)(p.Z.Item,{name:"list",rules:[{required:!0,message:"Please choose a list"}],initialValue:c.length?c[0].id:void 0,children:(0,y.jsx)(o.Z,{size:"large",placeholder:"Please choose a list",showSearch:!0,filterOption:function(e,t){return t.name.toLowerCase().indexOf(e.toLowerCase())>=0},children:c.map((function(e){return(0,y.jsx)(ke,{value:e.id,name:e.name,children:e.name},e.id)}))})}),(0,y.jsx)("div",{className:"label",children:"Card title"}),(0,y.jsx)(p.Z.Item,{name:"title",initialValue:e.tabTitle,children:(0,y.jsx)(Oe.Z,{size:"large",autoComplete:"off"})}),n&&(0,y.jsxs)("div",{className:"ad-fields",children:[(0,y.jsx)("div",{className:"label",children:"Description"}),(0,y.jsx)(p.Z.Item,{name:"description",children:(0,y.jsx)(Oe.Z.TextArea,{size:"large",autoSize:{minRows:3}})}),(0,y.jsx)("div",{className:"label",children:"Members"}),(0,y.jsx)(p.Z.Item,{name:"members",children:(0,y.jsx)(o.Z,{size:"large",mode:"multiple",style:{width:"100%"},placeholder:"Select members",showSearch:!0,filterOption:function(e,t){return t.name.toLowerCase().indexOf(e.toLowerCase())>=0},children:d.map((function(e){return(0,y.jsx)(ke,{value:e.id,name:e.name,children:e.name},e.id)}))})}),(0,y.jsx)("div",{className:"label",children:"Labels"}),(0,y.jsx)(p.Z.Item,{name:"labels",children:(0,y.jsx)(o.Z,{size:"large",mode:"multiple",style:{width:"100%"},placeholder:"Select a label",className:"label-select trello-member-select",showSearch:!0,filterOption:function(e,t){return t.name.toLowerCase().indexOf(e.toLowerCase())>=0},dropdownClassName:"trello-label-dropdown",children:v.map((function(e){return(0,y.jsx)(ke,{value:e.id,name:e.name,children:(0,y.jsx)("div",{className:"trello-label-item "+e.info.color,children:e.name})},e.id)}))})}),(0,y.jsxs)("div",{className:"half-form",children:[(0,y.jsxs)("div",{className:"half",children:[(0,y.jsx)("div",{className:"label",children:"Due Date"}),(0,y.jsx)(p.Z.Item,{name:"dueDate",children:(0,y.jsx)(Ae.Z,{size:"large"})})]}),(0,y.jsxs)("div",{className:"half",children:[(0,y.jsx)("div",{className:"label",children:"Due Time"}),(0,y.jsx)(p.Z.Item,{name:"dueTime",children:(0,y.jsx)(De.Z,{size:"large",use12Hours:!0,format:"h:mm A",className:"due-time-picker"})})]})]})]}),(0,y.jsx)("div",{className:"toggle-field",children:(0,y.jsx)("a",{className:"toggle-fields-btn",onClick:function(){r(!n)},children:n?(0,y.jsxs)(y.Fragment,{children:["Collapse all fields ",(0,y.jsx)(Ce.Z,{})]}):(0,y.jsxs)(y.Fragment,{children:["Show all fields ",(0,y.jsx)(Te.Z,{})]})})}),(0,y.jsx)("div",{children:(0,y.jsx)(a.Z,{className:"send-btn",size:"large",type:"primary",block:!0,htmlType:"submit",children:"Create card"})})]})})};function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ze=o.Z.Option;const Ue=function(e){var t=Re((0,i.useState)(!1),2),n=t[0],r=t[1],s=Re((0,i.useState)([]),2),c=s[0],l=s[1],u=Re((0,i.useState)([]),2),d=u[0],f=u[1],h=Re((0,i.useState)([]),2),v=h[0],g=h[1],b=e.currentDes,j=b.info.workspaceID,x=b.resourceID;return(0,i.useEffect)((function(){(0,m.VY)({accountID:b.accountID,what:"section",projectID:x}).then((function(e){l(e.items)})),(0,m.VY)({accountID:b.accountID,what:"member",projectID:x}).then((function(e){f(e.items)})),(0,m.VY)({accountID:b.accountID,what:"tag",workspaceID:j}).then((function(e){g(e.items)}))}),[x]),(0,y.jsx)("div",{className:"trello-form",children:(0,y.jsxs)(p.Z,{onFinish:function(t){var n={};t.description&&(n.description=t.description),t.section&&"-1"!==t.section&&(n.sectionID=t.section),t.title&&(n.title=t.title),t.tags&&(n.tagsID=t.tags.join(",")),t.assignee&&(n.assigneeID=t.assignee),t.dueDate&&!t.dueTime?n.date=t.dueDate.format("YYYY-MM-DD"):t.dueDate&&t.dueTime&&(n.datetime=ue().utc(t.dueDate.format("YYYY-MM-DD")+"T"+t.dueTime.format().replace(/(.*)T/,""))),e.handleSend(n)},children:[(0,y.jsx)("div",{className:"label",children:"list"===b.info.layout?"Section":"Column"}),(0,y.jsx)(p.Z.Item,{name:"section",initialValue:"list"!==b.info.layout?c.length?c[0].id:null:"-1",children:(0,y.jsxs)(o.Z,{size:"large",children:["list"===b.info.layout&&(0,y.jsx)(Ze,{value:"-1",children:"No section"}),c.map((function(e){return(0,y.jsx)(Ze,{value:e.id,children:e.name},e.id)}))]})}),(0,y.jsx)("div",{className:"label",children:"Task name"}),(0,y.jsx)(p.Z.Item,{name:"title",initialValue:e.tabTitle,children:(0,y.jsx)(Oe.Z,{size:"large",autoComplete:"false"})}),n&&(0,y.jsxs)("div",{className:"ad-fields",children:[(0,y.jsx)("div",{className:"label",children:"Description"}),(0,y.jsx)(p.Z.Item,{name:"description",children:(0,y.jsx)(Oe.Z.TextArea,{size:"large",autoSize:{minRows:3}})}),(0,y.jsx)("div",{className:"label",children:"Assignee"}),(0,y.jsx)(p.Z.Item,{name:"assignee",children:(0,y.jsx)(o.Z,{size:"large",style:{width:"100%"},placeholder:"Please select assignee",children:d.map((function(e){return(0,y.jsx)(Ze,{value:e.id,children:e.name},e.id)}))})}),(0,y.jsx)("div",{className:"label",children:"Tags"}),(0,y.jsx)(p.Z.Item,{name:"tags",children:(0,y.jsx)(o.Z,{size:"large",mode:"multiple",style:{width:"100%"},placeholder:"Please select",children:v.map((function(e){return(0,y.jsx)(Ze,{value:e.id,children:e.name},e.id)}))})}),(0,y.jsxs)("div",{className:"half-form",children:[(0,y.jsxs)("div",{className:"half",children:[(0,y.jsx)("div",{className:"label",children:"Due Date"}),(0,y.jsx)(p.Z.Item,{name:"dueDate",children:(0,y.jsx)(Ae.Z,{size:"large"})})]}),(0,y.jsxs)("div",{className:"half",children:[(0,y.jsx)("div",{className:"label",children:"Due Time"}),(0,y.jsx)(p.Z.Item,{name:"dueTime",children:(0,y.jsx)(De.Z,{size:"large",use12Hours:!0,format:"h:mm A",className:"due-time-picker"})})]})]})]}),(0,y.jsx)("div",{className:"toggle-field",children:(0,y.jsx)("a",{className:"toggle-fields-btn",onClick:function(){r(!n)},children:n?(0,y.jsxs)(y.Fragment,{children:["Collapse all fields ",(0,y.jsx)(Ce.Z,{})]}):(0,y.jsxs)(y.Fragment,{children:["Show all fields ",(0,y.jsx)(Te.Z,{})]})})}),(0,y.jsx)("div",{children:(0,y.jsx)(a.Z,{className:"send-btn",size:"large",type:"primary",block:!0,htmlType:"submit",children:"Create task"})})]})})};const He=function(e){var t=e.tabTitle;return(0,y.jsx)("div",{className:"slack-form",children:(0,y.jsxs)(p.Z,{onFinish:function(t){e.handleSend(values)},children:[(0,y.jsx)("div",{className:"label",children:"Name"}),(0,y.jsx)(p.Z.Item,{name:"title",initialValue:t,children:(0,y.jsx)(Oe.Z,{onChange:e.handleSlackMsgChange})}),(0,y.jsx)("div",{children:(0,y.jsx)(a.Z,{className:"send-btn",size:"large",type:"primary",block:!0,htmlType:"submit",children:"Upload image"})})]})})};function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Be=o.Z.Option;const We=function(e){var t,n=Ge((0,i.useState)(!1),2),r=n[0],s=n[1],c=Ge((0,i.useState)([]),2),l=c[0],u=c[1],d=Ge((0,i.useState)([]),2),f=d[0],h=d[1],v=e.resourceID,g=e.currentDes;return(0,i.useEffect)((function(){(0,m.VY)({accountID:g.accountID,what:"assignee",repo:g.resourceName,owner:g.info.owner}).then((function(e){u(e.items)})),(0,m.VY)({accountID:g.accountID,what:"label",repo:g.resourceName,owner:g.info.owner}).then((function(e){h(e.items)}))}),[v]),(0,y.jsx)("div",{className:"github-form",children:(0,y.jsxs)(p.Z,{onFinish:function(t){var n={};t.description&&(n.description=void 0===t.description?"":t.description),n.listID=t.list,t.title&&(n.title=t.title),t.assignees&&(n.assignees=t.assignees.join(",")),t.labels&&(n.labels=t.labels.join(",")),e.handleSend(n)},children:[(0,y.jsx)("div",{className:"label",children:"Issue title"}),(0,y.jsx)(p.Z.Item,{name:"title",initialValue:e.tabTitle,children:(0,y.jsx)(Oe.Z,{size:"large",autoComplete:"off"})}),r&&(0,y.jsxs)("div",{className:"ad-fields",children:[(0,y.jsx)("div",{className:"label",children:"Description"}),(0,y.jsx)(p.Z.Item,{name:"description",children:(0,y.jsx)(Oe.Z.TextArea,{size:"large",autoSize:{minRows:3}})}),(0,y.jsx)("div",{className:"label",children:"Assignee"}),(0,y.jsx)(p.Z.Item,{name:"assignees",children:(0,y.jsx)(o.Z,{size:"large",mode:"multiple",style:{width:"100%"},placeholder:"Assign a member",children:l.map((function(e){return(0,y.jsx)(Be,{value:e.name,children:e.name},e.id)}))})}),(0,y.jsx)("div",{className:"label",children:"Labels"}),(0,y.jsx)(p.Z.Item,{name:"labels",children:(0,y.jsx)(o.Z,(t={size:"large",mode:"multiple",style:{width:"100%"},placeholder:"Select a label",className:"label-select"},Fe(t,"className","trello-member-select"),Fe(t,"dropdownClassName","trello-label-dropdown"),Fe(t,"children",f.map((function(e){var t={backgroundColor:"#"+e.info.color};return"ffffff"===e.info.color&&(t.color="black",t.border="1px solid #eee"),(0,y.jsx)(Be,{value:e.name,children:(0,y.jsx)("div",{style:t,className:"trello-label-item",children:e.name})},e.id)}))),t))})]}),(0,y.jsx)("div",{className:"toggle-field",children:(0,y.jsx)("a",{className:"toggle-fields-btn",onClick:function(){s(!r)},children:r?(0,y.jsxs)(y.Fragment,{children:["Collapse all fields ",(0,y.jsx)(Ce.Z,{})]}):(0,y.jsxs)(y.Fragment,{children:["Show all fields ",(0,y.jsx)(Te.Z,{})]})})}),(0,y.jsx)("div",{children:(0,y.jsx)(a.Z,{className:"send-btn",size:"large",type:"primary",block:!0,htmlType:"submit",children:"Create issue"})})]})})};n(79299);var ze=n(11382),Ke=(n(4895),n(9676)),$e=(n(69807),n(85986)),qe=o.Z.Option;function Ye(e){var t=e.field,n=t.allowedValues,r=t.defaultValue,i=-1!==t.operations.indexOf("add")?"multiple":void 0,a=function(e){var t=null;return n.forEach((function(n){n.id===e&&(t=n)})),t};return(0,y.jsx)(o.Z,{showSearch:!0,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},size:"large",defaultValue:r?r.id:void 0,mode:i,onChange:function(n){var r=n;"customfield_10021"===t.key&&(r=n.map((function(e){return a(e)}))),"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"===t.schema.custom&&(r=n.map((function(e){return a(e)}))),"com.atlassian.jira.plugin.system.customfieldtypes:select"===t.schema.custom&&(r={id:n}),e.handleChange(t.key,r)},children:n.map((function(e){return(0,y.jsx)(qe,{value:e.id,children:e.name||e.value},e.id)}))})}function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xe=o.Z.Option;function et(e){var t=Je((0,i.useState)([]),2),n=t[0],r=t[1],a=e.field,s=e.currentDes;(0,i.useEffect)((function(){(0,m.VY)({accountID:s.accountID,what:"autoComplete",fieldName:a.key,cloudID:s.info.cloudID,projectID:s.info.projectID}).then((function(e){r(e.items?e.items:[])}))}),[]);var c=-1!==a.operations.indexOf("add")?"multiple":void 0;return(0,y.jsx)(o.Z,{showSearch:!0,size:"large",mode:c,onChange:function(t){e.handleChange(a.key,t)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:n.map((function(e){return function(e){return"assignee"===a.key?(0,y.jsx)(Xe,{value:e.info.user.accountId,children:e.info.user.displayName},e.info.user.accountId):"reporter"===a.key?(0,y.jsx)(Xe,{value:e.id,children:e.info.field.displayName},e.id):"labels"===a.key?(0,y.jsx)(Xe,{value:e.info.field.value,children:e.info.field.displayName},e.info.field.value):(0,y.jsx)(Xe,{})}(e)}))})}n(94969);var tt=n(45777),nt=n(23279),rt=n.n(nt),it=n(49101),at=n(93695);function ot(e){return function(e){if(Array.isArray(e))return lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ct(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||ct(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ut=o.Z.Option;function dt(e){var t=st((0,i.useState)([{id:Date.now(),linkType:"",issues:[]}]),2),n=t[0],r=t[1],a=st((0,i.useState)([]),2),s=a[0],c=a[1],l=st((0,i.useState)([]),2),u=l[0],d=l[1],f=(e.field,e.currentDes);(0,i.useEffect)((function(){(0,m.VY)({accountID:f.accountID,what:"issueLinkType",cloudID:f.info.cloudID,projectID:f.info.projectID}).then((function(e){var t=[];e.items.forEach((function(e){"Relates"===e.name?t.push({value:e.name+"+in",displayName:e.info.inward}):(t.push({value:e.name+"+in",displayName:e.info.inward}),t.push({value:e.name+"+out",displayName:e.info.outward}))})),c(t)}))}),[]),(0,i.useEffect)((function(){e.handleChange("issuelinks",n)}),[n]);var h=function(e,t){(0,m.VY)({accountID:f.accountID,what:"issue",cloudID:f.info.cloudID,query:t}).then((function(e){e.items[0].info.issues.length>0&&d(e.items[0].info.issues)}))};return(0,y.jsxs)("div",{className:"issue-link",children:[(0,y.jsxs)("div",{className:"label",children:["Linked issues",(0,y.jsx)("div",{className:"add-btn",onClick:function(){r([].concat(ot(n),[{id:Date.now(),linkType:"",issues:[]}]))},children:(0,y.jsx)(tt.Z,{title:"Add",children:(0,y.jsx)(it.Z,{})})})]}),(0,y.jsx)("div",{className:"issue-link-container",children:n.map((function(e,t){return(0,y.jsxs)("div",{className:"issue-link-item",children:[(0,y.jsx)(o.Z,{size:"large",className:"issue-link-type-select",placeholder:"Link type",onChange:function(t){!function(e,t){var i=n.filter((function(t){return t.id===e}));i[0].linkType=t;var a=n.map((function(t){return t.id===e?i[0]:t}));r(a)}(e.id,t)},children:s.map((function(e){return(0,y.jsx)(ut,{value:e.value,children:e.displayName},e.value)}))}),(0,y.jsx)(o.Z,{size:"large",className:"issue-link-select",placeholder:"Select issues",mode:"multiple",onSearch:rt()((function(t){return h(e.id,t)}),800),onDropdownVisibleChange:function(t){t&&h(e.id,"")},onChange:function(t){return function(e,t){var i=n.filter((function(t){return t.id===e}));i[0].issues=t;var a=n.map((function(t){return t.id===e?i[0]:t}));r(a)}(e.id,t)},children:u.map((function(e){return(0,y.jsx)(ut,{value:e.key,children:e.key},e.key)}))}),(0,y.jsx)("div",{className:"issue-link-remove",onClick:function(){var t;t=e.id,r(n.filter((function(e){return e.id!==t})))},children:(0,y.jsx)(tt.Z,{title:"Remove",children:(0,y.jsx)(at.Z,{})})})]},e.id)}))})]})}function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ht=o.Z.Option;function pt(e){var t=ft((0,i.useState)([]),2),n=t[0],r=t[1],a=e.field,s=e.currentDes;(0,i.useEffect)((function(){}),[]);var c=function(e){var t;(0,m.VY)({accountID:s.accountID,what:(t=a.key,"customfield_10014"===t?"epic":"customfield_10021"==t?"sprint":void 0),cloudName:s.info.cloudName,query:e,cloudID:s.info.cloudID,projectID:s.info.projectID}).then((function(e){r(e.items?e.items:[])}))},l=-1!==a.operations.indexOf("add")?"multiple":void 0;return(0,y.jsx)(o.Z,{size:"large",showSearch:!0,mode:l,filterOption:!1,onChange:function(t){e.handleChange(a.key,t)},onSearch:rt()(c,800),onDropdownVisibleChange:function(e){e&&c("")},children:n.map((function(e){return function(e){return"customfield_10021"===a.key?(0,y.jsxs)(ht,{value:e.id,children:[e.name,"(",e.info.data.stateKey,")"]},e.id):"customfield_10014"===a.key?(0,y.jsxs)(ht,{value:e.id,children:[e.name,"-(",e.id,")"]},e.id):(0,y.jsx)(ht,{})}(e)}))})}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const gt=function(e){var t=vt((0,i.useState)(!1),2),n=t[0],r=t[1],o=e.currentDes;return(0,y.jsxs)("div",{className:"jira-api-token-panel",children:[(0,y.jsxs)("div",{className:"info",children:["Go to your Atlassian"," ",(0,y.jsx)("a",{href:"https://id.atlassian.com/manage/shared-api-tokens",target:"_blank",children:"API tokens page"})," ","and create a new API token. Copy the token and paste it into the box below."]}),(0,y.jsxs)(p.Z,{onSubmit:function(t){r(!0),(0,m.AY)(o.account.id,t.token).then((function(){r(!1),e.handleApiTokenSubmitted()})).catch((function(){r(!1)}))},children:[(0,y.jsx)("div",{className:"label",children:"API TOKEN"}),(0,y.jsx)(p.Z.Item,{name:"token",rules:[{required:!0}],children:(0,y.jsx)(Oe.Z,{})}),(0,y.jsx)(p.Z.Item,{children:(0,y.jsx)(a.Z,{type:"primary",block:!0,loading:n,htmlType:"submit",children:"Submit"})})]})]})};function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e){return(0,y.jsx)(r.Z,jt(jt({},e),{},{footer:null,maskClosable:!1,wrapClassName:"jira-api-token",destroyOnClose:!0,centered:!0,title:"Submit Jira API token",children:(0,y.jsx)(gt,jt({},e))}))}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){Nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dt=o.Z.Option,At={};const Ct=function(e){var t=Ot((0,i.useState)(!1),2),n=t[0],r=t[1],s=Ot((0,i.useState)({}),2),c=s[0],l=s[1],u=Ot((0,i.useState)([]),2),d=u[0],f=u[1],h=Ot((0,i.useState)(null),2),v=h[0],g=h[1],b=Ot((0,i.useState)(!1),2),j=b[0],x=b[1],w=e.currentDes;(0,i.useEffect)((function(){d.length&&f([]),(0,m.VY)({accountID:w.accountID,what:"createMeta",cloudID:w.info.cloudID,projectID:w.info.projectID}).then((function(e){g(e.items[0]),f(e.items),e.items.forEach((function(e){At[e.id]=e}))}))}),[e.currentDes]),(0,i.useEffect)((function(){}));var I,S=function(e,t){l(St(St({},c),{},Nt({},e,t)))},N=function(e){var t={fields:{}},n={};for(var r in n.project={id:w.info.projectID},e)"issuetype"===r||"priority"===r||"assignee"===r?n[r]={id:e[r]}:"summary"===r||"description"===r||"environment"===r||"customfield_10014"===r||"customfield_10016"===r||"labels"===r||"customfield_10037"===r||"customfield_10038"===r||"customfield_10039"===r||"customfield_10029"===r||"customfield_10034"===r||"customfield_10035"===r||"customfield_10036"===r||"customfield_10031"===r||"customfield_10032"===r||"customfield_10033"===r||"customfield_10021"===r||v.info.fields[r]&&"com.atlassian.jira.plugin.system.customfieldtypes:select"===v.info.fields[r].schema.custom||v.info.fields[r]&&"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"===v.info.fields[r].schema.custom||v.info.fields[r]&&"com.atlassian.jira.plugin.system.customfieldtypes:float"===v.info.fields[r].schema.custom||v.info.fields[r]&&"com.atlassian.jira.plugin.system.customfieldtypes:textarea"===v.info.fields[r].schema.custom||v.info.fields[r]&&"com.atlassian.jira.plugin.system.customfieldtypes:textfield"===v.info.fields[r].schema.custom?v.info.fields[r]&&"com.atlassian.jira.plugin.system.customfieldtypes:textarea"===v.info.fields[r].schema.custom?e[r]&&(n[r]={version:1,type:"doc",content:[{type:"paragraph",content:[{type:"text",text:e[r]}]}]}):e[r]&&(n[r]=e[r]):"components"===r?n[r]=e[r].map((function(e){return{id:e}})):"customfield_10026"===r?e[r]&&(n[r]=[{id:v.info.fields.customfield_10026.allowedValues[0].id}]):"fixVersions"===r?n[r]=e[r].map((function(e){return{id:e}})):"reporter"===r?e[r]&&(n[r]={id:e[r]}):"parent"===r?e[r]&&(n[r]={key:e[r]}):("duedate"===r||"customfield_10015"===r||"customfield_10030"===r||v.info.fields[r]&&"com.atlassian.jira.plugin.system.customfieldtypes:datetime"===v.info.fields[r].schema.custom||v.info.fields[r]&&"com.atlassian.jira.plugin.system.customfieldtypes:datepicker"===v.info.fields[r].schema.custom)&&e[r]&&(n[r]=e[r].format());return(e["timetracking-o"]||e["timetracking-r"])&&(n.timetracking={}),e["timetracking-o"]&&(n.timetracking.originalEstimate=e["timetracking-o"]),e["timetracking-r"]&&(n.timetracking.remainingEstimate=e["timetracking-r"]),t.fields=n,e.issuelinks&&e.issuelinks.length&&(t.issueLinks=[],e.issuelinks.forEach((function(e){if(e.linkType&&e.issues.length){var n=e.linkType.split("+"),r=n[0],i=n[1];e.issues.forEach((function(e){var n=Nt({type:r},"".concat(i,"wardIssue"),e);t.issueLinks.push(n)}))}}))),t},O=function(e){return"timetracking"===e.key?"(eg. 3w 4d 12h)":""},E=function(){x(!0)},D=function(e){return void 0!==e.allowedValues?(0,y.jsx)(Ye,{handleChange:S,field:e}):void 0!==e.autoCompleteUrl?(0,y.jsx)(et,{handleChange:S,currentDes:w,field:e}):"description"===e.key||"environment"===e.key||"com.atlassian.jira.plugin.system.customfieldtypes:textarea"===e.schema.custom?(0,y.jsx)(p.Z.Item,{name:e.key,children:(0,y.jsx)(Oe.Z.TextArea,{size:"large",autoSize:{minRows:3}})}):"customfield_10014"===e.key?(0,y.jsx)(pt,{handleChange:S,currentDes:w,field:e}):"customfield_10021"===e.key?v.info.apiToken?(0,y.jsx)(pt,{handleChange:S,currentDes:w,field:e}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("i",{className:"jira-sprint-tip",children:["To use Sprint, you need to provide an API token."," ",(0,y.jsx)("a",{onClick:E,children:"Submit API token"})]})}):(0,y.jsx)(p.Z.Item,{name:e.key,children:(0,y.jsx)(Oe.Z,{size:"large",placeholder:O(e)})})};return(0,y.jsxs)("div",{className:"jira-form",children:[0===d.length?(0,y.jsx)("div",{className:"loading",children:(0,y.jsx)(ze.Z,{indicator:(0,y.jsx)(Ne.Z,{spin:!0})})}):(0,y.jsxs)(p.Z,{onFinish:function(t){var n=St(St({},t),c),r=N(n),i=v.info.fields;i.environment&&!r.fields.environment&&(r.fields.environment=""),i.description&&!r.fields.description&&(r.fields.description=""),e.handleSend(r)},children:[(0,y.jsx)("div",{className:"label",children:"Issue Type"}),(0,y.jsx)(p.Z.Item,{name:"issuetype",initialValue:d[0].id,children:(0,y.jsx)(o.Z,{size:"large",onChange:function(e,t){g(At[e])},children:d.map((function(e){if("Subtask"!==e.name)return(0,y.jsx)(Dt,{value:e.id,children:e.name},e.id)}))})}),(0,y.jsx)("div",{className:"label",children:"Summary"}),(0,y.jsx)(p.Z.Item,{name:"summary",rules:[{required:!0,message:"You must specify a summary of the issue."}],children:(0,y.jsx)(Oe.Z,{size:"large"})}),n&&(I=v.info.fields,(0,y.jsx)(y.Fragment,{children:Object.keys(I).map((function(e){return"issuetype"===e||"project"===e||"summary"===e||"attachment"===e?void 0:"timetracking"===e?(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"label",children:"Original Estimate"}),(0,y.jsx)(p.Z.Item,{name:"timetracking-o",children:(0,y.jsx)(Oe.Z,{size:"large",placeholder:"(eg. 3w 4d 12h)"})})]},"oe"),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"label",children:"Remaining Estimate"}),(0,y.jsx)(p.Z.Item,{name:"timetracking-r",children:(0,y.jsx)(Oe.Z,{size:"large",placeholder:"(eg. 3w 4d 12h)"})})]},"re")]},I[e].key):"issuelinks"===e?(0,y.jsx)("div",{children:(0,y.jsx)(dt,{handleChange:S,currentDes:w,field:I})},I[e].key):"duedate"===e||"customfield_10030"===e||"customfield_10015"===e||"com.atlassian.jira.plugin.system.customfieldtypes:datetime"===I[e].schema.custom||"com.atlassian.jira.plugin.system.customfieldtypes:datepicker"===I[e].schema.custom?(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"label",children:I[e].name}),(0,y.jsx)(p.Z.Item,{name:e,children:(0,y.jsx)(Ae.Z,{size:"large",style:{width:"100%"}})})]},I[e].key):"customfield_10022"===e||"customfield_10017"===e||"parent"===e?"":"customfield_10016"===e||"com.atlassian.jira.plugin.system.customfieldtypes:float"===I[e].schema.custom?(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"label",children:I[e].name}),(0,y.jsx)(p.Z.Item,{name:e,children:(0,y.jsx)($e.Z,{size:"large",style:{width:"100%"}})})]},I[e].key):"customfield_10026"===e?(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"label",children:I[e].name}),(0,y.jsx)(p.Z.Item,{name:e,children:(0,y.jsx)(Ke.Z,{children:I[e].allowedValues[0].value})})]},I[e].key):(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"label",children:I[e].name}),D(I[e])]},I[e].key)}))})),(0,y.jsx)("div",{className:"toggle-field",children:(0,y.jsx)("a",{className:"toggle-fields-btn",onClick:function(){r(!n)},children:n?(0,y.jsxs)(y.Fragment,{children:["Collapse all fields ",(0,y.jsx)(Ce.Z,{})]}):(0,y.jsxs)(y.Fragment,{children:["Show all fields ",(0,y.jsx)(Te.Z,{})]})})}),(0,y.jsx)("div",{children:(0,y.jsx)(a.Z,{className:"send-btn",size:"large",type:"primary",block:!0,htmlType:"submit",children:"Create issue"})})]}),(0,y.jsx)(wt,{visible:j,onCancel:function(){x(!1)},currentDes:w,handleApiTokenSubmitted:function(){x(!1),d.length&&f([]),(0,m.VY)({accountID:w.accountID,what:"createMeta",cloudID:w.info.cloudID,projectID:w.info.projectID}).then((function(e){g(e.items[0]),f(e.items),e.items.forEach((function(e){At[e.id]=e}))}))}})]})};function Tt(e){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _t(e,t){return _t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_t(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mt(e);if(t){var i=Mt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(e,t){if(t&&("object"===Tt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rt(e)}function Rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}var Zt=o.Z.Option;const Ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_t(e,t)}(a,e);var t,n,r,i=kt(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={currentDesId:t.props.currentDes.id,slackMsg:"",isUploading:!1,percentage:0},t.handleDesChange=t.handleDesChange.bind(Rt(t)),t.handleSend=t.handleSend.bind(Rt(t)),t.handleSlackMsgChange=t.handleSlackMsgChange.bind(Rt(t)),t.onUploadProgress=t.onUploadProgress.bind(Rt(t)),t}return t=a,(n=[{key:"handleDesChange",value:function(e){"add"!==e?this.setState({currentDesId:e}):this.props.goToAddDes()}},{key:"onUploadProgress",value:function(e){this.setState({percentage:e})}},{key:"handleSend",value:function(e){var t=this,n=this.props.destinations,r=this.state.currentDesId,i={};n.forEach((function(e){i[e.id]=e}));var a=i[r];e.service=a.service,e.destinationID=r+"";var o=e.description;if(this.props.tabUrl&&(e.sourceLink=this.props.tabUrl),"trello"===e.service?e.extraString=(0,f.BS)(this.props.imageInfo):"asana"===e.service?e.extraString=(0,f.Ko)(this.props.imageInfo):"github"===e.service?e.extraString=(0,f.xG)(this.props.imageInfo):"jira"===e.service&&(void 0!==e.fields.environment?(e.fields.environment=(0,f.Lp)(e.fields.environment,this.props.imageInfo,this.props.itemUrl,this.props.type),void 0!==e.fields.description&&(e.fields.description={version:1,type:"doc",content:[{type:"paragraph",content:[{type:"text",text:e.fields.description}]}]})):void 0!==e.fields.description&&(e.fields.description=(0,f.Lp)(e.fields.description,this.props.imageInfo,this.props.itemUrl,this.props.type))),this.props.itemId)"video"===this.props.type?e.videoID=this.props.itemId:e.imageID=this.props.itemId,this.setState({isUploading:!0}),(0,m.$Y)(e).then((function(n){Se.Z.success({message:h.xR[e.service].successMsg,description:(0,y.jsxs)("a",{href:n.itemUrl,target:"_blank",children:["Click to see it in your ",h.xR[e.service].displayName]})}),t.props.handleSendSuccess()}),(function(e){throw new Error(h.xR[a.service].actionTypeStr+" failed! ("+e+")")})).catch((function(e){e&&Ie.ZP.error(e.toString()+" Please try again!"),t.setState({isUploading:!1,percentage:0})}));else{if(this.props.imageBlob)var s=this.props.contentType;else{var c=this.props.imageUrl.split(",")[1];s=this.props.imageUrl.split(",")[0].split(":")[1].split(";")[0]}this.setState({isUploading:!0}),(0,m.Bi)({Title:e.title||"",Description:o,DestID:this.state.currentDesId+"",ContentType:s}).then((function(n){var r=t.props.imageBlob?t.props.imageBlob:(0,f.Mi)(c,s),i=new File([r],"test.png"),o=n.Image.S3Key;return e.destinationImageID=n.Image.ImageID+"",e.imageURL=m.vS+"/destination/image/show?ImageKey="+o,e.imageName=t.props.tabTitle+"."+s.replace("image/",""),(0,m.p7)({AWSAccessKeyId:"AKIAJSCJQ2NM3XLFPVKA",acl:"private",key:n.Image.S3Key,"Content-Type":s,policy:n.Policy,signature:n.Signature,file:i},t.onUploadProgress).then((function(n){return(0,m.eL)(o).then((function(n){return(0,m.BN)(e).then((function(n){Se.Z.success({message:h.xR[e.service].successMsg,description:(0,y.jsxs)("a",{href:n.itemUrl,target:"_blank",children:["Click to see it in your"," ",h.xR[e.service].displayName]})}),t.props.handleSendSuccess()}),(function(e){throw new Error(h.xR[a.service].actionTypeStr+" failed! ("+e+")")}))}))}),(function(e){throw new Error("Upload image failed!")}))}),(function(e){throw new Error("Create image error!("+e+")")})).catch((function(e){e&&Ie.ZP.error(e.toString()+" Please try again!"),t.setState({isUploading:!1,percentage:0})}))}}},{key:"handleSlackMsgChange",value:function(e){this.setState({slackMsg:e.currentTarget.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.destinations,r=t.itemUrl,i=this.state,a=i.currentDesId,s=i.isUploading,c=i.percentage,l={};n.forEach((function(e){l[e.id]=e}));var u=l[a],f=d()("upload-progress",{active:s}),m=d()("destination-area",{active:!s});return(0,y.jsxs)("div",{className:"des-panel",children:[(0,y.jsxs)("div",{className:f,children:[r?(0,y.jsx)(Ne.Z,{className:"loading"}):(0,y.jsx)(we.Z,{type:"circle",status:"active",percent:c}),(0,y.jsx)("div",{className:"upload-tip",children:c<100&&!r?"Uploading image...":h.xR[u.service].actionTypeStr+"..."})]}),(0,y.jsxs)("div",{className:m,children:[(0,y.jsx)("div",{className:"destination-select",children:(0,y.jsxs)(o.Z,{size:"large",value:a,onChange:this.handleDesChange,children:[n.map((function(e){var t=d()("des-logo",e.service);return(0,y.jsxs)(Zt,{value:e.id,children:[(0,y.jsx)("div",{className:t}),h.BT[e.resourceType]+e.resourceName]},e.id)})),(0,y.jsxs)(Zt,{value:"add",children:[(0,y.jsx)("div",{className:"des-logo add"}),"Create a new destination"]},"add")]})}),(0,y.jsx)(xe.Z,{plain:!0,children:h.xR[u.service].panelTitle}),(0,y.jsx)("div",{className:"des-form",children:"slack"===u.service?(0,y.jsx)(Ee,{currentDes:u,tabTitle:e.props.tabTitle,handleSend:e.handleSend,handleSlackMsgChange:e.handleSlackMsgChange}):"trello"===u.service?(0,y.jsx)(Le,{currentDes:u,tabTitle:e.props.tabTitle,resourceID:u.resourceID,handleSend:e.handleSend}):"asana"===u.service?(0,y.jsx)(Ue,{tabTitle:e.props.tabTitle,currentDes:u,handleSend:e.handleSend}):"googleDrive"===u.service?(0,y.jsx)(He,{tabTitle:e.props.tabTitle,currentDes:u,handleSend:e.handleSend}):"github"===u.service?(0,y.jsx)(We,{tabTitle:e.props.tabTitle,currentDes:u,handleSend:e.handleSend}):"jira"===u.service?(0,y.jsx)(Ct,{tabTitle:e.props.tabTitle,currentDes:u,handleSend:e.handleSend}):void 0})]})]})}}])&&Pt(t.prototype,n),r&&Pt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.Component);var Ht=n(52186);function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e,t){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zt(e,t)}function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qt(e);if(t){var i=qt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $t(this,n)}}function $t(e,t){if(t&&("object"===Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qt(e){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qt(e)}const Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zt(e,t)}(o,e);var t,n,i,a=Kt(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.call(this,e)}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.props.currentPanel;return(0,y.jsx)(r.Z,Vt(Vt({},this.props),{},{footer:null,maskClosable:!1,wrapClassName:"des-modal",destroyOnClose:!0,centered:!0,closeIcon:(0,y.jsx)(Ht.T,{style:{fontSize:"12px"}}),children:"add"===t?(0,y.jsx)(je,Vt(Vt({},e.props),{},{currentAccount:e.props.defaultCurrentAccount})):"des"===t?(0,y.jsx)(Ut,{currentDes:e.props.currentDes,destinations:e.props.destinations,goToAddDes:e.props.goToAddDes,tabTitle:e.props.tabTitle,tabUrl:e.props.tabUrl,imageUrl:e.props.imageUrl,imageBlob:e.props.imageBlob,imageInfo:e.props.imageInfo||null,handleSendSuccess:e.props.onCancel,contentType:e.props.contentType,type:e.props.type,itemId:e.props.itemId,itemUrl:e.props.itemUrl}):void 0}))}}])&&Wt(t.prototype,n),i&&Wt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.Component)},87105:(e,t,n)=>{n.d(t,{Z:()=>P});n(37135);var r=n(48889),i=n(52186),a=(n(4895),n(9676)),o=(n(45623),n(71257)),s=(n(96309),n(54458)),c=(n(38691),n(71577)),l=(n(38920),n(32787)),u=(n(35668),n(38648)),d=(n(94507),n(48086)),f=(n(6212),n(34041)),m=n(23279),h=n.n(m),p=n(67294),v=n(85483),y=n(6700),g=n(94184),b=n.n(g),j=n(71925),x=n(61135),w=n(84737),I=n(80442),S=n(85893);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=f.Z.Option;const D=function(e){var t=e.accounts,n=e.currentDriveAccount,r=n?n.service:"googleDrive",i=j.xR[r],m=N((0,p.useState)((function(){return t?t[0]:null})),2),g=(m[0],m[1]),O=N((0,p.useState)(""),2),D=O[0],A=O[1],C=N((0,p.useState)(!0),2),T=C[0],P=C[1],_=N((0,p.useState)([]),2),k=_[0],L=_[1],R=N((0,p.useState)(!1),2),M=R[0],Z=R[1],U=N((0,p.useState)((function(){return null===e.currentDriveAccount})),2),H=(U[0],U[1],N((0,p.useState)(!1),2)),F=H[0],G=H[1],V=N((0,p.useState)(0),2),B=V[0],W=V[1],z=N((0,p.useState)(!1),2),K=z[0],$=z[1],q=N((0,p.useState)(""),2),Y=q[0],J=q[1],Q=N((0,p.useState)(""),2),X=Q[0],ee=Q[1],te=N((0,p.useState)(!1),2),ne=te[0],re=te[1],ie=N((0,p.useState)(!1),2),ae=ie[0],oe=ie[1];(0,p.useEffect)((function(){g(t[0])}),[t.length]),(0,p.useEffect)((function(){return e.currentDriveAccount&&ce(),window.addEventListener("message",se),function(){window.removeEventListener("message",se)}}),[e.currentDriveAccount]);var se=function(t){if("accountConnected"===t.data.name){var n=JSON.parse(t.data.data);e.handleDriveAccountConnected(n)}},ce=function(t){L([]),Z(!0),(0,x.VY)({accountID:e.currentDriveAccount.id,what:"folder",query:t}).then((function(e){var t=e.items?e.items:[];L(t),Z(!1)}))},le=function(e,t,r,i){if("googleDrive"===n.service){var a=new File([e],r.name,{type:t}),o=t.split("/")[1];"jpeg"==o&&(o="jpg");var s={name:r.name+"."+o};"-1"!==r.folder&&(s.parents=[r.folder]),ue(i,a,s,r.googleDriveSharable)}else if("dropbox"===n.service){var c=("-1"!==r.folder?k.filter((function(e){return e.id===r.folder}))[0].info.path||k.filter((function(e){return e.id===r.folder}))[0].info.path_lower:"")+"/"+r.name+"."+t.split("/")[1];de(i,c,e)}else if("box"===n.service){var l=r.name+"."+t.split("/")[1],u=r.folder;a=new File([e],r.name,{type:t});fe(i,a,l,u)}},ue=function(t,n,i,a){(0,x.Hl)(t,n,i,W,e.type).then((function(n){if(a){var i=n.data.id;oe(!0),(0,x.M0)(t,i).then((function(e){ee("https://drive.google.com/file/d/".concat(i,"/view?usp=sharing")),re(!0),oe(!1)})).catch((function(){ee("https://drive.google.com/file/d/".concat(i,"/view?usp=sharing")),re(!0),oe(!1)}))}else u.Z.success({message:j.xR[r].successMsg,description:(0,S.jsxs)("a",{target:"_blank",href:"https://drive.google.com/file/d/".concat(n.data.id,"/view"),children:["Click to see it in your ",j.xR[r].displayName]})}),e.onCancel();(0,x.Pz)("googleDrive")})).catch((function(e){d.ZP.error(e.response.data.msg),G(!1),W(0)}))},de=function(t,n,i){(0,x.W0)(t,n,i,W,e.type).then((function(t){u.Z.success({message:j.xR[r].successMsg,description:(0,S.jsxs)("a",{target:"_blank",href:"https://www.dropbox.com/home".concat(t.data.path_display),children:["Click to see it in your ",j.xR[r].displayName]})}),e.onCancel(),(0,x.Pz)("dropbox")})).catch((function(e){e.response&&"insufficient_space"===e.response.data.error.reason[".tag"]?d.ZP.error("Your dropbox account is full. The screenshot can’t be sent to it"):d.ZP.error(e.response.data.error_summary),G(!1),W(0)}))},fe=function(t,n,i,a){(0,x.Cj)(t,n,i,a,W,e.type).then((function(t){u.Z.success({message:j.xR[r].successMsg,description:(0,S.jsxs)("a",{target:"_blank",href:"https://app.box.com/file/".concat(t.data.entries[0].id),children:["Click to see it in your ",j.xR[r].displayName]})}),e.onCancel(),(0,x.Pz)("box")})).catch((function(e){if(e.response.data&&e.response.data.message)var t=e.response.data.message;else t=e.response.statusText;d.ZP.error(t),G(!1),W(0)}))},me=function(t){return e.permissions["allow".concat((0,w.fm)(t))]},he=b()("upload-progress",{active:F}),pe=b()("drive-wrapper",{active:!F}),ve="video"===e.type?"video":"image";return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"drive-panel",children:[(0,S.jsx)("div",{className:"title",children:null===n?T?"Choose your cloud storage":"":(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"icon ".concat(n.service)}),"Save to ",i.displayName]})}),(0,S.jsx)("div",{className:he,children:ne?(0,S.jsxs)("div",{className:"sharable-link-area",children:[(0,S.jsx)("div",{className:"label",children:"Shareable Link"}),(0,S.jsx)(l.Z,{value:X,style:{width:"320px"},size:"large"}),(0,S.jsx)(c.Z,{type:"primary",size:"large",onClick:function(){(0,w.zp)(X),d.ZP.success("Copied!")},children:"Copy"})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(s.Z,{type:"circle",status:"active",percent:B}),(0,S.jsx)("div",{className:"upload-tip",children:B<100?"Uploading ".concat(ve,"..."):ae?"Creating shareable link...":j.xR[r].actionTypeStr+"..."})]})}),t.length&&n?(0,S.jsx)("div",{className:pe,children:(0,S.jsx)("div",{className:"container",children:(0,S.jsxs)(o.Z,{onFinish:function(t){G(!0),(0,x.LP)(n.id).then((function(n){var r=n.token;if(e.itemUrl)(0,w.wJ)(e.itemUrl,(function(e){W(Math.round(e/2))})).then((function(e){le(e.data,"image/png",t,r)}));else{if(e.imageBlob)var i=e.contentType,a=e.imageBlob;else{var o=e.imageUrl.split(",")[1];a=(0,w.Mi)(o),i=e.imageUrl.split(",")[0].split(":")[1].split(";")[0]}le(a,i,t,r)}})).catch((function(e){d.ZP.error("Something went wrong!"),G(!1)}))},children:[(0,S.jsx)("div",{className:"account-select"}),(0,S.jsx)("div",{className:"label",children:"Name"}),(0,S.jsx)(o.Z.Item,{name:"name",rules:[{required:!0,message:"Please input a name"}],initialValue:e.tabTitle,children:(0,S.jsx)(l.Z,{})}),(0,S.jsx)("div",{className:"label",children:i.targetName}),(0,S.jsx)(o.Z.Item,{name:"folder",rules:[{required:!0,message:"choose a folder"}],initialValue:"-1",children:(0,S.jsxs)(f.Z,{showSearch:!0,placeholder:i.placeHolder,loading:M,onSearch:h()((function(e){ce(e)}),800),filterOption:!1,children:[(0,S.jsxs)(E,{value:"-1",children:[(0,S.jsx)(v.Z,{className:"folder-option ".concat(n.service)}),"/"]}),k.map((function(e){return(0,S.jsxs)(E,{value:e.id,children:[(0,S.jsx)(v.Z,{className:"folder-option ".concat(n.service)}),"dropbox"===n.service?e.info.path||e.info.path_lower:e.name]},e.id)}))]})}),(0,S.jsx)("div",{className:"tip",children:"googleDrive"===n.service?"Only root folder and Awesome Screenshot folder are available for the moment.":"Only 10 recent folders are listed. Type and search for other folders."}),"googleDrive"===n.service&&(0,S.jsx)(o.Z.Item,{name:"googleDriveSharable",valuePropName:"checked",initialValue:"true"===localStorage["is-google-drive-share"],children:(0,S.jsx)(a.Z,{children:"Get shareable link (Anyone with the link can view)"})}),(0,S.jsx)(o.Z.Item,{children:(0,S.jsx)(c.Z,{type:"primary",className:"upload-btn",size:"large",block:!0,htmlType:"submit",children:"Upload"})})]})})}):(0,S.jsx)(S.Fragment,{children:T?(0,S.jsx)("div",{className:"service-container",children:(0,S.jsx)("div",{className:"account-container",children:j.Br.map((function(e){var t=b()("account-item",e.name,{pro:!me(e.name)});return(0,S.jsx)("div",{className:t,"data-des":e.name,onClick:function(){return function(e){me(e)?(A(e),P(!1)):(J(e),$(!0))}(e.name)},children:(0,S.jsx)("b",{})},e.name)}))})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"top",children:(0,S.jsxs)("div",{className:"back-btn",onClick:function(){P(!0)},children:[(0,S.jsx)(y.Z,{}),"Choose another cloud storage"]})}),(0,S.jsx)("div",{className:"connect-panel",children:(0,S.jsxs)("div",{className:"box",children:[(0,S.jsxs)("div",{className:"main-box",children:[(0,S.jsx)("div",{className:"pic",children:(0,S.jsx)("div",{className:"logo ".concat(D)})}),(0,S.jsxs)("div",{className:"content",children:[(0,S.jsx)("div",{className:"logo ".concat(D)}),(0,S.jsxs)("div",{className:"title",children:["Integrate ",j.xR[D].displayName]}),(0,S.jsx)("div",{className:"sub-title",children:j.xR[D].panelSubTitle}),(0,S.jsx)("ul",{children:j.xR[D].featureLists.map((function(e,t){return(0,S.jsx)("li",{children:e},t)}))})]})]}),(0,S.jsxs)(c.Z,{type:"primary",size:"large",onClick:function(){(0,x.N6)(D).then((function(e){var t="width=800,height=700,top="+(window.screen.availHeight-30-700)/2+",left="+(window.screen.availWidth-10-800)/2;window.open(e.URI,"",t)}))},children:["Connect with ",j.xR[D].displayName]})]})})]})})]}),(0,S.jsx)(I.Z,{visible:K,onCancel:function(){return $(!1)},type:Y})]})};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){return(0,S.jsx)(r.Z,C(C({},e),{},{footer:null,maskClosable:!1,wrapClassName:"des-modal",destroyOnClose:!0,centered:!0,closeIcon:(0,S.jsx)(i.T,{style:{fontSize:"12px"}}),children:(0,S.jsx)(D,C({},e))}))}},52186:(e,t,n)=>{n.d(t,{C:()=>b,T:()=>g});var r=n(67294),i=n(16165),a=n(94184),o=n.n(a),s=(n(46901),n(85095)),c=n(68843),l=n(85893);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=o()("svg-icon",e.className);return(0,l.jsx)(i.Z,d(d({},e),{},{className:t}))}var h={CloseIcon:s.Z,CrownIcon:c.Z},p={},v=function(e){p[e]=(0,r.memo)((function(t){return(0,l.jsx)(m,d({component:h[e]},t))})),p[e].displayName=e};for(var y in h)v(y);var g=p.CloseIcon,b=p.CrownIcon},61135:(e,t,n)=>{n.d(t,{$Y:()=>h,AY:()=>S,BN:()=>m,Bi:()=>p,Cj:()=>w,HK:()=>f,Hl:()=>j,LP:()=>g,M0:()=>x,N6:()=>u,Pz:()=>I,VY:()=>d,W0:()=>b,eL:()=>y,p7:()=>v,vS:()=>s});n(94507);var r=n(48086),i=n(9669),a=n.n(i),o=n(84737),s="https://www.awesomescreenshot.com/api/v1",c=["/premium/stripe/create_plan","/premium/stripe/change_plan","/folder/create","/folder/add_items","/folder/change_name","/trash/throw_into","/image/change_title","/video/update_title","/trash/restore","/trash/delete","/image/upload","/workspace/channel/move_items","/workspace/channel/load_items","/workspace/channel/load_members","/video/websocket/token","/refer/check_accept"],l=a().create({baseURL:"/api/v1/"});function u(e){return l({method:"GET",url:"/account/auth",params:{service:e,from:"extension"}})}function d(e){return l({method:"GET",url:"/account/load/resource",params:e})}function f(e,t,n,r,i,a){return l({method:"POST",url:"/destination/add",data:{accountID:e,resourceID:n,privacy:i,resourceName:r,resourceType:t,info:a}})}function m(e){return l({method:"POST",url:"/account/share_screenshot",data:e})}function h(e){return l({method:"POST",url:"/account/share_item",data:e})}function p(e){return l({method:"POST",url:"/destination/image/create",data:e})}function v(e,t,n){var r=new FormData;for(var i in e)r.append(i,e[i]);var o=n||"https://awesomescreenshot.s3.amazonaws.com/";return a()({method:"POST",crossdomain:!0,url:o,data:r,onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);t(n)}})}function y(e){return l({method:"GET",url:"/destination/image/upload_done",params:{key:e}})}function g(e){return l({method:"GET",url:"/account/token",params:{accountID:e}})}function b(e,t,n,r,i){return a()({url:"https://content.dropboxapi.com/2/files/upload",method:"POST",headers:{Authorization:"Bearer "+e,"Dropbox-API-Arg":(0,o.Td)({path:t,mode:"add",autorename:!0,mute:!1,strict_conflict:!1}),"Content-Type":"application/octet-stream"},data:n,onUploadProgress:function(e){var t=0;t="video"===i?50+Math.round(Math.round(100*e.loaded/e.total)/2):Math.round(100*e.loaded/e.total),r(t)}})}function j(e,t,n,r,i){var o=new FormData;return o.append("metadata",new Blob([JSON.stringify(n)],{type:"application/json"})),o.append("file",t),a()({url:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",method:"POST",headers:{Authorization:"Bearer "+e},data:o,onUploadProgress:function(e){var t=0;t="video"===i?50+Math.round(Math.round(100*e.loaded/e.total)/2):Math.round(100*e.loaded/e.total),r(t)}})}function x(e,t){return a()({url:"https://www.googleapis.com/drive/v3/files/"+t+"/permissions",method:"POST",headers:{Authorization:"Bearer "+e},data:{role:"reader",type:"anyone"}})}function w(e,t,n,r,i,o){var s=new FormData,c={name:n};return c.parent="-1"!==r?{id:r}:{id:"0"},s.append("attributes",JSON.stringify(c)),s.append("file",t),a()({method:"POST",url:"https://upload.box.com/api/2.0/files/content",headers:{Authorization:"Bearer "+e,"Access-Control-Expose-Headers":"WWW-Authenticate"},data:s,onUploadProgress:function(e){var t=0;t="video"===o?50+Math.round(Math.round(100*e.loaded/e.total)/2):Math.round(100*e.loaded/e.total),i(t)}})}function I(e){return l({method:"GET",url:"/destination/image/upload_to_cloud_done",params:{Service:e}})}function S(e,t){return l({method:"POST",url:"/account/jira_basic_token",data:{accountID:e,token:t}})}l.interceptors.request.use((function(e){return e}),(function(){return r.ZP.error("Network error, Request timeout!"),Promise.reject()})),l.interceptors.response.use((function(e){if(e&&e.data&&1===e.data.code)return Promise.resolve(e.data.data);if(1e3==e.data.code&&"/pricing"!==window.location.pathname)window.location.href="/signin?redirect="+window.location.href;else{if(2001===e.data.code)return Promise.reject(e.data);if(1201===e.data.code)return Promise.reject(e.data);if(e.data.msg){if(-1!==c.indexOf(e.config.url))return Promise.reject(e.data.msg);if(r.ZP.error(e.data.msg),"/pricing"!==window.location.pathname)return Promise.reject(e.data.msg)}}}),(function(e){if(e.response){var t=e.response.status;r.ZP.error("Network error! Error Code "+t)}}))},71925:(e,t,n)=>{n.d(t,{BT:()=>i,Br:()=>s,SX:()=>a,wh:()=>r,xR:()=>o});var r=["callout","list"],i={channel:"#",repo:"",user:"@",board:"",project:"",folder:""},a=[{name:"slack",displayName:"Slack"},{name:"asana",displayName:"Asana"},{name:"trello",displayName:"Trello"},{name:"github",displayName:"Github"},{name:"jira",displayName:"Jira"}],o={slack:{displayName:"Slack",targetName:"Channel",placeHolder:"Choose a channel or user",panelTitle:"Send message",actionTypeStr:"Sending message",successMsg:"Slack message sent!",panelSubTitle:"Send screenshots to Slack",featureLists:["Send screenshots to Slack Channel","Send screenshots to Slack direct messages","Attach URL of the screenshot automatically"]},trello:{displayName:"Trello",targetName:"Board",placeHolder:"Choose a board",panelTitle:"Create card",actionTypeStr:"Creating card",successMsg:"Trello card created!",panelSubTitle:"Send screenshots as Trello cards",featureLists:["Create a trello card and attach the screenshot directly","Assign the card to members","Set due date and time","Include browser & OS info to help identify the issue"]},asana:{displayName:"Asana",targetName1:"Workspace",targetName2:"Project",placeHolder1:"Choose a workspace",placeHolder2:"Choose a project",panelTitle:"Create task",actionTypeStr:"Creating task",successMsg:"Asana task created!",panelSubTitle:"Send screenshots as Asana task",featureLists:["Send screenshots to Asana task","Create an Asana task and attach the screenshot directly","Assign the card to members","Choose Sections","Set due date and time","Include browser & OS info to help identify the issue"]},jira:{displayName:"Jira",targetName1:"Site",targetName2:"Project",placeHolder1:"Choose a site",placeHolder2:"Choose a project",panelTitle:"Create issue",actionTypeStr:"Creating issue",successMsg:"Jira issue created!",panelSubTitle:"Send screenshots as Jira issue",featureLists:["Create a Jira issue and attach the screenshot directly","Assign the card to members","Include browser & OS info to help identify the issue"]},googleDrive:{displayName:"Google Drive",targetName:"Folder",placeHolder:"Choose a folder",panelTitle:"Upload image",actionTypeStr:"Uploading image",successMsg:"Google Drive image uploaded!",panelSubTitle:"Save screenshots to Google Drive",featureLists:["Save screenshots to Google Drive folders directly"]},dropbox:{displayName:"Dropbox",targetName:"Folder",placeHolder:"Choose a folder",panelTitle:"Upload image",actionTypeStr:"Uploading image",successMsg:"Dropbox image uploaded!",panelSubTitle:"Save screenshots to Dropbox",featureLists:["Save screenshots to Dropbox folders directly"]},box:{displayName:"Box",targetName:"Folder",placeHolder:"Choose a folder",panelTitle:"Upload image",actionTypeStr:"Uploading image",successMsg:"Box image uploaded!",panelSubTitle:"Save screenshots to Box",featureLists:["Save screenshots to Box folders directly"]},github:{displayName:"Github",targetName:"Repository",placeHolder:"Choose a repository",panelTitle:"Create issue",actionTypeStr:"Creating issue",successMsg:"Github issue created!",panelSubTitle:"Send screenshots as Github issue",featureLists:["Create issue in Github repository","Send screenshots to Github message","Attach URL of the screenshot automatically"]}},s=[{name:"googleDrive",displayName:"Google Drive"},{name:"dropbox",displayName:"Dropbox"},{name:"box",displayName:"Box"}]},84737:(e,t,n)=>{n.d(t,{BS:()=>o,Di:()=>p,Ee:()=>x,Ko:()=>s,Lp:()=>l,Mi:()=>a,P_:()=>v,Td:()=>d,Up:()=>j,_x:()=>y,fm:()=>u,jg:()=>h,pd:()=>b,wJ:()=>m,xG:()=>c,zp:()=>f});var r=n(9669),i=n.n(r);function a(e,t,n){function r(e){return e.charCodeAt(0)}t=t||"",n=n||1024;for(var i=atob(e),a=[],o=0;o<i.length;o+=n){var s=i.slice(o,o+n),c=Array.prototype.map.call(s,r),l=new Uint8Array(c);a.push(l)}return new Blob(a,{type:t})}function o(e){if(!e)return"";var t="";for(var n in e)t+="**"+n+"**: "+e[n]+" \n";return t}function s(e){if(!e)return"";var t="";return t+="Captured in "+e.Browser+", "+e["Viewport Size"]+" viewport, "+e["Pixel Ratio"]+" pixel ratio, "+e["Zoom Level"]+" zoom, "+e.OS}function c(e){if(!e)return"";var t="<table>";for(var n in e)t+="<tr><td><strong>"+n+"</strong></td><td>"+e[n]+"</td></tr>";return t+="</table> \n"}function l(e,t,n,r){var i={version:1,type:"doc",content:[]};if(e&&e.length&&i.content.push({type:"paragraph",content:[{type:"text",text:e}]}),i.content.push({type:"rule"}),t)for(var a in t){var o={type:"paragraph",content:[{type:"text",text:a+":",marks:[{type:"strong"}]},{type:"text",text:" "+t[a]}]};i.content.push(o)}return n&&(i.content.push({type:"paragraph",content:[{type:"text",text:"video"===r?"Click the link below to watch the video:":"Click the link below to see the image:"}]}),i.content.push({type:"paragraph",content:[{type:"text",text:n,marks:[{type:"link",attrs:{href:n,title:n}}]}]})),i}function u(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function d(e){return JSON.stringify(e).replace(/[\u007f-\uffff]/g,(function(e){return"\\u"+("000"+e.charCodeAt(0).toString(16)).slice(-4)}))}function f(e){var t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.top="-999999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function m(e,t){return i()({method:"GET",url:e,responseType:"blob",onDownloadProgress:function(e){var n=Math.round(100*e.loaded/e.total);t&&t(n)}})}function h(e){var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),n=(t&&t[4]||"").trim(),r=t?(256|t[1]).toString(16).slice(1)+(256|t[2]).toString(16).slice(1)+(256|t[3]).toString(16).slice(1):e;return""!==n?n>1?1:n:1,"transparent"===e?"0000000":r}function p(e){if(e&&e.toLocaleLowerCase().startsWith("rgba")){var t=e.split("(")[1].split(")")[0].split(",");return"rgb("+t[0]+","+t[1]+","+t[2]+")"}return e}function v(e){return new Promise((function(t){var n=window.URL.createObjectURL(e),r=document.createElement("img"),i=document.createElement("canvas"),a=i.getContext("2d");r.onload=function(){i.width=r.width,i.height=r.height,a.drawImage(r,0,0),i.toBlob((function(e){t(e)}))},r.src=n}))}function y(e,t,n){navigator.clipboard.write([new ClipboardItem(Object.defineProperty({},e.type,{value:e,enumerable:!0}))]).then(t,n)}function g(e,t,n){return new Promise((function(r){if(e){var i,a=t.paddingSize?t.paddingSize:0,o="mac"===t.borderType?"mac":"win",s="web"==n?"/static/images/":"./images/",c=s+o+"-header-left.png",l=s+o+"-header-center.png",u=s+o+"-header-right.png",d=e.width;(function(e){function t(e){return new Promise((function(t,n){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){t({ele:r,height:r.height,width:r.width})},r.onerror=r.onabort=function(){n(e)},r.src=e}))}for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return Promise.all(n)})([c,l,u]).then((function(n){var s=e.getContext("2d"),c=a;if(i=d-t.left-t.right-2*a,n.forEach((function(e,n){var o;1===n?o=i:0===n?o=t.left:2===n&&(o=t.right),s.drawImage(e.ele,0,0,e.width,e.height,c,a,o,t.height),c+=o,2===n&&r()})),t.url)if(s.font=13*window.devicePixelRatio+"px Arial",s.fillStyle="#000000",s.measureText(t.url).width>i){var l=x(s,t.url,i);s.fillText(l,140*window.devicePixelRatio+a,("mac"===o?66:70)*window.devicePixelRatio+a)}else s.fillText(t.url,140*window.devicePixelRatio+a,("mac"===o?66:70)*window.devicePixelRatio+a);if(t.captureTime){s.font=12*window.devicePixelRatio+"px sans-serif",s.fillStyle="#000000";var u=s.measureText(t.captureTime).width,f=d-a-10*window.devicePixelRatio-u,m="mac"===o?34*window.devicePixelRatio+a:39*window.devicePixelRatio+a;s.fillText(t.captureTime,f,m)}}))}}))}function b(e,t,n,r){var i=document.createElement("canvas"),a=i.getContext("2d"),o=t.height,s=t.width,c=0,l=0,u=0,d=null,f=t.border.borderType;t.border.paddingSize>0&&(c=t.border.paddingSize,d=t.border.paddingColor,l+=c,u+=c,o+=2*c,s+=2*c),i.width=s,f&&(o+=t.border.height,i.height=o,"url_bottom"!==f&&(u+=t.border.height)),i.height=o,d&&(a.save(),a.fillStyle=d,a.fillRect(0,0,i.width,i.height),a.restore(),c>0&&(a.shadowOffsetX=4*window.devicePixelRatio,a.shadowOffsetY=4*window.devicePixelRatio,a.shadowBlur=4*window.devicePixelRatio,a.shadowColor="rgba(0,0,0,.15)"));var m=URL.createObjectURL(e);if("mac"===f||"windows"===f)g(i,t.border,n).then((function(){var e=document.createElement("img");e.onload=function(){a.drawImage(e,l,u);var t="png"===localStorage.format?"image/png":"image/jpeg";i.toBlob((function(e){r(e)}),t,1)},e.src=m}));else{!function(e,t,n){if(!(Object.keys(t).indexOf("url")<0)){var r=e.getContext("2d"),i="url_top"==t.borderType?0:n,a=t.paddingSize?t.paddingSize:0,o=e.width-20-2*a,s="Captured at: "+t.captureTime+(t.url&&t.url.length?"  URL: "+t.url:""),c="single",l=40;if(r.font="bold 24px Arial",r.measureText(s).width>o){c="multiple";var u=w(r,"URL:"+t.url,o);l=40*(u.length+1)}if(r.fillStyle="#000000",r.fillRect(a,i+a,e.width-2*a,l),r.restore(),r.fillStyle="#ffffff",r.textBaseline="top",r.strokeStyle="#ffffff",r.font="bold 24px Arial","single"===c)r.fillText(s,12+a,8+i+a);else{r.fillText("Captured at:"+t.captureTime,12+a,8+i+a);for(var d=0;d<u.length;d++)r.fillText(u[d],12+a,8+40*(d+1)+i+a)}}}(i,t.border,t.height);var h=document.createElement("img");h.onload=function(){a.drawImage(h,l,u);var e="png"===localStorage.format?"image/png":"image/jpeg";i.toBlob((function(e){r(e)}),e,1)},h.src=m}}function j(e,t,n,r,i){var a=e.getContext("2d"),o=n&&n.length?t+" "+n:t,s="single",c=40,l="bold 24px Arial";if(a.font=l,a.measureText(o).width>r){s="multiple";var u=w(a,n,r);c=40*(u.length+1)}if(i(c),e.width=r,e.height=c,a.fillStyle="#000000",a.fillRect(0,0,e.width,c),a.restore(),a.fillStyle="#ffffff",a.textBaseline="top",a.strokeStyle="#ffffff",a.font=l,"single"===s)a.fillText(o,10,8);else{a.fillText(t,10,8);for(var d=0;d<u.length;d++)a.fillText(u[d],10,8+40*(d+1))}}function x(e,t,n){for(var r=t.split(""),i=r[0],a=1;a<r.length;a++){var o=r[a];if(!(e.measureText(i+" "+o).width<n))break;i+=o}return i+"..."}function w(e,t,n){n-=10;for(var r=t.split(""),i=[],a=r[0],o=1;o<r.length;o++){var s=r[o];e.measureText(a+" "+s).width<n?a+=s:(i.push(a),a=s)}return i.push(a),i}},29778:(e,t,n)=>{n.d(t,{a:()=>i});var r=n(13192),i=n.n(r)()({USER_LOAD_INFO:null,USER_AVATAR_REFRESH:null,USER_LOAD_INFO_LOADING:null,USER_CLICK_FIVE_STAR:null,USER_PERMISSION_LOADING:null,USER_PERMISSION_RECEIVE:null,CONNECTED_ACCOUNT_LOAD_RECEIVED:null,CONNECTED_ACCOUNT_SUCCESS:null,CONNECTED_ACCOUNT_DELETED:null,DESTINATIONS_LOAD_RECEIVED:null,DESTINATIONS_LOAD_DOING:null,CONNECTED_ACCOUNT_LOAD_DOING:null,DESTINATION_CREATED:null,DESTINATION_DELETED:null,DESTINATION_PRIVACY_CHANGED:null,DESTINATION_LOAD_SCREENSHOTS_RECEIVED:null,DESTINATION_LOAD_VIDEOS_RECEIVED:null,TEAM_MEMBER_LOAD_RECEIVED:null,TEAM_MEMBER_LOAD_DOING:null,TEAM_MEMBER_REMOVED:null,TEAM_INFO_LOAD_RECEIVED:null,TEAM_INFO_LOAD_DOING:null,TEAM_JOIN_DONE:null,PLANS_LOAD_RECEICED:null,VIDEO_LOADING_ANNOTATIONS:null,VIDEO_LOADED_ANNOTATIONS:null,VIDEO_LOAD_INFO:null,VIDEO_INFO_LOADING:null,VIDEO_LOAD_ACTIVE_LIST:null,VIDEO_ACTIVE_LIST_LOADING:null,VIDEO_LOAD_INACTIVE_LIST:null,VIDEO_INACTIVE_LIST_LOADING:null,VIDEO_DELETED:null,VIDEO_CONVERT_TO_MP4:null,VIDEO_CONVERTING_TO_MP4_INFO:null,VIDEO_GENERATE_SHARE_LINK:null,VIDEO_GENERATE_SHARE_LINK_FAILED:null,VIDEO_GENERATE_SHARE_LINK_LOADING:null,VIDEO_REVOKE_SHARE_LINK:null,VIDEO_EDIT_TITLE_LOADING:null,VIDEO_EDIT_TITLE:null,VIDEO_OPEN_EDIT_TITLE:null,VIDEO_HIDE_EDIT_TITLE:null,VIDEO_SET_COMPLETE_DONE:null,FOLDER_LOAD:null,FOLDER_LOADING:null,TOP_FOLDER_LOAD:null,TOP_FOLDER_LOADING:null,FOLDER_LOAD_TOP_LIST:null,FOLDER_CREATE:null,FOLDER_MOVE:null,FOLDER_RENAME:null,FOLDER_EDIT_DESC:null,FOLDER_GET_SHARE_LINK:null,FOLDER_GETTING_SHARE_LINK:null,FOLDER_REVOKE_SHARE_LINK:null,FOLDER_DELETE:null,FOLDER_UPDATE:null,FOLDER_RECEIVED:null,FOLDER_CHANGE_SORT:null,STAR_FOLDER_ADD:null,STAR_FOLDER_REMOVE:null,STAR_FOLDER_DELETE:null,STAR_FOLDER_UPDATE:null,ITEM_LIST_LOAD:null,ITEM_LIST_LOAD_MORE:null,ITEM_LIST_INITIAL_LOAD:null,ITEM_LIST_LOADING:null,ITEM_SHOW_PAGE_COUNT_RESTORE:null,ITEM_SHOW_PAGE_COUNT_ADD:null,ITEM_VIEW_SHOW:null,ITEM_VIEW_HIDE:null,ITEM_MOVE:null,ITEM_DELETE:null,ITEM_CHANGE_SORT:null,ITEM_UPDATE_SCROLL:null,ITEM_SUB_LOADING:null,ITEM_ADD:null,ITEM_LIST_RESTORE:null,ITEM_LOADED_RESET:null,SHARED_ITEM_LIST_LOAD:null,SHARED_ITEM_LIST_LOAD_MORE:null,SHARED_ITEM_LIST_INITIAL_LOAD:null,SHARED_ITEM_LIST_LOADING:null,SHARED_FOLDER_LIST_LOAD:null,SHARED_FOLDER_LIST_LOADING:null,SHARED_ITEM_SHOW_PAGE_COUNT_RESTORE:null,SHARED_ITEM_SHOW_PAGE_COUNT_ADD:null,SHARED_ITEM_VIEW_SHOW:null,SHARED_ITEM_VIEW_HIDE:null,SHARED_ITEM_MOVE:null,SHARED_ITEM_DELETE:null,SHARED_ITEM_CHANGE_SORT:null,SHARED_ITEM_UPDATE_SCROLL:null,SHARED_ITEM_SUB_LOADING:null,SHARED_ITEM_ADD:null,SHARED_ITEM_LIST_RESTORE:null,SHARED_LIST_LOAD:null,SHARED_LIST_LOAD_MORE:null,SHARED_LIST_INITIAL_LOAD:null,SHARED_LIST_LOADING:null,SHARED_SHOW_PAGE_COUNT_RESTORE:null,SHARED_SHOW_PAGE_COUNT_ADD:null,SHARED_VIEW_SHOW:null,SHARED_VIEW_HIDE:null,SHARED_UPDATE_SCROLL:null,SHARED_SUB_LOADING:null,SHARED_LIST_RESTORE:null,SHARED_NOTI_LOAD:null,SHARED_NEW_COMMENTS_VIEWED:null,SHARED_LIST_DELETE:null,SHARED_LIST_ADD:null,SHARED_TITLE_EDIT:null,IMAGE_RECEIVED:null,IMAGE_MOVE:null,IMAGE_RENAME:null,IMAGE_DELETE:null,IMAGE_LIST_LOADING:null,IMAGE_LIST_LOAD:null,IMAGE_LIST_SUB_LOADING:null,IMAGE_LIST_LOAD_MORE:null,IMAGE_SCROLL_UPDATE:null,IMAGE_CHANGE_SORT:null,IMAGE_ADD:null,IMAGE_INFO_LOAD:null,IMAGE_INFO_LOADING:null,IMAGE_PAGE_UPDATE:null,IMAGE_GENERATE_SHARE_LINK:null,IMAGE_GENERATE_SHARE_LINK_FAILED:null,IMAGE_GENERATE_SHARE_LINK_LOADING:null,IMAGE_REVOKE_SHARE_LINK:null,IMAGE_LIST_RESTORE:null,IMAGE_MOVE_TO_CHANNEL:null,IMAGE_ANNOTATED:null,IMAGE_DUPLICATE:null,VIDEO_SCROLL_UPDATE:null,VIDEO_RECEIVED:null,VIDEO_MOVE:null,VIDEO_RENAME:null,VIDEO_DELETE:null,VIDEO_DELETE_MULTIPLE:null,VIDEO_LIST_SUB_LOADING:null,VIDEO_LIST_LOAD_MORE:null,VIDEO_CHANGE_SORT:null,VIDEO_PAGE_UPDATE:null,VIDEO_LIST_RESTORE:null,VIDEO_MOVE_TO_CHANNEL:null,SELECTED_ADD:null,SELECTED_REMOVE:null,SELECTED_CLEAR:null,SELECTED_TRASH_ADD:null,SELECTED_TRASH_REMOVE:null,SELECTED_TRASH_CLEAR:null,TRASH_LOAD:null,TRASH_LOADING:null,TRASH_RESTORE:null,TRASH_DELETE:null,TRASH_EMPTY:null,TRASH_PAGE_CHANGE:null,SEARCH_LOAD:null,SEARCH_LOADING:null,SEARCH_ITEM_LOAD:null,SEARCH_ITEM_LOADING:null,SEARCH_ITEM_DELETE:null,SEARCH_PAGE_CHANGE:null,SEARCH_SCROLL_UPDATE:null,SEARCH_QUERY_UPDATE:null,SEARCH_META_ADD:null,SEARCH_META_DELETE:null,SEARCH_META_RENAME:null,COMMENT_LOADED:null,COMMENT_LOADING:null,COMMENT_USER_LIST_LOADED:null,COMMENT_USER_LIST_LOADING:null,COMMENT_CREATED:null,COMMENT_CREATE_FAILED:null,COMMENT_CREATING:null,COMMENT_REMOVED:null,COMMENT_REMOVE_ANIMATION:null,COMMENT_REMOVE_MENTIONED:null,COMMENT_REMOVE_NEW:null,WORKSPACE_CREATE:null,WORKSPACE_CREATING:null,WORKSPACE_LOAD:null,WORKSPACE_LOADING:null,WORKSPACE_CHANNEL_LOAD:null,WORKSPACE_CHANNEL_LOADING:null,WORKSPACE_MEMBER_LOAD:null,WORKSPACE_MEMBER_LOADING:null,WORKSPACE_META_EDIT:null,WORKSPACE_ENTER:null,WORKSPACE_CHANGE_ROLE:null,WORKSPACE_LEAVE:null,WORKSPACE_MEMBER_REMOVE:null,WORKSPACE_INFO_LOAD:null,CHANNEL_CREATE:null,CHANNEL_CREATING:null,CHANNEL_LIST_LOAD:null,CHANNEL_LIST_LOAD_MORE:null,CHANNEL_LIST_LOAD_ERROR:null,CHANNEL_LIST_SUB_LOADING:null,CHANNEL_LIST_LOADING:null,CHANNEL_ITEM_ADD:null,CHANNEL_MEMBERS_LOAD:null,CHANNEL_MEMBERS_LOADING:null,CHANNEL_CHANGE_SORT:null,CHANNEL_UPDATE_SCROLL:null,CHANNEL_META_EDIT:null,CHANNEL_OWNER_TRANSFER:null,CHANNEL_MEMBER_REMOVE:null,CHANNEL_JOIN:null,CHANNEL_ADD_MEMBER_FROM_WORKSPACE:null,CHANNEL_ITEM_RENAME:null,CHANNEL_LEAVE:null,CHANNEL_ITEM_DELETE:null,CHANNEL_ITEM_RESTORE:null,CHANNEL_ITEM_MULTIPLE_DELETE:null,CHANNEL_VIDEO_SET_COMPLETE_DONE:null,NOTIFICATION_LOAD:null,NOTIFICATION_LOADING:null,NOTIFICATION_MARK_AS_READ:null,NOTIFICATION_ALL_MARK_AS_READ:null,SETTING_THEME_CHANGE:null,UI_SHOW_ITEM:null,UI_HIDE_ITEM:null,UI_RESET_BROWSING:null,UI_UPDATE_RECORD_PANEL:null,UI_IS_RECORDING:null,UI_NEXT_ITEM:null,UI_PREV_ITEM:null,DOWNLOADLIST_ADD:null,DOWNLOADLIST_REMOVE:null,DOWNLOADLIST_EMPTY:null,DOWNLOADLIST_CHANGE:null})},26:(e,t,n)=>{n.d(t,{A3:()=>X,BG:()=>E,CZ:()=>Q,FO:()=>J,Fb:()=>T,JJ:()=>G,Jp:()=>Z,Mk:()=>_,O0:()=>H,Of:()=>k,QP:()=>R,TL:()=>$,bC:()=>ne,jI:()=>z,ri:()=>B,s8:()=>O,sK:()=>D,v$:()=>I,zz:()=>q});var r=n(97168),i=n(31955),a=n(97474),o=n(16514),s=n(70001),c=n(56010),l=n(29778),u=n(20495),d=n(93878),f=n(60714),m=n(92217),h=n(65497),p=n(21807);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=(0,r.PH)(l.a.CHANNEL_LIST_LOAD),x=(0,r.PH)(l.a.CHANNEL_LIST_LOADING),w=(0,r.PH)(l.a.CHANNEL_LIST_LOAD_ERROR),I=function(e,t,n,r,i){return function(o,s){var c=s();c.channel.isLoading&&!i?Promise.resolve():(o(x()),a.v$z(c.channel.sort,e,t,n,r).then((function(r){o(j(g(g({},r),{},{page:e,workspaceID:t,channelID:n,currentDisplayPage:e})))})).catch((function(){o(w())})))}},S=(0,r.PH)(l.a.CHANNEL_LIST_SUB_LOADING),N=(0,r.PH)(l.a.CHANNEL_LIST_LOAD_MORE),O=function(){return function(e,t){var n=t().channel,r=n.isSubPageLoading,i=n.workspaceID,s=n.channelID,c=n.subPage,l=n.page,u=n.isEnd,d=n.total,f=n.isLoading,m=n.sort,h=n.lastTimestamp;r||c===o.J6||u||d<20||f?Promise.resolve():(e(S()),a.v$z(m,l*o.J6+c+1,i,s,h).then((function(t){e(N(t.items))})))}},E=(0,r.PH)(l.a.CHANNEL_ITEM_ADD),D=function(e,t,n,r,i){return function(o,l){var f=(0,s.DK)(),y=l(),b=[],j=[];n.forEach((function(e){"video"===e.itemType?b.push(e):j.push(e)}));var x=b.map((function(e){return e.id})).join(","),w=j.map((function(e){return e.id})).join(","),I=(0,c.D3)(0,x.length,w.length),S=n.map((function(e){return e.itemType+"-"+e.id})).join(",");a.sKT(e,t,S).then((function(r){if(b.length){var a=b.map((function(e){return g(g({},e),{},{canVisit:!0,channel:r.channel,workspace:r.workspace})}));b[0].inChannel||b.channel||o((0,u.Qh)({items:b})),o((0,p.lT)(a))}if(j.length){var c=j.map((function(e){return g(g({},e),{},{canVisit:!0,channel:r.channel,workspace:r.workspace})}));j[0].inChannel||j[0].channel||o((0,u.Qh)({items:j})),o((0,d.Vf)(c))}r.items.forEach((function(e){var t,n;e.info&&e.info.userName||(e.info=(t=e.itemType,n=e.itemID,y.channel.items[t+n]?y.channel.items[t+n].info:g(g({},"video"===t?y.video.videos[n].info:y.image.images[n].info),{},{userName:y.user.info.fullName,userAvatar:y.user.info.avatarURL})))})),o(E({workspaceID:e,channelID:t,items:r.items})),(n[0].inChannel||n[0].channel)&&o(ee(n)),y.multipleSelect.selectedItems.length&&o((0,m.jh)()),(0,s.wD)(f,{msg:I+" moved successfully."}),i&&i(),o((0,h.Xw)())})).catch((function(e){"object"===v(e)&&"Need upgrade."===e.msg?((0,s.vU)(f),r&&r(e.data.isOwner)):(0,s.wD)(f,{type:"error",msg:"Moving "+I.toLowerCase()+" failed. "+e})}))}},A=(0,r.PH)(l.a.CHANNEL_MEMBERS_LOAD),C=(0,r.PH)(l.a.CHANNEL_MEMBERS_LOADING),T=function(e,t){return function(n){n(C()),a.FbR(e,t).then((function(e){n(A(e.members))}))}},P=(0,r.PH)(l.a.CHANNEL_CHANGE_SORT),_=function(e){return function(t,n){var r=n();i.Z.set("channel_sort",e),t(P(e)),r.channel.sort!==e&&t(I(r.channel.page,r.channel.workspaceID,r.channel.channelID))}},k=(0,r.PH)(l.a.CHANNEL_UPDATE_SCROLL),L=(0,r.PH)(l.a.CHANNEL_META_EDIT),R=function(e,t,n,r,i){return function(o){a.QPX(e,t,n,r).then((function(){o(L({workspaceID:e,channelID:t,type:n,value:r})),i()}))}},M=(0,r.PH)(l.a.CHANNEL_OWNER_TRANSFER),Z=function(e,t,n){return function(r){a.ywm(e,t,n).then((function(){r(M(n))}))}},U=(0,r.PH)(l.a.CHANNEL_MEMBER_REMOVE),H=function(e,t,n){return function(r){a.Pwg(e,t,n).then((function(){r(U(n))}))}},F=(0,r.PH)(l.a.CHANNEL_JOIN),G=function(e,t){return function(n){var r=(0,s.DK)();a.JJ5(e,t).then((function(){n(F(t)),(0,s.wD)(r,{msg:"Channel joined."})}))}},V=(0,r.PH)(l.a.CHANNEL_ADD_MEMBER_FROM_WORKSPACE),B=function(e,t,n){return function(r){a.ri7(e,t,n).then((function(e){r(V(e))}))}},W=(0,r.PH)(l.a.CHANNEL_ITEM_RENAME),z=function(e,t){return function(n){var r=null;r="image"===e.itemType?a.I5G:a.Nbr;var i=(0,s.DK)();r(e.id,t).then((function(){n(W({id:e.id,itemType:e.itemType,name:t})),(0,s.wD)(i,{msg:"Rename successfully."})}))}},K=(0,r.PH)(l.a.CHANNEL_LEAVE),$=function(e,t,n){return function(r){var i=(0,s.DK)();a.j3I(e,t).then((function(){null==n||n(),r(K({workspaceID:e,channelID:t})),(0,s.wD)(i,{msg:"Leave channel successfully"})}))}},q=function(e,t,n){return function(r){a.zzM(e,t).then((function(){null==n||n(),r(K({workspaceID:e,channelID:t}))}))}},Y=(0,r.PH)(l.a.CHANNEL_ITEM_DELETE),J=function(e,t){return function(n){var r=e.workspaceID,i=e.channelID,o=e.id,c=e.itemType,l=e.itemID,u=(0,s.DK)();a.FOj(r,i,o).then((function(){n(Y(c+l)),(0,s.wD)(u,{msg:"Item move to trash successfully."}),null==t||t()}))}},Q=function(e,t){return function(n){var r=e.workspaceID,i=e.channelID,o=e.id,c=e.itemType,l=e.itemID,u=(0,s.DK)();a.CZT(r,i,o).then((function(){n(Y(c+l)),n((0,f.LD)()),(0,s.wD)(u,{msg:"Return successfully."}),null==t||t()}))}},X=(0,r.PH)(l.a.CHANNEL_ITEM_RESTORE),ee=(0,r.PH)(l.a.CHANNEL_ITEM_MULTIPLE_DELETE),te=(0,r.PH)(l.a.CHANNEL_VIDEO_SET_COMPLETE_DONE),ne=function(e){return function(t){a.sVk(e).then((function(n){t(te({id:e,info:n}))}))}}},8690:(e,t,n)=>{n.d(t,{KT:()=>l,L9:()=>b,Mj:()=>f,YF:()=>g,Yr:()=>v,xF:()=>j});var r=n(97168),i=n(97474),a=n(70001),o=n(29778),s=(0,r.PH)(o.a.COMMENT_LOADED),c=(0,r.PH)(o.a.COMMENT_LOADING),l=function(e,t,n){return function(r){r(c()),i.KTp(e,t,n).then((function(n){r(s({itemType:e,itemId:t,data:n}))}))}},u=(0,r.PH)(o.a.COMMENT_USER_LIST_LOADED),d=(0,r.PH)(o.a.COMMENT_USER_LIST_LOADING),f=function(e,t,n){return function(r){r(d()),i.MjW(e,t,n).then((function(e){r(u(e))}))}},m=(0,r.PH)(o.a.COMMENT_CREATED),h=(0,r.PH)(o.a.COMMENT_CREATING),p=(0,r.PH)(o.a.COMMENT_CREATE_FAILED),v=function(e,t,n,r,o,s){return function(c){c(h()),i.Yrx(e,t,n,r,o).then((function(n){c(m({itemType:e,itemId:t,data:n})),null==s||s()})).catch((function(e){c(p()),(0,a.sc)({type:"error",msg:"Create comment failed. "+e})}))}},y=(0,r.PH)(o.a.COMMENT_REMOVED),g=function(e,t,n){return function(r){i.YFy(n).then((function(){r(y({itemType:e,itemId:t,id:n}))})).catch((function(e){(0,a.sc)({type:"error",msg:"Delete comment failed. "+e})}))}},b=(0,r.PH)(o.a.COMMENT_REMOVE_ANIMATION),j=(0,r.PH)(o.a.COMMENT_REMOVE_MENTIONED)},5410:(e,t,n)=>{n.d(t,{J0:()=>f,Mg:()=>u,Q6:()=>c});var r=n(97168),i=n(97474),a=n(29778),o=(0,r.PH)(a.a.CONNECTED_ACCOUNT_LOAD_RECEIVED),s=(0,r.PH)(a.a.CONNECTED_ACCOUNT_LOAD_DOING),c=function(e){return function(t,n){var r=n();return(r.connectedAccount.isLoading||r.connectedAccount.accounts.length>0)&&!0!==e?Promise.resolve():(t(s({})),i.ttN().then((function(e){t(o({accounts:e.accounts}))})))}},l=(0,r.PH)(a.a.CONNECTED_ACCOUNT_SUCCESS),u=function(e){return function(t){t(l({account:e}))}},d=(0,r.PH)(a.a.CONNECTED_ACCOUNT_DELETED),f=function(e){return function(t){return i.npm(e).then((function(){t(d({accountID:e}))}))}}},50471:(e,t,n)=>{n.d(t,{$P:()=>b,c0:()=>y,c1:()=>m,jG:()=>l,kE:()=>p,vM:()=>d});var r=n(97168),i=n(97474),a=n(29778),o=n(5410),s=(0,r.PH)(a.a.DESTINATIONS_LOAD_RECEIVED),c=(0,r.PH)(a.a.DESTINATIONS_LOAD_DOING),l=function(){return function(e,t){var n=t().destination,r=n.isLoading,a=n.destinations;return r||a.length>0?Promise.resolve():(e(c({})),i.LDB().then((function(t){e(s({destinations:t.destinations}))})))}},u=(0,r.PH)(a.a.DESTINATION_CREATED),d=function(e){return function(t){t((0,o.Q6)(!0)),t(u({destination:e}))}},f=(0,r.PH)(a.a.DESTINATION_DELETED),m=function(e){return function(t){return i.fOZ(e).then((function(){t((0,o.Q6)(!0)),t(f({destinationID:e}))}))}},h=(0,r.PH)(a.a.DESTINATION_PRIVACY_CHANGED),p=function(e,t){return function(n){return i.vNM(e,t).then((function(e){n(h({destination:e.destination}))}))}},v=(0,r.PH)(a.a.DESTINATION_LOAD_SCREENSHOTS_RECEIVED),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n,r){return(r().destination.screenshotsMap[e]||{}).page===t?Promise.resolve():i.HCH(e,t).then((function(r){n(v({destinationID:e,currentPage:t,total:r.Total,limit:r.Limit,screenshots:r.Images}))}))}},g=(0,r.PH)(a.a.DESTINATION_LOAD_VIDEOS_RECEIVED),b=function(e,t){return function(n,r){var a=r().destination.videosMap[e]||{};return t=void 0===t?1:t,a.page===t?Promise.resolve():i.lYX(e,t).then((function(r){n(g({destinationID:e,currentPage:t,total:r.Total,limit:r.Limit,videos:r.Videos}))}))}}},14838:(e,t,n)=>{n.d(t,{H4:()=>m,dy:()=>v,tH:()=>h});n(37135);var r=n(48889),i=n(97168),a=n(97474),o=n(56010),s=n(29778);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(){l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new N(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=d(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function m(){}function h(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(O([])));g&&g!==t&&n.call(g,i)&&(v=g);var b=p.prototype=m.prototype=Object.create(v);function j(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,s){var l=d(e[i],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==c(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,s)}))}s(l.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},j(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},j(b),s(b,o,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function u(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}var f=(0,i.PH)(s.a.DOWNLOADLIST_ADD),m=(0,i.PH)(s.a.DOWNLOADLIST_REMOVE),h=(0,i.PH)(s.a.DOWNLOADLIST_EMPTY),p=(0,i.PH)(s.a.DOWNLOADLIST_CHANGE);function v(e){return function(t,n){var r=(0,i.x0)();g(r,e.id,t,n),t(f({id:r,fileId:e.id,status:"Pending",fileName:e.name}))}}var y=5e3;function g(e,t,n,i){(0,a.$lD)(t).then(function(){var a=d(l().mark((function a(s){var c,u,d,f,h,v;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(u=(c=s||{}).status,d=c.link,f=i().downloadList,h=f.find((function(t){return t.id===e})),"Success"!==u){a.next=12;break}if(!h){a.next=10;break}return b(d),n(p({id:e,status:"Succeed"})),a.next=9,(0,o._v)(2e3);case 9:n(m(e));case 10:a.next=29;break;case 12:if("Waiting"!==u){a.next=16;break}h&&(v=setTimeout((function(){return g(e,t,n,i)}),2e3),n(p({id:e,retryTimer:v,status:"Pending"}))),a.next=29;break;case 16:if("TooLarge"!==u){a.next=24;break}return n(p({id:e,status:"Failed"})),r.Z.error({title:"Downsize folder",content:"Unable to download a folder larger than 10GB. Please downsize your folder and retry.",okText:"Ok"}),a.next=21,(0,o._v)(y);case 21:n(m(e)),a.next=29;break;case 24:return n(p({id:e,status:"Failed"})),r.Z.error({title:"Download failed",content:"An error occurred while downloading. Please try again later (downsizing your folder or checking your internet connection might improve the success rate).",okText:"Ok"}),a.next=28,(0,o._v)(y);case 28:n(m(e));case 29:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch(d(l().mark((function t(){var a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i().downloadList,!a.find((function(t){return t.id===e}))){t.next=8;break}return n(p({id:e,status:"Failed"})),r.Z.error({title:"Download failed",content:"An error occurred while downloading. Please try again later (downsizing your folder or checking your internet connection might improve the success rate).",okText:"Ok",okButtonProps:{type:"ghost"}}),t.next=7,(0,o._v)(y);case 7:n(m(e));case 8:case"end":return t.stop()}}),t)}))))}function b(e){return j.apply(this,arguments)}function j(){return(j=d(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){n.onload=null,n.onerror=null,n.remove()},(n=document.createElement("iframe")).style.display="none",n.src=t.toString(),n.onerror=r,n.onload=r,document.body.append(n),e.next=9,(0,o._v)(3e4);case 9:n.remove();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},20495:(e,t,n)=>{n.d(t,{B0:()=>P,Ec:()=>k,J1:()=>A,L6:()=>S,PW:()=>w,Qh:()=>D,Zj:()=>K,bo:()=>F,cr:()=>U,es:()=>b,iC:()=>G,kO:()=>z,oW:()=>W,vM:()=>R});var r=n(97168),i=n(97474),a=n(70001),o=n(56010),s=n(29778),c=n(93878),l=n(92217),u=n(24362),d=n(52020),f=n(65497),m=n(21807);function h(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,r.PH)(s.a.FOLDER_UPDATE);var b=(0,r.PH)(s.a.FOLDER_RECEIVED),j=(0,r.PH)(s.a.FOLDER_LOAD),x=(0,r.PH)(s.a.FOLDER_LOADING),w=function(e){return function(t,n){var r=n();r.folder.isLoading||!e&&r.folder.loaded?Promise.resolve():(e||t(x({})),i.PW5().then((function(e){t(j({folders:e.folders,favoriteFolders:e.favoriteFolders.length?e.favoriteFolders.split(","):[],sort:e.sort}))})))}},I=(0,r.PH)(s.a.FOLDER_CREATE),S=function(e,t,n){return function(r){var o=(0,a.DK)();i.L60(e,t).then((function(e){(0,a.wD)(o,{msg:"Folder created successfully."}),n&&n(e.folder.folderID),r(I(e.folder)),r((0,u.h_)([{id:e.folder.folderID,itemType:"folder",createdSec:e.folder.createdSec,title:e.folder.name}]))})).catch((function(e){(0,a.wD)(o,{msg:"Creating folder failed. "+e,type:"error"})}))}},N=(0,r.PH)(s.a.FOLDER_MOVE),O=(0,r.PH)(s.a.VIDEO_MOVE),E=(0,r.PH)(s.a.IMAGE_MOVE),D=(0,r.PH)(s.a.ITEM_MOVE),A=function(e,t){return function(n,r){var s=r(),c=(0,a.DK)(),u=[],d=[],f=[];t.forEach((function(e){"folder"===e.itemType?f.push(e):"video"===e.itemType?u.push(e):d.push(e)}));var m=u.map((function(e){return e.id})).join(","),h=f.map((function(e){return e.id})).join(","),p=d.map((function(e){return e.id})).join(","),v=(0,o.D3)(h.length,m.length,p.length);i.J1J(e,m,p,h).then((function(t){if(f.length&&(n(N({folderID:e,folders:f})),t.folders&&t.folders.length&&n(b(t))),u.length){var r="0"===e?"":s.folder.folders[e].name;n(O({folderID:e,videos:u,folderName:r})),n(D({folderID:e,items:u}))}if(d.length){var i="0"===e?"":s.folder.folders[e].name;n(E({folderID:e,images:d,folderName:i})),n(D({folderID:e,items:d}))}s.multipleSelect.selectedItems.length&&n((0,l.jh)()),(0,a.wD)(c,{msg:v+" moved successfully."})})).catch((function(e){(0,a.wD)(c,{type:"error",msg:"Moving "+v.toLowerCase()+" failed. "+e})}))}},C=(0,r.PH)(s.a.FOLDER_DELETE),T=(0,r.PH)(s.a.ITEM_DELETE),P=function(e,t){return function(n){var r=[],s=[],h=[];e.forEach((function(e){"folder"===e.itemType||void 0!==e.parentID?h.push(y(y({},e),{},{itemType:"folder"})):"video"===e.itemType?r.push(e):s.push(e)}));var p=r.map((function(e){return e.id})).join(","),v=h.map((function(e){return e.id})).join(","),g=s.map((function(e){return e.id})).join(","),b=(0,a.DK)(),j=(0,o.D3)(v.length,p.length,g.length);i.B0$(p,g,v).then((function(){n((0,u.ne)(e)),n((0,u.lD)(e)),h.length&&(n(C({folders:h})),n((0,c.cC)()),n((0,m.Iz)()),n((0,d.uH)())),r.length&&(n(T({items:r})),n((0,m.LE)(r))),s.length&&(n(T({items:s})),n((0,c.H9)(s))),h.length?n((0,d.xI)()):n((0,d.Yy)([].concat(r,s))),n((0,l.jh)()),1!==r.length||s.length||h.length||!r[0].failed?(0,a.wD)(b,{msg:j+" move to Trash successfully."}):(0,a.wD)(b,{msg:"Thank you for reporting this problem. We will analyze the error report and find a solution as soon as possible."}),t&&t(),n((0,f.Xw)())})).catch((function(e){(0,a.wD)(b,{type:"error",msg:"Moving "+j.toLowerCase()+" to Trash failed. "+e})}))}},_=(0,r.PH)(s.a.FOLDER_RENAME),k=function(e,t){return function(n){var r=(0,a.DK)();i.Ec4(e,t).then((function(){(0,a.wD)(r,{msg:"Folder rename successfully."}),n(_({folderID:e,name:t})),n((0,u.r7)({id:e,itemType:"folder",name:t}))})).catch((function(e){(0,a.wD)(r,{type:"error",msg:"Renaming folder failed. "+e})}))}},L=(0,r.PH)(s.a.FOLDER_EDIT_DESC),R=function(e,t){return function(n){var r=(0,a.DK)();i.RwP(e,t).then((function(){(0,a.wD)(r,{msg:"Folder edit description successfully."}),n(L({folderID:e,desc:t}))})).catch((function(e){(0,a.wD)(r,{type:"error",msg:"Editing folder description failed. "+e})}))}},M=(0,r.PH)(s.a.FOLDER_GET_SHARE_LINK),Z=(0,r.PH)(s.a.FOLDER_GETTING_SHARE_LINK),U=function(e,t){return function(n){n(Z()),i.lGg(e).then((function(r){n(M({folderID:e,shareKey:r.shareKey})),t&&t(r.shareKey)}))}},H=(0,r.PH)(s.a.FOLDER_REVOKE_SHARE_LINK),F=function(e){return function(t){i.ty6(e).then((function(){t(H(e))}))}},G=((0,r.PH)(s.a.STAR_FOLDER_ADD),function(e){return function(t,n){var r=h(n().folder.starredFolderIDList);r.push(e);var a=r.join(",");i.oWj(a).then((function(){t(B(a))}))}}),V=(0,r.PH)(s.a.STAR_FOLDER_REMOVE),B=(0,r.PH)(s.a.STAR_FOLDER_UPDATE),W=function(e,t){return function(n){t?(n(B(e)),i.oWj(e)):i.oWj(e).then((function(){n(B(e))}))}},z=function(e){return function(t){t(V(e)),i.QPT(e)}},K=(0,r.PH)(s.a.FOLDER_CHANGE_SORT)},93878:(e,t,n)=>{n.d(t,{H9:()=>O,I5:()=>v,KG:()=>N,Kv:()=>M,Ql:()=>A,Tw:()=>b,Vf:()=>Z,Vu:()=>k,W_:()=>R,cC:()=>C,m8:()=>U,nY:()=>w,nt:()=>S});var r=n(97168),i=n(31955),a=n(97474),o=n(16514),s=n(70001),c=n(29778),l=n(60714),u=n(24362),d=n(52020);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=(0,r.PH)(c.a.IMAGE_RENAME),v=function(e){return function(t){var n=e.id,r=e.name,i=(0,s.DK)();a.I5G(n,r).then((function(){t(p(e)),t((0,u.r7)({id:n,itemType:"image",name:r})),t((0,d.QM)({id:n,itemType:"image",name:r})),(0,s.wD)(i,{msg:"Rename Successfully."})})).catch((function(e){(0,s.wD)(i,{type:"error",msg:"Rename Failed."})}))}},y=(0,r.PH)(c.a.IMAGE_LIST_LOADING),g=(0,r.PH)(c.a.IMAGE_LIST_LOAD),b=function(e){return function(t,n){var r=n();t(y()),r.image.activeImages.isLoading?Promise.resolve():a.Twb(r.image.sort,e).then((function(n){t(g({images:n.images,page:e,total:n.total}))}))}},j=(0,r.PH)(c.a.IMAGE_LIST_SUB_LOADING),x=(0,r.PH)(c.a.IMAGE_LIST_LOAD_MORE),w=function(){return function(e,t){var n=t(),r=n.image.activeImages;if(r.isSubPageLoading||r.subPage===o.J6||r.isLoading||r.isEnd||0===r.page||-1===r.page)Promise.resolve();else{e(j());var i=r.lastTimestamp;a.Twb(n.image.sort,r.page*o.J6+r.subPage+1,i).then((function(t){e(x({images:t.images}))}))}}},I=(0,r.PH)(c.a.IMAGE_CHANGE_SORT),S=function(e){return function(t,n){var r=n();i.Z.set("image_sort",e),t(I(e)),r.image.sort!==e&&t(b(r.image.page))}},N=(0,r.PH)(c.a.IMAGE_SCROLL_UPDATE),O=(0,r.PH)(c.a.IMAGE_DELETE),E=(0,r.PH)(c.a.IMAGE_INFO_LOAD),D=(0,r.PH)(c.a.IMAGE_INFO_LOADING),A=function(e,t,n){return function(r){n||r(D(e)),a.Qlm(e,t).then((function(t){var n=m(m({},t.image),{},{isChannelMember:t.isChannelMember,channelItemId:t.channelItemId});r(E({id:e,image:n}))})).catch((function(){r(E({id:e,image:null}))}))}},C=(0,r.PH)(c.a.IMAGE_PAGE_UPDATE),T=(0,r.PH)(c.a.IMAGE_GENERATE_SHARE_LINK),P=(0,r.PH)(c.a.IMAGE_GENERATE_SHARE_LINK_LOADING),_=(0,r.PH)(c.a.IMAGE_GENERATE_SHARE_LINK_FAILED),k=function(e,t){return function(n,r){var i=r();n(P({id:e})),a.Eap(e).then((function(r){n(T({id:e,shareURI:r.shareURI,shareKey:r.shareKey})),n((0,d.RZ)(m(m({},i.image.images[e].info),{},{userAvatar:i.user.info.avatarURL,shareURI:r.shareURI,shareKey:r.shareKey}))),t&&t(r.shareURI)})).catch((function(){n(_({id:e}))}))}},L=(0,r.PH)(c.a.IMAGE_REVOKE_SHARE_LINK),R=function(e){return function(t){a.HD(e).then((function(){})),t(L({id:e})),t((0,d.Yy)([{itemType:"image",id:e}]))}},M=(0,r.PH)(c.a.IMAGE_LIST_RESTORE),Z=(0,r.PH)(c.a.IMAGE_MOVE_TO_CHANNEL),U=((0,r.PH)(c.a.IMAGE_ANNOTATED),function(e,t){return function(n){var r=(0,s.DK)();a.m8y(e.id,e.shareKey,e.folderID,e.channel?e.channel.workspaceID:"",e.channel?e.channel.id:"").then((function(i){(0,s.wD)(r,{msg:"Image duplicated successfully"}),n((0,l.$)(e.folderID,[i.image])),t&&t(i.image.id)})).catch((function(){(0,s.wD)(r,{msg:"Image duplicated failed",type:"error"})}))}})},60714:(e,t,n)=>{n.d(t,{$:()=>I,LD:()=>w,Of:()=>E,XT:()=>S,dZ:()=>A,nt:()=>O,oo:()=>b,s2:()=>C,y6:()=>g});n(94507);var r=n(48086),i=n(97168),a=n(31955),o=n(97474),s=n(16514),c=n(56010),l=n(29778),u=n(20495),d=n(93878),f=n(24362),m=n(65497),h=n(21807),p=(0,i.PH)(l.a.ITEM_LIST_LOAD),v=(0,i.PH)(l.a.ITEM_LIST_LOAD_MORE),y=(0,i.PH)(l.a.ITEM_LIST_LOADING),g=(0,i.PH)(l.a.IMAGE_RECEIVED),b=(0,i.PH)(l.a.VIDEO_RECEIVED),j=(0,i.PH)(l.a.IMAGE_ADD),x=(0,i.PH)(l.a.ITEM_ADD),w=((0,i.PH)(l.a.ITEM_VIEW_SHOW),(0,i.PH)(l.a.ITEM_VIEW_HIDE),(0,i.PH)(l.a.ITEM_LIST_RESTORE)),I=function(e,t){return function(n){n(j({images:t})),n(x({folderID:e,items:t})),n((0,f.h_)(t)),n((0,m.Xw)())}},S=((0,i.PH)(l.a.ITEM_SHOW_PAGE_COUNT_RESTORE),function(e,t,n,r,i){return function(a,s){s().item.isLoading&&!n?Promise.resolve():(a(y()),o.usf(i||"",e,t,null,r,"",0).then((function(n){if(null===n.items)a(p({items:n.items,page:e,sort:n.sort,folderID:t,isShared:r}));else{var i=n.items.filter((function(e){return"image"===e.itemType}));a(g({images:i}));var o=n.items.filter((function(e){return"video"===e.itemType}));a(b({videos:o})),a(p({items:n.items,page:e,folderID:t,sort:n.sort,total:n.total,count:n.count,isShared:r}))}})))}}),N=(0,i.PH)(l.a.ITEM_CHANGE_SORT),O=function(e){return function(t,n){var r=n();a.Z.set("item_sort",e),t(N(e)),r.item.sort!==e&&(t(S(r.item.page,r.item.folderID,!1,!1,e)),t((0,u.Zj)({folderID:r.item.folderID,sort:e})))}},E=(0,i.PH)(l.a.ITEM_UPDATE_SCROLL),D=(0,i.PH)(l.a.ITEM_SUB_LOADING),A=function(e,t){return function(n,r){var i=r();if(i.item.isSubPageLoading||i.item.subPage===s.J6||i.item.isEnd||i.item.total<20||i.item.isLoading||0===i.item.page||e&&e!==i.item.folderID)Promise.resolve();else{n(D());var a=i.item.lastTimestamp;o.usf(i.item.sort,i.item.page,i.item.folderID,a,t,"",i.item.subPage+1).then((function(e){if(null===e.items)n(v({items:e.items}));else{var t=e.items.filter((function(e){return"image"===e.itemType}));n(g({images:t}));var r=e.items.filter((function(e){return"video"===e.itemType}));n(b({videos:r})),n(v({items:e.items}))}}))}}},C=function(e){return function(t){"video"!==e.itemType?"image"!==e.itemType||t((0,d.Vu)(e.id,(function(e){(0,c.zp)(e),r.ZP.success("Link copied.")}))):t((0,h.i9)(e.id,(function(e){(0,c.zp)(e),r.ZP.success("Link copied.")})))}}},92217:(e,t,n)=>{n.d(t,{Pj:()=>u,Qd:()=>o,ah:()=>a,jh:()=>c,oT:()=>l});var r=n(97168),i=n(29778),a=(0,r.PH)(i.a.SELECTED_ADD),o=(0,r.PH)(i.a.SELECTED_REMOVE),s=(0,r.PH)(i.a.SELECTED_CLEAR),c=function(){return function(e){e(s())}},l=(0,r.PH)(i.a.SELECTED_TRASH_ADD),u=(0,r.PH)(i.a.SELECTED_TRASH_REMOVE)},45227:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(97168),i=n(97474),a=n(29778),o=(0,r.PH)(a.a.PLANS_LOAD_RECEICED),s=function(e){return function(t){i.b9k(e).then((function(e){t(o({data:e}))}))}}},24362:(e,t,n)=>{n.d(t,{$3:()=>h,C8:()=>f,dj:()=>b,h_:()=>x,lD:()=>l,ne:()=>w,oO:()=>g,r7:()=>I,rh:()=>j});var r=n(97168),i=n(74221),a=n(97474),o=n(29778),s=n(20495),c=n(60714),l=(0,r.PH)(o.a.SEARCH_ITEM_DELETE),u=(0,r.PH)(o.a.SEARCH_LOAD),d=(0,r.PH)(o.a.SEARCH_LOADING),f=function(){return function(e,t){t().search.isLoading?Promise.resolve():(e(d()),a.C85().then((function(t){e(u(t.items))})))}},m=function(e,t){return t=t||[],new i.Z(t,{keys:["title","fullname"],useExtendedSearch:!0}).search("'"+e).map((function(e){return e.item}))},h=function(e){return function(t,n){var r=n();if(r.search.isMetaLoaded){var i=m(e,r.search.items);t(y(i,e))}else t(d()),a.C85().then((function(n){t(u(n.items));var r=m(e,n.items);t(y(r,e))}))}},p=(0,r.PH)(o.a.SEARCH_ITEM_LOAD),v=(0,r.PH)(o.a.SEARCH_ITEM_LOADING),y=function(e,t){return function(n){var r=[],i=[],o=[];e.forEach((function(e){"folder"===e.itemType?o.push(e):"video"===e.itemType?r.push(e):i.push(e)}));var l=r.map((function(e){return e.id})).join(","),u=o.map((function(e){return e.id})).join(","),d=i.map((function(e){return e.id})).join(",");n(v()),a.$3H(l,d,u).then((function(e){var r=e.folders||[],i=e.videos||[],a=e.images||[],o=i.concat(a);r.length&&n((0,s.es)({folders:r})),i.length&&n((0,c.oo)({videos:i})),a.length&&n((0,c.y6)({images:a})),n(p({folders:r,items:o,query:t}))}))}},g=(0,r.PH)(o.a.SEARCH_PAGE_CHANGE),b=(0,r.PH)(o.a.SEARCH_SCROLL_UPDATE),j=(0,r.PH)(o.a.SEARCH_QUERY_UPDATE),x=(0,r.PH)(o.a.SEARCH_META_ADD),w=(0,r.PH)(o.a.SEARCH_META_DELETE),I=(0,r.PH)(o.a.SEARCH_META_RENAME)},52020:(e,t,n)=>{n.d(t,{Ax:()=>f,Iz:()=>I,Of:()=>v,QM:()=>E,RZ:()=>N,Yy:()=>S,e$:()=>b,fR:()=>p,uH:()=>x,xI:()=>O});var r=n(97168),i=n(97474),a=n(16514),o=n(29778);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=(0,r.PH)(o.a.SHARED_LIST_LOADING),d=(0,r.PH)(o.a.SHARED_LIST_LOAD),f=function(e,t){return function(n,r){if(r().shared.isLoading&&!t)Promise.resolve();else{n(u());var o=e<2?1:e+(e-1)*a.J6;i.Ax(o).then((function(t){n(d(c(c({page:o},t),{},{currentDisplayPage:e})))}))}}},m=(0,r.PH)(o.a.SHARED_FOLDER_LIST_LOAD),h=(0,r.PH)(o.a.SHARED_FOLDER_LIST_LOADING),p=function(e){return function(t,n){n().shared.isFolderLoading&&!e?Promise.resolve():(t(h()),i.fRN().then((function(e){t(m(e))})))}},v=(0,r.PH)(o.a.SHARED_UPDATE_SCROLL),y=(0,r.PH)(o.a.SHARED_SUB_LOADING),g=(0,r.PH)(o.a.SHARED_LIST_LOAD_MORE),b=function(){return function(e,t){var n=t().shared;n.isSubPageLoading||n.subPage===a.J6||n.isEnd||n.total<20||n.isLoading?Promise.resolve():(e(y()),i.Ax(n.page+n.subPage+1).then((function(t){e(g(t.items))})))}},j=(0,r.PH)(o.a.SHARED_NOTI_LOAD),x=function(){return function(e){i.uHy().then((function(t){e(j(t.commentNotification||[]))}))}},w=(0,r.PH)(o.a.SHARED_NEW_COMMENTS_VIEWED),I=function(e,t,n){return function(r){r(w({itemType:e,itemId:t,count:n}))}},S=(0,r.PH)(o.a.SHARED_LIST_DELETE),N=(0,r.PH)(o.a.SHARED_LIST_ADD),O=(0,r.PH)(o.a.SHARED_LIST_RESTORE),E=(0,r.PH)(o.a.SHARED_TITLE_EDIT)},65384:(e,t,n)=>{n.d(t,{CV:()=>S,_x:()=>w,iX:()=>j,oO:()=>E,uo:()=>O});var r=n(97168),i=n(70001),a=n(97474),o=n(29778),s=n(26),c=n(20495),l=n(93878),u=n(60714),d=n(92217),f=n(24362),m=n(52020),h=n(65497),p=n(21807);function v(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=(0,r.PH)(o.a.TRASH_LOAD),b=(0,r.PH)(o.a.TRASH_LOADING),j=function(){return function(e){e(b()),a.xKl().then((function(t){e(g(t))}))}},x=(0,r.PH)(o.a.TRASH_RESTORE),w=function(e,t){return function(n){var r=(0,i.DK)(),o=e.map((function(e){return e.id})),y=o.join(","),g=o.length>1?"Items":"Item";a._x6(y).then((function(e){var t=[];if(n(x(o)),e.folders){n((0,c.PW)(!0)),n((0,l.Kv)()),n((0,p.U2)());var a=e.folders.map((function(e){return{id:e.folderID,title:e.name,createdSec:e.createdSec,itemType:"folder"}}));t=[].concat(v(a),v(t))}e.videos&&(n((0,u.LD)()),n((0,p.U2)()),t=[].concat(v(e.videos),v(t))),e.images&&(n((0,u.LD)()),n((0,l.Kv)()),t=[].concat(v(e.images),v(t))),n((0,m.xI)()),n((0,s.A3)()),n((0,f.h_)(t)),n((0,d.jh)()),(0,i.wD)(r,{msg:g+" restore successfully."}),n((0,m.uH)()),n((0,h.Xw)())})).catch((function(e){1201===e.code?(t&&t(e),(0,i.vU)(r)):(0,i.wD)(r,{type:"error",msg:"Restoring "+g+" failed. "+e.msg})}))}},I=(0,r.PH)(o.a.TRASH_DELETE),S=function(e){return function(t){var n=(0,i.DK)(),r=e.map((function(e){return e.id})),o=r.join(","),s=r.length>1?"Items":"Item";a.Rwp(o).then((function(){t(I(r)),t((0,d.jh)()),(0,i.wD)(n,{msg:s+" delete successfully."})})).catch((function(e){(0,i.wD)(n,{type:"error",msg:"Deleting "+s+" failed. "+e})}))}},N=(0,r.PH)(o.a.TRASH_EMPTY),O=function(e){return function(t){a.uoz(e).then((function(){t(N())}))}},E=(0,r.PH)(o.a.TRASH_PAGE_CHANGE)},52471:(e,t,n)=>{n.d(t,{G2:()=>s,i0:()=>m,mE:()=>c,oV:()=>o,sQ:()=>d,td:()=>f,uz:()=>h,vf:()=>l});var r=n(97168),i=n(29778),a=(0,r.PH)(i.a.UI_SHOW_ITEM),o=function(e,t){return function(n){n(a(e,t))}},s=(0,r.PH)(i.a.UI_NEXT_ITEM),c=(0,r.PH)(i.a.UI_PREV_ITEM),l=(0,r.PH)(i.a.UI_RESET_BROWSING),u=(0,r.PH)(i.a.ITEM_LOADED_RESET),d=function(){return function(e){e(f()),e(u())}},f=(0,r.PH)(i.a.UI_HIDE_ITEM),m=(0,r.PH)(i.a.UI_UPDATE_RECORD_PANEL),h=(0,r.PH)(i.a.UI_IS_RECORDING)},65497:(e,t,n)=>{n.d(t,{JF:()=>m,Lk:()=>c,Xw:()=>d,vB:()=>f});var r=n(97168),i=n(97474),a=n(29778),o=(0,r.PH)(a.a.USER_LOAD_INFO),s=(0,r.PH)(a.a.USER_LOAD_INFO_LOADING),c=function(e){return function(t,n){var r=n();!0!==e&&(r.user.isLoading||r.user.info&&r.user.info.uid)?Promise.resolve():(t(s({})),i.OR9().then((function(e){t(o({data:e}))})))}},l=(0,r.PH)(a.a.USER_PERMISSION_LOADING),u=(0,r.PH)(a.a.USER_PERMISSION_RECEIVE),d=function(){return function(e,t){var n=t();n.isLoading||n.isLoadingPermission?Promise.resolve():(e(l()),i.e5V().then((function(t){e(u(t))})))}},f=(0,r.PH)(a.a.USER_AVATAR_REFRESH),m=(0,r.PH)(a.a.USER_CLICK_FIVE_STAR)},21807:(e,t,n)=>{n.d(t,{$J:()=>_,DI:()=>F,F6:()=>A,Iz:()=>X,LE:()=>S,M5:()=>O,O1:()=>$,OS:()=>z,U2:()=>ee,XH:()=>L,cb:()=>g,i9:()=>U,lT:()=>te,mE:()=>Y,mU:()=>B,nt:()=>Q,t3:()=>P,ul:()=>p,wZ:()=>x});var r=n(97168),i=n(31955),a=n(16514),o=n(70001),s=n(84141),c=n(97474),l=n(29778),u=n(24362),d=n(52020);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=(0,r.PH)(l.a.VIDEO_SCROLL_UPDATE),v=(0,r.PH)(l.a.VIDEO_LOAD_INFO),y=(0,r.PH)(l.a.VIDEO_INFO_LOADING),g=function e(t,n,r){return function(i){r||i(y({id:t,shareKey:n})),c.fBG(t,n).then((function(r){var a=r.video;0==s.Z.webmSupport()&&a&&0==a.isMP4Requested&&0==a.mp4Available&&c.MxH(t,n).then((function(){i(e(t,n,!0))})),i(v({id:t,data:r}))})).catch((function(e){i(v({id:t,error:e,data:{}}))}))}},b=(0,r.PH)(l.a.VIDEO_LOADED_ANNOTATIONS),j=(0,r.PH)(l.a.VIDEO_LOADING_ANNOTATIONS),x=function(e,t,n){return function(r){r(j({id:e,version:t})),c.n6q(e,t,n).then((function(t){var n=t.actions;if(n&&n.length>0){var i=n[0];r(b({id:e,version:i.version,baseVersion:i.baseVersion,actions:JSON.parse(i.data)}))}else r(b({id:e,version:"",actions:[]}))})).catch((function(){r(b({id:e,version:"",actions:[]}))}))}},w=(0,r.PH)(l.a.VIDEO_ACTIVE_LIST_LOADING),I=(0,r.PH)(l.a.VIDEO_DELETED),S=(0,r.PH)(l.a.VIDEO_DELETE_MULTIPLE),N=(0,r.PH)(l.a.VIDEO_LOAD_ACTIVE_LIST),O=function(e){return function(t,n){var r=n();t(w()),c.hWi(r.video.sort,e,"").then((function(n){t(N({page:e,videos:n.videos,total:n.total}))}))}},E=(0,r.PH)(l.a.VIDEO_LIST_SUB_LOADING),D=(0,r.PH)(l.a.VIDEO_LIST_LOAD_MORE),A=function(){return function(e,t){var n=t(),r=n.video.activeVideos;if(r.isSubPageLoading||r.subPage===a.J6||r.isEnd||0===r.page||-1===r.page)Promise.resolve();else{e(E());var i=r.lastTimestamp;c.hWi(n.video.sort,r.page*a.J6+r.subPage+1,"active",i).then((function(t){e(D({videos:t.videos}))}))}}},C=(0,r.PH)(l.a.VIDEO_INACTIVE_LIST_LOADING),T=(0,r.PH)(l.a.VIDEO_LOAD_INACTIVE_LIST),P=function(e,t){return function(n){n(C()),c.hWi("create",e,"inactive").then((function(r){n(T({count:t,page:e,status:"inactive",data:{page:r.page,pageSize:r.pageSize,total:r.total,videos:r.videos||[]}}))}))}},_=function(e){return function(t){c.FMP(e).then((function(){t(I(e))}))}},k=(0,r.PH)(l.a.VIDEO_CONVERTING_TO_MP4_INFO),L=function(e){return function(t){c.POR(e).then((function(){t(k(e)),t(g(e,"",!0))}))}},R=(0,r.PH)(l.a.VIDEO_GENERATE_SHARE_LINK),M=(0,r.PH)(l.a.VIDEO_GENERATE_SHARE_LINK_LOADING),Z=(0,r.PH)(l.a.VIDEO_GENERATE_SHARE_LINK_FAILED),U=function(e,t){return function(n,r){var i=r();n(M({id:e})),c.fZt(e).then((function(r){n(R({id:e,shareURI:r.shareURI,shareKey:r.shareKey})),n((0,d.RZ)(m(m({},i.video.videos[e].info),{},{userAvatar:i.user.info.avatarURL,shareURI:r.shareURI,shareKey:r.shareKey}))),t&&t(r.shareURI)})).catch((function(){n(Z({id:e}))}))}},H=(0,r.PH)(l.a.VIDEO_REVOKE_SHARE_LINK),F=function(e){return function(t){c.UCi(e).then((function(){})),t(H({id:e})),t((0,d.Yy)([{itemType:"video",id:e}]))}},G=(0,r.PH)(l.a.VIDEO_EDIT_TITLE_LOADING),V=(0,r.PH)(l.a.VIDEO_EDIT_TITLE),B=function(e,t){return function(n){n(G({id:e}));var r=(0,o.DK)();c.Nbr(e,t).then((function(){n(V({id:e,title:t})),n((0,u.r7)({id:e,itemType:"video",name:t})),n((0,d.QM)({id:e,itemType:"video",name:t})),(0,o.wD)(r,{msg:"Rename successfully."})})).catch((function(){(0,o.wD)(r,{type:"error",msg:"Rename Failed."})}))}},W=(0,r.PH)(l.a.VIDEO_OPEN_EDIT_TITLE),z=function(e){return function(t){t(W({id:e}))}},K=(0,r.PH)(l.a.VIDEO_HIDE_EDIT_TITLE),$=function(e){return function(t){t(K({id:e}))}},q=(0,r.PH)(l.a.VIDEO_SET_COMPLETE_DONE),Y=function(e){return function(t){c.sVk(e).then((function(n){t(q({id:e,info:n}))}))}},J=(0,r.PH)(l.a.VIDEO_CHANGE_SORT),Q=function(e){return function(t,n){var r=n();i.Z.set("video_sort",e),t(J(e)),r.video.sort!==e&&t(O(r.video.page))}},X=(0,r.PH)(l.a.VIDEO_PAGE_UPDATE),ee=(0,r.PH)(l.a.VIDEO_LIST_RESTORE),te=(0,r.PH)(l.a.VIDEO_MOVE_TO_CHANNEL)},98050:(e,t,n)=>{n.d(t,{Ce:()=>p,EV:()=>D,Eb:()=>x,Pf:()=>l,SE:()=>j,UU:()=>v,aA:()=>c,cK:()=>I,mi:()=>f,n8:()=>N,nI:()=>g,yQ:()=>C,zl:()=>O});var r=n(97168),i=n(70001),a=n(97474),o=n(29778),s=(0,r.PH)(o.a.WORKSPACE_LOADING),c=(0,r.PH)(o.a.WORKSPACE_LOAD),l=function(){return function(e,t){var n=t();n.workspace.isLoading||n.workspace.loaded?Promise.resolve():(e(s()),a.PfW().then((function(t){e(c(t.workspaces))})))}},u=((0,r.PH)(o.a.WORKSPACE_CREATE),(0,r.PH)(o.a.CHANNEL_CREATE)),d=(0,r.PH)(o.a.CHANNEL_CREATING),f=function(e,t,n,r){return function(i){i(d()),a.mih(e,t,n).then((function(t){i(u({workspaceID:e,channel:t.channel})),r&&r(t.channel)}))}},m=(0,r.PH)(o.a.WORKSPACE_CHANNEL_LOAD),h=(0,r.PH)(o.a.WORKSPACE_CHANNEL_LOADING),p=function(e){return function(t){t(h()),a.CeK(e).then((function(e){t(m(e.channels))}))}},v=(0,r.PH)(o.a.WORKSPACE_MEMBER_LOAD),y=(0,r.PH)(o.a.WORKSPACE_MEMBER_LOADING),g=function(e){return function(t,n){var r=n();r.workspace.isLoadingAllMembers||r.workspace.memberLoadedID===e?Promise.resolve():(t(y()),a.nI8(e).then((function(n){t(v({members:n.members,workspaceID:e}))})))}},b=(0,r.PH)(o.a.WORKSPACE_META_EDIT),j=function(e,t,n,r){return function(i){a.SEu(e,t,n).then((function(){i(b({workspaceID:e,type:t,value:n})),r()}))}},x=(0,r.PH)(o.a.WORKSPACE_ENTER),w=(0,r.PH)(o.a.WORKSPACE_CHANGE_ROLE),I=function(e,t){return function(n,r){var i=r();n(w({memberID:e,role:t})),a.cKX(i.workspace.currentWorkspaceID,e+"",t)}},S=(0,r.PH)(o.a.WORKSPACE_LEAVE),N=function(e,t){return function(n){a.n8r(e).then((function(){n(S(e)),t()}))}},O=function(e,t){return function(n){a.zlV(e).then((function(){n(S(e)),t()}))}},E=(0,r.PH)(o.a.WORKSPACE_MEMBER_REMOVE),D=function(e,t){return function(n){var r=(0,i.DK)();a.n8r(e,t).then((function(){n(E(t)),(0,i.wD)(r,{msg:"Member removed."})}))}},A=(0,r.PH)(o.a.WORKSPACE_INFO_LOAD),C=function(e){return function(t){a.yQs(e).then((function(e){t(A(e.workspaces))}))}}},97474:(e,t,n)=>{n.d(t,{$3H:()=>Ee,$lD:()=>sn,$ll:()=>qe,$vQ:()=>pt,A95:()=>ce,Ax:()=>Ue,B0$:()=>xe,BBL:()=>H,C85:()=>Oe,CAL:()=>P,CVk:()=>De,CZT:()=>Tt,CeK:()=>ut,Cpd:()=>M,D45:()=>gt,E2j:()=>x,EaK:()=>Ce,Eap:()=>ie,Ec4:()=>we,Eq_:()=>ln,FB8:()=>mt,FHV:()=>h,FMP:()=>q,FOj:()=>Ct,FY6:()=>Z,FbR:()=>at,GMb:()=>z,GY:()=>Qt,Goc:()=>wt,GpV:()=>Jt,GvO:()=>We,HCH:()=>k,HD:()=>ae,HFJ:()=>V,I5G:()=>_e,IQ2:()=>ee,J1C:()=>xt,J1J:()=>je,JJ5:()=>yt,JX8:()=>pe,KTp:()=>Le,KUr:()=>en,Kwg:()=>Bt,L60:()=>be,LDB:()=>N,MBc:()=>et,MR5:()=>jt,MjW:()=>Ze,MxH:()=>Wt,Myt:()=>vt,Nbr:()=>oe,O35:()=>Vt,OR9:()=>b,PEq:()=>Xt,POR:()=>te,PW5:()=>ye,PfW:()=>Xe,Pwg:()=>lt,QPT:()=>Qe,QPX:()=>ot,QbM:()=>fe,Qlm:()=>Pe,Qrg:()=>rn,Qrl:()=>It,R2R:()=>T,R9S:()=>Yt,Rhi:()=>me,RwP:()=>zt,Rwp:()=>Ne,S0H:()=>Ut,SEu:()=>st,T3h:()=>Mt,TL7:()=>C,Twb:()=>Te,UCi:()=>re,Ufv:()=>Gt,Wc0:()=>he,X7m:()=>nn,YFy:()=>Me,Yrx:()=>Re,Zaq:()=>ze,Zef:()=>A,_x6:()=>Se,ajT:()=>J,b9k:()=>_,bG5:()=>de,c$2:()=>ve,cKX:()=>Nt,ck4:()=>R,d5$:()=>nt,djw:()=>tn,e$B:()=>j,e5V:()=>an,eB6:()=>Rt,eH4:()=>ft,fBG:()=>$,fCJ:()=>ke,fLe:()=>kt,fOZ:()=>O,fRN:()=>He,fZt:()=>ne,gg6:()=>Ge,hWi:()=>K,hz1:()=>W,iHA:()=>Lt,iQz:()=>Y,j3I:()=>Et,jTH:()=>X,kA_:()=>G,l$X:()=>Ht,lGg:()=>Kt,lYX:()=>L,m8y:()=>dn,mih:()=>tt,mwz:()=>ht,n6q:()=>Q,n8r:()=>Ot,nI8:()=>dt,npm:()=>S,oED:()=>w,oH9:()=>U,oWj:()=>Je,ovQ:()=>se,p7n:()=>g,qQg:()=>F,qcI:()=>Ye,qo7:()=>_t,rXU:()=>Zt,ri7:()=>St,sKT:()=>it,sVk:()=>le,szH:()=>on,tM0:()=>B,tRN:()=>$e,tmw:()=>ue,ttN:()=>I,ty6:()=>$t,u2R:()=>D,uHy:()=>Fe,uoz:()=>Ae,usf:()=>ge,v$z:()=>rt,vNM:()=>E,vQG:()=>qt,w73:()=>Pt,wWy:()=>Be,xKl:()=>Ie,yQs:()=>Ft,ywm:()=>ct,zB2:()=>y,zEL:()=>bt,zlV:()=>At,zzM:()=>Dt});n(94507);var r=n(48086),i=n(9669),a=n.n(i);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new N(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=d(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function m(){}function h(){}function p(){}var v={};l(v,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(O([])));g&&g!==t&&n.call(g,i)&&(v=g);var b=p.prototype=m.prototype=Object.create(v);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,s,c){var l=d(e[i],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==o(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):t.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,c)}))}c(l.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=p,l(b,"constructor",p),l(p,"constructor",h),h.displayName=l(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},j(x.prototype),l(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},j(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function c(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){c(a,r,i,o,s,"next",e)}function s(e){c(a,r,i,o,s,"throw",e)}o(void 0)}))}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h="https://www.awesomescreenshot.com",p=["/premium/stripe/create_plan","/premium/stripe/change_plan","/folder/create","/folder/add_items","/folder/change_name","/trash/throw_into","/image/change_title","/video/update_title","/trash/restore","/trash/delete","/image/upload","/workspace/channel/move_items","/workspace/channel/load_items","/workspace/channel/load_members","/video/websocket/token","/refer/check_accept"],v=a().create({baseURL:"/api/v1/"});function y(e){var t=e.email,n=e.password,r=new URLSearchParams;return r.append("mail",t),r.append("password",n),a()({method:"post",url:h+"/user/loginCommit?from=web_recorder",data:r})}function g(e,t,n){for(var r=new FormData,i=0,o=Object.entries(e);i<o.length;i++){var s=f(o[i],2),c=s[0],l=s[1];r.append(c,l)}var u=n||"https://awesomescreenshot.s3.amazonaws.com/";return a()({method:"POST",crossdomain:!0,url:u,data:r,onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);t(n)}})}function b(){return v({method:"GET",url:"/user/info"})}function j(e,t,n,r){return v({method:"POST",url:"/premium/stripe/create_plan",data:{PlanName:e,stripeToken:t.id,stripeEmail:t.email,PPCancelSuccess:n,promotionCode:r}})}function x(e,t){var n=new FormData;return n.append("imageID",e),n.append("file",t),v({method:"POST",url:"/image/upload_annotated",data:n})}function w(e){return v({method:"POST",url:"/user/update_card",data:{paymentMethod:e}})}function I(){return v({method:"GET",url:"/account/load"})}function S(e){return v({method:"POST",url:"/account/delete",data:{accountID:e}})}function N(){return v({method:"GET",url:"/destination/load"})}function O(e){return v({method:"POST",url:"/destination/delete",data:{destinationID:e}})}function E(e,t){return v({method:"POST",url:"/destination/change_privacy",data:{destinationID:e,privacy:t}})}function D(){return v({method:"GET",url:"/team/member/load"})}function A(e,t){return v({method:"POST",url:"/team/member/remove",data:{UID:e,teamID:t}})}function C(e,t){return v({method:"GET",url:"/team/info",params:{teamID:e,code:t}})}function T(e,t){return v({method:"POST",url:"/team/member/apply",data:{teamID:e,code:t}})}function P(e){return v({method:"POST",url:"/team/member/invite_by_email",data:{emails:e}})}function _(e){return v({method:"GET",url:"/premium/plans",params:{promotionCode:e}})}function k(e,t){return t||(t=1),v({method:"GET",url:"/destination/image/list",params:{DestID:e,Limit:20,Offset:20*(t-1)}})}function L(e,t){return t||(t=1),v({method:"GET",url:"/destination/video/list",params:{DestID:e,Limit:20,Offset:20*(t-1)}})}function R(e){return v({method:"POST",url:"/user/update_profile",data:e})}function M(e){return v({method:"POST",url:"/user/change_password",data:e})}function Z(e){return v({method:"POST",url:"/user/set_google_account_password",data:{password:e}})}function U(e){return v({method:"GET",url:"Stripe"===e?"/premium/stripe/cancel_plan":"/premium/paypal/cancel_plan"})}function H(e){return v({method:"POST",url:"/premium/stripe/change_plan",data:{PlanName:e}})}function F(e,t){return v({method:"GET",url:"/premium/stripe/preview_upgrade_cost",params:{NewPlanName:e,promotionCode:t}})}function G(){return v({method:"GET",url:"/video/websocket/token"})}function V(e){return a()({method:"GET",url:"https://tinyurl.com/api-create.php?url="+e})}function B(e){var t={from:e},n=document.querySelector("#aws-chrome-installed");if(n){var r=n.getAttribute("data-version");null!==r&&(t.clientVersion=r)}return v({method:"GET",url:"/premium/pricing_opened",params:t})}function W(e){return v({method:"POST",url:"/common/contact_us",data:e})}function z(e,t){return v({method:"POST",url:"/premium/paypal/create_plan",data:{PlanName:e,promotionCode:t}})}function K(e,t,n,r){return v({method:"GET",url:"/video/load_user_videos",params:{page:t,status:n,sort:e,timestamp:r}})}function $(e,t){var n={id:e};return t&&(n.key=t),v({method:"GET",url:"/video/load_video",params:n})}function q(e){return v({method:"POST",url:"/video/delete_video",data:{videoID:e}})}function Y(e,t){if(t&&!(t.length<=0))return v({method:"POST",url:"/video/edit/delete_annotate_image",data:{videoID:e,imageKeys:t.join(",")}})}function J(e,t){return v({method:"POST",url:"/video/edit/sign_upload_url_annotate_image",data:{videoID:e,imageKeys:t.join(",")}})}function Q(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"annotation",i={actionType:r,videoID:e};return t&&(i.baseVersion=t),n&&(i.key=n),v({method:"GET",url:"/video/edit/load_actions",params:i})}function X(e,t,n){var r={videoID:e,key:n,imageKeys:t.join(",")};return v({method:"POST",url:"/video/edit/load_annotate_images_url",data:r})}function ee(e,t,n,r,i,a){return n||(n="0"),v({method:"POST",url:"/video/edit/action",data:{videoID:e,actionTypeName:t,baseVersion:n,version:r,data:JSON.stringify({actions:i,tracks:a})}})}function te(e){return v({method:"POST",url:"/video/convert_to_mp4",data:{videoID:e}})}function ne(e){return v({method:"GET",url:"/video/get_share_link",params:{id:e}})}function re(e){return v({method:"POST",url:"/video/revoke_share_link",data:{videoID:e}})}function ie(e){return v({method:"GET",url:"/image/get_share_link",params:{id:e}})}function ae(e){return v({method:"POST",url:"/image/revoke_share_link",data:{imageID:e}})}function oe(e,t){return v({method:"POST",url:"/video/update_title",data:{videoID:e,title:t}})}function se(e){return v({method:"POST",url:"/video/increase_view",data:{videoID:e}})}function ce(e){return v({method:"POST",url:"/image/increase_view",data:{imageID:e}})}function le(e){return v({method:"POST",url:"/video/complete",data:{videoID:e,f:"userClick"}})}function ue(e){return v({method:"POST",url:"/user/delete_account",data:{verificationCode:e}})}function de(e){return v({method:"POST",url:"/video/video_visit_request",data:{videoID:e}})}function fe(e){return v({method:"POST",url:"/image/image_visit_request",data:{imageID:e}})}function me(e){return v({method:"GET",url:"/user/get_billing_history",params:{page:e}})}function he(){return v({method:"GET",url:"/user/get_receipt_info"})}function pe(e){return v({method:"POST",url:"/user/save_receipt_info",data:e})}function ve(e,t){var n={videoName:e};return t&&(n.title=t),v({method:"POST",url:"/video/complete",data:n})}function ye(e){return v({method:"GET",url:"/folder/load_user_folders",params:{count:20,page:e}})}function ge(e,t,n,r,i,a,o){var s={page:t,count:20,sort:e};return r&&(s.timestamp=r),i&&(s.shared="yes"),n&&(s.folderID=n),a&&(s.key=a),o&&(s.subPage=o),v({method:"GET",url:"/folder/load_items",params:s})}function be(e,t){return v({method:"POST",url:"/folder/create",data:{name:e,parentID:t}})}function je(e,t,n,r){return v({method:"POST",url:"/folder/add_items",data:{folderID:e,videos:t,images:n,folders:r}})}function xe(e,t,n){return v({method:"POST",url:"/trash/throw_into",data:{videos:e,images:t,folders:n}})}function we(e,t){return v({method:"POST",url:"/folder/change_name",data:{folderID:e,newName:t}})}function Ie(){return v({method:"GET",url:"/trash/load_user_items"})}function Se(e){return v({method:"POST",url:"/trash/restore",data:{ids:e}})}function Ne(e){return v({method:"POST",url:"/trash/delete",data:{ids:e}})}function Oe(){return v({method:"GET",url:"/search/load_meta"})}function Ee(e,t,n){return v({method:"POST",url:"/search/load_items",data:{videos:e,images:t,folders:n}})}function De(e,t,n,r,i,a){var o=new FormData;return o.append("file",t),o.append("title",n),o.append("folderID",e),o.append("actionType","website"),i&&o.append("workspaceID",i),a&&o.append("channelID",a),v({method:"POST",url:"/image/upload",data:o,onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);r(t)}})}function Ae(e){return v({method:"POST",url:"/trash/empty",data:{userID:e+""}})}function Ce(e,t){return a()({method:"GET",url:"/api/v1/user/oauth/login",params:{from:e,referKey:t}})}function Te(e,t,n){return v({method:"GET",url:"/image/load_user_images",params:{page:t,sort:e,timestamp:n}})}function Pe(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e},t&&{key:t});return v({method:"GET",url:"/image/load",params:n})}function _e(e,t){return v({method:"POST",url:"/image/change_title",data:{imageID:e,title:t}})}function ke(){return v({method:"GET",url:"/team/delete"})}function Le(e,t,n){return v({method:"GET",url:"/comment/list",params:{key:n,item_id:t,item_type:e,page:1,offset:100}})}function Re(e,t,n,r,i){return v({method:"POST",url:"/comment/create",data:{item_type:e,item_id:t,is_emoji:r,timestamp:i+"",content:n}})}function Me(e){return v({method:"POST",url:"/comment/delete",data:{id:e+""}})}function Ze(e,t,n){return v({method:"GET",url:"/comment/list_user",params:{key:n,item_id:t,item_type:e}})}function Ue(e){return v({method:"GET",url:"/folder/load_shared_items",params:{count:20,page:e}})}function He(){return v({method:"GET",url:"/folder/load_shared_folders"})}function Fe(){return v({method:"GET",url:"/folder/load_notification"})}function Ge(e){var t=new FormData;return t.append("file",e),v({method:"POST",url:"/user/upload_avatar",data:t})}function Ve(e){return v({method:"POST",url:"/user/stuff",data:{type:e}})}function Be(){return Ve("chromeFiveStarCancel")}function We(){return Ve("chromeFiveStarClick")}function ze(){return Ve("chromeFiveStarFeedback")}function Ke(e){return v({method:"POST",url:"/user/update_setting",data:e})}function $e(e){return v({method:"POST",url:"/premium/stripe/create_plan_from_wallet",data:e})}function qe(e){return Ke({type:"theme",theme:e})}function Ye(e){return v({method:"POST",url:"/user/one_tap_login",data:{token:e}})}function Je(e){return Ke({type:"favoriteFolder",folders:e})}function Qe(e){return v({method:"POST",url:"/user/remove_favorite_folder",data:{folderID:e}})}function Xe(){return v({method:"GET",url:"/workspace/load_user_all"})}function et(e,t){return v({method:"POST",url:"/workspace/create",data:{name:e,plan:t}})}function tt(e,t,n){return v({method:"POST",url:"/workspace/channel/create",data:{workspaceID:e,name:t,description:n}})}function nt(e,t,n){var r={workspaceID:e,emails:n};return t&&(r.channelID=t),v({method:"POST",url:"/workspace/member/invite",data:r})}function rt(e,t,n,r,i){var a={page:t,count:20,sort:e,workspaceID:n,channelID:r};return i&&(a.timestamp=i),v({method:"GET",url:"/workspace/channel/load_items",params:a})}function it(e,t,n){return v({method:"POST",url:"/workspace/channel/move_items",data:{workspaceID:e,channelID:t,items:n}})}function at(e,t){return v({method:"GET",url:"/workspace/channel/load_members",params:{workspaceID:e,channelID:t}})}function ot(e,t,n,r){var i={workspaceID:e,channelID:t};return i[n]=r,v({method:"POST",url:"/workspace/channel/meta",data:i})}function st(e,t,n){var r={workspaceID:e};return r[t]=n,v({method:"POST",url:"/workspace/meta",data:r})}function ct(e,t,n){return v({method:"POST",url:"/workspace/channel/transfer",data:{workspaceID:e,channelID:t,newOwnerUID:n+""}})}function lt(e,t,n){return v({method:"POST",url:"/workspace/channel/quit",data:{workspaceID:e,channelID:t,memberUID:n+""}})}function ut(e){return v({method:"GET",url:"/workspace/load_channels",params:{workspaceID:e}})}function dt(e){return v({method:"GET",url:"/workspace/load_members",params:{workspaceID:e}})}function ft(e,t,n){var r={workspaceID:e,from:t};return n&&(r.promotionCode=n),v({method:"GET",url:"/workspace/payment/pricing",params:r})}function mt(e,t,n,r){var i={workspaceID:e,from:t,planName:n};return r&&(i.promotionCode=r),v({method:"GET",url:"/workspace/payment/secret",params:i})}function ht(e,t,n){return v({method:"POST",url:"/workspace/payment/create",data:{workspaceID:e,intentID:t,paymentMethod:n}})}function pt(e,t,n){return v({method:"POST",url:"/workspace/payment/lite_upgrade",data:{workspaceID:e,intentID:t,paymentMethod:n}})}function vt(e,t){var n={workspaceID:e};return t&&(n.channelID=t),v({method:"POST",url:"/workspace/member/invite_link",data:n})}function yt(e,t){return v({method:"POST",url:"/workspace/channel/join",data:{workspaceID:e,channelID:t}})}function gt(e){return v({method:"GET",url:"/workspace/member/invite_info",params:{key:e}})}function bt(e){return v({method:"POST",url:"/workspace/member/join_by_key",data:{inviteKey:e}})}function jt(e){return v({method:"GET",url:"/workspace/payment/billing",params:{workspaceID:e}})}function xt(){return v({method:"GET",url:"/user/notification/load"})}function wt(e){return v({method:"POST",url:"/user/notification/read",data:{notificationID:e}})}function It(){return v({method:"POST",url:"/user/notification/read_all"})}function St(e,t,n){return v({method:"POST",url:"/workspace/channel/add_members",data:{workspaceID:e,channelID:t,memberUIDs:n}})}function Nt(e,t,n){return v({method:"POST",url:"/workspace/member/change_role",data:{workspaceID:e,memberID:t,role:n}})}function Ot(e,t){var n={workspaceID:e};return t&&(n.memberUID=t+""),v({method:"POST",url:"/workspace/member/quit",data:n})}function Et(e,t,n){var r={workspaceID:e,channelID:t};return n&&(r.memberUID=n),v({method:"POST",url:"/workspace/channel/quit",data:r})}function Dt(e,t){return v({method:"POST",url:"/workspace/channel/delete",data:{workspaceID:e,channelID:t}})}function At(e){return v({method:"POST",url:"/workspace/delete",data:{workspaceID:e}})}function Ct(e,t,n){return v({method:"POST",url:"/workspace/channel/delete_item",data:{workspaceID:e,channelID:t,channelItemID:n}})}function Tt(e,t,n){return v({method:"POST",url:"/workspace/channel/return_item",data:{workspaceID:e,channelID:t,channelItemID:n}})}function Pt(){return a()({method:"GET",url:"/web/user/logout"})}function _t(e,t,n){var r={workspaceID:t,type:e};return n&&(r.channelID=n),v({method:"POST",url:"/workspace/notify",data:r})}function kt(e,t){var n={workspaceID:e};return t&&(n.startingAfter=t),v({method:"GET",url:"/workspace/payment/billing_log",params:n})}function Lt(e,t,n){return v({method:"POST",url:"/workspace/payment/renew",data:{workspaceID:e,intentID:t,paymentMethod:n}})}function Rt(e,t){return v({method:"POST",url:"/workspace/payment/update_card",data:{workspaceID:e,paymentMethod:t}})}function Mt(e){return v({method:"POST",url:"/workspace/payment/cancel",data:{workspaceID:e}})}function Zt(e){return v({method:"POST",url:"/workspace/payment/upgrade",data:{workspaceID:e}})}function Ut(e,t){return v({method:"POST",url:"/workspace/payment/resubscribe",data:{workspaceID:e,planName:t}})}function Ht(e){return v({method:"POST",url:"/workspace/payment/pay",data:{workspaceID:e}})}function Ft(e){return v({method:"GET",url:"/workspace/info",params:{workspaceID:e}})}function Gt(e,t,n,r){return v({method:"POST",url:"/workspace/payment/transfer",data:{workspaceName:e,channelName:t,channelDescription:n,paymentMethod:r}})}function Vt(e){return v({method:"GET",url:"/workspace/payment/get_customer_info",params:{workspaceID:e}})}function Bt(e){return v({method:"POST",url:"/workspace/payment/update_customer",data:e})}function Wt(e,t){var n={videoID:e};return t&&(n.shareKey=t),v({method:"POST",url:"/video/convert_webm_for_view",data:n})}function zt(e,t){return v({method:"POST",url:"/folder/change_description",data:{description:t,folderID:e}})}function Kt(e){return v({method:"POST",url:"/folder/get_share_key",data:{folderID:e}})}function $t(e){return v({method:"POST",url:"/folder/revoke_share_key",data:{folderID:e}})}function qt(e,t){var n={folderID:e};return t&&(n.key=t),v({method:"GET",url:"/folder/load_info",params:n})}function Yt(e,t){return v({method:"GET",url:"/premium/stripe/secret",params:{planName:e,promotionCode:t}})}function Jt(e,t){return v({method:"POST",url:"/premium/stripe/create_plan",data:{intentID:e,paymentMethod:t}})}function Qt(){return v({method:"GET",url:"/user/setup_intent"})}function Xt(){return v({method:"GET",url:"/premium/stripe/renew_plan"})}function en(){return v({method:"GET",url:"/refer/load_invite_link"})}function tn(){return v({method:"GET",url:"/refer/load_referrals"})}function nn(e){return v({method:"POST",url:"/refer/send_email_invitation",data:{email:e}})}function rn(e){return v({method:"POST",url:"/refer/active_gift",data:{referralID:e}})}function an(){return v({method:"GET",url:"/user/permission"})}function on(e){return v({method:"GET",url:"/refer/check_accept",params:{referKey:e}})}function sn(e){return cn.apply(this,arguments)}function cn(){return(cn=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v({method:"POST",url:"/folder/download",timeout:6e4,data:{folderID:t}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ln(e){return un.apply(this,arguments)}function un(){return(un=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v({method:"POST",url:"folder/download_info",data:{folderID:t}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dn(e,t,n,r,i){var a={imageID:e,shareKey:t,folderID:n};return r&&(a.workspaceID=r),i&&(a.channelID=i),v({method:"POST",url:"/image/copy",data:a})}v.interceptors.request.use((function(e){return e}),(function(){return r.ZP.error("Network error, Request timeout!"),Promise.reject()})),v.interceptors.response.use((function(e){var t=e.data,n=e.config;if(t&&1===t.code)return Promise.resolve(t.data);if(1e3==t.code&&"/pricing"!==window.location.pathname)window.location.href="/signin?redirect="+window.location.href;else{if(2001===t.code)return Promise.reject(t);if(1201===t.code)return Promise.reject(t);if(t.msg){if(n.url&&p.includes(n.url))return Promise.reject(t.msg);if(r.ZP.error(t.msg),"/pricing"!==window.location.pathname)return Promise.reject(t.msg)}}}),(function(e){if(e.response){var t=e.response.status;r.ZP.error("Network error! Error Code "+t)}}))},3741:(e,t,n)=>{n.d(t,{Z:()=>W});n(38691);var r=n(71577),i=n(67294),a=n(56262),o=n(20348),s=n(8690),c=n(16514),l=n(56010),u=(n(94969),n(45777)),d=n(85893);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const h=function(e){var t=e.title,n=e.children,r=e.onClick,a=f((0,i.useState)(!1),2),o=a[0],s=a[1];return(0,d.jsx)(u.Z,{title:t,onClick:function(){s(!1)},onVisibleChange:s,mouseEnterDelay:.5,visible:o,children:(0,d.jsx)("div",{className:"action-btn comment-action-btn",onClick:r,children:n})})};var p=n(45697),v=n.n(p),y=n(73935),g=n(35552);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=(0,i.lazy)((function(){return Promise.all([n.e(466),n.e(760)]).then(n.bind(n,22760))}));function w(e){var t=e.onSelect,n=b((0,i.useState)(!1),2),r=n[0],a=n[1],o=b((0,i.useState)({left:0,top:0}),2),s=o[0],c=o[1],f=(0,i.useRef)(),m=(0,i.useRef)();function h(e){var t=e.target;(0,l.IY)(t,".emoji-picker")||a(!1)}function p(){v()}function v(){var e=f.current.getBoundingClientRect().left;e+320>=document.documentElement.offsetWidth&&(e-=e+320-document.documentElement.offsetWidth+10);var t=f.current.getBoundingClientRect().top+document.scrollingElement.scrollTop+-426;c({left:e,top:t})}(0,i.useEffect)((function(){return r?(document.documentElement.addEventListener("click",h,!1),window.addEventListener("resize",p,!1)):(document.documentElement.removeEventListener("click",h,!1),window.removeEventListener("resize",p,!1)),function(){document.documentElement.removeEventListener("click",h,!1),window.removeEventListener("resize",p,!1)}}),[r]);var j=function(e){e.stopPropagation(),v(),m.current={width:window.innerWidth,height:window.innerHeight},a(!r)};return(0,d.jsxs)("div",{className:"emoji-btn-wrapper",children:[r?(0,d.jsx)("div",{className:"emoji-btn ".concat(r?"active":""),ref:f,onClick:j,children:(0,d.jsx)(g.O9,{})}):(0,d.jsx)(u.Z,{title:"Emoji",mouseEnterDelay:.5,children:(0,d.jsx)("div",{className:"emoji-btn ".concat(r?"active":""),ref:f,onClick:j,children:(0,d.jsx)(g.O9,{})})}),r&&(0,y.createPortal)((0,d.jsx)("div",{style:{position:"absolute",left:"0",top:"0",width:"100%"},children:(0,d.jsx)("div",{className:"as-emoji-picker",style:{position:"absolute",zIndex:"1000",left:s.left,top:s.top},children:(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)("div",{className:"emoji-loading",children:"Loading Emojis..."}),children:(0,d.jsx)(x,{handleOnSelect:function(e){t(e.native),a(!r)}})})})}),document.body)]})}w.propTypes={onSelect:v().func};const I=w;var S=n(9557);var N={createComment:s.Yr};const O=(0,a.$j)((function(e){return{isCreating:e.comment.isCreating,userList:e.comment.userList}}),N)((function(e){var t=e.onCancel,n=e.itemType,a=e.itemId,o=e.isCreating,s=e.mentionUser,u=e.userList,f=e.createComment,m=e.onCreateCommentFinish,p=e.currentVideoTime,v=(0,i.useRef)();(0,i.useEffect)((function(){if(s){var e={id:s.userID,value:s.userName};setTimeout((function(){v.current.addMention(e)}),100)}}),[s]);var y=(0,i.useMemo)((function(){var e=u.map((function(e){return{id:e.userID,value:e.fullName,avatar:e.userAvatar}}));return e.length>1&&e.unshift({id:"-1",value:"All"}),e}),[u]);return(0,d.jsxs)("div",{className:"comment-input",children:[(0,d.jsx)(S.Z,{ref:v,defaultMentionUsers:s,mentionUsers:y}),(0,d.jsxs)("div",{className:"action-bar",children:[(0,d.jsxs)("div",{className:"action-btns",children:[(0,d.jsx)(I,{onSelect:function(e){v.current.addEmoji(e)}}),(0,d.jsx)(h,{title:"Mention someone",onClick:function(){v.current.addAt()},children:(0,d.jsx)(g.lO,{})})]}),(0,d.jsxs)("div",{className:"comment-btns",children:[!o&&(0,d.jsx)("a",{className:"cancel-btn",onClick:t,children:"Cancel"}),(0,d.jsx)(r.Z,{type:"primary",onClick:function(){var e=v.current.getContent(),t=(0,l.Er)(e);f(n,a,t,"0",s?s.timestamp:p,(function(){m()}))},loading:o,children:n!==c.Z$.video?"Comment":s?"Reply":p?"Comment at "+(0,l.z7)(p):void 0})]})]})]})}));n(37135);var E=n(48889),D=n(18282),A=n(94184),C=n.n(A),T=n(27856),P=n.n(T)().sanitize;function _(e,t){var n=e.comment,r=e.type,i=e.isSelf,a=e.isOwner,o=e.handleSeekTo,s=e.handleReply,u=e.handleDelete,f=a?i?"delete":"delete & reply":i?"delete":"reply",m=C()("comment-item",{new:0!==n.isNew});return(0,d.jsxs)("div",{className:m,ref:t,onAnimationEnd:function(e){e.target.classList.remove("selected-animate")},children:[(0,d.jsxs)("div",{className:"comment-actions",children:[/delete/.test(f)&&(0,d.jsx)("div",{className:"comment-action-btn delete",onClick:function(){var e;e=n.id,E.Z.confirm({title:"Are you sure you want to delete this comment?",content:"",onOk:function(){u(e)},okText:"Delete",okType:"danger"})},children:"Delete"}),/reply/.test(f)&&(0,d.jsx)("div",{className:"comment-action-btn",onClick:function(){s({uid:n.userID,userName:n.userName,userID:n.userID,timestamp:n.timestamp})},children:"Reply"})]}),(0,d.jsx)("div",{className:"avatar",children:(0,d.jsx)(D.Z,{username:n.userName,avatarUrl:n.userAvatar,size:"30"})}),(0,d.jsxs)("div",{className:"content-area",children:[(0,d.jsxs)("div",{className:"name-area",children:[(0,d.jsx)("div",{className:"name",children:n.userName}),r===c.Z$.video&&(0,d.jsxs)("span",{className:"video-time",onClick:function(){o(n.timestamp)},children:["at"," ",(0,d.jsx)("span",{className:"time-text",children:(0,l.z7)(n.timestamp)})]})]}),(0,d.jsx)("div",{className:"content",children:(0,d.jsx)("span",{dangerouslySetInnerHTML:{__html:P(n.content,{ADD_ATTR:["target"]})}})}),(0,d.jsx)("div",{className:"time",children:(0,l.Hu)(n.createTime)})]})]})}const k=(0,i.memo)((0,i.forwardRef)(_));var L=n(59631),R=n(37512),M=n(58415);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V={loadCommentUserList:s.Mj,deleteComment:s.YF,removeCommentMentioned:s.xF},B=(0,a.$j)((function(e,t){return{userinfo:e.user.info,comments:e.comment.comments[t.itemType+t.itemId]||[],userList:e.comment.userList,isUserListLoading:e.comment.isUserListLoading}}),V)((function(e){var t=e.loadCommentUserList,n=e.userinfo,a=e.isOwner,s=e.comments,c=e.isCommentLoading,l=e.currentVideoTime,u=e.onCommentStart,f=e.itemType,m=e.itemId,h=e.shareKey,p=e.height,v=e.handleSeekTo,y=e.deleteComment,b=e.removeCommentMentioned,j=e.propRef,x=e.isInChannel,w=e.userList,I=e.channel,S=e.isUserListLoading,N=e.goToSignIn,E=F((0,i.useState)((function(){return x})),2),D=E[0],A=E[1],C=F((0,i.useState)(null),2),T=C[0],P=C[1],_=(0,i.useRef)(),Z=(0,i.useRef)({}),U=(0,i.useRef)(null);(0,i.useImperativeHandle)(j,(function(){return{scrollTo:H,getIsShowInput:function(){return D}}})),(0,i.useEffect)((function(){t(f,m,h)}),[]),(0,i.useEffect)((function(){var e;return s.forEach((function(e){var t,n;return(t=Z.current)[n=e.id]||(t[n]=(0,i.createRef)())})),s.filter((function(e){return 1===e.isNew})).length>0&&(e=setTimeout((function(){U.current.scrollToIndex(s.length)}),200)),function(){e&&clearTimeout(e)}}),[s.length]);var H=function(e){var t=s.findIndex((function(t){return t.id===e}));U.current.scrollToIndex({index:t,align:"start"}),setTimeout((function(){Z.current[e].classList.add("selected-animate")}),100)},G=(0,i.useCallback)((function(e){n.uid?(P(e),A(!0)):B()}),[n]),V=(0,i.useCallback)((function(e){y(f,m,e)}),[]),B=function(){window.location.href="/signin?redirect="+window.location.href+"&from=comment"},W=s.filter((function(e){return 1===e.isMention}));return(0,d.jsx)("div",{className:"comment-container",style:{height:p},children:c?(0,d.jsx)("div",{className:"comment-loading",children:(0,d.jsx)(L.Z,{})}):(0,d.jsxs)(d.Fragment,{children:[0===s.length?(0,d.jsx)("div",{className:"no-comment",children:(0,d.jsxs)("div",{className:"no-comment-box",children:[(0,d.jsx)("div",{className:"no-comment-pic"}),!S&&(0,d.jsx)(d.Fragment,{children:w.length>0||!x?(0,d.jsx)("div",{className:"no-comment-title",children:"No comments yet."}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"no-comment-desc",children:"Can’t wait to hear other people’s thoughts? Invite people to discuss with you."}),(0,d.jsx)(M.Z,{render:function(e,t,n){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(r.Z,{type:"primary",onClick:t,children:[(0,d.jsx)(g.dt,{}),"invite"]}),(0,d.jsx)(R.Z,{visible:e,channel:I,onCancel:n})]})}})]})})]})}):(0,d.jsxs)(d.Fragment,{children:[W.length>0&&(0,d.jsxs)("div",{className:"mentioned-tip",onClick:function(){var e=W[0].id;H(e),b({itemType:f,itemId:m,id:e})},children:[(0,d.jsx)(g.xR,{}),W.length," ",W.length>1?"comments":"comment"," ","mentioned you"]}),(0,d.jsx)("div",{className:"comment-box",ref:_,children:(0,d.jsx)(o.OO,{style:{height:"100%"},ref:U,className:"virtuoso-box",totalCount:s.length,itemContent:function(e){var t=s[e];return(0,d.jsx)(k,{type:f,ref:function(e){return Z.current[t.id]=e},comment:t,handleSeekTo:v,handleReply:G,handleDelete:V,isSelf:n.uid===t.userID,isOwner:a},t.id)}})})]}),(0,d.jsxs)("div",{className:"send-area",children:[s.length>0&&0===w.length&&x&&(0,d.jsx)(M.Z,{render:function(e,t,n){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"invite-area",onClick:t,children:["Invite people to discuss with you.",(0,d.jsx)(r.Z,{shape:"circle",icon:(0,d.jsx)(g.pF,{}),type:"primary"})]}),(0,d.jsx)(R.Z,{visible:e,channel:I,onCancel:n})]})}}),D?(0,d.jsx)(O,{itemType:f,itemId:m,onCancel:function(){A(!1),P(null)},mentionUser:T,onCreateCommentFinish:function(){A(!1),P(null),setTimeout((function(){U.current.scrollToIndex(s.length)}),200)},currentVideoTime:l,isInChannel:x}):(0,d.jsx)(d.Fragment,{children:n.uid?(0,d.jsx)(r.Z,{type:"primary",size:"large",block:!0,onClick:function(){A(!0),u&&u()},children:"Leave a comment"}):(0,d.jsx)(r.Z,{type:"primary",size:"large",block:!0,onClick:N,children:"Sign in to leave a comment"})})]})]})})}));const W=(0,i.forwardRef)((function(e,t){return(0,d.jsx)(B,U(U({},e),{},{propRef:t}))}))},59631:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(7085),i=(n(21711),n(85893));const a=function(e){var t=e.size;return(0,i.jsx)("div",{className:"container-loading ".concat(t),children:(0,i.jsx)(r.Z,{})})}},45518:(e,t,n)=>{n.d(t,{Z:()=>d});n(94969);var r=n(45777),i=n(67294),a=n(96974),o=n(94184),s=n.n(o),c=n(35552),l=n(85893);function u(e){var t=e.folder,n=e.clickable,i=e.count,o=e.shareKey,u=e.noShareIcon,d=(0,a.s0)(),f=s()("crumb-item",{clickable:n}),m=Math.floor((30*(i-1)+92)/(i-1))+36,h=Math.floor(100/(i-1)),p={maxWidth:"My Items"===t.name?"92px":"calc("+h+"% - "+m+"px)"};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{title:t.name,mouseEnterDelay:.5,children:(0,l.jsxs)("div",{className:f,style:p,onClick:function(){n&&(0===t.folderID?d("/my_items"):d(o?"/s/folder/".concat(t.folderID,"/").concat(o):"/folder/".concat(t.folderID)))},children:[!n&&(0,l.jsxs)("div",{className:"folder-icon",children:[t.isInStarred?(0,l.jsx)(c.wn,{}):(0,l.jsx)(c.RO,{}),!u&&t.shareKey&&(0,l.jsx)("div",{className:"shared-badge",children:(0,l.jsx)(c.Od,{})})]}),t.name]})}),n&&(0,l.jsx)("div",{className:"crumb-sep",children:(0,l.jsx)(c.e0,{})})]})}const d=(0,i.memo)(u)},48417:(e,t,n)=>{n.d(t,{Z:()=>c});n(94969);var r=n(45777),i=n(67294),a=n(85893);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const c=function(e){var t=e.text,n=e.className,s=e.width,c=e.onClick,l=e.isHtml,u=o((0,i.useState)(!1),2),d=u[0],f=u[1],m=(0,i.useRef)();function h(){var e=m.current;e.scrollWidth>e.offsetWidth?f(!0):f(!1)}var p=n?"ellipsis-text "+n:"ellipsis-text";return(0,a.jsx)(r.Z,{title:d?t:"",mouseLeaveDelay:0,mouseEnterDelay:.3,children:l?(0,a.jsx)("span",{className:p,style:{maxWidth:s},ref:m,onClick:c,onMouseEnter:h,dangerouslySetInnerHTML:{__html:t}}):(0,a.jsx)("span",{className:p,style:{maxWidth:s},ref:m,onClick:c,onMouseEnter:h,children:t})})}},39521:(e,t,n)=>{n.d(t,{Z:()=>y});n(38691);var r=n(71577),i=(n(38920),n(32787)),a=(n(94507),n(48086)),o=(n(45623),n(71257)),s=n(38819),c=n(67294),l=n(97474),u=n(93604),d=n(56010),f=n(95207),m=n(35552),h=n(85893);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const y=function(e){var t=e.channel,n=e.workspaceID,v=e.afterInvite,y=p((0,c.useState)(1),2),g=y[0],b=y[1],j=p((0,c.useState)(!1),2),x=j[0],w=j[1],I=p((0,c.useState)(!1),2),S=I[0],N=(I[1],p(o.Z.useForm(),1)[0]),O=p((0,u.Z)(),5),E=O[0],D=O[1],A=O[2],C=O[3],T=O[4],P=(0,d.vA)(g);return(0,h.jsxs)("div",{className:"email-invite-form",children:[S?(0,h.jsxs)("div",{className:"finish-tip",children:[(0,h.jsx)(s.Z,{}),(0,h.jsx)("div",{children:"Invitations has been sent."})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(o.Z,{onFinish:function(e){var r=[];for(var i in e)r.push(e[i]);var o=r.join(",");if(""!==o){w(!0);var s=t?t.id:"",c=n||t.workspaceID;(0,l.d5$)(c,s,o).then((function(){w(!1),a.ZP.success("Invitations have been sent successfully."),N.resetFields(),v&&v()})).catch((function(e){void 0!==e.isOwner&&(T(e.isOwner),D(!0))}))}},name:"email-invite",form:N,children:[P.map((function(e,t){return(0,h.jsx)(o.Z.Item,{name:e,children:(0,h.jsx)(i.Z,{size:"large",type:"email",placeholder:"Email",autoComplete:"chrome-off",name:"email"+t},e)},e)})),(0,h.jsxs)("a",{className:"add-email",onClick:function(){b(g+1)},children:[(0,h.jsx)(m.dt,{})," Add another"]}),(0,h.jsx)(r.Z,{htmlType:"submit",block:!0,loading:x,size:"large",type:"primary",children:"Send invitation"})]}),(0,h.jsx)("div",{className:"invite-link",children:(0,h.jsxs)("a",{onClick:function(){var e="inviteLink";a.ZP.loading({content:"Generating invite link",key:e});var r=t?t.id:"",i=n||t.workspaceID;(0,l.Myt)(i,r).then((function(t){(0,d.zp)(window.location.origin+"/workspace/invite/"+t.inviteKey),a.ZP.success({content:"Invite link has been copied to your clipboard successfully.",key:e})}))},children:[(0,h.jsx)(m.Od,{}),"Get a shareable invite link instead"]})})]}),(0,h.jsx)(f.Z,{visible:E,onCancel:A,isOwner:C,workspaceID:n,type:"memberJoin"})]})}},17662:(e,t,n)=>{n.d(t,{Z:()=>y});n(38691);var r=n(71577),i=(n(35668),n(38648)),a=n(56262),o=n(11506),s=n(67294),c=n(97474),l=n(65497),u=n(84141),d=n(38547),f=n(85893);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=/Edg/.test(window.navigator.userAgent);var v={clickFiveStarAction:l.JF};const y=(0,a.$j)((function(e){return{userinfo:e.user.info,permissions:e.user.permissions}}),v)((function(e){var t=e.userinfo,n=e.permissions,a=e.isInApp,l=e.isFailed,h=e.type,v=e.clickFiveStarAction,y=m((0,s.useState)(!1),2),g=y[0],b=y[1],j=(0,s.useRef)(!1);(0,d.Z)(n.showChromeFiveStar),(0,s.useEffect)((function(){j.current||!0!==n.showChromeFiveStar||!u.Z.isChrome()&&!p||a||"video"===h&&(void 0===l||l)||(D(),j.current=!0)}),[n,l]);var x=function(){N("clickNo"),i.Z.destroy()},w=function(e,t){i.Z.open({key:"fivestar",className:"five-star-promotion",placement:"bottomRight",duration:0,style:{width:435,marginLeft:-80},message:e,description:t,onClose:x})},I=function(){var e=p?"https://microsoftedge.microsoft.com/addons/detail/awesome-screenshot-scre/gpmljinohlbfgmeoaeceoajachkabijo":"https://chrome.google.com/webstore/detail/awesome-screenshot-screen/nlipoenfbbikpbjkfpfillcgkoblgpmj/reviews";window.open(e),N("fivestar"),i.Z.destroy()},S=function(){b(!0),N("feedback"),i.Z.destroy()},N=function(e){switch(e){case"clickNo":(0,c.wWy)();break;case"fivestar":(0,c.GvO)();break;case"feedback":(0,c.Zaq)()}v()},O=function(){w((0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"title",children:[(0,f.jsx)("div",{className:"icon"}),"User Satisfaction Survey"]}),(0,f.jsx)("div",{className:"content",children:"Your review means a lot to us. Would you mind taking a moment to rate the extension in the Web Store?"}),(0,f.jsxs)("div",{className:"btn-area",children:[(0,f.jsx)(r.Z,{style:{width:"236px",marginRight:"20px"},type:"primary",onClick:I,children:"Sure, take me to the Web Store."}),(0,f.jsx)(r.Z,{style:{width:"100px"},onClick:x,children:"No, thanks."})]})]}))},E=function(){w((0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"title",children:[(0,f.jsx)("div",{className:"icon"}),"User Satisfaction Survey"]}),(0,f.jsx)("div",{className:"content",children:"Would you like to report any issues you're experiencing or give us some suggestions so that we can make the extension better for you?"}),(0,f.jsxs)("div",{className:"btn-area",children:[(0,f.jsx)(r.Z,{style:{width:"240px",marginRight:"20px"},type:"primary",onClick:S,children:"Sure, take me to feedback."}),(0,f.jsx)(r.Z,{style:{width:"100px"},onClick:x,children:"No, thanks."})]})]}))},D=function(){w((0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"title",children:[(0,f.jsx)("div",{className:"icon"}),"User Satisfaction Survey"]}),(0,f.jsxs)("div",{className:"content",children:["Hi ",t.fullName,", Are you enjoying Awesome Screenshot?"]}),(0,f.jsxs)("div",{className:"btn-area",children:[(0,f.jsx)(r.Z,{onClick:O,type:"primary",ghost:!0,children:"Yes!"}),(0,f.jsx)(r.Z,{type:"primary",ghost:!0,onClick:E,children:"Not really"})]})]}),(0,f.jsx)(f.Fragment,{}))};return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(o.r,{visible:g,onCancel:function(){b(!1)}})})}))},15574:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(67294),i=n(94184),a=n.n(i),o=(n(70892),n(89112)),s=n(85893);function c(e){var t=a()("item-area",{compact:"compact"===e.type});return(0,s.jsxs)("div",{className:t,children:[e.subTitle&&(0,s.jsx)("div",{className:"subtitle",children:e.subTitle}),(0,s.jsxs)(o.Z,{children:[e.children,(0,s.jsx)("div",{className:"placeholder"}),(0,s.jsx)("div",{className:"placeholder"}),(0,s.jsx)("div",{className:"placeholder"})]})]})}const l=(0,r.memo)(c)},89112:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(67294),i=n(85893);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const s=function(e){var t=a((0,r.useState)("small"),2),n=t[0],o=t[1],s=(0,r.useRef)();function c(){var e=document.querySelector(".channel-grid-item")||document.querySelector(".trash-item.item")||document.querySelector(".shared-grid-item")||document.querySelector(".grid-item");if(e){var t=e.offsetWidth;o(t<320?"small":t>320&&t<330?"medium":"large")}}(0,r.useEffect)((function(){new ResizeObserver((function(){c()})).observe(s.current)}),[]),(0,r.useEffect)((function(){c()}),[e.children]);var l="item-box grid-box ".concat(n);return(0,i.jsx)("div",{className:l,ref:s,children:e.children})}},56244:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(85893);const i=function(){return(0,r.jsxs)("div",{className:"item-detail-skeleton",children:[(0,r.jsxs)("div",{className:"item-detail-skeleton-item-container",children:[(0,r.jsx)("div",{className:"item-detail-skeleton-item",children:(0,r.jsx)("div",{className:"item-detail-skeleton-item-box"})}),(0,r.jsx)("div",{className:"item-detail-skeleton-sidebar"})]}),(0,r.jsxs)("div",{className:"item-detail-skeleton-title",children:[(0,r.jsx)("div",{className:"item-detail-skeleton-title-inner"}),(0,r.jsxs)("div",{className:"item-detail-skeleton-title-extra",children:[(0,r.jsx)("div",{className:"item-detail-skeletion-avatar"}),(0,r.jsx)("div",{className:"item-detail-skeletion-username"})]})]})]})}},28045:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(67294),i=n(56262),a=n(93878),o=n(21807),s=n(94184),c=n.n(s),l=n(26),u=n(85893);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m={renameImage:a.I5,renameVideo:o.mU,renameItemInChannel:l.jI};const h=(0,i.$j)(null,m)((function(e){var t=e.item,n=e.renameImage,i=e.renameVideo,a=e.renameItemInChannel,o=d((0,r.useState)(!1),2),s=o[0],l=o[1],f=d((0,r.useState)(t.title),2),m=f[0],h=f[1],p=(0,r.useRef)(null),v=(0,r.useRef)(null);(0,r.useEffect)((function(){h(t.title)}),[t.title]);var y=c()("item-detail-title",{active:s});return(0,u.jsxs)("div",{className:y,ref:p,children:[(0,u.jsxs)("pre",{children:[(0,u.jsx)("span",{children:m}),(0,u.jsx)("br",{})]}),(0,u.jsx)("textarea",{spellCheck:"false",maxLength:100,ref:v,onInput:function(e){h(e.target.value)},onFocus:function(){l(!0),v.current.select()},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),v.current.blur())},onBlur:function(){l(!1);var e=v.current.value;e!==t.title&&(t.channel?a(t,e):"video"===t.itemType?i(t.id,e):n({id:t.id,name:e}))},value:m})]})}))},34979:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(94184),i=n.n(r),a=n(67294),o=n(85893),s=Array.from({length:5},(function(e,t){return t}));function c(e){var t=e.size,n=e.isShare,r=i()("item-skeleton-item",{compact:"compact"===t,shared:n});return(0,o.jsx)(o.Fragment,{children:s.map((function(e,i){return(0,o.jsx)("div",{className:r,children:"compact"!==t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"thumbnail"}),(0,o.jsxs)("div",{className:"info",children:[(0,o.jsx)("div",{className:"name"}),(0,o.jsx)("div",{className:"extra"}),n&&(0,o.jsx)("div",{className:"skeleton-avatar"})]})]})},i)}))})}const l=(0,a.memo)(c)},5446:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(67294),i=n(85893);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const s=function(){var e=a((0,r.useState)(!1),2);return e[0],e[1],(0,r.useEffect)((function(){})),(0,i.jsx)("div",{className:"loading-wrapper",children:(0,i.jsx)("div",{className:"logo"})})}},6137:(e,t,n)=>{n.d(t,{Z:()=>u});n(37135);var r=n(48889),i=n(67294),a=n(97474),o=n(35552),s=n(85893);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){var t=c((0,i.useState)(!1),2),n=t[0],l=t[1];return(0,s.jsx)(r.Z,{title:"Confirm",visible:e.visible,onOk:function(){l(!0),(0,a.oH9)("paypal").then((function(t){l(!1),e.handleCancelPlanSuccess()}),(function(e){l(!1),message.error(e.toString())}))},okText:"OK, unsbscribe",okType:"danger",confirmLoading:n,cancelText:"Cancel",onCancel:e.handleCancel,className:"cancel-plan-modal",closeIcon:(0,s.jsx)(o.Tw,{style:{fontSize:"12px"}}),children:(0,s.jsx)("p",{children:"You've paid our personal plan through Paypal. If you want to choose this plan, you need to cancel your current plan and pay through credit card."})})}},26803:(e,t,n)=>{n.d(t,{Z:()=>u});n(94969);var r=n(45777),i=(n(38691),n(71577)),a=n(67294),o=n(35552),s=n(85893);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const u=function(e){var t=e.onClick,n=c((0,a.useState)(!1),2),l=n[0],u=n[1];return(0,s.jsx)(r.Z,{title:"Copied!",visible:l,children:(0,s.jsxs)(i.Z,{className:"copy-btn",onClick:function(){u(!0),t(),setTimeout((function(){u(!1)}),1e3)},children:[(0,s.jsx)(o.TI,{}),"Copy"]})})}},37512:(e,t,n)=>{n.d(t,{Z:()=>k});n(38691);var r=n(71577),i=(n(38920),n(32787)),a=(n(94507),n(48086)),o=n(56262),s=n(51889),c=n(98050),l=n(26),u=n(67294),d=n(59631),f=n(97474),m=n(35552),h=n(23279),p=n.n(h),v=n(76570),y=n(18282),g=n(85893);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x={loadWorkspaceMember:c.nI,addMemberFromWorkspace:l.ri};const w=(0,o.$j)((function(e){return{members:e.workspace.workspaceAllMembers,isLoading:e.workspace.isLoadingAllMembers,channelMembers:e.channel.members}}),x)((function(e){var t=e.members,n=e.channelMembers,a=e.isLoading,o=e.channel,s=e.addMemberFromWorkspace,c=b((0,u.useState)(""),2),l=c[0],f=c[1],h=p()((function(e){f(e)}),500),j=t.filter((function(e){return function(e){for(var t=0;t<n.length;t++)if(n[t].userID===e)return!1;return!0}(e.userID)})),x=j.filter((function(e){return-1!==e.userInfo.fullName.indexOf(l)||-1!==e.userInfo.mail.indexOf(l)})),w=l.length?x:j;return(0,g.jsx)("div",{className:"invite-workspace-member-list",children:a?(0,g.jsx)(d.Z,{}):(0,g.jsx)(g.Fragment,{children:0===j.length?(0,g.jsxs)("div",{className:"no-member",children:[(0,g.jsx)("div",{children:(0,g.jsx)(m.tL,{})}),(0,g.jsx)("div",{className:"no-member-text",children:"All members are in this channel."})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"search-bar",children:(0,g.jsx)(i.Z,{prefix:(0,g.jsx)(v.Z,{}),placeholder:"Search",className:"search-input",onChange:function(e){h(e.target.value)}})}),(0,g.jsx)("div",{className:"list-container",children:w.map((function(e){return(0,g.jsxs)("div",{className:"invite-member-item",children:[(0,g.jsx)("div",{className:"avatar-area",children:(0,g.jsx)(y.Z,{username:e.userInfo.fullName,size:36})}),(0,g.jsxs)("div",{className:"info",children:[(0,g.jsx)("div",{className:"name",children:e.userInfo.fullName}),(0,g.jsx)("div",{className:"email",children:e.userInfo.mail})]}),(0,g.jsx)("div",{className:"action-area",children:(0,g.jsx)(r.Z,{size:"small",onClick:function(){var t;t=e.userID,s(o.workspaceID,o.id,t+"")},children:"Add"})})]},e.userID)}))})]})})})}));var I=n(56010),S=n(26803),N=n(95207),O=n(93604);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P={loadWorkspaceMember:c.nI,addMemberFromWorkspace:l.ri},_=(0,o.$j)((function(e){return{members:e.workspace.workspaceAllMembers,isLoading:e.workspace.isLoadingAllMembers,channelMembers:e.channel.members}}),P)((function(e){var t=e.channel,n=e.isLoading,o=e.loadWorkspaceMember,s=C((0,u.useState)(!1),2),c=s[0],l=s[1],h=C((0,u.useState)(!1),2),p=h[0],v=h[1],y=C((0,u.useState)(""),2),b=y[0],j=y[1],x=C((0,O.Z)(),5),E=x[0],D=x[1],A=x[2],T=x[3],P=x[4];return(0,u.useEffect)((function(){o(t.workspaceID);var e=t.id,n=t.workspaceID;(0,f.Myt)(n,e).then((function(e){l(window.location.origin+"/workspace/invite/"+e.inviteKey)}))}),[]),(0,g.jsxs)("div",{className:"channel-invite-panel",children:[(0,g.jsx)("div",{className:"title",children:"Add Members"}),(0,g.jsx)("div",{className:"content",children:c&&!n?(0,g.jsxs)("div",{className:"main",children:[(0,g.jsx)("div",{className:"subtitle",children:"Invite by link"}),(0,g.jsxs)("div",{className:"link-invite",children:[(0,g.jsx)(m.Od,{}),(0,g.jsx)("div",{className:"link-text",children:c}),(0,g.jsx)(S.Z,{onClick:function(){(0,I.zp)(c)}})]}),(0,g.jsx)("div",{className:"subtitle",children:"Add from workspace"}),(0,g.jsx)(w,{channel:t}),(0,g.jsxs)("div",{className:"email-invite",children:[(0,g.jsx)(i.Z,{bordered:!1,value:b,onChange:function(e){j(e.target.value)},placeholder:"Not listed above? Invite by email address...",type:"email"}),(0,g.jsx)(r.Z,{loading:p,type:"primary",onClick:function(){var e=t?t.id:"",n=t.workspaceID;(0,f.d5$)(n,e,b).then((function(){v(!1),j(""),a.ZP.success("Invitations have been sent successfully.")})).catch((function(e){void 0!==e.isOwner&&(P(e.isOwner),D(!0))}))},children:"Send invitation"})]})]}):(0,g.jsx)(d.Z,{})}),(0,g.jsx)(N.Z,{visible:E,onCancel:A,isOwner:T,workspaceID:t.workspaceID,type:"memberJoin"})]})}));const k=function(e){return(0,g.jsx)(s.Z,{visible:e.visible,onCancel:e.onCancel,width:500,children:(0,g.jsx)(_,D(D({},e),{},{closeModal:e.onCancel}))})}},51889:(e,t,n)=>{n.d(t,{Z:()=>h});n(37135);var r=n(48889),i=n(94184),a=n.n(i),o=n(45697),s=n.n(o),c=n(35552),l=n(85893);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){return(0,l.jsx)(r.Z,d(d({},e),{},{footer:null,maskClosable:!1,destroyOnClose:!0,className:a()("common-modal",e.className),width:e.width||456,closeIcon:(0,l.jsx)(c.Tw,{style:{fontSize:"12px"}}),children:e.children}))};m.propTypes={visible:s().bool.isRequired,onCancel:s().func.isRequired};const h=m},883:(e,t,n)=>{n.d(t,{Z:()=>b});n(38691);var r=n(71577),i=(n(45623),n(71257)),a=(n(38920),n(32787)),o=n(67294),s=n(56262),c=n(96974),l=n(98050),u=n(51889),d=n(85893);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y={createChannel:l.mi},g=(0,s.$j)((function(e){return{isCreating:e.workspace.isCreatingChannel}}),y)((function(e){var t=e.workspaceId,n=e.createChannel,s=e.isCreatingChannel,l=e.closeModal,u=e.noRedirect,f=p((0,o.useState)(!0),2),m=f[0],h=f[1],v=(0,o.useRef)(),y=(0,c.s0)();return(0,o.useEffect)((function(){v.current.focus()}),[]),(0,d.jsxs)("div",{className:"create-channel-panel",children:[(0,d.jsx)("div",{className:"title",children:"Create a Channel"}),(0,d.jsx)("div",{className:"modal-desc",children:"Channels are best when organized around a project or a topic"}),(0,d.jsxs)(i.Z,{onFinish:function(e){var r=e.channelName,i=e.channelDesc;n(t,r,i,(function(e){u||y("/workspace/"+t+"/"+e.id)})),l()},onValuesChange:function(e,t){t.channelName&&t.channelName.length?m&&h(!1):m||h(!0)},children:[(0,d.jsxs)("div",{className:"content",children:[(0,d.jsx)("div",{className:"label",children:"Name"}),(0,d.jsx)(i.Z.Item,{name:"channelName",children:(0,d.jsx)(a.Z,{size:"large",autoComplete:"off",ref:v,placeholder:"e.g. Product Research/ New Year Planning"})}),(0,d.jsx)("div",{className:"input-tip",children:"What do your team plan to work on?"}),(0,d.jsxs)("div",{className:"label",children:["Description ",(0,d.jsx)("span",{children:"(optional)"})]}),(0,d.jsx)(i.Z.Item,{name:"channelDesc",children:(0,d.jsx)(a.Z.TextArea,{autoSize:{minRows:4}})}),(0,d.jsx)("div",{className:"input-tip",children:"What’s this channel about?"})]}),(0,d.jsxs)("div",{className:"btn-area",children:[(0,d.jsx)(r.Z,{onClick:l,children:"Cancel"}),(0,d.jsx)(r.Z,{type:"primary",loading:s,htmlType:"submit",disabled:m,children:"Create"})]})]})]})}));const b=function(e){return(0,d.jsx)(u.Z,{visible:e.visible,onCancel:e.onCancel,children:(0,d.jsx)(g,m(m({},e),{},{closeModal:e.onCancel}))})}},46924:(e,t,n)=>{n.d(t,{Z:()=>b});var r=n(51889),i=(n(38691),n(71577)),a=(n(38920),n(32787)),o=(n(94507),n(48086)),s=n(67294),c=n(56262),l=n(20495),u=n(48417),d=n(85893);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h={createFolder:l.L6};const p=(0,c.$j)(null,h)((function(e){var t=f((0,s.useState)(""),2),n=t[0],r=t[1],c=(0,s.useRef)(null);(0,s.useEffect)((function(){var e=setTimeout((function(){c.current.focus()}),100);return function(){clearTimeout(e)}}),[]);var l=function(){if(n.length>60)o.ZP.error("The folder name is too long!");else{var t=e.selectedFolder?e.selectedFolder.folderID:e.folderID;e.createFolder(n.trim(),t,e.afterCreate),e.closeModal()}};return(0,d.jsxs)("div",{className:"create-folder-panel",children:[(0,d.jsx)("div",{className:"title",children:"New folder"}),(0,d.jsxs)("div",{className:"content",children:[e.selectedFolder?(0,d.jsxs)("div",{className:"sub-folder-tip",children:["Create a new folder in"," ",(0,d.jsx)(u.Z,{text:e.selectedFolder.title,width:200})]}):null,(0,d.jsx)(a.Z,{size:"large",placeholder:"Enter a folder name",onChange:function(e){r(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&l()},ref:c})]}),(0,d.jsxs)("div",{className:"btn-area",children:[(0,d.jsx)(i.Z,{onClick:e.closeModal,children:"Cancel"}),(0,d.jsx)(i.Z,{type:"primary",disabled:!n.trim(),onClick:l,children:"Create"})]})]})}));function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=function(e){return(0,d.jsx)(r.Z,{visible:e.visible,onCancel:e.onCancel,children:(0,d.jsx)(p,y(y({},e),{},{closeModal:e.onCancel}))})}},11506:(e,t,n)=>{n.d(t,{r:()=>O});n(4895);var r=n(9676),i=(n(94969),n(45777)),a=(n(38920),n(32787)),o=(n(45623),n(71257)),s=(n(38691),n(71577)),c=(n(94507),n(48086)),l=(n(6212),n(34041)),u=n(38819),d=n(1870),f=n(31795),m=n.n(f),h=n(67294),p=n(56262),v=n(97474),y=n(16514),g=n(51889),b=n(85893);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=l.Z.Option;function O(e){return(0,b.jsx)(g.Z,{visible:e.visible,onCancel:e.onCancel,children:(0,b.jsx)(E,I(I({},e),{},{closeModal:e.onCancel}))})}var E=(0,p.$j)((function(e){return{userinfo:e.user.info}}))((function(e){var t=j((0,h.useState)(!1),2),n=t[0],f=t[1],p=j((0,h.useState)(!1),2),g=p[0],x=p[1],w=j((0,h.useState)(e.type?e.type:"Video"),2),I=w[0],S=w[1];return(0,b.jsxs)("div",{className:"feedback-panel",children:[(0,b.jsx)("div",{className:"title",children:"Send Feedback"}),(0,b.jsx)("div",{className:"content",children:g?(0,b.jsxs)("div",{className:"sent-message",children:[(0,b.jsx)("div",{children:(0,b.jsx)(u.Z,{})}),(0,b.jsx)("div",{className:"title",children:"Thank you"}),(0,b.jsx)("div",{className:"content",children:"The form was submitted successfully. We will contact you shortly."}),(0,b.jsx)(s.Z,{type:"primary",onClick:function(){x(!1)},children:"Submit another issue"})]}):(0,b.jsxs)(o.Z,{onFinish:function(t){var n={};n.Browser||(n.Browser=m().name+" "+m().version),n.OS||(n.OS=m().os.toString()),n["Screen Size"]||(n["Screen Size"]=window.screen.width+"x"+window.screen.height);var r=!0===t.isSendInfo||void 0===t.isSendInfo?function(e,t){var n="";for(var r in n+=e+"<br/><br/><br/><hr>",t)n+="<b>"+r+"</b>: "+t[r]+"<br/>";return n}(t.content,n):t.content,i={email:t.email||e.userinfo.mail,name:e.userinfo.fullName,subject:"[".concat(t.type,"]"),content:r};f(!0),(0,v.hz1)(i).then((function(){f(!1),x(!0)})).catch((function(){f(!1),c.ZP.error("Submission failed. Please retry or copy summary and details to send an email to care@awesomescreenshot.com.")}))},children:[(0,b.jsx)("div",{className:"label",children:"Issue Type"}),(0,b.jsx)(o.Z.Item,{name:"type",initialValue:I,rules:[{required:!0}],children:(0,b.jsx)(l.Z,{onChange:function(e){S(e)},children:y.WM.map((function(e){return(0,b.jsx)(N,{value:e,children:e},e)}))})}),(0,b.jsx)("div",{className:"label",children:"Bug Summary"}),(0,b.jsx)("div",{className:"label-tip",children:"Let us know what happened in detail."}),(0,b.jsx)(o.Z.Item,{name:"content",rules:[{required:!0,message:"Please input some details"}],children:(0,b.jsx)(a.Z.TextArea,{autoSize:{minRows:5}})}),e.userinfo&&/privaterelay.appleid.com/.test(e.userinfo.mail)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"label",children:"Your Email Address"}),(0,b.jsx)("div",{className:"label-tip",children:"Enter an email address to receive updates on the issue."}),(0,b.jsx)(o.Z.Item,{name:"email",rules:[{required:!0,message:"Please input your email"},{type:"email",message:"Please input a valid email"}],children:(0,b.jsx)(a.Z,{})})]}),(0,b.jsx)(o.Z.Item,{name:"isSendInfo",valuePropName:"checked",initialValue:!0,children:(0,b.jsxs)(r.Z,{children:["Include OS and browser info to help developers debug errors"," ",(0,b.jsx)(i.Z,{title:"Specifically, version number of your OS, browser, extension, and screen size will be included. ",children:(0,b.jsx)(d.Z,{})})]})}),(0,b.jsxs)("div",{className:"btn-area",children:[(0,b.jsx)(s.Z,{onClick:e.closeModal,children:"Cancel"}),(0,b.jsx)(s.Z,{type:"primary",htmlType:"submit",loading:n,size:"large",children:"Submit"})]})]})})]})}))},24244:(e,t,n)=>{n.d(t,{Z:()=>te});n(38691);var r=n(71577),i=(n(6212),n(34041)),a=n(67294),o=n(56262),s=n(96974),c=n(98050),l=n(38547),u=n(59631),d=n(51889),f=(n(4895),n(9676)),m=(n(10602),n(14277)),h=n(35552),p=n(94184),v=n.n(p),y=n(26),g=n(95207),b=n(93604),j=n(883),x=n(97474),w=n(9557),I=n(85893);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){var n=e.channelID,r=e.workspaceID,i=(0,a.useRef)(),o=S((0,a.useState)([]),2),s=o[0],c=o[1];return(0,a.useImperativeHandle)(t,(function(){return{getContent:i.current.getContent}})),(0,a.useEffect)((function(){r&&n&&(0,x.FbR)(r,n).then((function(e){e.members&&c(e.members.map((function(e){return{id:e.userInfo.uid,value:e.userInfo.fullName,avatar:e.userInfo.avatarURL}})))}))}),[r,n]),(0,I.jsx)("div",{className:"move-to-comment-box",children:(0,I.jsx)(w.Z,{ref:i,defaultMentionUsers:[],mentionUsers:s})})}const E=(0,a.forwardRef)(O);var D=n(56010),A=n(8690);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P={moveToChannel:y.sK,createComment:A.Yr};const _=(0,o.$j)((function(e){return{workspaceHash:e.workspace.myWorkspaceHash,channelHash:e.workspace.channelHash}}),P)((function(e){var t=e.workspaceID,n=e.workspaceHash,i=e.moveToChannel,o=e.createComment,s=e.items,c=e.closeModal,l=e.channelHash,u=C((0,a.useState)(null),2),d=u[0],p=u[1],y=C((0,a.useState)(null),2),x=y[0],w=y[1],S=C((0,a.useState)(!1),2),N=S[0],O=S[1],A=C((0,a.useState)(!1),2),T=A[0],P=A[1],_=C((0,b.Z)(),5),k=_[0],L=_[1],R=_[2],M=_[3],Z=_[4];(0,a.useEffect)((function(){O(!1)}),[t]);var U=(0,a.useRef)(),H=n[t],F=H.channels.filter((function(e){return!0===l[e].isMember}));return(0,I.jsxs)("div",{className:"channel-select",children:[(0,I.jsxs)("div",{className:"move-select",children:[(0,I.jsx)("div",{className:"select-container",children:F.length>0?F.map((function(e){var t=l[e],n=v()("channel-item",{selected:d&&d.id===t.id});return(0,I.jsxs)("div",{className:n,onClick:function(){!function(e){p(l[e]),w(e)}(e)},children:[(0,I.jsx)(h.MC,{}),t.name]},e)})):(0,I.jsx)(m.Z,{image:m.Z.PRESENTED_IMAGE_SIMPLE,description:"No channels"})}),(0,I.jsx)("div",{className:"folder-btn-area",children:(0,I.jsxs)("a",{onClick:function(){P(!0)},children:[" ",(0,I.jsx)(h.dt,{})," Create a channel"]})})]}),x&&(0,I.jsxs)("div",{className:"notify-others",children:[(0,I.jsx)(f.Z,{checked:N,onChange:function(e){O(e.target.checked)},children:"Notify others"}),N&&(0,I.jsx)("div",{className:"notify-box",children:(0,I.jsx)(E,{ref:U,workspaceID:t,channelID:x})})]}),(0,I.jsxs)("div",{className:"btn-area",children:[(0,I.jsx)(r.Z,{onClick:c,children:"Cancel"}),(0,I.jsxs)(r.Z,{type:"primary",className:"",disabled:function(){if(null===d)return!0;for(var e=0;e<s.length;e++)if(d.id+d.workspaceID===s[e].channelID+s[e].workspaceID||s[e].channel&&d.id+d.workspaceID===s[e].channel.id+s[e].channel.workspaceID)return!0;return!1}(),onClick:function(){var e=H.id,t=d.id;if(i(e,t,s,(function(e){Z(e),L(!0)}),(function(){c()})),N&&U.current.getContent()){var n=(0,D.Er)(U.current.getContent());o(s[0].itemType,s[0].id,n,"0")}},children:[(0,I.jsx)("span",{className:"move-to-label",style:d?{marginRight:"8px"}:null,children:"Move to"}),d?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(h.MC,{}),(0,I.jsx)("span",{className:"btn-folder-name",children:d.name})]}):""]})]}),(0,I.jsx)(g.Z,{visible:k,onCancel:R,isOwner:M,workspaceID:H.id,type:"itemAdd",channelID:x}),(0,I.jsx)(j.Z,{workspaceId:H.id,visible:T,onCancel:function(){P(!1)},noRedirect:!0})]})}));n(88135);var k=n(82363),L=n(20495),R=n(16928),M=n(46924);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B=k.Z.DirectoryTree;var W={loadFolders:L.PW,moveFolder:L.J1};const z=(0,o.$j)((function(e){return{isLoading:e.folder.isLoading,treeData:(0,R.D)(e),folders:e.folder.folders}}),W)((function(e){var t=e.items,n=e.closeModal,i=e.treeData,o=e.isLoading,s=e.loadFolders,c=e.moveFolder,l=e.folders,d=F((0,a.useState)(null),2),f=d[0],m=d[1],p=F((0,a.useState)(!1),2),v=p[0],y=p[1],g=F((0,a.useState)([]),2),b=g[0],j=g[1],x=F((0,a.useState)([]),2),w=x[0],S=x[1],N=(0,a.useRef)();(0,a.useEffect)((function(){i[1]||s()}),[]),(0,a.useEffect)((function(){if(N.current&&_(N.current,"0",i)){var e=_(N.current,"0",i);S((function(t){return[].concat(H(t),[e.parentKey])})),j([e.key]),m({title:e.title,folderID:N.current}),N.current=""}}),[i]);var O=function(e,t){var n={r:!0};return E(e,t,n),n.r},E=function e(t,n,r){t===n?r.r=!1:l[n]&&"0"!==l[n].parentID&&e(t,l[n].parentID,r)},A=i.slice();A[0]&&(A[0]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i[0]),A[0].icon=(0,I.jsx)(h.M,{}));var C="",T="",P=function e(t,n,r){for(var i=0;i<r.length;i++)r[i].folderID===t?(C=r[i].key,T=n):r[i].children&&e(t,r[i].key,r[i].children)},_=function(e,t,n){var r=null;return function e(t,n,i){for(var a=0;a<i.length;a++)i[a].folderID===t?r={key:i[a].key,parentKey:n,title:i[a].title}:i[a].children&&e(t,i[a].key,i[a].children)}(e,t,n),r},k=function(){if(1===t.length){var e="folder"===t[0].itemType?t[0].parentID:t[0].folderID;return P(e,"0",A),"0"===T?{key:C,parentKey:""}:{key:C,parentKey:T}}return{key:"",parentKey:""}}();return(0,I.jsxs)("div",{className:"folder-select",children:[o?(0,I.jsx)(u.Z,{}):(0,I.jsxs)("div",{className:"move-select",children:[(0,I.jsx)("div",{className:"select-container",children:(0,I.jsx)(B,{expandAction:"doubleClick",autoExpandParent:!0,treeData:A,height:274,expandedKeys:w,onExpand:function(e,t){t.expanded,S(e)},selectedKeys:b,onSelect:function(e,t){j(e),m({title:t.node.title,folderID:t.node.folderID})},defaultSelectedKeys:[k.key],defaultExpandedKeys:[k.parentKey]})}),(0,I.jsx)("div",{className:"folder-btn-area",children:(0,I.jsxs)("a",{onClick:function(){y(!0)},children:[" ",(0,I.jsx)(h.dt,{})," Create a new folder"," ",f?(0,I.jsxs)(I.Fragment,{children:["in ",(0,I.jsx)("b",{children:f.title})]}):null]})})]}),(0,I.jsxs)("div",{className:"btn-area",children:[(0,I.jsx)(r.Z,{onClick:n,children:"Cancel"}),(0,I.jsxs)(r.Z,{type:"primary",className:"",disabled:!function(){var e=!0;if(f){for(var n=0;n<t.length;n++)e="folder"===t[n].itemType?e&&O(t[n].id,f.folderID):e&&t[n].folderID!==f.folderID;return e}e=!1}(),onClick:function(){null!==f&&t.length&&(c(f.folderID,t),n(),(0,D.I1)("move to folder",{event_category:"folder"}))},children:[(0,I.jsx)("span",{className:"move-to-label",style:f?{marginRight:"8px"}:null,children:"Move to"}),f?(0,I.jsxs)(I.Fragment,{children:["My Items"===f.title?(0,I.jsx)(h.M,{}):(0,I.jsx)(h.RO,{}),(0,I.jsx)("span",{className:"btn-folder-name",children:f.title})," "]}):""]})]}),(0,I.jsx)(M.Z,{visible:v,onCancel:function(){y(!1)},selectedFolder:f,afterCreate:function(e){N.current=e},folderID:"0"})]})}));function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q=i.Z.Option;var X={loadWorkspaces:c.Pf},ee=(0,o.$j)((function(e){return{workspaceIDList:e.workspace.myWorkspaceIDList,workspaceHash:e.workspace.myWorkspaceHash,isLoading:e.workspace.isLoading}}),X)((function(e){var t=e.items,n=e.closeModal,o=e.workspaceIDList,c=e.workspaceHash,d=e.isLoading,f=e.loadWorkspaces,m=e.des,h=Y((0,a.useState)((function(){return"channel"===m?o[0]:"personal"})),2),p=h[0],v=h[1],y=Y((0,a.useState)((function(){return"channel"===m?c[o[0]]:null})),2),g=y[0],b=y[1],j=(0,l.Z)(d),x=(0,s.s0)();function w(){return t.filter((function(e){return"folder"===e.itemType})).length>0}return(0,a.useEffect)((function(){f()}),[]),(0,a.useEffect)((function(){j&&!d&&("channel"===m&&v(o[0]),b(c[o[0]]))}),[d,o,c]),(0,I.jsxs)("div",{className:"move-to-panel",children:[(0,I.jsx)("div",{className:"title",children:"Move to"}),(0,I.jsx)("div",{className:"content",children:d?(0,I.jsx)(u.Z,{}):(0,I.jsx)(I.Fragment,{children:g&&o.length>0||"channel"!==m?(0,I.jsxs)(I.Fragment,{children:[!w()&&"folder"!==m&&(0,I.jsxs)("div",{className:"destination-select",children:[(0,I.jsx)("div",{className:"select-label",children:"both"===m?"Personal & Workspaces":"Workspaces"}),(0,I.jsxs)(i.Z,{style:{width:"100%",textAlign:"left"},size:"large",value:p,onChange:function(e){v(e),"personal"!==e&&b(c[e])},children:["channel"!==m&&(0,I.jsx)(Q,{value:"personal",children:"Personal"}),!w()&&(0,I.jsx)(I.Fragment,{children:o.map((function(e){return(0,I.jsx)(Q,{value:e,children:c[e].name},e)}))})]})]}),(0,I.jsxs)("div",{className:"box",children:[(0,I.jsx)("div",{className:"select-label",children:"personal"===p?"Folders":"Channels"}),"personal"===p?(0,I.jsx)(z,{items:t,closeModal:n}):(0,I.jsx)(_,{workspaceID:g?g.id:null,closeModal:n,items:t})]})]}):(0,I.jsxs)("div",{className:"empty-workspace",children:[(0,I.jsx)("p",{children:"You don't have a workspace yet."}),(0,I.jsx)(r.Z,{type:"primary",onClick:function(){x("/workspace/create")},children:"Go to create a workspace"})]})})})]})}));const te=function(e){return(0,I.jsx)(d.Z,{visible:e.visible,onCancel:e.onCancel,children:(0,I.jsx)(ee,$($({},e),{},{closeModal:e.onCancel}))})}},75541:(e,t,n)=>{n.d(t,{Z:()=>l});n(37135);var r=n(48889),i=(n(38691),n(71577)),a=n(38819),o=n(73218),s=n(35552),c=n(85893);function l(e){var t="success"===e.type;return(0,c.jsxs)(r.Z,{visible:e.visible,destroyOnClose:!0,onCancel:e.handleCancel,className:"payment-modal",footer:null,closable:!1,centered:!0,closeIcon:(0,c.jsx)(s.Tw,{style:{fontSize:"12px"}}),children:[t?(0,c.jsx)(a.Z,{className:t?"success":""}):(0,c.jsx)(o.Z,{}),(0,c.jsx)("div",{className:"content",children:t?"Payment Successful!":"Payment Failed."}),(0,c.jsx)(i.Z,{className:"btn",size:"large",block:!0,type:"primary",onClick:e.handleCancel,children:t?"Got it!":"Retry"})]})}},25894:(e,t,n)=>{n.d(t,{Z:()=>A});n(37135);var r=n(48889),i=n(35552),a=(n(79299),n(11382)),o=(n(38691),n(71577)),s=(n(3381),n(16114)),c=(n(5e3),n(28682)),l=(n(37043),n(47933)),u=n(7085),d=n(57254),f=n(27484),m=n.n(f),h=n(67294),p=n(56010),v=(n(78065),n(76772)),y=n(86664),g=n(85893);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const x=function(e){var t=e.amount,n=e.handleApplePay,r=e.handleApplePayFallback,i=e.planText,a=(0,y.useStripe)(),o=b((0,h.useState)(null),2),s=o[0],c=o[1],l=b((0,h.useState)(null),2),u=l[0];l[1];return(0,h.useEffect)((function(){if(a){var e=a.paymentRequest({country:"US",currency:"usd",total:{label:i,amount:100*t},requestPayerName:!0,requestPayerEmail:!0});e.canMakePayment().then((function(t){c(e)})),e.on("paymentmethod",(function(e){var t=e.paymentMethod;t&&n(t),e.complete("success")}))}}),[a]),(0,g.jsxs)("div",{className:"apple-checkout-form",children:[(!u||!u.applePay)&&(0,g.jsx)(v.Z,{message:"Add cards to Apple Pay to make purchases on this Mac.",showIcon:!0,description:(0,g.jsxs)(g.Fragment,{children:["You can add cards to Apple Pay in System Preferences.",(0,g.jsx)("br",{})," Or you can try"," ",(0,g.jsx)("a",{onClick:function(){r()},children:"other payment methods"}),"."]}),type:"warning"}),(0,g.jsx)("div",{className:"apple-pay-btn",onClick:function(){s.show()}})]})};function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=l.ZP.Group;function N(e){var t=e.upgradeCostInfo,n=w((0,h.useState)("Stripe"),2),r=n[0],i=n[1],f=w((0,h.useState)(!1),2),v=f[0],y=f[1],b=e.isForceYear?"year":e.billingPeriod;(0,h.useEffect)((function(){t&&"Both"!==t.PaymentMethod&&i(t.PaymentMethod)}),[t]);var j=function(t){e.handleBillingPeriodChange(t)},I=function(e){i(e.target.value)},N=(0,p.IT)();return(0,g.jsxs)("div",{className:"plan-overview-panel",children:[e.isShowOverviewLoading&&(0,g.jsx)("div",{className:"msg-wrapper",children:(0,g.jsxs)("div",{className:"msg",children:[(0,g.jsx)("div",{className:"icon",children:(0,g.jsx)(u.Z,{})}),(0,g.jsx)("div",{className:"info",children:"Processing your payment, please wait."})]})}),(0,g.jsx)("div",{className:"title",children:"Billing Overview"}),"basic"===e.currentChoose&&N&&(0,g.jsxs)("div",{className:"tip",children:["Reminder: Basic plan cannot unlock the limit on video access. Please upgrade to ",(0,g.jsx)("b",{children:"Professional"})," to gain unlimited access."]}),t?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"section",children:(0,g.jsxs)("div",{className:"section-wrapper bill-period",children:[(0,g.jsxs)("div",{className:"period-switch",children:[(0,g.jsx)(s.Z,{overlay:(0,g.jsxs)(c.Z,{children:[(0,g.jsxs)(c.Z.Item,{onClick:function(){j("month")},disabled:e.isForceYear,children:["Monthly - $",t.SubscriptionPriceMonthly," / month"]}),(0,g.jsxs)(c.Z.Item,{onClick:function(){j("year")},children:["Yearly - $",t.SubscriptionPriceYearly," / year"," ",(0,g.jsxs)("span",{className:"menu-tip",children:["Equals to"," ",(0,g.jsxs)("b",{children:["$",(0,p.MW)(t.SubscriptionPriceYearly),"/month"]}),", Saving more than 25%"]})]})]}),trigger:["click"],children:(0,g.jsxs)("div",{className:"change-period-btn",children:["Billed ","month"===b?"Monthly":"Yearly",(0,g.jsx)(d.Z,{})]})}),(0,g.jsx)("div",{className:"period-tip",children:"month"===b?(0,g.jsxs)(g.Fragment,{children:["Save more than 25% with"," ",(0,g.jsx)("span",{className:"tip-link",onClick:function(){j("year")},children:"yearly billing"})]}):(0,g.jsxs)(g.Fragment,{children:["You’re saving more than 25%",(0,g.jsx)("br",{})," with yearly billing cycle."]})})]}),(0,g.jsxs)("div",{className:"price",children:[(0,g.jsxs)("span",{className:"price-num",children:["$",t.SubscriptionPrice]})," ","/ ","year"===b?"year":"month","year"===b&&(0,g.jsxs)("div",{className:"price-tip",children:["Equals to"," ",(0,g.jsxs)("b",{children:["$",(0,p.MW)(t.SubscriptionPrice)]})," / month"]})]})]})}),(0,g.jsx)("div",{className:"section",children:(0,g.jsxs)("div",{className:"section-wrapper",children:[(0,g.jsx)("div",{className:"section-title",children:"Chosen Plan"}),(0,g.jsx)("div",{className:"section-content",children:e.planText})]})}),(0,g.jsxs)("div",{className:"section",children:[(0,g.jsxs)("div",{className:"section-wrapper",children:[(0,g.jsxs)("div",{className:"section-title",children:["Total Due Today",(0!==t.CreditApplied||0!==t.CreditRemain)&&(0,g.jsx)(g.Fragment,{children:" *"})]}),(0,g.jsxs)("div",{className:"section-content",children:["$",t.UpgradeCost]})]}),(0,g.jsx)("div",{className:"section-tip",children:(0!==t.CreditApplied||0!==t.CreditRemain)&&(0,g.jsxs)(g.Fragment,{children:["* This is the prorated amount you need to pay today for your plan change. Your subscription will renew at $",t.SubscriptionPrice," / ",b," on"," ",m()(t.NextPaymentDue).format("ll")]})})]}),(!v||""!==t.CurrentPlanName)&&(0,g.jsx)("div",{className:"section",children:(0,g.jsxs)("div",{className:"section-wrapper",children:[(0,g.jsx)("div",{className:"section-title",children:"Payment Method"}),(0,g.jsx)("div",{className:"section-content",children:"Both"!==t.PaymentMethod?(0,g.jsx)("div",{children:t.PaymentMethod}):(0,g.jsx)("div",{className:"period-select",children:(0,g.jsxs)(S,{defaultValue:r,buttonStyle:"solid",onChange:I,children:[(0,g.jsx)(l.ZP,{value:"Stripe",className:"select-item",children:"Card"}),(0,g.jsx)(l.ZP,{value:"PayPal",className:"select-item",children:"PayPal"})]})})})]})}),(0,g.jsx)("div",{className:"btn-area",children:v&&""===t.CurrentPlanName?(0,g.jsx)(x,{amount:t.UpgradeCost,handleApplePay:e.handleApplePay,handleApplePayFallback:function(){y(!1)},planText:e.planText}):(0,g.jsx)(o.Z,{block:!0,type:"primary",loading:e.isUpgradeBtnLoading&&!e.isShowOverviewLoading,size:"large",onClick:function(){e.handlePay(r),(0,p.I1)("click pay button",{event_category:"pricing"})},children:"Upgrade"})})]}):(0,g.jsx)("div",{className:"loading",children:(0,g.jsx)(a.Z,{indicator:(0,g.jsx)(u.Z,{style:{fontSize:24},spin:!0})})})]})}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){return(0,g.jsx)(r.Z,{visible:e.visible,destroyOnClose:!0,onCancel:e.handleCancel,className:"plan-overview-modal",footer:null,centered:!0,closeIcon:(0,g.jsx)(i.Tw,{style:{fontSize:"12px"}}),children:(0,g.jsx)(N,E({},e))})}},65425:(e,t,n)=>{n.d(t,{Z:()=>R});n(37135);var r=n(48889),i=(n(94507),n(48086)),a=n(67294),o=n(97474),s=n(56010),c=(n(38691),n(71577)),l=(n(45623),n(71257)),u=(n(38920),n(32787)),d=n(89366),f=n(2603),m=n(85893);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}const x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(a,e);var t,n,r,i=y(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).handleSubmit=t.handleSubmit.bind(b(t)),t.fp=t.fp.bind(b(t)),t}return t=a,(n=[{key:"handleSubmit",value:function(e){this.props.onSignInSubmit(e)}},{key:"fp",value:function(){(0,s.Ah)("https://www.awesomescreenshot.com/user/forgetPassword")}},{key:"render",value:function(){return(0,m.jsxs)(l.Z,{onFinish:this.handleSubmit,children:[(0,m.jsx)(l.Z.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}],children:(0,m.jsx)(u.Z,{size:"large",prefix:(0,m.jsx)(d.Z,{}),type:"email",placeholder:"Email"})}),(0,m.jsx)(l.Z.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:(0,m.jsx)(u.Z,{size:"large",prefix:(0,m.jsx)(f.Z,{}),type:"password",placeholder:"Password"})}),(0,m.jsx)("div",{className:"fp-box",children:(0,m.jsx)("a",{className:"fp",onClick:this.fp,children:"Forget Password"})}),(0,m.jsx)(l.Z.Item,{children:(0,m.jsx)(c.Z,{size:"large",type:"primary",loading:this.props.signInLoading,block:!0,htmlType:"submit",children:"Sign In"})})]})}}])&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.Component);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}const P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(c,e);var t,n,r,a=D(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={isShowSignIn:!1,signInLoading:!1},t.enterSignIn=t.enterSignIn.bind(C(t)),t.handleSignInSubmit=t.handleSignInSubmit.bind(C(t)),t.handleConnectGoogle=t.handleConnectGoogle.bind(C(t)),t.goToSignUp=t.goToSignUp.bind(C(t)),t}return t=c,(n=[{key:"enterSignIn",value:function(e){e.preventDefault(),this.setState({isShowSignIn:!0})}},{key:"goToSignUp",value:function(){(0,s.Ah)("https://www.awesomescreenshot.com/user/login"),this.props.onCancel()}},{key:"handleSignInSubmit",value:function(e){var t=this;this.setState({signInLoading:!0}),(0,o.zB2)(e).then((function(e){var n=e.data;0==n.ErrorCode?(n.S,t.setState({signInLoading:!1}),t.props.onSignInFinish()):(i.ZP.error(n.ErrorMsg),t.setState({signInLoading:!1}))})).catch((function(e){t.setState({signInLoading:!1}),i.ZP.error("Network error. Please try later.")}))}},{key:"handleConnectGoogle",value:function(){if("web"===this.props.type){var e=o.FHV+"/openid/auth2?redirect_url="+encodeURIComponent(document.URL);(0,s.Ah)(e)}else(0,s.Ah)(o.FHV+"/openid/auth2?redirect_url="+encodeURIComponent(chrome.runtime.getURL("aws")))}},{key:"render",value:function(){var e=this.props.type,t=this.state.isShowSignIn;return(0,m.jsxs)("div",{className:"sign-in-panel",children:[(0,m.jsxs)("div",{className:"title",children:[(0,m.jsx)("div",{className:"logo",children:(0,m.jsx)("b",{})}),"Awesome Screenshot"]}),(0,m.jsx)("p",{className:"tip",children:function(e){return"aws"===e?"":"drive"===e?"You need to sign in to an Awesome Screenshot account in order to connect with cloud services.":"des"===e?"You need to sign in to an Awesome Screenshot account in order to connect with other services.":""}(e)}),(0,m.jsx)("div",{className:"box",children:t?(0,m.jsx)("div",{className:"signInForm",children:(0,m.jsx)(x,S(S({},this.state),{},{onSignInSubmit:this.handleSignInSubmit}))}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"google-signin-btn",onClick:this.handleConnectGoogle,children:[(0,m.jsx)("div",{className:"icon",children:(0,m.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 48 48",className:"abcRioButtonSvg",children:(0,m.jsxs)("g",{children:[(0,m.jsx)("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),(0,m.jsx)("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),(0,m.jsx)("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),(0,m.jsx)("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),(0,m.jsx)("path",{fill:"none",d:"M0 0h48v48H0z"})]})})}),(0,m.jsx)("span",{children:"Sign in with Google"})]}),(0,m.jsx)("div",{className:"sign-in-tip",children:(0,m.jsxs)("a",{onClick:this.enterSignIn,children:[(0,m.jsx)("b",{children:"Sign in"})," with email and password"]})}),(0,m.jsx)("div",{className:"sign-up-tip",children:(0,m.jsxs)("a",{onClick:this.goToSignUp,children:[(0,m.jsx)("b",{children:"Create account"})," with other email"]})})]})})]})}}])&&O(t.prototype,n),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(a.Component);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const R=function(e){return(0,m.jsx)(r.Z,k(k({},e),{},{footer:null,maskClosable:!1,wrapClassName:"sign-in",destroyOnClose:!0,centered:!0,children:(0,m.jsx)(P,k({},e))}))}},36073:(e,t,n)=>{n.d(t,{Z:()=>c});n(37135);var r=n(48889),i=(n(38691),n(71577)),a=n(96974),o=n(35552),s=n(85893);const c=function(e){var t=e.visible,n=e.onCancel,c=(0,a.s0)();return(0,s.jsx)(r.Z,{visible:t,onCancel:n,footer:null,maskClosable:!1,className:"transfer-team-modal",destroyOnClose:!0,width:786,closeIcon:(0,s.jsx)(o.Tw,{style:{fontSize:"12px"}}),children:(0,s.jsxs)("div",{className:"transfer-team-panel",children:[(0,s.jsx)("div",{className:"title",children:"Transfer to Workspace"}),(0,s.jsxs)("div",{className:"desc",children:["Thank you for choosing Awesome Screenshot Team plan.",(0,s.jsx)("br",{})," We are thrilled to launch Workspace, a solution for asynchronous communication across teammates and a visual repository for teams."]}),(0,s.jsxs)("div",{className:"content",children:[(0,s.jsxs)("div",{className:"transfer-item",children:[(0,s.jsx)("div",{className:"item-title",children:"Old Team Plan"}),(0,s.jsx)("ul",{className:"feature-list",children:(0,s.jsxs)("li",{children:[(0,s.jsx)(o.m9,{}),"Every member has a professional plan"]})})]}),(0,s.jsx)("div",{className:"transfer-arrow",children:(0,s.jsx)(o.e0,{})}),(0,s.jsxs)("div",{className:"transfer-item",children:[(0,s.jsx)("div",{className:"item-title",children:"Workspace"}),(0,s.jsxs)("ul",{className:"feature-list",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)(o.m9,{}),"Every member has a professional plan"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(o.m9,{}),"Team management"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(o.m9,{}),"Collaborate with teammates"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(o.m9,{}),"Seamless synchronization across different platforms"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(o.m9,{}),"One place for all team resource and content"]})]}),(0,s.jsxs)("div",{className:"price",children:[(0,s.jsx)(o.Sr,{})," No change in unit price, more flexible price plan"]})]})]}),(0,s.jsxs)("div",{className:"tip",children:["Get greater collaborative experience with"," ",(0,s.jsx)("span",{children:"NO addtional cost"}),"."]}),(0,s.jsx)("div",{className:"btn-area",children:(0,s.jsx)(i.Z,{type:"primary",size:"large",onClick:function(){c("/workspace/transfer")},children:"Create a workspace and transfer"})})]})})}},19456:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(96868),i=n(51889),a=n(85893);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=e.workspace,n=e.afterUpdate,i=e.type;return(0,a.jsxs)("div",{className:"change-card-panel",children:[(0,a.jsxs)("div",{className:"title",children:[" ","addCard"===i?"Add Card":"Update Card"]}),(0,a.jsx)("div",{className:"content",children:(0,a.jsx)(r.Z,{workspace:t,afterPay:n,type:i})})]})}const u=function(e){return(0,a.jsx)(i.Z,s(s({},e),{},{visible:e.visible,onCancel:e.onCancel,children:(0,a.jsx)(l,s(s({},e),{},{closeModal:e.onCancel}))}))}},95207:(e,t,n)=>{n.d(t,{Z:()=>u});n(37135);var r=n(48889),i=(n(38691),n(71577)),a=(n(94507),n(48086)),o=n(96974),s=n(97474),c=n(35552),l=n(85893);function u(e){var t=e.visible,n=e.onCancel,u=e.isOwner,d=e.workspaceID,f=e.channelID,m=e.type,h=(0,o.s0)();return(0,l.jsx)(r.Z,{visible:t,onCancel:n,footer:null,width:548,maskClosable:!1,wrapClassName:"workspace-upgrade-modal",destroyOnClose:!0,centered:!0,closeIcon:(0,l.jsx)(c.Tw,{style:{fontSize:"12px"}}),children:(0,l.jsxs)("div",{className:"workspace-upgrade-panel",children:[(0,l.jsx)("div",{className:"title",children:"Get more with Workspace Premium"}),(0,l.jsx)("div",{className:"subtitle",children:"Workspace has reached items limit"}),(0,l.jsxs)("div",{className:"feature-box",children:[(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"icon",children:(0,l.jsx)(c.dG,{})}),(0,l.jsx)("div",{className:"text",children:"Unlimited Videos"})]}),(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"icon",children:(0,l.jsx)(c.K,{})}),(0,l.jsx)("div",{className:"text",children:"Unlimited Images"})]}),(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"icon",children:(0,l.jsx)(c.$g,{})}),(0,l.jsx)("div",{className:"text",children:"Unlimited members"})]})]}),(0,l.jsx)(i.Z,{className:"up-btn",size:"large",type:"primary",onClick:function(){u?h("/workspace/setting/"+d+"?tab=billing"):(0,s.qo7)(m,d,f).then((function(){a.ZP.success("Remind successfully."),n()}))},children:u?"Upgrade Now":"Remind owner to upgrade"})]})})}},58415:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(67294);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const o=function(e){var t=e.render,n=i((0,r.useState)(!1),2),a=n[0],o=n[1];return t(a,(function(){o(!0)}),(function(){o(!1)}))}},56026:(e,t,n)=>{n.d(t,{Z:()=>f});n(45623);var r=n(71257),i=(n(38691),n(71577)),a=(n(38920),n(32787)),o=n(67294),s=n(97474),c=n(85893);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=a.Z.TextArea;const f=function(e){var t=l((0,o.useState)(!1),2),n=t[0],u=t[1],f=l((0,o.useState)(!1),2),m=f[0],h=f[1];return(0,c.jsx)("div",{className:"plan-contact-form",children:m?(0,c.jsx)("div",{className:"finish-view",children:(0,c.jsxs)("div",{className:"center",children:[(0,c.jsx)("h2",{children:"Message sent!"}),(0,c.jsx)("p",{children:"We'll be in touch."}),(0,c.jsx)(i.Z,{type:"primary",onClick:h.bind(null,!1),children:"Send us another message"})]})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"win-title",children:"Get in touch with us"}),(0,c.jsx)("div",{className:"tip",children:"Have a question or request? Drop us a line :)"}),(0,c.jsx)("div",{className:"form",children:(0,c.jsxs)(r.Z,{onFinish:function(e){u(!0);var t={email:e.email,subject:"Plan page contact us",content:e.content};(0,s.hz1)(t).then((function(){h(!0),u(!1)}))},children:[(0,c.jsx)(r.Z.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}],children:(0,c.jsx)(a.Z,{type:"email",placeholder:"Your Email"})}),(0,c.jsx)(r.Z.Item,{name:"content",rules:[{required:!0,message:"Please say something!"}],children:(0,c.jsx)(d,{rows:4,placeholder:"Message"})}),(0,c.jsx)(r.Z.Item,{children:(0,c.jsx)(i.Z,{className:"contact-submit-btn",loading:n,type:"primary",htmlType:"submit",size:"large",block:!0,children:"Send"})})]})})]})})}},90575:(e,t,n)=>{n.d(t,{Z:()=>c});n(38620);var r=n(19181),i=(n(94969),n(45777)),a=n(16514),o=n(35552),s=n(85893);const c=function(){var e=a.uK[1],t=(0,s.jsx)("div",{className:"pro-pop",children:(0,s.jsxs)("div",{className:"feature-box",children:[(0,s.jsx)("div",{className:"feature-title",children:"Screenshot"}),(0,s.jsx)("div",{className:"feature-section",children:(0,s.jsx)("ul",{className:"feature-list",children:e.features.screenshot.map((function(t,n){return(0,s.jsx)("li",{children:(0,s.jsxs)("div",{className:"feature-item",children:[(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:t.replace(/(Unlimited|All)/gi,"<b>$&</b>")}}),"Save screenshots to:"===t&&(0,s.jsx)("div",{className:"integrations-container",children:e.features.integrations_cs.map((function(e){return(0,s.jsx)(i.Z,{title:e.displayName,children:(0,s.jsx)("div",{className:"integration-item small ".concat(e.name)})},e.name)}))})]})},n)}))})}),(0,s.jsxs)("div",{className:"feature-section",children:[(0,s.jsx)("div",{className:"feature-title",children:"Video Recording"}),(0,s.jsx)("ul",{className:"feature-list",children:e.features.record.map((function(e,t){return(0,s.jsx)("li",{children:(0,s.jsx)("div",{className:"feature-item",children:"string"===e.type?(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:e.text.replace(/(Unlimited|All|4k)/gi,"<b>$&</b>")}}):(0,s.jsxs)("div",{className:"feature-link",children:[(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:e.text.replace(/(Unlimited|All|4k)/gi,"<b>$&</b>")}}),(0,s.jsxs)("div",{className:"feature-preview ".concat(e.preview),children:[(0,s.jsx)("div",{className:"text",children:"local"===e.preview?'Local Recordings: temporarily stored under "My Local Recordings", can be further saved to your local disk.':"Cloud Recordings: automatically saved to your account, can be shared instantly and also downloadable."}),(0,s.jsx)("div",{className:"pic"})]})]})})},t)}))}),("free"===e.type||"basic"===e.type)&&(0,s.jsxs)("div",{className:"extra",children:[(0,s.jsx)("div",{className:"extra-title",children:"For the first 20 videos recorded with cloud mode, you can try professional features listed below:"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{className:"list-item",children:"Download in MP4"}),(0,s.jsx)("li",{className:"list-item",children:"Use annotation tools while recording"}),(0,s.jsx)("li",{className:"list-item",children:"Unlimited length per recording"}),(0,s.jsx)("li",{className:"list-item",children:"Edit video"})]})]})]}),e.features.integrations_cp.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"feature-title",children:"Integrations"}),(0,s.jsx)("div",{className:"integrations-container",children:e.features.integrations_cp.map((function(e){return(0,s.jsx)(i.Z,{title:e.displayName,children:(0,s.jsx)("div",{className:"integration-item ".concat(e.name)})},e.name)}))})]})]})});return(0,s.jsx)(r.Z,{content:t,placement:"rightBottom",arrowPointAtCenter:!0,children:(0,s.jsxs)("div",{className:"pro-card",children:[(0,s.jsx)("div",{className:"icon",children:(0,s.jsx)(o.CE,{})}),"Professional plan",(0,s.jsx)("div",{className:"bg-icon",children:(0,s.jsx)(o.dd,{})})]})})}},9557:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(71167),i=n.n(r),a=n(15654),o=n(76832),s=n.n(o),c=n(67294),l=n(96774),u=n.n(l),d=n(16514),f=n(85893);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}r.Quill.register("modules/magicUrl",s()),r.Quill.register("modules/mention",a.Z);function p(e,t){var n=e.mentionUsers,r=e.defaultMentionUsers,a=(0,c.useRef)(),o=m((0,c.useState)(!0),2),s=o[0],l=o[1];function u(){a.current.getEditor().getModule("mention").openMenu(" @")}function h(e){var t=a.current.getEditor(),n=t.getSelection(!0),r=n?n.index:0;t.insertText(r,e),t.focus()}function p(){return a.current.getEditor().root.innerHTML}function v(e){e.denotationChar="@",a.current.getEditor().getModule("mention").insertItem(e,!0)}(0,c.useEffect)((function(){l(!1)}),[]),(0,c.useEffect)((function(){r&&r.length&&r.forEach((function(e){v(e)}))}),[r]),(0,c.useImperativeHandle)(t,(function(){return{addAt:u,addEmoji:h,addMention:v,getContent:p}}));var y={allowedChars:/^[A-Za-z\sÅÄÖåäö]*$/,mentionDenotationChars:["@"],isolateCharacter:!0,source:function(e,t,r){var i;if("@"===r&&(i=n),0===e.length)t(i,e);else{for(var a=[],o=0;o<i.length;o++)~i[o].value.toLowerCase().indexOf(e.toLowerCase())&&a.push(i[o]);t(a,e)}},renderItem:function(e){var t,n,r,i=(t=e.value,n=t?t.length:0,d.Cj[n%d.Cj.length]),a=function(e){var t=e?e.split(" "):[],n="";return t.forEach((function(e){n+=e.charAt(0).toUpperCase()})),n=n.substr(0,3)}(e.value),o=(r=a.length,12-Math.max(2,r)+"px");return'<div class="mention-user"><div class="mention-user-avatar" style="background-color:'.concat(i,";font-size: ").concat(o,'">').concat(a,'<img onerror="javascript:this.remove();" src="').concat(e.avatar,'" /></div><div class="mention-user-name">').concat(e.value,"</div></div>")}};return(0,f.jsx)("div",{className:"quill-comment-box",children:(0,f.jsx)(i(),{ref:a,placeholder:"use @ to mention team members",theme:"snow",readOnly:s,formats:["link","mention"],modules:{toolbar:!1,mention:y,magicUrl:!0}})})}var v=(0,c.forwardRef)(p);const y=(0,c.memo)(v,(function(e,t){return u()(e.mentionUsers,t.mentionUsers)&&u()(e.defaultMentionUsers,t.defaultMentionUsers)}))},3646:(e,t,n)=>{n.d(t,{Z:()=>f});n(94969);var r=n(45777),i=n(67294),a=(n(94489),n(96774)),o=n.n(a),s=n(96974),c=n(35552),l=n(18282),u=n(85893);function d(e){var t=e.folder,n=e.shareKey,i=e.showAvatar,a=(0,s.s0)();return(0,u.jsxs)("div",{className:"folder-item",children:[(0,u.jsx)("div",{className:"checked-badge"}),(0,u.jsx)("div",{className:"click-area",onClick:function(){a("/s/folder/".concat(t.folderID,"/").concat(n),{inApp:!/\/s\/folder/.test(window.location.pathname)})}}),(0,u.jsx)(c.RO,{}),(0,u.jsx)("span",{className:"name",children:t.name||t.title}),i&&(0,u.jsx)(r.Z,{title:t.userName,color:"#26242a",placement:"top",children:(0,u.jsx)("div",{className:"avatar-box",children:(0,u.jsx)(l.Z,{username:t.userName,size:30,avatarUrl:t.userAvatar})})})]})}const f=(0,i.memo)(d,(function(e,t){return o()(e.folder,t.folder)}))},48719:(e,t,n)=>{n.d(t,{Z:()=>w});n(94969);var r=n(45777),i=n(67294),a=n(1216),o=n(94184),s=n.n(o),c=n(27484),l=n.n(c),u=n(96774),d=n.n(u),f=n(35552),m=n(18282),h=n(56262),p=n(52020),v=n(56010),y=n(85893);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e){var t=e.item,n=e.viewSharedNewComment,o=e.query,c=e.isFolder,u=e.handleShowItem,d=g((0,i.useState)(!1),2),h=d[0],p=d[1];(0,i.useEffect)((function(){var e=setTimeout((function(){(0,a.be)()}),100);return function(){clearTimeout(e)}}),[]);var b=function(){p(!0)},j=function(e){e.target.style.opacity=0},x=(0,i.createRef)(),w=function(){c||n(t.itemType,t.id,t.newCommentCount),u(t)},I=s()("shared-grid-item",{notify:t.hasNewComments});return(0,y.jsx)("div",{className:I,ref:x,children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"thumbnail-area",onClick:w,children:[(0,y.jsx)(a.ZP,{scrollContainer:"#item-container",offset:100,once:!0,children:(0,y.jsx)("img",{src:t.thumbnailURI,alt:"",onLoad:b,onError:j})}),!h&&(0,y.jsx)("div",{className:"placeholder",children:"video"===t.itemType?(0,y.jsx)(f.dG,{}):(0,y.jsx)(f.K,{})}),(0,y.jsx)("div",{className:"overlay"}),"video"===t.itemType&&(0,y.jsx)("div",{className:"duration",children:t.duration})]}),(0,y.jsxs)("div",{className:"info-area",children:[!c&&(0,y.jsx)(r.Z,{title:t.userName,placement:"left",children:(0,y.jsx)("div",{className:"shared-item-avatar",children:(0,y.jsx)(m.Z,{username:t.userName,avatarUrl:t.userAvatar,size:"30"})})}),(0,y.jsx)("div",{className:"name ".concat(t.itemType),onClick:w,children:(0,y.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,v.CH)(o,(0,v.ol)(t.title))}})}),(0,y.jsxs)("div",{className:"extra-info",children:["video"===t.itemType?(0,y.jsx)(f.dG,{}):(0,y.jsx)(f.K,{}),(0,y.jsx)("div",{className:"date",children:l().unix(t.updatedSec).format("ll")}),(0,y.jsx)("div",{className:"sep",children:"•"}),(0,y.jsxs)("div",{className:"view",children:[t.views," ",t.views>1?"views":"view"]})]})]})]})})}var x={viewSharedNewComment:p.Iz};const w=(0,h.$j)(null,x)((0,i.memo)(j,(function(e,t){return e.handleShowItem===t.handleShowItem&&d()(e.item,t.item)})))},18621:(e,t,n)=>{n.d(t,{Z:()=>u});n(38691);var r=n(71577),i=n(67294),a=n(24244),o=n(35552),s=n(85893);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const u=function(e){var t=e.item,n=c((0,i.useState)(!1),2),l=n[0],u=n[1],d=c((0,i.useState)("both"),2),f=d[0],m=d[1];function h(){u(!0),m("channel")}return(0,s.jsxs)("div",{className:"sidebar-move-to-panel",children:[(0,s.jsx)("div",{className:"section compact",children:"0"!==t.folderID||t.channel?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"current-location-container",children:[(0,s.jsx)("div",{className:"title",children:"Currently in"}),(0,s.jsxs)("div",{className:"current-location",onClick:function(){t.channel?h():(u(!0),m("both"))},children:[(0,s.jsx)("div",{className:"location",children:t.channel?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.MC,{}),(0,s.jsx)("span",{className:"location-name",title:t.channel.name,children:t.channel.name})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.RO,{}),(0,s.jsx)("span",{className:"location-name",title:t.folderName,children:t.folderName})]})}),(0,s.jsx)("div",{children:(0,s.jsx)(o.e0,{})})]})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"tip",children:"Currently saved in My items, move to:"}),(0,s.jsxs)("div",{className:"btn-area",children:[(0,s.jsx)(r.Z,{type:"primary",onClick:function(){u(!0),m("folder")},children:"Folder"}),(0,s.jsx)("span",{className:"or",children:"or"}),(0,s.jsx)(r.Z,{type:"primary",onClick:h,children:"Workspace"})]})]})}),(0,s.jsx)(a.Z,{visible:l,onCancel:function(){u(!1)},items:[t],des:f})]})}},35552:(e,t,n)=>{n.d(t,{$E:()=>dn,$Z:()=>rn,$g:()=>Ln,AM:()=>_n,Ak:()=>Lt,CE:()=>Vn,DE:()=>Fn,Dn:()=>Jt,FL:()=>kt,GK:()=>sn,GR:()=>Qn,GS:()=>Qt,HC:()=>or,HH:()=>Nn,Hf:()=>Vt,Iu:()=>mr,K:()=>Mt,Kv:()=>An,M:()=>Zt,MC:()=>Cn,Mj:()=>tr,N3:()=>jn,NA:()=>pr,NJ:()=>Hn,NK:()=>on,Nt:()=>cn,O$:()=>Wn,O9:()=>Yn,OO:()=>Gn,Od:()=>Ct,PD:()=>ir,Pg:()=>mn,Py:()=>Ft,Qe:()=>fn,R7:()=>ur,RO:()=>Rt,Sl:()=>un,Sr:()=>vn,TI:()=>Tt,Tw:()=>At,V_:()=>gn,Vn:()=>rr,Wp:()=>hr,Wv:()=>lr,XH:()=>qt,Xt:()=>nn,ZO:()=>Sn,_8:()=>_t,_K:()=>kn,a3:()=>xn,a6:()=>sr,aA:()=>fr,aN:()=>$t,aY:()=>nr,bv:()=>Xt,dG:()=>Yt,dd:()=>Bn,dt:()=>Ot,e0:()=>Dt,eL:()=>En,f4:()=>Nt,fK:()=>Rn,fR:()=>Bt,fY:()=>bn,fp:()=>tn,g7:()=>Pn,ih:()=>an,j4:()=>ln,lO:()=>qn,m9:()=>Kt,mB:()=>cr,nX:()=>Ut,o1:()=>en,oI:()=>$n,p5:()=>Un,pF:()=>ar,pG:()=>Jn,q9:()=>wn,qY:()=>Tn,qh:()=>In,qz:()=>pn,r7:()=>Mn,r_:()=>Ht,sh:()=>Gt,tL:()=>Zn,tN:()=>yn,tj:()=>er,u3:()=>zn,uz:()=>dr,vp:()=>Xn,wn:()=>Kn,xR:()=>hn,xY:()=>Dn,xj:()=>Wt,xm:()=>On,y3:()=>Pt,yT:()=>zt,zJ:()=>Et});var r=n(16165),i=n(94184),a=n.n(i),o=n(67294),s=n(49268),c=n(85792),l=n(26224),u=n(16790),d=n(70834),f=n(63864),m=n(79029),h=n(28299),p=n(18056),v=n(46863),y=n(30458),g=n(81238),b=n(54548),j=n(59901),x=n(29626),w=n(90914),I=n(87111),S=n(76674),N=n(85339),O=n(29784),E=n(8262),D=n(7232),A=n(71050),C=n(8954),T=n(41146),P=n(26691),_=n(26998),k=n(86736),L=n(26222),R=n(4840),M=n(82339),Z=n(75996),U=n(72591),H=n(47514),F=n(80535),G=n(10303),V=n(91005),B=n(70032),W=n(69276),z=n(64186),K=n(5712),$=n(84943),q=n(79594),Y=n(30524),J=n(36163),Q=n(28312),X=n(75301),ee=n(51349),te=n(55484),ne=n(70500),re=n(77443),ie=n(42729),ae=n(88662),oe=n(94355),se=n(58555),ce=n(49707),le=n(84552),ue=n(25341),de=n(17171),fe=n(57538),me=n(54452),he=n(82072),pe=n(18908),ve=n(58880),ye=n(85601),ge=n(88230),be=n(1984),je=n(61803),xe=n(25646),we=n(67623),Ie=n(7873),Se=n(54566),Ne=n(60004),Oe=n(96477),Ee=n(63500),De=n(80071),Ae=n(94459),Ce=n(70642),Te=n(96643),Pe=n(56056),_e=n(41950),ke=n(97599),Le=n(40638),Re=n(72451),Me=n(41166),Ze=n(68118),Ue=n(71371),He=n(24597),Fe=n(18827),Ge=n(67145),Ve=n(64194),Be=n(10155),We=n(7412),ze=n(36064),Ke=n(25949),$e=n(62244),qe=n(98440),Ye=n(54293),Je=n(16442),Qe=n(30197),Xe=n(19391),et=n(69750),tt=n(95668),nt=n(69821),rt=n(89518),it=n(87297),at=n(30005),ot=n(9152),st=n(95064),ct=n(19910),lt=n(64046),ut=n(70395),dt=n(31440),ft=n(12294),mt=n(5018),ht=n(76206),pt=n(67539),vt=n(66021),yt=(n(6825),n(85893));function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var It={AddImageIcon:c.Z,AddIcon:s.Z,AnnotateIcon:d.Z,ArrowIcon:f.Z,CloseIcon:x.Z,CommentIcon:w.Z,CopyLinkIcon:O.Z,CopyIcon:N.Z,DownloadFolderIcon:_.Z,DownloadIcon:k.Z,EmbedIcon:U.Z,FeedbackIcon:V.Z,FolderIcon:W.Z,ImagesIcon:ye.Z,ItemsIcon:ge.Z,LoadingMoreIcon:je.Z,MoreIcon:Oe.Z,MoveFolderIcon:De.Z,MoveFolderContextmenyIcon:Ae.Z,NotificationIcon:Pe.Z,OpenFolderIcon:K.Z,PutBackIcon:Ve.Z,RenameIcon:$e.Z,RenameFolderIcon:qe.Z,RightIcon:Je.Z,TagIcon:ut.Z,TrashFilledIcon:ft.Z,TrashIcon:dt.Z,VideosIcon:mt.Z,AddTextIcon:u.Z,CutIcon:A.Z,ProIcon:Fe.Z,PullIcon:Ge.Z,ReduceIcon:Ke.Z,MoreDotIcon:Ee.Z,PlayIcon:Ze.Z,PauseIcon:ke.Z,FullScreenIcon:Y.Z,NormalScreenIcon:Te.Z,PIPIcon:Me.Z,ReplayIcon:Ye.Z,VolumeCloseIcon:ht.Z,VolumeHighIcon:vt.Z,VolumeLowIcon:pt.Z,SharedIcon:et.Z,StepForwardIcon:ct.Z,StepBackIcon:st.Z,CommentBubbleIcon:I.Z,MentionMsgIcon:Ie.Z,VideoEditorIcon:M.Z,EmojiIcon:lt.Z,RecordDesktopIcon:ze.Z,RecordCameraIcon:We.Z,PricingTagIcon:Ue.Z,LightThemeIcon:be.Z,DarkThemeIcon:C.Z,AutoThemeIcon:h.Z,NewTabIcon:Ce.Z,MicIcon:Ne.Z,HDIcon:Q.Z,CameraIcon:v.Z,ChromeIcon:j.Z,EdgeIcon:R.Z,GoogleIcon:J.Z,BrushIcon:oe.Z,SecurityIcon:me.Z,SyncIcon:pe.Z,ChannelIcon:g.Z,SettingIcon:Qe.Z,MemberIcon:we.Z,PersonIcon:Re.Z,QuestionMarkIcon:Be.Z,CardIcon:y.Z,SharedMeIcon:nt.Z,MeIcon:xe.Z,StarIcon:ot.Z,EmptyIcon:H.Z,PdfIcon:Le.Z,PrinterIcon:He.Z,CopyImageIcon:S.Z,SmileIcon:it.Z,CrownIcon:E.Z,CrownBgIcon:D.Z,SharedMeFilledIcon:rt.Z,WarningIcon:G.Z,BilligIcon:p.Z,StarFolderIcon:$.Z,MeFilledIcon:Se.Z,AtIcon:m.Z,StickerIcon:lt.Z,CameraNoIcon:ce.Z,TrashRecordIcon:ve.Z,StopRecordIcon:he.Z,ActionBigIcon:X.Z,ActionMiniIcon:ee.Z,CameraRecordIcon:ne.Z,CheckboxIcon:b.Z,DragIcon:ae.Z,AddMemberIcon:l.Z,RecordPauseIcon:le.Z,RecordPlayIcon:de.Z,LockIcon:se.Z,EnterpriseIcon:F.Z,DomainIcon:P.Z,SsoIcon:at.Z,DownloadExtIcon:ie.Z,CopyExtIcon:re.Z,PDFExtIcon:ue.Z,PrintExtIcon:fe.Z,BackupExtIcon:te.Z,OutIcon:_e.Z,ShareIcon:Xe.Z,ShareFolderIcon:tt.Z,DescIcon:T.Z,FolderFilledIcon:z.Z,VideoFolderIcon:q.Z,VideoFilmIcon:B.Z,VideoEditIcon:Z.Z,DuplicateIcon:L.Z},St=Object.fromEntries(Object.entries(It).map((function(e){var t=xt(e,2),n=t[0],i=t[1],s=(0,o.memo)((function(e){return(0,yt.jsx)(r.Z,bt(bt({component:i},e),{},{className:a()("svg-icon",e.className)}))}));return s.displayName=n,[n,s]}))),Nt=St.AddImageIcon,Ot=St.AddIcon,Et=St.AnnotateIcon,Dt=St.ArrowIcon,At=St.CloseIcon,Ct=(St.CommentIcon,St.CopyLinkIcon),Tt=St.CopyIcon,Pt=St.DownloadFolderIcon,_t=St.DownloadIcon,kt=St.EmbedIcon,Lt=St.FeedbackIcon,Rt=St.FolderIcon,Mt=St.ImagesIcon,Zt=St.ItemsIcon,Ut=(St.LoadingMoreIcon,St.MoreIcon),Ht=St.MoveFolderIcon,Ft=St.MoveFolderContextmenyIcon,Gt=St.NotificationIcon,Vt=St.OpenFolderIcon,Bt=St.PutBackIcon,Wt=St.RenameIcon,zt=St.RenameFolderIcon,Kt=St.RightIcon,$t=(St.TagIcon,St.TrashFilledIcon),qt=St.TrashIcon,Yt=St.VideosIcon,Jt=(St.AddTextIcon,St.CutIcon,St.ProIcon,St.PullIcon),Qt=St.ReduceIcon,Xt=St.MoreDotIcon,en=St.PlayIcon,tn=St.PauseIcon,nn=St.FullScreenIcon,rn=St.NormalScreenIcon,an=St.PIPIcon,on=St.ReplayIcon,sn=St.VolumeCloseIcon,cn=St.VolumeHighIcon,ln=St.VolumeLowIcon,un=(St.SharedIcon,St.ShareFolderIcon),dn=St.StepForwardIcon,fn=St.StepBackIcon,mn=St.CommentBubbleIcon,hn=St.MentionMsgIcon,pn=St.VideoEditorIcon,vn=St.EmojiIcon,yn=St.RecordDesktopIcon,gn=St.RecordCameraIcon,bn=St.PricingTagIcon,jn=St.LightThemeIcon,xn=St.DarkThemeIcon,wn=St.AutoThemeIcon,In=St.NewTabIcon,Sn=St.MicIcon,Nn=St.HDIcon,On=St.CameraIcon,En=St.ChromeIcon,Dn=St.EdgeIcon,An=St.GoogleIcon,Cn=(St.BrushIcon,St.SecurityIcon,St.SyncIcon,St.ChannelIcon),Tn=St.SettingIcon,Pn=St.MemberIcon,_n=(St.PersonIcon,St.QuestionMarkIcon),kn=St.CardIcon,Ln=St.SharedMeIcon,Rn=St.MeIcon,Mn=St.StarIcon,Zn=St.EmptyIcon,Un=St.PdfIcon,Hn=St.PrinterIcon,Fn=St.CopyImageIcon,Gn=St.SmileIcon,Vn=St.CrownIcon,Bn=St.CrownBgIcon,Wn=St.SharedMeFilledIcon,zn=St.WarningIcon,Kn=(St.BilligIcon,St.StarFolderIcon),$n=St.MeFilledIcon,qn=St.AtIcon,Yn=St.StickerIcon,Jn=St.CameraNoIcon,Qn=St.TrashRecordIcon,Xn=St.StopRecordIcon,er=St.ActionBigIcon,tr=St.ActionMiniIcon,nr=St.CameraRecordIcon,rr=St.DragIcon,ir=St.CheckboxIcon,ar=St.AddMemberIcon,or=St.RecordPauseIcon,sr=St.RecordPlayIcon,cr=St.LockIcon,lr=St.EnterpriseIcon,ur=St.DomainIcon,dr=St.SsoIcon,fr=(St.DownloadExtIcon,St.CopyExtIcon,St.PDFExtIcon,St.PrintExtIcon,St.BackupExtIcon,St.OutIcon,St.ShareIcon),mr=St.DescIcon,hr=St.FolderFilledIcon,pr=(St.VideoFolderIcon,St.VideoFilmIcon,St.VideoEditIcon,St.DuplicateIcon)},8651:(e,t,n)=>{n.d(t,{Z:()=>N});n(38691);var r=n(71577),i=(n(37043),n(47933)),a=(n(94969),n(45777)),o=n(38640),s=n(4251),c=n(67294),l=n(73935),u=n(18282),d=n(97474),f=n(74998),m=n(56010),h=n(59631),p=n(35552),v=n(96868),y=n(85893);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e){var t=e.workspace,n=e.onCancel,s=e.afterPay,l=e.from,g=e.initialPeriod,b=e.payStatus,j=x((0,c.useState)(null),2),w=j[0],I=j[1],S=x((0,c.useState)((function(){return g||"year"})),2),N=S[0],O=S[1],E=x((0,c.useState)(!1),2),D=E[0],A=E[1],C=x((0,c.useState)("current"),2),T=C[0],P=C[1],_=(0,c.useRef)(),k=(0,f.Z)().get("promotionCode"),L=x((0,c.useState)(!1),2),R=L[0],M=L[1];(0,c.useEffect)((function(){(0,d.eH4)(t.id,l,k).then((function(e){I(e)}))}),[t.id]);var Z=(0,c.useCallback)((function(e){M(e)}),[R]);var U=function(){return"year"===N?w.planName:w.planNameMonthly};function H(){var e=w.price*w.members.length,t=w.totalPrice;return e-w.balance-t}return(0,y.jsxs)(o.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",duration:.35},className:"workspace-pay",children:[n&&(0,y.jsx)("div",{className:"close-btn",onClick:n,children:(0,y.jsx)(p.Tw,{})}),(0,y.jsx)("div",{className:"top-title",children:(0,y.jsx)("div",{className:"title",children:"Upgrade to Workspace Premiun"})}),w?(0,y.jsxs)("div",{className:"main-container",children:[(0,y.jsxs)("div",{className:"left",children:[(0,y.jsxs)("div",{className:"workspace-name",children:[t.name,(0,y.jsxs)("div",{className:"member-count",children:[w.members.length," people"]})]}),(0,y.jsx)("div",{className:"workspace-member-list",children:w.members.map((function(e){return(0,y.jsxs)("div",{className:"workspace-member-item",children:[(0,y.jsx)("div",{className:"avatar-area",children:(0,y.jsx)(u.Z,{username:e.userInfo.fullName,size:36})}),(0,y.jsxs)("div",{className:"info",children:[(0,y.jsx)("div",{className:"name",children:e.userInfo.fullName}),(0,y.jsx)("div",{className:"email",children:e.userInfo.mail})]}),(0,y.jsx)("div",{className:"action-area",children:(0,m.fm)(e.role)})]},e.userID)}))})]}),(0,y.jsxs)("div",{className:"right",children:[(0,y.jsx)("div",{className:"pay-title",children:"Payment details:"}),(0,y.jsxs)("div",{className:"balance",ref:_,children:["Account Balance:",(0,y.jsxs)("div",{className:"value",children:[(0,y.jsxs)("span",{className:"value-text",children:[w.balance,".00"]}),(0,y.jsx)(a.Z,{title:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:"Refund from overpaying bills:"}),(0,y.jsx)("p",{children:"1. When you transfer the team to the workspace, the excess amount of money will remain in balance."}),(0,y.jsx)("p",{children:"2. When you pay for new members and they leave before the subscription expires."})]}),getPopupContainer:function(){return _.current},children:(0,y.jsx)(p.AM,{})})]})]}),(0,y.jsx)("div",{className:"payment-period",children:(0,y.jsxs)(i.ZP.Group,{value:N,onChange:function(e){O(e.target.value)},disabled:R,children:[(0,y.jsx)(i.ZP,{value:"month",disabled:"upgrade"===l,children:"Billed monthly"}),(0,y.jsxs)(i.ZP,{value:"year",children:["Billed annually (",(0,y.jsxs)("span",{className:"highlight",children:[8===w.priceMonthly?"37.5%":"20%"," Savings"]}),")"]})]})}),(0,y.jsxs)("div",{className:"price-table",children:[(0,y.jsxs)("div",{className:"price-table-item",children:[(0,y.jsxs)("div",{className:"labal",children:[w.priceMonthly," USD x ",w.members.length," x"," ","year"===N?"12 months":"1 month"]}),(0,y.jsx)("div",{className:"value",children:"year"===N?(0,y.jsx)(y.Fragment,{children:(0,m.Sg)(12*w.priceMonthly*w.members.length)}):(0,m.Sg)(w.priceMonthly*w.members.length)})]}),"year"===N&&(0,y.jsxs)("div",{className:"price-table-item",children:[(0,y.jsxs)("div",{className:"label",children:[8===w.priceMonthly?"37.5%":"20%"," off paid annually",10===w.priceMonthly&&(0,y.jsx)("div",{className:"label-tip",children:"Equal to $8/month/member"})]}),(0,y.jsx)("div",{className:"value discount",children:(0,m.Sg)((w.price-12*w.priceMonthly)*w.members.length)})]}),"year"===N?(0,y.jsx)(y.Fragment,{children:w.totalDiscount>0&&(0,y.jsxs)("div",{className:"price-table-item",children:[(0,y.jsx)("div",{className:"labal",children:w.discountWording}),(0,y.jsx)("div",{className:"value discount",children:(0,m.Sg)(-w.totalDiscount)})]})}):(0,y.jsx)(y.Fragment,{children:w.totalDiscountMonthly>0&&(0,y.jsxs)("div",{className:"price-table-item",children:[(0,y.jsx)("div",{className:"labal",children:w.discountWording}),(0,y.jsx)("div",{className:"value discount",children:(0,m.Sg)(-w.totalDiscountMonthly)})]})}),"year"===N?(0,y.jsx)(y.Fragment,{children:w.changedBalance>0&&(0,y.jsxs)("div",{className:"price-table-item",children:[(0,y.jsx)("div",{className:"labal",children:"Account balance"}),(0,y.jsx)("div",{className:"value discount",children:(0,m.Sg)(-w.changedBalance)})]})}):(0,y.jsx)(y.Fragment,{children:w.changedBalanceMonthly>0&&(0,y.jsxs)("div",{className:"price-table-item",children:[(0,y.jsx)("div",{className:"labal",children:"Account balance"}),(0,y.jsx)("div",{className:"value discount",children:(0,m.Sg)(-w.changedBalanceMonthly)})]})}),("upgrade"===l||"resubscribe"===l)&&"year"===N&&H()>0&&(0,y.jsxs)("div",{className:"price-table-item",children:[(0,y.jsx)("div",{className:"labal",children:"Monthly payment remaining"}),(0,y.jsx)("div",{className:"value discount",children:(0,m.Sg)(-H())})]}),(0,y.jsx)("div",{className:"price-table-divider"}),(0,y.jsxs)("div",{className:"price-table-item total",children:[(0,y.jsx)("div",{className:"labal",children:"Total due"}),(0,y.jsx)("div",{className:"value discount",children:(0,m.Sg)("year"===N?w.totalPrice:w.totalPriceMonthly)})]})]}),(0,y.jsx)("div",{className:"label",children:"Credit card details:"}),w.card?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"card",children:(0,y.jsxs)(i.ZP.Group,{value:T,onChange:function(e){var t=e.target.value;P(t)},children:[(0,y.jsxs)("div",{className:"card-item",children:[(0,y.jsx)(i.ZP,{value:"current",children:"Use current card"}),(0,y.jsx)("div",{className:"card-detail",children:(0,y.jsxs)("span",{children:[(0,y.jsx)(p._K,{}),"**** **** **** "+w.card]})})]}),(0,y.jsxs)("div",{className:"card-item",children:[(0,y.jsx)(i.ZP,{value:"new",children:"Use a new card"}),"new"===T&&(0,y.jsx)("div",{className:"new-card",children:(0,y.jsx)(v.Z,{workspace:t,getPlanName:U,planName:U(),afterPay:s,type:l,handleGettingSecret:Z})})]})]})}),"current"===T&&(0,y.jsx)("div",{className:"btn-area",children:(0,y.jsx)(r.Z,{type:"primary",size:"large",block:!0,onClick:function(){A(!0),"upgrade"===l?(0,d.rXU)(t.id).then((function(){A(!1),s()})).catch((function(){A(!1)})):"resubscribe"===l?"Expired"===b?(0,d.FB8)(t.id,"resubscribe",U(),k).then((function(e){var n=e.intentID;return(0,d.iHA)(t.id,n).then((function(){A(!1),s()}))})).catch((function(){A(!1)})):(0,d.S0H)(t.id,U()).then((function(){A(!1),s()})).catch((function(){A(!1)})):(0,d.FB8)(t.id,"lite_upgrade",U(),k).then((function(e){var n=e.setupIntent.id,r=e.setupIntent.payment_method;(0,d.$vQ)(t.id,n,r).then((function(){A(!1),s()}))})).catch((function(){A(!1)}))},loading:D,children:"resubscribe"===l?"Resubscribe":"Pay"})})]}):(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:"new-card",children:(0,y.jsx)(v.Z,{workspace:t,getPlanName:U,planName:U(),afterPay:s,type:l,payStatus:b,handleGettingSecret:Z})})})]})]}):(0,y.jsx)(h.Z,{})]})}var S=function(e){return(0,y.jsx)(s.M,{children:e.visible&&(0,y.jsx)(I,b({},e))})};const N=function(e){return(0,l.createPortal)((0,y.jsx)(S,b({},e)),document.body)}},96868:(e,t,n)=>{n.d(t,{Z:()=>g});n(38691);var r=n(71577),i=(n(94507),n(48086)),a=n(86664),o=n(67294),s=n(59631),c=n(97474),l=n(54465),u=n(56262),d=n(16514),f=n(74998),m=n(85893);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=(0,l.J)("pk_live_dEyUjlPXO4pAhgsnnuUwrbEm"),y=function(e){var t=e.workspaceID,n=e.planName,l=e.afterPay,u=e.type,d=e.refreshSecret,p=e.payStatus,v=h((0,o.useState)(!1),2),y=v[0],g=v[1],b=h((0,o.useState)(!1),2),j=b[0],x=b[1],w=(0,a.useStripe)(),I=(0,a.useElements)();(0,f.Z)().get("promotionCode");return(0,m.jsx)("div",{className:"checkout-form",children:(0,m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),x(!0),"changeCard"===u||"addCard"===u||"upgrade"===u||"resubscribe"===u&&"Expired"!==p?w.confirmSetup({elements:I,redirect:"if_required"}).then((function(e){var r=e.setupIntent.payment_method;return"upgrade"===u?(0,c.eB6)(t,r).then((function(){return(0,c.rXU)(t).then((function(e){x(!1),l()}))})):"resubscribe"===u?(0,c.eB6)(t,r).then((function(){return(0,c.S0H)(t,n).then((function(){x(!1),l()}))})):(0,c.eB6)(t,r).then((function(){l()}))})).catch((function(e){"validation_error"!==e.type&&d(),x(!1)})):w.confirmPayment({elements:I,redirect:"if_required"}).then((function(e){if(e.error)throw e.error;var r=e.paymentIntent.id,i=e.paymentIntent.payment_method;return"resubscribe"===u?(0,c.iHA)(t,r,i).then((function(){x(!1),l()})):"renew"===u?(0,c.iHA)(t,n,"",i).then((function(){l()})):"create"===u?(0,c.mwz)(t,r,i).then((function(e){x(!1),l()})):(0,c.$vQ)(t,r,i).then((function(e){x(!1),l()}))})).catch((function(e){e.message&&i.ZP.error(e.message,5),"validation_error"!==e.type&&d(),x(!1)}))},children:[y&&"changeCard"===u&&(0,m.jsx)("div",{style:{marginBottom:"10px"},children:"This will replace your current saved card"}),(0,m.jsx)(a.PaymentElement,{options:{fields:{billingDetails:{email:"auto",address:"auto"}},terms:{card:"never"},wallets:{applePay:"never",googlePay:"never"}},onReady:function(){g(!0)}}),!y&&(0,m.jsx)("div",{className:"loading-area",style:{height:"58px"},children:(0,m.jsx)(s.Z,{})}),y&&(0,m.jsx)("div",{className:"btn-area",children:(0,m.jsx)(r.Z,{type:"primary",htmlType:"submit",size:"large",loading:j,disabled:!y,children:function(){switch(u){case"changeCard":return"Update";case"addCard":return"Add";case"renew":return"Renew";case"resubscribe":return"Resubscribe";case"transfer":return"Transfer";default:return"Pay"}}()})})]})})};const g=(0,u.$j)((function(e){return{theme:e.userSetting.theme}}),{})((function(e){var t=e.workspace,n=(e.getPlanName,e.planName),r=e.afterPay,i=e.theme,l=e.type,u=e.transferInfo,p=e.handleGettingSecret,g=e.payStatus,b=h((0,o.useState)(null),2),j=b[0],x=b[1],w=(0,f.Z)().get("promotionCode");function I(){x(null),p&&p(!0),"changeCard"===l||"upgrade"===l||"resubscribe"===l&&"Expired"!==g?(0,c.GY)().then((function(e){x(e.secret),p&&p(!1)})).catch((function(e){p&&p(!1)})):(p&&p(!0),(0,c.FB8)(t.id,l,n,w).then((function(e){x(e.secret),p&&p(!1)})).catch((function(e){p&&p(!1)})))}(0,o.useEffect)((function(){I()}),[t.id,n]);var S={appearance:d.Pp[i],clientSecret:j};return(0,m.jsx)("div",{className:"workspace-stripe-element",children:j?(0,m.jsx)(a.Elements,{stripe:v,options:S,children:(0,m.jsx)(y,{workspaceID:t.id,transferInfo:u,planName:n,afterPay:r,type:l,refreshSecret:I,payStatus:g})}):(0,m.jsx)(s.Z,{})})}))},73078:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(96974),i=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=function(e){return function(t){var n=(0,r.TH)(),a=(0,r.s0)(),s=(0,r.UO)();return(0,i.jsx)(e,o(o({},t),{},{router:{location:n,navigate:a,params:s}}))}}},16514:(e,t,n)=>{n.d(t,{BT:()=>r,Br:()=>a,Cj:()=>I,J6:()=>d,JT:()=>u,Ob:()=>g,Pp:()=>w,S3:()=>x,SF:()=>m,SX:()=>i,WM:()=>f,Z$:()=>p,ai:()=>b,hj:()=>l,iv:()=>s,np:()=>j,sr:()=>c,t5:()=>h,t8:()=>v,uK:()=>o,wo:()=>y});var r={channel:"#",repo:"",user:"@",board:"",project:"",folder:""},i=[{name:"slack",displayName:"Slack"},{name:"asana",displayName:"Asana"},{name:"trello",displayName:"Trello"},{name:"github",displayName:"Github"},{name:"jira",displayName:"Jira"}],a=[{name:"googleDrive",displayName:"Google Drive"},{name:"dropbox",displayName:"Dropbox"},{name:"box",displayName:"Box"}],o=[{type:"free",displayName:"Free",tip:"Great starter",features:{integrations_cs:[{name:"googleDrive",displayName:"Google Drive"}],integrations_cp:[],screenshot:["Up to 100 screenshots","Basic annotation tools"],record:[{type:"string",text:"Up to 20 recordings"},{type:"string",text:"Unlimited recording length",preview:"local"},{type:"string",text:"Resolution up to 720p"},{type:"string",text:"Recover from Trash within 3 days"},{type:"string",text:"Download in MP4 (less than 1 hour)"},{type:"string",text:"Use annotation tools while recording"},{type:"string",text:"Edit video with Cut, Text, Shape... (less than 1 hour)"}],others:["Capture visible/full page screenshot","Basic annotation tools","1 Project to host, manage and share screenshots","30 images per project","5 minutes video recording per video","20 free videos access","Recover items from Trash within 3 days"]}},{type:"professional",displayName:"Professional",tip:"Unlimited recordings & screenshots",features:{integrations_cs:[{name:"googleDrive",displayName:"Google Drive"},{name:"dropbox",displayName:"Dropbox"},{name:"box",displayName:"Box"}],integrations_cp:[{name:"slack",displayName:"Slack"},{name:"trello",displayName:"Trello"},{name:"asana",displayName:"Asana"},{name:"github",displayName:"Github"},{name:"jira",displayName:"Jira"}],screenshot:["Unlimited screenshots","All annotation tools"],record:[{type:"string",text:"Unlimited recordings"},{type:"string",text:"Unlimited recording length",preview:"cloud"},{type:"string",text:"Resolution up to 4k"},{type:"string",text:"Recover from Trash within 30 days"},{type:"string",text:"Download in MP4 (from the Cloud)"},{type:"string",text:"Use annotation tools while recording"},{type:"string",text:"Edit video with Cut, Text, Shape... (unlimited recording length)"},{type:"string",text:"Priority MP4 conversion"}],others:["All Capture features","All advanced annotation tools","Unlimited screenshot storage","Unlimited projects to host, manage and share screenshots","Unlimited video recording for Tabs and Desktop","Unlimited video recording and access"]}},{type:"basic",displayName:"Basic",tip:"Unlimited screenshots only",features:{integrations_cs:[{name:"googleDrive",displayName:"Google Drive"},{name:"dropbox",displayName:"Dropbox"},{name:"box",displayName:"Box"}],integrations_cp:[],screenshot:["Unlimited screenshots","All annotation tools"],record:[{type:"string",text:"Up to 20 recordings"},{type:"string",text:"Unlimited recording length",preview:"local"},{type:"string",text:"Resolution up to 720p"},{type:"string",text:"Recover from Trash within 30 days"},{type:"string",text:"Download in MP4 (less than 1 hour)"},{type:"string",text:"Use annotation tools while recording"},{type:"string",text:"Edit video with Cut, Text, Shape... (less than 1 hour)"}],others:["All Capture features","All advanced annotation tools","Unlimited screenshot storage","Unlimited projects to host, manage and share screenshots","Unlimited video recording for Tabs and Desktop","20 free videos access","Recover items from Trash within 30 days"]}}],s=[{type:"workspace-lite",displayName:"Workspace Lite",tip:"",features:[{name:"video",displayName:"Up to 20 videos"},{name:"image",displayName:"Up to 50 images"},{name:"member",displayName:"Up to 5 members"}]},{type:"workspace-premium",displayName:"Workspace Premium",tip:"",features:[{name:"video",displayName:"Unlimited videos"},{name:"image",displayName:"Unlimited images"},{name:"member",displayName:"Unlimited members"}]},{type:"workspace-enterprise",displayName:"Enterprise",tip:"",features:[{name:"enterprise",displayName:"Enterprise support"},{name:"domain",displayName:"Custom domains (Coming soon)"},{name:"sso",displayName:"SSO (Coming soon)"}]}],c=[{msg:"I prefer manual renewal.",value:"A",type:"checkbox"},{msg:"It's too expensive.",value:"B",type:"checkbox"},{msg:"Only needed it occasionally.",value:"C",type:"checkbox"},{msg:"It doesn't work properly.",value:"D",type:"checkbox"},{msg:"Other",value:"E",type:"textarea"}],l=[{msg:"It doesn't have the features I need.",value:"A",type:"checkbox"},{msg:"It doesn't work properly.",value:"B",type:"checkbox"},{msg:"It's too expensive.",value:"C",type:"checkbox"},{msg:"Only needed it occasionally.",value:"D",type:"checkbox"},{msg:"Other",value:"E",type:"textarea"}],u={ITEM:"item"},d=5,f=["Video editor","Video","Image","Folder","Trash","Search"],m=[{header:"Can I cancel my subscription anytime?",content:"Yes, you can cancel your subscription in settings anytime."},{header:"Can I get a refund if I cancel my subscription?",content:"You can write us an email to ask for a refund for a yearly subscription if you cancel it within 14 days of purchase. No refund available for a monthly subscription."},{header:"How long does a refund take?",content:"It usually takes 2~7 business days."}],h=["👏","😂","❤️","😮","👍","👎"],p={video:"1",image:"0"},v={IS_NOT_SHARE:0,SHARED_TO_ME:1,SHARED_BY_ME:2},y={OLD_FORMAT:1,NEW_FORMAT:2},g=[.5,1,1.5,2],b=[5,10,15,20,25,30],j=[{name:"light",displayName:"Light theme"},{name:"dark",displayName:"Dark theme"},{name:"auto",displayName:"Use device theme"}],x={video:20,image:50,member:5},w={dark:{theme:"flat",variables:{borderRadius:"8px",colorBackground:"#0D0D0D",colorTextPlaceholder:"#808080"},rules:{".Label":{color:"#ffffff"},".Input":{color:"#ffffff"},".Input:placeholder":{color:"#808080"}}},light:{theme:"flat",variables:{borderRadius:"8px",colorBackground:"white",colorTextPlaceholder:"#808080"},rules:{".Label":{color:"#373C44"},".Input":{border:"1px solid #e5e5e5",color:"#373C44"},".Input:placeholder":{color:"#808080"}}}},I=["#2ecc71","#3498db","#8e44ad","#e67e22","#e74c3c","#1abc9c","#2c3e50"]},91829:(e,t,n)=>{n.d(t,{Z:()=>T});n(94969);var r=n(45777),i=n(24616),a=n(7085),o=n(67294),s=n(56262),c=n(39711),l=n(72586),u=n(80442),d=n(5410),f=n(50471),m=n(65497),h=(n(38691),n(71577)),p=n(16514),v=n(94184),y=n.n(v),g=n(85893);function b(e){var t=e.destinations,n=y()("des-container",{small:e.small,compact:t&&t.length>3});return(0,g.jsx)("div",{className:"render-des",children:t&&t.length?(0,g.jsx)("div",{className:n,children:t.map((function(t,n){var i=y()("des-item",t.service);return(0,g.jsx)(r.Z,{title:p.BT[t.resourceType]+t.resourceName,mouseEnterDelay:.5,mouseLeaveDelay:0,children:(0,g.jsxs)("div",{className:i,onClick:e.handleDesClick.bind(null,t),children:[(0,g.jsx)("div",{className:"icon"}),(0,g.jsx)("div",{className:"name",children:p.BT[t.resourceType]+t.resourceName})]})},t.resourceType+t.resourceName)}))}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.Z,{type:"primary",className:"feedback-btn",block:!0,onClick:e.handleAddDesClick,children:"Connect with other services"}),(0,g.jsxs)("div",{className:"support-s",children:[(0,g.jsx)("div",{children:"Support:"}),(0,g.jsx)("div",{className:"s-container",children:p.SX.map((function(e){return(0,g.jsx)(r.Z,{title:e.displayName,children:(0,g.jsx)("div",{className:"s-item ".concat(e.name)})},e.name)}))})]})]})})}var j=n(35552),x=n(56010);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var i=D(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(d,e);var t,n,o,s=N(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=s.call(this,e)).state={isShownDes:!1,currentDes:null,desCurrentPanel:"add",isShownUpgrade:!1},t.handleDesClick=t.handleDesClick.bind(E(t)),t.handleAddDesClick=t.handleAddDesClick.bind(E(t)),t.openDesModal=t.openDesModal.bind(E(t)),t.handleModalCancel=t.handleModalCancel.bind(E(t)),t.handleDesCreated=t.handleDesCreated.bind(E(t)),t.handleAccountConnected=t.handleAccountConnected.bind(E(t)),t.goToAddDes=t.goToAddDes.bind(E(t)),t.handleUpgradeCancel=t.handleUpgradeCancel.bind(E(t)),t}return t=d,(n=[{key:"componentDidMount",value:function(){this.props.loadUserInfo(),this.props.loadDestinations(),this.props.loadConnectedAccounts()}},{key:"openDesModal",value:function(e){var t=this;this.setState({desCurrentPanel:e},(function(){t.setState({isShownDes:!0})}))}},{key:"getPermissionByName",value:function(e){return this.props.permissions["allow".concat((0,x.fm)(e))]}},{key:"handleDesClick",value:function(e){var t=this;"add"===e?this.openDesModal("add"):this.getPermissionByName(e.service)?this.setState({currentDes:e},(function(){t.openDesModal("des")})):this.setState({upgradeType:"des",isShownUpgrade:!0})}},{key:"handleDesCreated",value:function(e){this.props.destinationCreated(e),this.setState({currentDes:e,desCurrentPanel:"des"})}},{key:"handleAccountConnected",value:function(e){this.props.connectedAccountSuccess(e)}},{key:"handleAddDesClick",value:function(){this.openDesModal("add")}},{key:"handleModalCancel",value:function(){this.setState({isShownDes:!1})}},{key:"handleUpgradeCancel",value:function(){this.setState({isShownUpgrade:!1})}},{key:"goToAddDes",value:function(){this.setState({desCurrentPanel:"add"})}},{key:"render",value:function(){var e=this.props,t=e.destinations,n=e.user,o=e.accounts,s=e.dataURL,d=e.permissions,f=e.isLoading,m=this.state,h=m.currentDes,p=m.desCurrentPanel,v={};o&&o.forEach((function(e){v[e.id]=e}));var y=o.filter((function(e){return"googleDrive"!==e.service&&"dropbox"!==e.service&&"box"!==e.service}));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"des-action",children:[(0,g.jsx)(r.Z,{title:"Create a new destination",children:(0,g.jsx)("div",{className:"setting-btn add",onClick:this.handleAddDesClick,children:(0,g.jsx)(j.dt,{})})}),(0,g.jsx)(r.Z,{title:"Manage destinations",children:(0,g.jsx)("div",{className:"setting-btn",children:(0,g.jsx)(c.rU,{to:"/settings/destinations",children:(0,g.jsx)(i.Z,{})})})})]}),(0,g.jsx)("h4",{children:"Collaborate with Teammates"}),(0,g.jsx)("div",{className:"AnnoDestinationList",children:(0,g.jsx)("div",{className:"ann-des-list",children:f?(0,g.jsx)("div",{className:"loading",children:(0,g.jsx)(a.Z,{style:{fontSize:24},spin:!0})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(b,{destinations:t,handleAddDesClick:this.handleAddDesClick,handleDesClick:this.handleDesClick}),(0,g.jsx)(l.Z,{visible:this.state.isShownDes,onCancel:this.handleModalCancel,currentPanel:p,currentDes:h,accountHash:v,destinations:t,accounts:y,goToAddDes:this.goToAddDes,handleDesCreated:this.handleDesCreated,handleAccountConnected:this.handleAccountConnected,permissions:d,imageUrl:s,currentPlan:n.premium.currentPlan,tabTitle:"",tabUrl:this.props.tabUrl,defaultCurrentAccount:y[0],type:this.props.type,itemId:this.props.itemId,itemUrl:this.props.itemUrl})]})})}),(0,g.jsx)(u.Z,{visible:this.state.isShownUpgrade,onCancel:this.handleUpgradeCancel,type:this.state.upgradeType})]})}}])&&I(t.prototype,n),o&&I(t,o),Object.defineProperty(t,"prototype",{writable:!1}),d}(o.Component),C={loadUserInfo:m.Lk,loadDestinations:f.jG,loadConnectedAccounts:d.Q6,destinationCreated:f.vM,connectedAccountSuccess:d.Mg};const T=(0,s.$j)((function(e){return{user:null===e.user?{}:e.user,destinations:e.destination.destinations,accounts:e.connectedAccount.accounts,isLoading:e.destination.isLoading||e.connectedAccount.isLoading}}),C)(A)},85191:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$e});n(38691);var r=n(71577),i=(n(38920),n(32787)),a=(n(3381),n(16114)),o=(n(5e3),n(28682)),s=(n(94969),n(45777)),c=(n(37135),n(48889)),l=(n(76752),n(58634)),u=n(57119),d=n(44545),f=n(79508),m=n(24616),h=n(67294),p=n(56262),v=n(96974),y=n(39711),g=n(18282),b=n(80442),j=n(26),x=n(8690),w=n(20495),I=n(93878),S=n(52471),N=n(65497),O=n(97474),E=n(3741),D=n(17662),A=n(56244),C=n(28045),T=n(56010),P=n(35552),_=n(85893);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const R=function(e){var t=k((0,h.useState)(!1),2),n=t[0],i=t[1];return(0,_.jsx)(c.Z,{visible:e.visible,destroyOnClose:!0,closable:!1,maskClosable:!1,footer:null,getContainer:!1,centered:!0,className:"access-modal",closeIcon:(0,_.jsx)(P.Tw,{style:{fontSize:"12px"}}),children:(0,_.jsx)("div",{className:"restriction-area",children:n?(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("h2",{className:"title",children:"Message sent successfully."})}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("h2",{className:"title",children:["Oops! This ",e.type," is not accessible."," "]}),(0,_.jsxs)("p",{children:["This ",e.type," is locked because the owner (",e.username,") has reached a limit for ",e.type," sharing."]}),(0,_.jsxs)("p",{children:["Want to ","video"===e.type?"watch":"view"," this"," ",e.type,"? Click the button below to let the owner know. We will send a reminder message to the video owner for you."]}),(0,_.jsx)(r.Z,{type:"primary",onClick:function(){"video"===e.type?(0,O.bG5)(e.id).then((function(){i(!0)})):(0,O.QbM)(e.id).then((function(){i(!0)})),(0,T.I1)("tell owner restriction",{event_category:e.type})},children:"Send reminder"})]})})})};var M=n(94184),Z=n.n(M),U=n(7085),H=n(73935);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e){var t=e.imageSrc,n=e.onClose,r=V((0,h.useState)(!0),2),i=r[0],a=r[1],o=V((0,h.useState)(0),2),s=o[0],c=o[1],l=(0,h.useRef)(),u=function(e){27===e.which&&n()};(0,h.useEffect)((function(){return l.current.onload=function(){this.naturalWidth>.9*window.innerWidth?c(Math.floor(.9*window.innerWidth)):c(this.naturalWidth),a(!1)},window.addEventListener("keydown",u,!1),function(){window.removeEventListener("keydown",u,!1)}}),[]);var d=Z()("image-viewer",{loaded:!i});return(0,_.jsxs)("div",{className:d,children:[i&&(0,_.jsx)("div",{className:"loading-area",children:(0,_.jsx)(U.Z,{style:{fontSize:54},spin:!0})}),(0,_.jsx)("img",{src:t,ref:l,style:{width:s}}),(0,_.jsx)("div",{className:"close-btn",onClick:n,children:(0,_.jsx)(P.Tw,{})}),(0,_.jsxs)("div",{className:"action-bar",children:[(0,_.jsx)("div",{className:"action-btn zoom-in",onClick:function(){c(1.25*s)},children:(0,_.jsx)(P.dt,{})}),(0,_.jsx)("div",{className:"action-btn zoom-in",onClick:function(){c(Math.floor(.75*s))},children:(0,_.jsx)(P.GS,{})})]})]})}const z=function(e){return H.createPortal((0,_.jsx)(W,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)),document.body)};function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const q=function(e){var t=e.src,n=e.handleImageOnLoad,r=K((0,h.useState)(!1),2),i=r[0],a=r[1],o=(0,h.useRef)(),c=function(){a(!0),document.body.style.overflow="hidden"};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(s.Z,{title:"Fullscreen",placement:"bottom",children:(0,_.jsx)("div",{className:"zoom-in-btn",onClick:c,children:(0,_.jsx)(P.tj,{})})}),(0,_.jsxs)("div",{className:"img-wrapper",children:[(0,_.jsx)("img",{style:{cursor:"zoom-in"},ref:o,src:t,crossOrigin:"Anonymous",onClick:c,onLoad:function(){var e=o.current,t=document.createElement("canvas"),r=t.getContext("2d");t.width=e.naturalWidth,t.height=e.naturalHeight,r.drawImage(e,0,0),t.toBlob((function(e){n(e)}))}}),i&&(0,_.jsx)(z,{imageSrc:t,onClose:function(){a(!1),document.body.style.overflow="auto"}})]})]})};var Y=n(68628),J=(n(94507),n(48086)),Q=n(38819),X=n(51889);function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e){var t=e.imageId,n=e.handleFinishReport,a=ee((0,h.useState)(""),2),o=a[0],s=a[1],c=ee((0,h.useState)(!1),2),l=c[0],u=c[1],d=(0,p.v9)((function(e){return e.user.info}));return(0,_.jsx)("div",{className:"report-capture-panel",children:l?(0,_.jsxs)("div",{className:"sent-message",children:[(0,_.jsx)("div",{children:(0,_.jsx)(Q.Z,{})}),(0,_.jsx)("div",{className:"title",children:"Thank you"}),(0,_.jsx)("div",{className:"content",children:"Your report has been sent successfully. We will look into this and find a solution as soon as possible."})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"title",children:"Report capture issue"}),(0,_.jsxs)("div",{className:"content",children:[(0,_.jsx)("div",{className:"label",children:"Issue Summary (optional)"}),(0,_.jsx)("div",{className:"label-tip",children:"Let us know what happened in detail."}),(0,_.jsx)(i.Z.TextArea,{onChange:function(e){s(e.target.value)},autoSize:{minRows:3}})]}),(0,_.jsx)("div",{className:"btn-area",children:(0,_.jsx)(r.Z,{type:"primary",size:"large",block:!0,onClick:function(){var e={};e["Image ID"]=t,e.Summary=o,e["Screen Size"]=window.screen.width+"x"+window.screen.height;var r={name:d.fullName,subject:"Full Page capture Issue",email:d.mail,content:function(e){var t="";for(var n in e)t+="<b>"+n+"</b>: "+e[n]+"<br/>";return t}(e)};(0,O.hz1)(r).then((function(e){u(!0),n()})).catch((function(e){J.ZP.warning("Submission failed. Please retry or copy the page's url to send an email to care@awesomescreenshot.com.")}))},children:"Report"})})]})})}const oe=function(e){return(0,_.jsx)(X.Z,{visible:e.visible,onCancel:e.onCancel,children:(0,_.jsx)(ae,re(re({},e),{},{closeModal:e.onCancel}))})};function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const le=function(e){var t=e.imageId,n=se((0,h.useState)(!0),2),r=n[0],i=n[1],a=se((0,h.useState)(!1),2),o=a[0],s=a[1],c=(0,h.useCallback)((function(){i(!1)}),[]);return(0,_.jsxs)(_.Fragment,{children:[r?(0,_.jsxs)("div",{className:"report-capture-btn",onClick:function(){s(!0)},children:[(0,_.jsx)("div",{className:"icon",children:(0,_.jsx)(Y.Z,{})}),"Report capture issue"]}):null,(0,_.jsx)(oe,{imageId:t,handleFinishReport:c,visible:o,onCancel:function(){s(!1)}})]})};function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const fe=function(e){var t=e.url,n=e.title,r=e.status,i=ue((0,h.useState)(!1),2),a=i[0];return i[1],(0,_.jsxs)("div",{className:"action-item",onClick:function(){"Uploading"!==r?(0,T.Cz)(t,n):c.Z.warning({content:"Your image is being uploaded. Please wait a moment and retry later."})},children:[a?(0,_.jsx)("div",{className:"icon-loading",children:(0,_.jsx)(U.Z,{})}):(0,_.jsx)("div",{className:"icon",children:(0,_.jsx)(P._8,{})}),(0,_.jsx)("div",{className:"name",children:"Download"})]})};var me=n(1168);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function pe(){pe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new I(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=j(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function f(){}function m(){}var h={};s(h,i,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(S([])));v&&v!==t&&n.call(v,i)&&(h=v);var y=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,a,o,s){var c=l(e[i],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==he(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function j(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=m,s(y,"constructor",m),s(m,"constructor",f),f.displayName=s(m,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function ve(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function ye(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ve(a,r,i,o,s,"next",e)}function s(e){ve(a,r,i,o,s,"throw",e)}o(void 0)}))}}function ge(){return(ge=ye(pe().mark((function e(t){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=null;(0,T.ab)(t).then((function(n){n.forEach((function(n,i){var a=n.width,o=n.height;r?r.addPage([Math.ceil(a),Math.ceil(o)],a>o?"l":"p"):r=new me.ZP({orientation:a>o?"l":"p",unit:"pt",format:[Math.ceil(a),Math.ceil(o)],compress:!0});var s=document.createElement("canvas"),c=s.getContext("2d");s.width=a,s.height=o,c.drawImage(n.ele,0,0,a,o,0,0,a,o);var l=s.toDataURL("image/jpeg",1);r.addImage(l,"JPEG",0,0,Math.ceil(a),Math.ceil(o),"","FAST"),i===t.length-1&&e(r.output("bloburl"))}))}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const xe=function(e){var t=e.url,n=e.title,r=e.status,i=e.blob,s=be((0,h.useState)(!1),2),l=s[0],u=s[1],d=(0,h.useRef)(null),f=function(e){(0,T._x)(e,(function(){J.ZP.success("Copy success!",1)}),(function(e){J.ZP.error("Copy failed.",1)}))},m=/Chrome/.test(window.navigator.userAgent),p=(0,_.jsxs)(o.Z,{children:[(0,_.jsx)(o.Z.Item,{onClick:function(){"Uploading"!==r?(u(!0),(0,T.sI)(t,14400).then((function(e){return function(e){return ge.apply(this,arguments)}(e)})).then((function(e){u(!1),(0,T.Cz)(e,n+".pdf")})).catch((function(){u(!1)}))):c.Z.warning({content:"Your image is being uploaded. Please wait a moment and retry later."})},icon:(0,_.jsx)(P.p5,{}),children:"Download as PDF"}),m&&(0,_.jsx)(o.Z.Item,{icon:(0,_.jsx)(P.DE,{}),onClick:function(){if("Uploading"!==r)if(i)f(i);else{u(!0);var e=new Image,n=document.createElement("canvas"),a=n.getContext("2d");e.onload=function(){n.width=this.naturalWidth,n.height=this.naturalHeight,a.drawImage(this,0,0),n.toBlob((function(e){u(!1),e&&f(e)}))},e.crossOrigin="anonymous",e.src=t}else c.Z.warning({content:"Your image is being uploaded. Please wait a moment and retry later."})},children:"Copy"}),(0,_.jsx)(o.Z.Item,{icon:(0,_.jsx)(P.NJ,{}),onClick:function(){if("Uploading"!==r){u(!0);var e=d.current,n=document.createElement("div");n.style.margin="0 aut0",n.style.textAlign="center";var i=document.createElement("img");i.style.width="100%",n.appendChild(i);var a=e.contentWindow.document;a.body.appendChild(n),i.src=t;var o=e.contentWindow;i.onload=function(){o.close(),o.focus(),u(!1),o.print(),a.body.innerHTML=""},i.onerror=function(){u(!1)}}else c.Z.warning({content:"Your image is being uploaded. Please wait a moment and retry later."})},children:"Print"})]});return(0,_.jsx)(a.Z,{overlay:p,trigger:["click"],placement:"bottomRight",children:(0,_.jsxs)("div",{className:"action-item",children:[l?(0,_.jsx)("div",{className:"icon-loading",children:(0,_.jsx)(U.Z,{})}):(0,_.jsx)("div",{className:"icon",children:(0,_.jsx)(P.bv,{})}),!l&&(0,_.jsx)("div",{className:"name",children:"More"}),(0,_.jsx)("iframe",{style:{width:0,height:0,display:"none"},ref:d})]})})};var we=n(18621),Ie=n(73078),Se=n(16514),Ne=n(91829),Oe=n(38547),Ee=n(74998),De=n(63611),Ae=n(84141),Ce=n(5410),Te=n(87105);function Pe(e){var t=e.accounts;return(0,_.jsx)("div",{className:"render-drive-accounts",children:t&&t.length?(0,_.jsx)("div",{className:"save-to-drive",children:t.map((function(t){return(0,_.jsxs)("div",{className:"save-item ".concat(t.service),onClick:e.handleDriveItemClick.bind(null,t),children:[(0,_.jsx)("div",{className:"icon"}),(0,_.jsx)("span",{children:(0,_.jsx)("span",{className:"user-email",title:t.userInfo.email,children:t.userInfo.email})})]},t.id)}))}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.Z,{type:"primary",className:"connect-btn",block:!0,onClick:e.handleAddDriveClick,children:"Connect with cloud storage"}),(0,_.jsxs)("div",{className:"support-s",children:[(0,_.jsx)("div",{children:"Support:"}),(0,_.jsx)("div",{className:"s-container",children:Se.Br.map((function(e){return(0,_.jsx)(s.Z,{title:e.displayName,children:(0,_.jsx)("div",{className:"s-item ".concat(e.name)})},e.name)}))})]})]})})}function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Re(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=He(e);if(t){var i=He(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ze(this,n)}}function Ze(e,t){if(t&&("object"===_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ue(e)}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(a,e);var t,n,r,i=Me(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={isShownDrive:!1,isShownUpgrade:!1,currentDes:null,currentDriveAccount:null,upgradeType:"",desCurrentPanel:"add"},t.handleDesClick=t.handleDesClick.bind(Ue(t)),t.handleAddDriveClick=t.handleAddDriveClick.bind(Ue(t)),t.openDriveModal=t.openDriveModal.bind(Ue(t)),t.handleModalCancel=t.handleModalCancel.bind(Ue(t)),t.handleDesCreated=t.handleDesCreated.bind(Ue(t)),t.handleAccountConnected=t.handleAccountConnected.bind(Ue(t)),t.goToAddDes=t.goToAddDes.bind(Ue(t)),t.showModal=t.showModal.bind(Ue(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.loadUserInfo(),this.props.loadConnectedAccounts()}},{key:"handleDesClick",value:function(e){var t=this;"add"===e?this.openDesModal("add"):this.setState({currentDes:e},(function(){t.openDesModal("des")}))}},{key:"showModal",value:function(e){var t="isShown".concat(e);this.setState(ke({},t,!0))}},{key:"handleModalCancel",value:function(e){var t,n="isShown".concat(e);this.setState((ke(t={},n,!1),ke(t,"signInType",""),t))}},{key:"openDriveModal",value:function(e){var t=this;this.props.user.info.uid?"add"===e?this.setState({currentDriveAccount:null},(function(){t.showModal("Drive")})):this.props.permissions["allow".concat((0,T.fm)(e.service))]?this.setState({currentDriveAccount:e},(function(){t.showModal("Drive")})):this.setState({upgradeType:e.service},(function(){t.showModal("Upgrade")})):this.setState({signInType:"drive",isShownSignin:!0})}},{key:"handleDesCreated",value:function(e){this.props.destinationCreated(e),this.setState({currentDes:e,desCurrentPanel:"des"})}},{key:"handleAccountConnected",value:function(e){this.props.connectedAccountSuccess(e)}},{key:"handleAddDriveClick",value:function(){this.openDriveModal("add")}},{key:"goToAddDes",value:function(){this.setState({desCurrentPanel:"add"})}},{key:"render",value:function(){var e=this.props,t=(e.user,e.accounts),n=(e.dataURL,e.permissions,e.itemUrl,e.isLoading),r=t.filter((function(e){return"googleDrive"===e.service||"dropbox"===e.service||"box"===e.service}));return(0,_.jsx)("div",{className:"DriveList",children:(0,_.jsx)("div",{className:"ann-des-list",children:n?(0,_.jsx)("div",{className:"loading",children:(0,_.jsx)(U.Z,{style:{fontSize:24},spin:!0})}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Pe,{accounts:r,handleAddDriveClick:this.handleAddDriveClick,handleDriveItemClick:this.openDriveModal}),(0,_.jsx)(Te.Z,{visible:this.state.isShownDrive,onCancel:this.handleModalCancel.bind(null,"Drive"),tabTitle:this.props.title,imageUrl:this.props.imageUrl,imageBlob:this.props.imageBlob,service:this.state.driveService,permissions:this.props.permissions,currentPlan:this.props.currentPlan,accounts:r,currentDriveAccount:this.state.currentDriveAccount,handleDriveAccountConnected:this.handleDriveAccountConnected,contentType:this.props.contentType,showUpgradeModal:this.showUpgradeModal,type:"image",itemUrl:this.props.itemUrl}),(0,_.jsx)(b.Z,{visible:this.state.isShownUpgrade,onCancel:this.handleModalCancel.bind(null,"Upgrade"),type:this.state.upgradeType})]})})})}}])&&Le(t.prototype,n),r&&Le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(h.Component),Ge={loadUserInfo:N.Lk,loadConnectedAccounts:Ce.Q6,connectedAccountSuccess:Ce.Mg};const Ve=(0,p.$j)((function(e){var t=e.user;return{user:null===e.user?{}:e.user,permissions:t.permissions,currentPlan:t.premium.currentPlan,accounts:e.connectedAccount.accounts,isLoading:e.connectedAccount.isLoading}}),Ge)(Fe);function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ze=l.Z.TabPane;var Ke={moveToTrash:w.B0,loadImageInfo:I.Ql,deleteChannelItem:j.FO,loadUserInfo:N.Lk,loadComments:x.KT,generateImageShareLinkAction:I.Vu,revokeImageShareLinkAction:I.W_,hideItemAction:S.td,duplicateImage:I.m8};const $e=(0,Ie.Z)((0,p.$j)((function(e,t){var n=t.isModal?t.id:t.router.params.imageID;return{userInfo:e.user.info,isUserLoaded:e.user.isLoaded,counts:e.user.counts?e.user.counts.image:void 0,hasSaveToCloudAccount:e.user.hasSaveToCloudAccount,comments:e.comment.comments[Se.Z$.image+n]||[],image:e.image.images[n]||{},permissions:e.user.permissions,currentPlan:e.user.premium.currentPlan,userCounts:e.user.counts,theme:e.userSetting.theme}}),Ke)((function(e){var t=Be((0,h.useState)(!1),2),n=t[0],p=t[1],j=Be((0,h.useState)(!1),2),x=j[0],w=j[1],I=Be((0,h.useState)(!1),2),S=I[0],N=I[1],k=Be((0,h.useState)(null),2),L=k[0],M=k[1],Z=Be((0,h.useState)(!0),2),U=Z[0],H=(Z[1],Be((0,h.useState)(!1),2)),F=H[0],G=H[1],V=Be((0,h.useState)(!1),2),B=V[0],W=V[1],z=(0,Ee.Z)(),K=e.loadImageInfo,$=e.image,Y=e.permissions,J=e.currentPlan,Q=e.moveToTrash,X=e.loadComments,ee=e.comments,te=e.loadUserInfo,ne=e.isUserLoaded,re=e.deleteChannelItem,ie=e.isModal,ae=e.hideModal,oe=e.theme,se=e.hideItemAction,ce=e.isBrowsing,ue=e.userCounts,de=e.duplicateImage;(0,De.Z)($.info&&!ie?$.info.title:"");var me=(0,Oe.Z)($.isLoading),he=ie?e.id:e.router.params.imageID,pe=(0,Oe.Z)(he),ve=ie?e.shareKey:z.get("key"),ye=z.get("init_open"),ge=$.info||{},be=e.userInfo.uid+""!==ge.userID&&!ge.isChannelMember,je=e.userInfo.uid+""===ge.userID,Ie=ge.channel&&e.userInfo.uid===ge.channel.creatorID,Ce=(0,Oe.Z)(e.counts),Te=!U&&Ae.Z.isChrome()&&!Ae.Z.isMobile(),Pe=(0,v.s0)(),_e=(0,v.TH)();(0,h.useEffect)((function(){var e=setTimeout((function(){!(0,T.LB)()&&Ae.Z.isChrome()&&Ae.Z.isMobile()}),1e3);return(0,O.A95)(he),window.addEventListener("message",ke,!1),function(){clearTimeout(e),window.removeEventListener("message",ke,!1)}}),[]),(0,h.useEffect)((function(){void 0===e.userInfo.uid&&ne&&(0,T.Zf)(te)}),[e.userInfo,ne]),(0,h.useEffect)((function(){void 0===$.info&&!1===me&&pe===he&&(ie?ae():_e.state&&_e.state.inApp?Pe(-1):Pe("/my_items")),!1===$.isLoading&&void 0===$.info.id&&(e.isModal?(Pe("/404"),se()):Pe("/404",{replace:!0}))}),[$.isLoading,$]),(0,h.useEffect)((function(){var e=null;return"Uploading"===ge.statusName&&(e=setTimeout((function(){K(he,ve,!0)}),1500)),function(){e&&clearTimeout(e)}})),(0,h.useEffect)((function(){ce&&void 0!==$.info&&$.loaded||(K(he,ve),X(Se.Z$.image,he,ve))}),[he,ve]),(0,h.useEffect)((function(){void 0===Ce&&void 0!==e.userInfo.uid&&void 0!==e.counts&&void 0!==e.currentPlan&&"free"===e.currentPlan.PlanName&&parseInt(e.counts)>100&&(w(!0),N(!0))}),[e.counts,e.currentPlan]);var ke=function(e){var t=e.data;"show"===t.type?G(!0):"close"===t.type&&G(!1)},Le=(0,h.useCallback)((function(){if(e.isModal){var t={itemType:"image",id:e.image.info.id,shareKey:e.shareKey};localStorage.restore_modal=JSON.stringify(t)}window.location.href="/signin?redirect="+window.location.href}),[e,ie,e.image,e.shareKey]),Re=void 0===$.info||(ce?!$.loaded:$.isLoading),Me=void 0!==ge.canVisit&&!1===ge.canVisit&&be,Ze=void 0!==e.currentPlan&&void 0!==e.counts&&"free"===e.currentPlan.PlanName&&parseInt(ue.video)>=.75*ue.videoLimitation&&parseInt(ue.video)<ue.videoLimitation,Ue=void 0!==e.currentPlan&&void 0!==e.counts&&"free"===e.currentPlan.PlanName&&parseInt(ue.video)>=ue.videoLimitation;return(0,_.jsxs)("div",{className:"image-detail-page ".concat(ie?"modal":""),children:[Ue&&(0,_.jsxs)("div",{className:"discount-tip-header",children:[(0,_.jsx)(u.Z,{}),"You’ ve reached the 100 screenshot limit. Upgrade for unlimited screenshots.",(0,_.jsx)(y.rU,{className:"btn primary",to:"/pricing?from=list_image_reach_limit",children:"Upgrade now"})]}),Ze&&(0,_.jsxs)("div",{className:"discount-tip-header",children:[(0,_.jsx)(u.Z,{}),"You’ ve taken ",ue.image,"/",ue.imageLimitation," ","screenshots. Upgrade for unlimited screenshots.",(0,_.jsx)(y.rU,{className:"btn primary",to:"/pricing?from=list_video_image_close_limit",children:"Upgrade now"})]}),(0,_.jsx)("div",{className:"inner-container",children:(0,_.jsx)("div",{className:"main",children:Re?(0,_.jsx)(A.Z,{}):(0,_.jsxs)("div",{className:"image-container",children:[(0,_.jsxs)("div",{className:"image-area",children:[ye&&(0,_.jsx)(le,{imageId:ge.id}),(0,_.jsxs)("div",{className:"image-preview",children:[(0,_.jsx)("span",{className:"helper"}),"Uploading"===ge.statusName?(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("div",{className:"img-wrapper",children:(0,_.jsx)("div",{className:"uploading-tip",children:" Uploading..."})})}):(0,_.jsx)(q,{src:ge.imageFileURI,handleImageOnLoad:function(e){M(e)}})]}),(0,_.jsxs)("div",{className:"image-title-area",children:[(0,_.jsx)("div",{className:"image-title",children:je?(0,_.jsx)(C.Z,{item:ge}):(0,_.jsx)("div",{className:"display-title",children:ge.title})}),(0,_.jsxs)("div",{className:"image-info",children:[(0,_.jsxs)("div",{className:"image-info-avatar",children:[(0,_.jsx)(g.Z,{size:"32",username:ge.userName,avatarUrl:ge.userAvatar}),(0,_.jsx)("span",{className:"username",children:ge.userName})]}),(0,_.jsx)("div",{className:"image-info-text",children:(0,_.jsxs)("div",{className:"extra-info",children:[(0,_.jsxs)("span",{className:"views",children:[(0,_.jsx)("span",{children:ge.views})," ",ge.views>1?"views":"view"]}),(0,_.jsx)("span",{className:"sep",children:"•"}),(0,_.jsx)("span",{className:"create-time",children:(0,T.p6)(ge.createdSec)})]})})]}),(0,_.jsxs)("div",{className:"image-action",children:[ge.sourceURL&&(0,_.jsx)(s.Z,{title:"",children:(0,_.jsxs)("div",{className:"image-action-btn text",onClick:function(){window.open(ge.sourceURL)},children:[(0,_.jsx)(P.Od,{}),"Source URL"]})}),je&&(0,_.jsx)(a.Z,{placement:"topRight",trigger:"click",overlay:(0,_.jsxs)(o.Z,{children:[(0,_.jsx)(o.Z.Item,{icon:(0,_.jsx)(P.NA,{}),onClick:function(){Y.allowUploadImage?de($.info,(function(e){window.open("https://"+window.location.host+"/image/"+e)})):W(!0)},children:"Duplicate"},"duplicate"),(0,_.jsx)(o.Z.Item,{icon:(0,_.jsx)(P.XH,{}),onClick:function(){c.Z.confirm({title:"Are you sure you want to remove this item?",content:"",onOk:function(){ge.channel?re({workspaceID:ge.channel.workspaceID,channelID:ge.channel.id,itemID:ge.id,id:ge.channelItemId,itemType:ge.itemType},(function(){ie?ae():Pe("/workspace/"+ge.channel.workspaceID+"/"+ge.channel.id)})):Q([ge])},okText:"Move to Trash",okType:"danger",onCancel:function(){}})},danger:!0,children:"Remove"},"remove")]}),children:(0,_.jsx)("div",{className:"image-action-btn",children:(0,_.jsx)(P.bv,{})})}),be&&!1]})]})]}),be?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"sidebar-area",children:(0,_.jsxs)("div",{className:"shared-comment-container",children:[(0,_.jsx)("div",{className:"title",children:e.comments.length>1?"".concat(e.comments.length," Comments"):"".concat(e.comments.length," Comment")}),(0,_.jsx)(E.Z,{itemType:Se.Z$.image,itemId:he,isOwner:parseInt(ge.userID)===e.userInfo.uid,shareKey:ve,goToSignIn:Le})]})}),Te&&(0,_.jsx)("div",{className:"sidebar-area",children:(0,_.jsx)("div",{className:"sidebar",children:(0,_.jsx)("div",{className:"section",children:(0,_.jsxs)("div",{className:"promo-box",children:[(0,_.jsx)(g.Z,{size:"48",username:ge.userName,avatarUrl:ge?ge.avatarURL:"",type:"circle",block:!0}),(0,_.jsx)("div",{className:"avatar-name",children:ge.userName}),(0,_.jsx)("div",{className:"text first",children:"shared this video with you via Awesome Screenshot , a popular tool for screen recording and capture."}),(0,_.jsx)("div",{className:"text",children:"Want to take and share a recording like this? Have a try. It's free!"}),(0,_.jsx)("div",{className:"install-btn",onClick:T.nV.bind(null,"video-shared-sidebar-click"),children:"Try It Now!"})]})})})})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"sidebar-area",children:(0,_.jsxs)(l.Z,{defaultActiveKey:ge.hasComment||ge.channel?"2":"1",centered:!0,children:[(0,_.jsx)(ze,{tab:"Manage",children:(0,_.jsxs)(_.Fragment,{children:[(je||Ie)&&(0,_.jsx)("div",{className:"sidebar",children:(0,_.jsx)(we.Z,{item:ge})}),je&&(0,_.jsx)("div",{className:"sidebar",children:(0,_.jsx)("div",{className:"section tiny",children:(0,_.jsxs)("div",{className:"action-box",children:[(0,_.jsx)(fe,{url:ge.imageDownloadURI,title:ge.title,status:ge.statusName}),(0,_.jsxs)("div",{className:"action-item",onClick:function(){return function(e){if("Uploading"!==ge.statusName)switch(e){case"annotate":Pe("/image/annotate/"+ge.id,ie?{state:{isModal:!0}}:{state:{inApp:!0}});break;case"comment":window.location.href="/showImage?img_id="+ge.id;break;case"commentShare":window.location.href=ge.commentURL}else c.Z.warning({content:"Your image is being uploaded. Please wait a moment and retry later."})}("annotate")},children:[(0,_.jsx)("div",{className:"icon",children:(0,_.jsx)(P.zJ,{})}),(0,_.jsx)("div",{className:"name",children:"Annotate"})]}),(0,_.jsx)(xe,{url:ge.imageDownloadURI,title:ge.title,status:ge.statusName,blob:L})]})})}),!be&&(0,_.jsx)("div",{className:"sidebar",children:(0,_.jsx)("div",{className:"section",children:ge.shareURI?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"share-title-area",children:["Share Link",(0,_.jsx)("div",{className:"more",children:(0,_.jsx)(a.Z,{overlay:(0,_.jsxs)(o.Z,{children:[(0,_.jsx)(o.Z.Item,{children:(0,_.jsx)("div",{className:"revoke-btn",onClick:function(){c.Z.confirm({title:"Are you sure to revoke this share link?",okType:"danger",okText:"Yes, revoke",onOk:function(){e.revokeImageShareLinkAction(ge.id)}})},children:"Revoke share link"})},"revoke"),(0,_.jsx)(o.Z.Item,{children:(0,_.jsx)("div",{className:"revoke-btn",onClick:function(){(0,T.bw)(ge.shareURI)},children:"Get short url"})},"tinyurl")]}),trigger:["click"],children:(0,_.jsx)(d.Z,{})})})]}),(0,_.jsx)("div",{className:"share-link-input",children:(0,_.jsx)(i.Z,{disabled:!0,value:ge.shareURI})}),(0,_.jsx)("div",{className:"button-area",children:(0,_.jsx)(r.Z,{type:"primary",block:!0,icon:n?(0,_.jsx)(f.Z,{}):(0,_.jsx)(P.TI,{}),className:n?"copy-btn copied":"copy-btn",onClick:function(e){(0,T.zp)(e),p(!0),setTimeout((function(){p(!1)}),1500)}.bind(this,ge.shareURI),children:n?"Copied!":"Copy Link"})}),(0,_.jsx)("div",{className:"sep"}),(0,_.jsx)("div",{className:"destination-area",children:(0,_.jsx)(Ne.Z,{dataURL:"fff",permissions:Y,currentPlan:J,type:"image",tabUrl:ge.sourceURL,itemId:he,itemUrl:ge.shareURI})})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("h4",{children:"Share Your Image"}),(0,_.jsxs)("div",{className:"button-area",children:[(0,_.jsx)(r.Z,{className:"shareButton",onClick:function(){e.generateImageShareLinkAction(ge.id)},loading:$.isGenerateShareLinkLoading,children:"Generate Shareable Link"}),(0,_.jsxs)("div",{className:"support-s",children:[(0,_.jsx)("div",{children:"Support:"}),(0,_.jsx)("div",{className:"s-container",children:Se.SX.map((function(e){return(0,_.jsx)(s.Z,{title:e.displayName,children:(0,_.jsx)("div",{className:"s-item ".concat(e.name)})},e.name)}))})]})]})]})})}),e.hasSaveToCloudAccount&&(0,_.jsx)("div",{className:"sidebar",children:(0,_.jsx)("div",{className:"section",children:(0,_.jsxs)("div",{className:"drive-area",children:[(0,_.jsx)(s.Z,{title:"Manage accounts",children:(0,_.jsx)("div",{className:"setting-btn",children:(0,_.jsx)(y.rU,{to:"/settings/connectedAccounts",children:(0,_.jsx)(m.Z,{})})})}),(0,_.jsx)("h4",{children:"Save to Cloud"}),(0,_.jsx)(Ve,{title:ge.title,itemUrl:ge.imageDownloadURI,user:e.user})]})})}),Ze&&!1]})},"1"),(0,_.jsx)(ze,{tab:ee.length>0?"Comments (".concat(ee.length,")"):"Comments",children:(0,_.jsx)("div",{className:"comment-area",children:(0,_.jsx)(E.Z,{itemType:Se.Z$.image,itemId:he,isOwner:parseInt(ge.userID)===e.userInfo.uid,shareKey:ve,isInChannel:!!ge.channel,channel:ge.channel,goToSignIn:Le})})},"2")]})}),ye&&"free"===e.currentPlan.PlanName&&(0,_.jsx)("iframe",{src:"https://www.vidline.com/promotion-card.html?theme=".concat(oe,"&place=website"),className:"promotion-iframe ".concat(F?"show":"")})]})]})})}),(0,_.jsx)(b.Z,{unClosable:!S,visible:x,onCancel:function(){w(!1)},type:S?"image-alert":"image-view"}),(0,_.jsx)(b.Z,{visible:B,onCancel:function(){W(!1)},type:"duplicate"}),(0,_.jsx)(D.Z,{isInApp:!!e.location&&e.location.state}),(0,_.jsx)(R,{type:"image",username:ge.userName,visible:Me,id:he})]})})))},88773:(e,t,n)=>{var r=n(73935),i=n(56262),a=n(97168),o=n(67294),s=n(45227),c=n(65497),l=n(98050),u=n(74998),d=n(59631),f=n(8651),m=(n(38691),n(71577)),h=(n(45623),n(71257)),p=(n(38920),n(32787)),v=(n(94507),n(48086)),y=n(97474),g=n(94184),b=n.n(g),j=n(35552),x=n(85893),w=[{index:1,desc:"Create workspace"},{index:2,desc:"Invite members"},{index:3,desc:"Finish"}];const I=function(e){var t=e.currentStep;return(0,x.jsxs)("div",{className:"create-workspace-steps",children:[(0,x.jsx)("div",{className:"line"}),w.map((function(e){return(0,x.jsxs)("div",{className:(n=e.index,b()("steps-item",{current:t===n,finish:t>n})),children:[(0,x.jsx)("div",{className:"circle",children:t>e.index?(0,x.jsx)("div",{className:"finish-icon",children:(0,x.jsx)(j.m9,{})}):e.index}),(0,x.jsx)("div",{className:"desc",children:e.desc})]},e.index);var n}))]})};function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const O=function(e){var t=e.currentWorkspace,n=e.finishCreateChannel,r=S((0,o.useState)(!1),2),i=r[0],a=r[1];return(0,x.jsxs)("div",{className:"create-workspace-name",children:[(0,x.jsx)(I,{currentStep:1}),(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("div",{className:"step-title",children:"What do your team plan to work on?"}),(0,x.jsx)("div",{className:"step-title-desc",children:"It could be a project, party, campaign or anything."}),(0,x.jsx)("div",{className:"step-form",children:(0,x.jsxs)(h.Z,{onFinish:function(e){var r=e.channelName,i=e.channelDesc;r&&(a(!0),(0,y.mih)(t.id,r,i).then((function(e){a(!1),n(e.channel)})).catch((function(e){v.ZP.error(e)})))},children:[(0,x.jsx)("div",{className:"label",children:"Name"}),(0,x.jsx)(h.Z.Item,{name:"channelName",children:(0,x.jsx)(p.Z,{size:"large",autoComplete:"off"})}),(0,x.jsx)("div",{className:"label",children:"Description"}),(0,x.jsx)(h.Z.Item,{name:"channelDesc",children:(0,x.jsx)(p.Z.TextArea,{autoSize:{minRows:4}})}),(0,x.jsx)(h.Z.Item,{children:(0,x.jsx)(m.Z,{type:"primary",size:"large",loading:i,block:!0,htmlType:"submit",children:"Next"})})]})})]})]})};var E=n(90575);const D=function(e){var t=e.currentWorkspace,n=e.currentChannel,r=e.goToPayment,i=e.plans;return(0,x.jsxs)("div",{className:"workspace-finish",children:[(0,x.jsx)(I,{currentStep:3}),(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("div",{className:"step-title",children:"Choose your workspace plan"}),(0,x.jsxs)("div",{className:"plan-panel",children:[(0,x.jsxs)("div",{className:"plan-item",children:[(0,x.jsx)("div",{className:"plan-title",children:"Workspace lite"}),(0,x.jsx)("div",{className:"plan-desc",children:"For teams with a small number of members"}),(0,x.jsxs)("div",{className:"plan-content",children:[(0,x.jsx)("div",{className:"plan-name",children:"Free"}),(0,x.jsxs)("ul",{className:"plan-list",children:[(0,x.jsxs)("li",{children:[(0,x.jsx)(j.m9,{}),"20 videos"]}),(0,x.jsxs)("li",{children:[(0,x.jsx)(j.m9,{}),"50 images"]}),(0,x.jsxs)("li",{children:[(0,x.jsx)(j.m9,{}),"5 members"]})]})]}),(0,x.jsx)("div",{className:"button-area",children:(0,x.jsx)(m.Z,{block:!0,type:"primary",ghost:!0,onClick:function(){window.location.href="/workspace/"+t.id+"/"+n.id},children:"Choose plan"})})]}),(0,x.jsxs)("div",{className:"plan-item",children:[(0,x.jsx)("div",{className:"plan-title",children:"Workspace premium"}),(0,x.jsx)("div",{className:"plan-desc",children:"Applicable to teams with more members and more items"}),(0,x.jsxs)("div",{className:"plan-content",children:[(0,x.jsxs)("div",{className:"plan-name",children:["$",i.workspace_plan.Price/12," ",(0,x.jsx)("span",{children:"/member/month"})]}),(0,x.jsxs)("ul",{className:"plan-list",children:[(0,x.jsxs)("li",{children:[(0,x.jsx)(j.m9,{}),"Unlimited videos"]}),(0,x.jsxs)("li",{children:[(0,x.jsx)(j.m9,{}),"Unlimited images"]}),(0,x.jsxs)("li",{children:[(0,x.jsx)(j.m9,{}),"Unlimited members"]})]}),"Plus, every member will get",(0,x.jsx)(E.Z,{})]}),(0,x.jsx)("div",{className:"button-area",children:(0,x.jsx)(m.Z,{block:!0,ghost:!0,type:"primary",onClick:r,children:"Choose plan"})})]})]})]})]})};const A=function(e){var t=e.changeStep,n=e.canCreateLite,r=e.plans;return(0,x.jsxs)("div",{className:"create-workspace-intro",children:[(0,x.jsx)("div",{className:"logo"}),(0,x.jsx)("div",{className:"main",children:(0,x.jsxs)("div",{className:"content",children:[(0,x.jsxs)("div",{className:"text",children:[n?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"title",children:"Create a Workspace"}),(0,x.jsx)("p",{children:"Collaborating with your team in a workspace, you can communicate and share visual content with colleagues."}),(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:"Collaborate with teammates"}),(0,x.jsx)("li",{children:"Seamless synchronization across different platforms"}),(0,x.jsx)("li",{children:"A powerful visual repository for your team"})]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"title",children:"Create a Workspace Premium"}),(0,x.jsxs)("p",{children:["You have exceeded your limit of creating Workspace Lite. A user can only have ",(0,x.jsx)("b",{children:"one Workspace Lite"}),". Create a Workspace Premium instead."]}),(0,x.jsxs)("div",{className:"price",children:["$",r.workspace_plan.Price/12,(0,x.jsx)("span",{children:"/member/month"})]}),(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:"Unlimited items in Workspace"}),(0,x.jsx)("li",{children:"Unlimited items in Workspace"}),(0,x.jsx)("li",{children:"Unlimited members in Workspace"})]})]}),(0,x.jsxs)(m.Z,{type:"primary",size:"large",onClick:function(){t("name")},children:["Create Workspace ",!n&&"Premium"]})]}),(0,x.jsx)("div",{className:"pic"})]})})]})};var C=n(39521);const T=function(e){var t=e.currentWorkspace,n=e.currentChannel,r=e.finishInvite;return(0,x.jsxs)("div",{className:"create-workspace-invite",children:[(0,x.jsx)(I,{currentStep:2}),(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("div",{className:"step-title",children:'Who do you collaborate with in "'.concat(n.name,'"?')}),(0,x.jsx)("div",{className:"step-title-desc",children:"Members can modify their permissions after entering the workspace"}),(0,x.jsx)("div",{className:"step-form invite-form",children:(0,x.jsx)(C.Z,{channel:n,workspaceID:t.id,afterInvite:r})}),(0,x.jsx)("div",{className:"skip-btn",children:(0,x.jsx)("span",{onClick:r,children:"Skip"})})]})]})};function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const k=function(e){var t=e.finishCreateWorkspace,n=e.canCreateLite,r=P((0,o.useState)(!1),2),i=r[0],a=r[1];return(0,x.jsxs)("div",{className:"create-workspace-name",children:[(0,x.jsx)(I,{currentStep:1}),(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("div",{className:"step-title",children:"What is the name of your workspace?"}),(0,x.jsx)("div",{className:"step-title-desc",children:"Name your workspace something your team will recognize"}),(0,x.jsx)("div",{className:"step-form",children:(0,x.jsxs)(h.Z,{onFinish:function(e){var r=e.workspaceName;r&&(a(!0),(0,y.MBc)(r,n?"lite":"premium").then((function(e){a(!1),t(e.workspace)})).catch((function(e){a(!1),v.ZP.error(e)})))},children:[(0,x.jsx)(h.Z.Item,{name:"workspaceName",children:(0,x.jsx)(p.Z,{size:"large",autoComplete:"off"})}),(0,x.jsx)(h.Z.Item,{children:(0,x.jsx)(m.Z,{type:"primary",size:"large",block:!0,htmlType:"submit",loading:i,children:"Next"})})]})})]})]})};function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M={loadWorkspaces:l.Pf,loadUserInfo:c.Lk,loadPlans:s.Z};const Z=(0,i.$j)((function(e){return{userInfo:e.user.info,workspaceHash:e.workspace.myWorkspaceHash,workspaceIDList:e.workspace.myWorkspaceIDList,isCreating:e.workspace.isCreating,isWorkspaceLoading:e.workspace.isLoading,isUserLoading:e.user.isLoading,plans:e.plan.plans}}),M)((function(e){var t=e.isCreating,n=e.workspaceIDList,r=e.workspaceHash,i=e.userInfo,a=e.loadUserInfo,s=e.loadWorkspaces,c=e.isUserLoading,l=e.isWorkspaceLoading,m=e.loadPlans,h=e.plans,p=L((0,o.useState)("intro"),2),v=p[0],y=p[1],g=L((0,o.useState)(),2),b=g[0],j=g[1],w=L((0,o.useState)(),2),I=w[0],S=w[1],N=L((0,o.useState)(!1),2),E=N[0],C=N[1],P=(0,u.Z)(),_="true"===P.get("premium");function R(){if(_)return!1;for(var e=0;e<n.length;e++){var t=r[n[e]];if("lite"===t.plan&&t.ownerUID===i.uid)return!1}return!0}function M(e){y(e)}function Z(){C(!0)}function U(e){j(e),y("channel")}function H(e){S(e),R()?y("invite"):C(!0)}function F(){R()?y("finish"):window.location.href="/workspace/"+b.id+"/"+I.id}P.get("promotionCode"),(0,o.useEffect)((function(){s(),a(),m()}),[]);var G=R();return(0,x.jsx)("div",{className:"create-workspace-page",children:l||c||!h.workspace_plan?(0,x.jsx)("div",{className:"loading-area",children:(0,x.jsx)(d.Z,{})}):(0,x.jsxs)(x.Fragment,{children:[function(){switch(v){case"intro":return(0,x.jsx)(A,{canCreateLite:R(),changeStep:M,plans:h});case"name":return(0,x.jsx)(k,{canCreateLite:R(),isCreating:t,finishCreateWorkspace:U});case"channel":return(0,x.jsx)(O,{canCreateLite:R(),currentWorkspace:b,finishCreateChannel:H});case"invite":return(0,x.jsx)(T,{currentWorkspace:b,currentChannel:I,finishInvite:F});case"finish":return(0,x.jsx)(D,{currentWorkspace:b,currentChannel:I,goToPayment:Z,plans:h})}}(),(0,x.jsx)(f.Z,{visible:E,workspace:b,from:G?"lite_upgrade":"create",afterPay:function(){R()?window.location.href="/workspace/"+b.id+"/"+I.id:(C(!1),y("invite"))}})]})})}));n(37135);var U=n(48889),H=n(5446),F=n(19456);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B={loadUserInfo:c.Lk};const W=(0,i.$j)((function(e){return{currentPlan:e.user.premium.currentPlan,isLoading:e.user.isLoading}}),B)((function(e){var t=e.isLoading,n=(e.currentPlan,e.loadUserInfo),r=G((0,o.useState)(0),2),i=r[0],a=r[1],s=G((0,o.useState)(!1),2),c=s[0],l=s[1],u=G((0,o.useState)({}),2),d=u[0],f=u[1],g=G((0,o.useState)(!1),2),b=g[0],w=g[1];function I(){w(!0)}function S(){window.location.href="/workspace/"+d.workspaceID+"/"+d.channelID}return(0,o.useEffect)((function(){n()}),[]),t?(0,x.jsx)(H.Z,{}):(0,x.jsxs)("div",{className:"transfer-workspace",children:[(0,x.jsxs)("div",{className:"left",children:[(0,x.jsx)("div",{className:"pic"}),(0,x.jsx)("div",{className:"title",children:"Create a new workspace"}),(0,x.jsx)("div",{className:"desc",children:"Collaborating with your team in a workspace, you can communicate and share images and videos with colleagues."}),(0,x.jsxs)("ul",{className:"list",children:[(0,x.jsx)("li",{children:"Collaborate with teammates"}),(0,x.jsx)("li",{children:"Seamless synchronization across different platforms"}),(0,x.jsx)("li",{children:"Powerful visual repository for your team"})]})]}),(0,x.jsx)("div",{className:"right",children:0===i?(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"desc",children:"To create a workspace, you need to give it a name, and the channel under the workspace also needs a name."}),(0,x.jsx)("div",{className:"form",children:(0,x.jsxs)(h.Z,{onFinish:function(e){l(!0),(0,y.Ufv)(e.workspaceName,e.channelName,"").then((function(e){f({workspaceID:e.workspaceID,channelID:e.channelID}),l(!1),a(1)})).catch((function(e){v.ZP.error(e),l(!1)}))},children:[(0,x.jsx)("label",{children:"Workspace name"}),(0,x.jsx)(h.Z.Item,{name:"workspaceName",rules:[{required:!0,message:"Workspace name is needed."}],children:(0,x.jsx)(p.Z,{size:"large",autoComplete:"off"})}),(0,x.jsx)("div",{className:"tip",children:"Name your workspace something your team will recognize"}),(0,x.jsx)("label",{children:"Channel name"}),(0,x.jsx)(h.Z.Item,{name:"channelName",rules:[{required:!0,message:"Channel name is needed."}],children:(0,x.jsx)(p.Z,{size:"large",autoComplete:"off"})}),(0,x.jsx)("div",{className:"tip",children:"It could be a project, party, campaign or anything"}),(0,x.jsx)(h.Z.Item,{children:(0,x.jsx)(m.Z,{type:"primary",size:"large",className:"transfer-btn",block:!0,htmlType:"submit",loading:c,children:"Create & Transfer"})})]})})]}):(0,x.jsxs)("div",{className:"card-form",children:[(0,x.jsx)("div",{className:"success-icon",children:(0,x.jsx)(j.m9,{})}),(0,x.jsx)("div",{className:"title",children:"Transfer Successful"}),(0,x.jsxs)("div",{className:"text-panel",children:[(0,x.jsx)("h1",{children:"We have adjusted plans to best suit growing teams."}),(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:"Instead of buying a fixed number of seats at the beginning, now you will be billed on a prorated basis."}),(0,x.jsxs)("li",{children:["You will only need to pay for the amount of time that team members in the workspace."," "]}),(0,x.jsxs)("li",{children:["If you remove a workspace member before your subscription ends, you will receive a refund balance on your account."," "]})]})]}),(0,x.jsx)("h3",{children:"Re-enter payment information "}),(0,x.jsx)("div",{children:"You will need to re-enter your payment information for this update. Paypal is no longer supported. Note that you will not be charged until your next billing cycle."}),(0,x.jsxs)("div",{className:"btn-area",children:[(0,x.jsx)(m.Z,{type:"primary",block:!0,size:"large",onClick:I,children:"Update payment infomation"}),(0,x.jsx)("div",{className:"cancel",children:(0,x.jsx)("a",{href:"",onClick:function(e){e.preventDefault(),U.Z.confirm({title:"Notice",content:"If you skip re-entering your payment information now, your future subscription might be affected. Please change your payment information ASAP.",okText:"Go to update",cancelText:"I will change it later",onOk:I,autoFocusButton:null,onCancel:S})},children:"Not now"})})]}),(0,x.jsx)(F.Z,{visible:b,onCancel:function(){w(!1)},workspace:{id:d.workspaceID},type:"changeCard",afterUpdate:function(){S()}})]})})]})}));var z=n(31955),K=n(96974),$=(n(3381),n(16114)),q=(n(15262),n(35657)),Y=(n(5e3),n(28682)),J=(n(96309),n(54458)),Q=n(42762),X=n(24421),ee=n(17563),te=n(1852),ne=n.n(te),re=n(39711),ie=n(18282),ae=n(76570),oe=n(27484),se=n.n(oe),ce=n(4251),le=n(38640),ue=n(36724),de=n(11728),fe=n(8748),me=n(24362),he=n(56010);function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ye={loadSearchData:me.C8,loadSearchItems:me.$3};const ge=(0,i.$j)((function(e){return{allItems:e.search.items,isMetaLoaded:e.search.isMetaLoaded,isMetaLoading:e.search.isLoading}}),ye)((function(e){var t=e.allItems,n=e.isMetaLoaded,r=e.loadSearchData,i=e.loadSearchItems,a=e.isMetaLoading,s=(0,K.UO)(),c=pe((0,o.useState)([]),2),l=c[0],u=c[1],f=pe((0,o.useState)((function(){return s.query?decodeURIComponent(s.query):""})),2),m=f[0],h=f[1],v=pe((0,o.useState)(-1),2),y=v[0],g=v[1],w=pe((0,o.useState)(!1),2),I=w[0],S=w[1],N=(0,o.useRef)(null),O=(0,o.useRef)(null),E=(0,K.TH)(),D=(0,K.s0)();(0,o.useEffect)((function(){var e=null;return n||s.query||(e=setTimeout((function(){r()}),1e3)),function(){clearTimeout(e)}}),[]),(0,o.useEffect)((function(){h(s.query?decodeURIComponent(s.query):"")}),[s.query]),(0,o.useEffect)((function(){A(m)}),[m,t]);var A=function(e){if(g(-1),e){var n=new ue.Z(t,{keys:["title","fullname"],useExtendedSearch:!0}).search("'"+e).map((function(e){return e.item}));u(n)}else u([])},C=function(){var e=l[y];if(e){var t,n="/".concat(e.itemType,"/").concat(e.id);e.shareKey&&("folder"===e.itemType?n="s"+n+"/"+e.shareKey:n+="?key="+e.shareKey),D(n,{state:{inApp:!0}}),null===(t=O.current)||void 0===t||t.blur(),h("")}else{var r;null===(r=O.current)||void 0===r||r.blur();var i=encodeURIComponent(m);D("/search/".concat(i))}},T=function(e){switch(e){case"video":return(0,x.jsx)(j.dG,{});case"folder":return(0,x.jsx)(j.RO,{});case"image":return(0,x.jsx)(j.K,{})}},P=(0,o.memo)((function(e){var t=e.index,n=e.style,r=l[t],i=b()("list-item",{hover:y===t,shared:r.fullname});return(0,x.jsx)("div",{style:n,children:(0,x.jsxs)("div",{className:i,onMouseEnter:function(){return g(t)},onMouseLeave:function(){return g(-1)},onMouseDown:C,children:[(0,x.jsx)("div",{className:"icon ".concat(r.itemType),children:T(r.itemType)}),(0,x.jsxs)("div",{className:"title-area",children:[(0,x.jsx)("span",{className:"title",dangerouslySetInnerHTML:{__html:(0,he.CH)(m,r.title)},title:r.title}),r.fullname&&(0,x.jsx)("div",{className:"author-name",dangerouslySetInnerHTML:{__html:(0,he.CH)(m,r.fullname)}})]}),(0,x.jsx)("span",{className:"time",children:se().unix(r.createdSec).format("ll")})]})})}),fe.wy);P.displayName="Row";var _={height:l.length>0?54*l.length+1+"px":"auto"},k=54*l.length>344;return(0,x.jsxs)("div",{className:"header-search",children:[(0,x.jsx)(ae.Z,{}),(0,x.jsx)(p.Z,{bordered:!1,placeholder:"Search",onKeyDown:function(e){var t,n,r=0;switch(e.key){case"ArrowDown":e.preventDefault(),r=y+1>l.length-1?0:y+1,g(r),null===(t=N.current)||void 0===t||t.scrollToItem(r);break;case"ArrowUp":e.preventDefault(),r=y-1<0?l.length-1:y-1,g(r),null===(n=N.current)||void 0===n||n.scrollToItem(r);break;case"Enter":if(e.preventDefault(),!m)return;decodeURIComponent(E.pathname)==="/search/"+m?i(m):C()}},onChange:function(e){var t=e.target.value;h(t)},value:m,onFocus:function(){return S(!0)},onBlur:function(){S(!1),g(-1)},ref:O}),(0,x.jsx)(ce.M,{children:m&&I&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(le.E.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2,delay:.1},className:"close-btn",onMouseDown:function(){h("")},children:(0,x.jsx)(j.Tw,{})}),(0,x.jsx)(le.E.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{duration:.2},className:"result-list ".concat(k?"scrollable":""),style:_,children:a?(0,x.jsx)(d.Z,{}):(0,x.jsx)(x.Fragment,{children:l.length>0?(0,x.jsx)(de.Z,{children:function(e){var t=e.height,n=e.width;return(0,x.jsx)(fe.t7,{className:"list",height:t,itemCount:l.length,itemSize:54,width:n,ref:N,children:P})}}):(0,x.jsxs)("div",{className:"no-result",children:['No matches found for "',(0,x.jsx)("b",{children:m}),'"']})})})]})})]})}));var be=n(84141),je=n(48417),xe=(n(94969),n(45777)),we=n(11506);function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Ne=function(){var e=Ie((0,o.useState)(!1),2),t=e[0],n=e[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(xe.Z,{title:"Send feedback",children:(0,x.jsx)("div",{className:"header-feedback-btn",onClick:function(){n(!0)},children:(0,x.jsx)(j.Ak,{})})}),(0,x.jsx)(we.r,{visible:t,onCancel:function(){n(!1)}})]})};n(81361);var Oe=n(12028),Ee=n(56931);const De=function(e){var t=e.notification,n=e.onMarkAsRead,r=e.closeDropdown,i=e.onMultipleMarkAsRead,a=JSON.parse(t.data),o=t.users,s=o[t.actorID],c=(0,K.s0)();function l(e){e&&(/http/.test(e)?window.open(e):c(e),"itemAddComment"===t.type?i(a.itemType,a.itemID):n(t.id),r())}var u=b()("notification-item",{new:"unread"===t.status});return(0,x.jsxs)(le.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},layout:"position",transition:{duration:.2},className:u,children:[(0,x.jsx)("div",{className:"avatar-area",children:"referralAccepted"===t.type?(0,x.jsx)("div",{className:"icon refer-icon",children:(0,x.jsx)(Ee.Z,{})}):(0,x.jsx)(x.Fragment,{children:s&&"teamTransfer"!==t.type?(0,x.jsx)(ie.Z,{username:s.fullName,size:40,avatarUrl:s.avatarURL}):(0,x.jsx)("div",{className:"icon workspace-icon",children:(0,x.jsx)(j.MC,{})})})}),(0,x.jsxs)("div",{className:"content-area",children:[function(){switch(t.type){case"workspaceItemAdded":return a.imagesCount||a.videosCount?(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," added"," ",(e=a.imagesCount,n=a.videosCount,r="",i="",e&&(r=e>1?e+" images":"1 image"),n&&(i=n>1?n+" videos":"1 vidoe"),r&&i?r+" and "+i:!r&&i?i:r&&!i?r:void 0)," to"," ",(0,x.jsx)("span",{className:"link",onClick:function(){l("/workspace/"+t.channel.workspaceID+"/"+t.channel.id)},children:t.channel&&t.channel.name})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," added a image to"," ",(0,x.jsx)("span",{className:"highlight",children:t.channel&&t.channel.name})]}),(0,x.jsxs)("div",{className:"item",children:["video"===a.itemType?(0,x.jsx)(j.dG,{className:"video"}):(0,x.jsx)(j.K,{className:"image"}),(0,x.jsx)("span",{className:"item-link",onClick:function(){l("/"+a.itemType+"/"+a.itemID)},children:a.itemTitle})]})]});case"workspaceChannelDeleted":return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"content",children:["Channel ",(0,x.jsx)("span",{className:"highlight",children:a.channelName})," has been deleted."]})});case"workspaceChannelMemberQuit":return a.actorID===a.quitUserID?(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," has leave"," ",(0,x.jsx)("span",{className:"highlight",children:t.channel&&t.channel.name})]}):(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," has removed"," ",(0,x.jsx)("span",{className:"name",children:o[a.quitUserID].fullName})," from"," ",(0,x.jsx)("span",{className:"highlight",children:t.channel&&t.channel.name})]});case"workspaceChannelMemberJoin":return(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," has joined"," ",(0,x.jsx)("span",{className:"highlight",children:t.channel&&t.channel.name})]});case"workspaceMemberJoin":return(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," has joined"," ",(0,x.jsx)("span",{className:"highlight",children:t.workspace&&t.workspace.name})]});case"workspaceMemberQuit":return a.actorID===a.quitUserID?(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," has leave"," ",(0,x.jsx)("span",{className:"highlight",children:t.workspace&&t.workspace.name})]}):(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," has removed"," ",(0,x.jsx)("span",{className:"name",children:o[a.quitUserID].fullName})," from"," ",(0,x.jsx)("span",{className:"highlight",children:t.workspace&&t.workspace.name})]});case"workspaceChannelNameChanged":return(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"highlight",children:a.oldName})," has been renamed to"," ",(0,x.jsx)("span",{className:"link",onClick:function(){l("/workspace/"+a.workspaceID+"/"+a.channelID)},children:a.newName})]});case"workspaceNameChanged":return(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"highlight",children:a.oldName})," has been renamed to ",(0,x.jsx)("span",{className:"highlight",children:a.newName})]});case"itemAddComment":return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName}),a.isMentioned?" mentioned you on ":" comment on your ",a.itemType," ",(0,x.jsx)("span",{className:"highlight",children:t.channel&&t.channel.name})]}),(0,x.jsxs)("div",{className:"comment-inner-item",onClick:function(){l("/"+a.itemType+"/"+a.itemID+(a.shareKey?"?key="+a.shareKey:""))},children:[(0,x.jsxs)("div",{className:"comment-item-item",children:["video"===a.itemType?(0,x.jsx)(j.dG,{className:"video"}):(0,x.jsx)(j.K,{className:"image"}),(0,x.jsx)("span",{className:"item-title",children:a.itemTitle})]}),(0,x.jsx)("div",{className:"comment-item-content",dangerouslySetInnerHTML:{__html:a.content}})]})]});case"workspaceChannelItemReturn":return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"content",children:["Your ","video"===a.itemType?"video":"image"," has been returned to your ",(0,x.jsx)("span",{className:"name",children:"My Items"})]}),(0,x.jsxs)("div",{className:"item",children:["video"===a.itemType?(0,x.jsx)(j.dG,{className:"video"}):(0,x.jsx)(j.K,{className:"image"}),(0,x.jsx)("span",{className:"item-link",onClick:function(){l("/"+a.itemType+"/"+a.itemID)},children:a.title})]})]});case"workspaceChannelTransferOwner":return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," has transferred the ownership of"," ",(0,x.jsx)("span",{className:"highlight",children:t.channel&&t.channel.name})," ","to you"]})});case"workspaceMemberKicked":return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," removed you from"," ",(0,x.jsx)("span",{className:"highlight",children:a.workspaceName}),"."]})});case"workspaceChannelKicked":return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," removed you from"," ",(0,x.jsx)("span",{className:"highlight",children:a.channelName}),"."]})});case"workspacePayFailedForMember":return(0,x.jsx)(x.Fragment,{children:a.actorID===t.workspace.ownerUID+""||0===a.actorID?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"content",children:"Check/update your payment information to allow pending members to join your workspace and access all premium features."}),(0,x.jsx)("div",{className:"go-to-upgrade",children:(0,x.jsx)(m.Z,{type:"primary",ghost:!0,onClick:function(){l("/workspace/setting/"+t.workspaceID+"?tab=billing")},children:"Go to Billing & Plans"})})]}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"content",children:"You could not access all workspace premium features due to the failed payment. Remind your owner to update payment information."})})});case"workspacePayFailed":return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"content",children:a.content?(0,x.jsx)(x.Fragment,{children:a.content}):(0,x.jsxs)(x.Fragment,{children:["The lasted payment for"," ",(0,x.jsx)("span",{className:"highlight",children:t.workspace&&t.workspace.name})," ","failed. Please check/update your payment information."]})}),(0,x.jsx)("div",{className:"go-to-upgrade",children:(0,x.jsx)(m.Z,{type:"primary",ghost:!0,onClick:function(){l(a.link||"/workspace/setting/"+t.workspaceID+"?tab=billing")},children:a.buttonText?a.buttonText:"Go to Billing & Plans"})})]});case"personalPayFailed":return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"content",children:a.content}),a.link&&(0,x.jsx)("div",{className:"go-to-upgrade",children:(0,x.jsx)(m.Z,{type:"primary",ghost:!0,onClick:function(){l(a.link)},children:a.buttonText?a.buttonText:"Go to Billing & Plans"})})]});case"workspacePayForMember":return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," tried to join"," ",(0,x.jsx)("span",{className:"highlight",children:t.workspace&&t.workspace.name}),". Workspace Lite is limited to a maximum of 5 members. Upgrade to invite more members."]}),(0,x.jsx)("div",{className:"go-to-upgrade",children:(0,x.jsx)(m.Z,{type:"primary",ghost:!0,onClick:function(){l("/workspace/setting/"+t.workspaceID+"?tab=billing")},children:"Go to upgrade"})})]});case"workspacePayForItem":return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("span",{className:"name",children:s.fullName})," tried to add a new item to"," ",(0,x.jsx)("span",{className:"highlight",children:t.workspace&&t.workspace.name}),". Workspace has reached item limit. Upgrade to unlock more premium features."]}),(0,x.jsx)("div",{className:"go-to-upgrade",children:(0,x.jsx)(m.Z,{type:"primary",ghost:!0,onClick:function(){l("/workspace/setting/"+t.workspaceID+"?tab=billing")},children:"Go to upgrade"})})]});case"teamTransfer":return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"content",children:"Your team has transferred to workspace."})});case"referralAccepted":return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"content",children:["Your friend ",(0,x.jsx)("span",{className:"name",children:s.fullName})," has joined Awesome Screenshot via your invitation."]})})}var e,n,r,i}(),(0,x.jsx)("div",{className:"time",children:(0,he.Hu)(t.createdSec)})]}),(0,x.jsx)("div",{className:"action-area",children:"unread"===t.status&&(0,x.jsx)(xe.Z,{title:"Mark as read",placement:"left",children:(0,x.jsx)("div",{className:"action-btn",onClick:function(){n(t.id)},children:(0,x.jsx)(j.m9,{})})})})]})};var Ae=n(29778),Ce=(0,a.PH)(Ae.a.NOTIFICATION_LOADING),Te=(0,a.PH)(Ae.a.NOTIFICATION_LOAD),Pe=(0,a.PH)(Ae.a.NOTIFICATION_MARK_AS_READ),_e=(0,a.PH)(Ae.a.NOTIFICATION_ALL_MARK_AS_READ);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ue={markNotificationAsRead:function(e){return function(t){t(Pe(e)),y.Goc(e).then((function(){}))}},markAllNotificationAsRead:function(){return function(e){e(_e()),y.Qrl((function(){}))}}};const He=(0,i.$j)((function(e){return{notifications:e.notification.notifications,users:e.notification.users,isLoading:e.notification.isLoading,workspaceHash:e.workspace.myWorkspaceHash,channelHash:e.workspace.channelHash}}),Ue)((function(e){var t=e.markAllNotificationAsRead,n=e.markNotificationAsRead,r=e.notifications,i=e.users,a=e.channelHash,s=e.workspaceHash,c=e.isLoading,l=e.closeDropdown,u=Me((0,o.useState)(!1),2),f=u[0],m=u[1],h=r.filter((function(e){return"unread"===e.status})),p=f?r:h;function v(e,t){r.filter((function(n){return"itemAddComment"===n.type&&"unread"===n.status&&JSON.parse(n.data).itemType===e&&JSON.parse(n.data).itemID===t})).map((function(e){return e.id})).forEach((function(e){n(e)}))}return(0,x.jsx)("div",{className:"notification-panel",children:c?(0,x.jsx)(d.Z,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"top-area",children:[(0,x.jsx)("div",{className:"noti-title",children:"Notifications"}),(0,x.jsxs)("div",{className:"read-switch",children:[(0,x.jsx)("span",{className:"text",children:"Show read"})," ",(0,x.jsx)(Oe.Z,{checked:f,onChange:function(e){m(e)},size:"small"})]})]}),(0,x.jsx)("div",{className:"notification-container",children:p.length>0?(0,x.jsx)("div",{className:"section",children:f?(0,x.jsx)("div",{children:(0,x.jsx)(ce.M,{initial:!1,children:r.map((function(e){return(0,x.jsx)(De,{notification:Le(Le({},e),{},{channel:a[e.channelID],workspace:s[e.workspaceID],users:i}),onMarkAsRead:n,onMultipleMarkAsRead:v,closeDropdown:l},e.id)}))})}):(0,x.jsx)(ce.M,{initial:!1,children:h.map((function(e){return(0,x.jsx)(De,{notification:Le(Le({},e),{},{channel:a[e.channelID],workspace:s[e.workspaceID],users:i}),onMarkAsRead:n,onMultipleMarkAsRead:v,closeDropdown:l},e.id)}))})}):(0,x.jsxs)("div",{className:"empty",children:[(0,x.jsx)(j.tL,{}),(0,x.jsx)("div",{className:"info",children:f?"No notification yet":"No unread notifications"})]})}),h.length>0&&(0,x.jsx)("div",{className:"mark-all-btn",onClick:t,children:(0,x.jsx)("a",{children:"Mark all as read"})})]})})}));var Fe=n(38547);function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Be={loadNotification:function(e,t){return function(n){e||n(Ce()),y.J1C().then((function(e){e&&(e.workspaces&&n((0,l.aA)(e.workspaces)),n(Te(e)),t&&t())}))}}};const We=(0,i.$j)((function(e){return{notifications:e.notification.notifications}}),Be)((function(e){var t=e.loadNotification,n=e.notifications,r=(0,o.useRef)(),i=Ge((0,o.useState)(),2),a=i[0],s=i[1],c=Ge((0,o.useState)(!1),2),l=c[0],u=c[1];(0,o.useEffect)((function(){return window.notificationTimer=function e(){return t(!0),setTimeout((function(){window.notificationTimer=e()}),6e4)}(),function(){window.notificationTimer&&(clearTimeout(window.notificationTimer),window.notificationTimer=null)}}),[]);var d=n.filter((function(e){return"unread"===e.status})),f=(0,Fe.Z)(d.length);(0,o.useEffect)((function(){d.length>0&&d.length>f&&u(!0)}),[d.length]);var m=(0,o.useCallback)((function(){s(!1)}));return(0,x.jsx)("div",{ref:r,children:(0,x.jsx)($.Z,{visible:a,onVisibleChange:function(e){s(e)},overlay:(0,x.jsx)(He,{closeDropdown:m}),getPopupContainer:function(){return r.current},trigger:"click",destroyPopupOnHide:!0,children:(0,x.jsxs)("div",{className:"header-notification-btn",children:[(0,x.jsx)("div",{className:l?"icon-wrapper active":"icon-wrapper",onAnimationEnd:function(){u(!1)},children:(0,x.jsx)(j.sh,{})}),d.length>0&&(0,x.jsx)("div",{className:"num-badge",children:d.length>99?"99+":d.length})]})})})}));function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const $e=(0,i.$j)((function(e){return{premium:e.user.premium,gift:e.user.gift}}))((function(e){var t=e.premium,n=ze((0,o.useState)(t&&"false"!==localStorage["show-reward-tip"]),2),r=n[0],i=n[1],a=(0,K.s0)();function s(){return("professional"===t.currentPlan.PlanName||"team"===t.currentPlan.PlanName)&&!t.gift}return(0,x.jsxs)("div",{className:"header-reward-btn",children:[(0,x.jsx)("div",{className:"header-reward-btn-inner",onClick:function(){a("/invite")},children:(0,x.jsx)(Ee.Z,{})}),r&&(0,x.jsxs)("div",{className:"header-reward-popup",children:[(0,x.jsx)("div",{className:"close-btn",onClick:function(){i(!1),localStorage["show-reward-tip"]=!1},children:(0,x.jsx)(j.Tw,{})}),(0,x.jsxs)("div",{className:"ball-container",children:[(0,x.jsx)("div",{className:"ball"}),(0,x.jsx)("div",{className:"ball ball1"}),(0,x.jsx)("div",{className:"ball ball2"})]}),(0,x.jsx)("div",{className:"arrow"}),(0,x.jsxs)("div",{className:"content-container",children:[(0,x.jsx)("div",{className:"popup-title",children:"New referral program"}),(0,x.jsx)("div",{className:"popup-content",children:s()?"Invite friends & Get them free two weeks of Professional plan!":"Refer friends, Get free Professional plan!"}),(0,x.jsx)("div",{className:"popup-btn",children:(0,x.jsx)(m.Z,{block:!0,onClick:function(){i(!1),localStorage["show-reward-tip"]=!1,a("/invite")},children:s()?"Send invites":"Get rewards"})})]})]})]})}));function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Je={loadUserInfo:c.Lk};const Qe=(0,i.$j)((function(e){return{user:e.user}}),Je)((function(e){var t=qe((0,o.useState)(!0),2),n=t[0],r=t[1],i=qe((0,o.useState)("true"!==localStorage.show_new_workspace),2),a=i[0],s=i[1],c=qe((0,o.useState)(!1),2),l=c[0],d=c[1],f=(0,K.s0)(),h=(0,K.TH)(),p=(0,te.useMediaQuery)({query:"(max-width: 1068px)"}),v=(0,u.Z)();(0,o.useEffect)((function(){e.loadUserInfo();var t=setTimeout((function(){(0,he.LB)()||!be.Z.isChrome()||be.Z.isMobile()||r(!1)}),1e3);return function(){clearTimeout(t)}}),[]),(0,o.useEffect)((function(){d(!1)}),[h]);var y,g,w=e.user,I="item"===e.type,S=/\/recorder$/.test(h.pathname),N=(/video\//.test(h.pathname)||/image\//.test(h.pathname)||S||/veditor\//.test(h.pathname))&&!v.get("key")||h.state&&h.state.inApp,O=!v.get("key"),E=w.premium.currentPlan?(0,he.pQ)(w.premium.currentPlan.PlanName):"",D=w.info.fullName?(0,x.jsx)(Y.Z,{children:(0,x.jsxs)(Y.Z.ItemGroup,{title:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"user-info",children:[(0,x.jsx)(ie.Z,{username:w.info.fullName,avatarUrl:w.info.avatarURL,size:"36",plan:E,bordered:!0}),(0,x.jsxs)("div",{className:"info",children:[(0,x.jsxs)("div",{className:"name",children:[(0,x.jsx)(je.Z,{text:w.info.fullName,width:"200px"}),(0,x.jsx)("div",{className:"plan-badge ".concat(E),children:E})]}),(0,x.jsx)("div",{className:"email",children:w.info.mail})]})]}),"Pro"!==E&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(X.Z,{className:"inner-divider"}),(0,x.jsxs)("div",{className:"progress",children:[(0,x.jsxs)("div",{className:"progress-inner",children:["Free"===E&&(0,x.jsxs)("div",{className:"progress-item",children:[(0,x.jsx)("div",{className:"type-icon",children:(0,x.jsx)(j.K,{})}),(0,x.jsxs)("div",{className:"item-progress",children:[(0,x.jsxs)("div",{className:"type-info",children:[(0,x.jsx)("div",{className:"type-name",children:"Images"}),(0,x.jsxs)("div",{className:"type-num",children:[w.counts.image,"/",w.counts.imageLimitation]})]}),(0,x.jsx)("div",{className:"progress-bar",children:(0,x.jsx)(J.Z,{percent:w.counts.image/w.counts.imageLimitation*100,strokeWidth:6,showInfo:!1})})]})]}),(0,x.jsxs)("div",{className:"progress-item",children:[(0,x.jsx)("div",{className:"type-icon",children:(0,x.jsx)(j.dG,{})}),(0,x.jsxs)("div",{className:"item-progress",children:[(0,x.jsxs)("div",{className:"type-info",children:[(0,x.jsx)("div",{className:"type-name",children:"Videos"}),(0,x.jsxs)("div",{className:"type-num",children:[w.counts.video,"/",w.counts.videoLimitation]})]}),(0,x.jsx)("div",{className:"progress-bar",children:(0,x.jsx)(J.Z,{percent:w.counts.video/w.counts.videoLimitation*100,strokeWidth:6,showInfo:!1})})]})]})]}),(0,x.jsx)(m.Z,{type:"primary",block:!0,onClick:function(){f("/pricing?from=web_user_menu")},icon:(0,x.jsx)(j.CE,{}),children:"Upgrade"})]})]})]}),children:[(0,x.jsx)(Y.Z.Divider,{}),(0,x.jsx)(Y.Z.Item,{children:(0,x.jsx)(re.rU,{to:"/settings/profile",children:"Settings"})},"setting"),(0,x.jsx)(Y.Z.Item,{children:(0,x.jsxs)(re.rU,{to:"/settings/appearance",children:["Appearance",(0,x.jsx)("div",{className:"badge",children:"New"})]})},"appearence"),(0,x.jsx)(Y.Z.Item,{children:(0,x.jsx)("a",{href:"https://support.awesomescreenshot.com/hc/en-us",target:"_blank",rel:"noreferrer",children:"Help center"})},"help"),(0,x.jsx)(Y.Z.Item,{children:(0,x.jsx)("a",{href:"https://blog.awesomescreenshot.com",target:"_blank",rel:"noreferrer",children:"Blog"})},"blog"),(0,x.jsx)(Y.Z.Divider,{}),(0,x.jsx)(Y.Z.Item,{children:(0,x.jsx)("a",{href:"/web/user/logout",children:"Log out"})},"logout")]})}):null,A=b()("header",{"has-back-btn":N});return(0,x.jsxs)("div",{className:A,children:[O&&!N&&(0,x.jsxs)(ne(),{maxWidth:768,children:[(0,x.jsx)("div",{className:"drawer-btn",children:(0,x.jsx)(Q.Z,{onClick:function(){d(!0)}})}),(0,x.jsx)(q.Z,{placement:"left",closable:!1,className:"nav-drawer",onClose:function(){d(!1)},visible:l,children:(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("ul",{className:"sidebar-nav",children:[(0,x.jsx)("li",{children:(0,x.jsxs)(re.OL,{exact:!0,to:"/my_items",children:[(0,x.jsx)(j.M,{}),"My Items"]})}),(0,x.jsx)("li",{children:(0,x.jsxs)(re.OL,{exact:!0,to:"/shared_with_me",children:[(0,x.jsx)(j.M,{}),"Shared with me"]})}),(0,x.jsx)("li",{children:(0,x.jsxs)(re.OL,{to:"/all_videos",children:[(0,x.jsx)(j.dG,{}),"All Videos"]})}),(0,x.jsx)("li",{children:(0,x.jsxs)(re.OL,{to:"/all_images",children:[(0,x.jsx)(j.K,{}),"All Images"]})}),(0,x.jsx)("li",{children:(0,x.jsxs)(re.OL,{to:"/trash",children:[(0,x.jsx)(j.XH,{}),"Trash"]})})]})})})]}),(0,x.jsx)("div",{className:"logo-area",children:N?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"back-btn",onClick:function(){h.state?h.state.inApp?f(-1):h.state.lastPath&&f(h.state.lastPath):f("/my_items")},children:(0,x.jsx)(j.e0,{})}),(0,x.jsx)("div",{className:"logo",children:(0,x.jsx)("img",{src:"",alt:""})})]}):(0,x.jsx)("a",{className:"logo",href:"/",children:(0,x.jsx)("img",{src:"",alt:""})})}),(I||N&&!S)&&(0,x.jsxs)(ne(),{minWidth:768,children:[(0,x.jsx)("div",{className:"sep"}),(0,x.jsx)("div",{className:"search-area",children:(0,x.jsx)(ge,{})})]}),(0,x.jsxs)("div",{className:"header-action",children:[(y=ee.parse(h.search),g=!(n||w.info.uid||void 0===y.key||!be.Z.isChrome()||be.Z.isMobile()),setTimeout((function(){g&&gtag&&gtag("event","install button show in header",{event_category:"install extension"})}),1e3),g?(0,x.jsx)(m.Z,{type:"primary",className:"install-button",onClick:function(){return(0,he.nV)("video-shared-header-click")},children:"Get AwesomeScreenshot for free!"}):""),w.info.fullName?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)($.Z,{overlay:D,placement:"bottomRight",overlayClassName:"user-menu",trigger:["click"],children:(0,x.jsx)("div",{className:"user-avatar-area",children:(0,x.jsx)(ie.Z,{size:"32",username:w.info?w.info.fullName:"",avatarUrl:w.info?w.info.avatarURL:"",block:!0,plan:E})})}),(0,x.jsxs)(ne(),{minWidth:768,children:[(0,x.jsx)($e,{}),(0,x.jsx)(We,{}),(0,x.jsx)(Ne,{}),!1]})]}):""]}),w.info.fullName?(0,x.jsxs)("ul",{className:"header-nav",children:[!I&&(0,x.jsx)("li",{children:(0,x.jsx)(re.OL,{className:function(e){return e.isActive?"active":""},to:"/my_items",children:"My Items"})}),(0,x.jsx)("li",{children:(0,x.jsx)(re.OL,{className:function(e){return e.isActive?"active":""},to:"/pricing?from=topNav",children:"Pricing"})})]}):"",a&&!p&&(0,x.jsxs)("div",{className:"newtip",children:["🚀"," ",(0,x.jsx)("a",{href:"https://awesomescreenshot.wordpress.com/2022/02/15/workspace-a-collaborative-visual-repository-for-your-team/",target:"_blank",onClick:function(){s(!1),localStorage.show_new_workspace=!0},rel:"noreferrer",children:"New team features released! Check out"})]})]})}));const Xe=function(e){return e.private?z.Z.get("screenshot_personal_uid")?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Qe,{type:"default"}),(0,x.jsx)(K.j3,{})]}):(window.location.href="/signin",""):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Qe,{type:"default"}),(0,x.jsx)(K.j3,{})]})};n(92168);var et=n(97183),tt=n(57119),nt=n(92217),rt=n(79336),it={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function at(e,t,n){if(!e||!t)return{display:"none"};var r=t.x,i=t.y,a=r+(n.x-e.x),o=i+(n.y-e.y),s="translate(".concat(a,"px, ").concat(o,"px)");return{transform:s,WebkitTransform:s}}const ot=function(){var e=(0,rt.f)((function(e){return{item:e.getItem(),initialClientOffset:e.getInitialClientOffset(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}})),t=e.isDragging,n=e.item,r=e.initialClientOffset,i=e.initialOffset,a=e.currentOffset;if(!t||!n.data)return null;var o=n.data.filter((function(e){return"folder"===e.itemType})),s=n.data.filter((function(e){return"image"===e.itemType})),c=n.data.filter((function(e){return"video"===e.itemType})),l=b()("custom-drag-layer-block",{multiple:n.data.length>1});return(0,x.jsx)("div",{className:"custom-drag-layer",style:it,children:(0,x.jsx)("div",{className:l,style:at(i,a,r),children:n.data.length>1?(0,x.jsxs)(x.Fragment,{children:[o.length>0&&(0,x.jsxs)("div",{className:"layer-item folder",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)(j.RO,{})}),"Folders",(0,x.jsx)("div",{className:"count",children:o.length})]}),s.length>0&&(0,x.jsxs)("div",{className:"layer-item image",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)(j.K,{})}),"Images",(0,x.jsx)("div",{className:"count",children:s.length})]}),c.length>0&&(0,x.jsxs)("div",{className:"layer-item video",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)(j.dG,{})}),"Videos",(0,x.jsx)("div",{className:"count",children:c.length})]})]}):(0,x.jsxs)("div",{className:"layer-item ".concat(n.data[0].itemType),children:[(0,x.jsx)("div",{className:"icon",children:function(e){switch(e){case"video":return(0,x.jsx)(j.dG,{});case"folder":return(0,x.jsx)(j.RO,{});case"image":return(0,x.jsx)(j.K,{})}}(n.data[0].itemType)}),(0,x.jsx)("span",{className:"title",children:n.data[0].title})]})})})};var st=n(71943),ct=n(20495);function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dt(e){var t=e.collapsed,n=lt((0,st.Z)(null,(function(e){for(var t=!1,n=0;n<e.data.length;n++)"folder"===e.data[n].itemType&&(e.data[n].parentID&&"0"===e.data[n].parentID||"0"===e.data[n].folderID)&&(t=!0),"folder"!==e.data[n].itemType&&"0"===e.data[n].folderID&&(t=!0);t||(o((0,ct.J1)("0",e.data)),(0,he.I1)("move to folder",{event_category:"folder"}))})),2),r=n[0],a=n[1],o=((0,K.TH)(),(0,i.I0)());var s=b()("my-item-sidebar-link",{"is-over":r}),c=b()("my-item-sidebar-link-wrapper",{collapsed:t});return(0,x.jsx)("div",{className:c,children:(0,x.jsx)(xe.Z,{title:t?"My items":"",placement:"right",children:(0,x.jsxs)(re.OL,{className:s,to:"/my_items",ref:a,children:[(0,x.jsx)(j.fK,{}),(0,x.jsx)("span",{className:"nav-title",children:"My items"})]})})})}const ft=(0,o.memo)(dt);function mt(e){var t=e.loadSharedItemsNotification,n=e.isShowNotify;(0,o.useEffect)((function(){t()}),[]);var r=b()("shared-sidebar-link",{notify:n});return(0,x.jsxs)(re.OL,{className:r,to:"/shared_with_me",children:[(0,x.jsx)(j.$g,{}),(0,x.jsx)("span",{className:"nav-title",children:"Shared with me"})]})}var ht={loadSharedItemsNotification:n(52020).uH};const pt=(0,i.$j)((function(e){return{isShowNotify:e.shared.newCommentList.length}}),ht)((0,o.memo)(mt));var vt=n(1351),yt=n(76629);function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const jt=function(e){var t=gt((0,o.useState)(!1),2),n=t[0],r=t[1];return(0,x.jsx)(xe.Z,{title:e.collapsed?"Expand":"Collapse",onVisibleChange:r,onClick:function(){r(!1)},placement:"right",visible:n,children:(0,x.jsx)("div",{className:"collapse-btn",onClick:e.toggleCollapse,children:e.collapsed?(0,x.jsx)(vt.Z,{}):(0,x.jsx)(yt.Z,{})})})};function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var It={moveToTrash:ct.B0,deleteSearchItem:me.lD};const St=(0,i.$j)(null,It)((function(e){var t=e.moveToTrash,n=e.deleteSearchItem,r=xt((0,st.Z)(null,(function(e){t(e.data),n(e.data)})),2),i=r[0],a=r[1],o=b()("trash-sidebar-link",{"is-over":i});return(0,x.jsxs)(re.OL,{className:o,to:"/trash",ref:a,children:[(0,x.jsx)(j.aN,{}),(0,x.jsx)("span",{className:"nav-title",children:"Trash"})]})}));var Nt=n(65384),Ot=n(24244),Et=n(80442);function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ct(e){var t=e.selectedItems,n=e.selectedTrashItems,r=e.moveToTrash,i=e.deleteSearchItem,a=e.restoreItems,s=e.deleteItems,c=e.clearSelectedItem,l=Dt((0,o.useState)(!1),2),u=l[0],d=l[1],f=Dt((0,o.useState)(!1),2),h=f[0],p=f[1];(0,o.useEffect)((function(){return window.addEventListener("keydown",y,!1),function(){window.removeEventListener("keydown",y,!1)}}),[]);var v=b()("multi-select-action-bar "+e.className,{active:t.length+n.length>0});var y=function(e){"Escape"===e.key&&g()},g=function(){c()};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:v,children:[(0,x.jsxs)("span",{className:"selected-num",children:["Selected"," ",(0,x.jsx)("span",{className:"number",children:t.length+n.length})]}),0===n.length&&(0,x.jsx)("span",{className:"tip",children:"shift + click to start multiple select, esc to deselect"}),(0,x.jsx)("div",{className:"close-btn",onClick:g,children:(0,x.jsx)(j.Tw,{})}),(0,x.jsxs)("div",{className:"action",children:[t.length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Z,{onClick:function(){d(!0)},icon:(0,x.jsx)(j.r_,{}),children:"Move"}),(0,x.jsx)(m.Z,{icon:(0,x.jsx)(j.XH,{}),onClick:function(){U.Z.confirm({title:"Remove item",content:"Are you sure you want to remove the selected item(s)?",onOk:function(){r(t),i(t)},okText:"Move to Trash",okType:"danger",autoFocusButton:null})},children:"Remove"})]}),n.length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(m.Z,{onClick:function(){a(n,(function(e){1201===e.code&&p(!0)}))},children:[(0,x.jsx)(j.fR,{}),"Restore"]}),(0,x.jsxs)(m.Z,{onClick:function(){U.Z.confirm({title:"Are you sure you want to permanently delete the selected item(s)?",onOk:function(){s(n)},okText:"Delete",okType:"danger",autoFocusButton:null})},children:[(0,x.jsx)(j.XH,{}),"Delete"]})]})]})]}),(0,x.jsx)(Et.Z,{visible:h,onCancel:function(){p(!1)},type:"trash-restore"}),(0,x.jsx)(Ot.Z,{visible:u&&t.length+n.length>0,onCancel:function(){d(!1)},des:"both",items:t})]})}var Tt={moveToTrash:ct.B0,deleteSearchItem:me.lD,restoreItems:Nt._x,deleteItems:Nt.CV,clearSelectedItem:nt.jh};const Pt=(0,i.$j)((function(e){return{selectedItems:e.multipleSelect.selectedItems,selectedTrashItems:e.multipleSelect.selectedTrashItems}}),Tt)((0,o.memo)(Ct));var _t=n(52471),kt=n(43313),Lt=n(85191);var Rt={hideItem:_t.sQ,nextAction:_t.G2,prevAction:_t.mE,resetBrowsing:_t.vf};const Mt=(0,i.$j)((function(e){return{visible:e.ui.itemDetailVisible,itemList:e.ui.itemList,currentIndex:e.ui.currentItemIndex}}),Rt)((function(e){var t=e.visible,n=(e.itemType,e.itemID,e.hideItem),r=(e.itemShareKey,e.resetBrowsing),i=e.itemList,a=e.currentIndex,s=e.nextAction,c=e.prevAction,l=b()("item-detail-wrapper",{active:t}),u=b()("item-detail-wrapper-bg",{active:t}),d=((0,K.s0)(),(0,Fe.Z)(t));function f(e){e&&e.stopPropagation(),n()}function m(e){e&&e.stopPropagation(),y||s()}function h(e){e&&e.stopPropagation(),v||c()}(0,o.useEffect)((function(){return function(){r()}}),[]);var p=i[a],v=0===a,y=a===i.length-1;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:u,onClick:f,children:t&&(0,x.jsxs)("div",{className:"action-btn-container",children:[v?(0,x.jsx)("div",{className:"action-btn prev-btn ".concat(v&&"disabled"),onClick:h,children:(0,x.jsx)(j.Dn,{})}):(0,x.jsx)(xe.Z,{title:"".concat(v?"":"Prev"),mouseLeaveDelay:0,children:(0,x.jsx)("div",{className:"action-btn prev-btn ".concat(v&&"disabled"),onClick:h,children:(0,x.jsx)(j.Dn,{})})}),y?(0,x.jsx)("div",{className:"action-btn next-btn ".concat(y&&"disabled"),onClick:m,children:(0,x.jsx)(j.Dn,{})}):(0,x.jsx)(xe.Z,{title:"".concat(y?"":"Next"),mouseLeaveDelay:0,children:(0,x.jsx)("div",{className:"action-btn next-btn ".concat(y&&"disabled"),onClick:m,children:(0,x.jsx)(j.Dn,{})})}),(0,x.jsx)(xe.Z,{title:"Close",children:(0,x.jsx)("div",{className:"action-btn close-btn",onClick:f,children:(0,x.jsx)(j.Tw,{})})})]})}),(0,x.jsx)("div",{className:l,children:t&&(0,x.jsx)("div",{children:"video"===p.itemType?(0,x.jsx)(kt.default,{id:p.id,history,shareKey:p.shareKey,isModal:!0,hideModal:f,isBrowsing:d},p.id):(0,x.jsx)(Lt.default,{isModal:!0,id:p.id,shareKey:p.shareKey,hideModal:f,isBrowsing:d},p.id)})})]})}));var Zt=n(39883),Ut=n(31795),Ht=n.n(Ut);function Ft(e){var t=e.referData;(0,o.useEffect)((function(){t&&(!function(){var e=200,t={origin:{y:.7}};function n(n,r){(0,Zt.Z)(Object.assign({},t,r,{particleCount:Math.floor(e*n),zIndex:3e3}))}n(.25,{spread:26,startVelocity:55}),n(.2,{spread:60}),n(.35,{spread:100,decay:.91,scalar:.8}),n(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),n(.1,{spread:120,startVelocity:45})}(),(0,he.I1)("Show congrats modal"))}),[]);var n=function(){var e=Ht().name;return"Chrome"===e?/Edg/.test(Ht().ua)?"Edge":"Chrome":"Firefox"===e?"Firefox":"Chrome"};return(0,x.jsx)("div",{className:"congrates-invite-panel",children:t?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"info",children:[(0,x.jsx)("div",{className:"icon",children:"🎉"}),(0,x.jsxs)("div",{className:"text",children:[(0,x.jsx)("div",{className:"title",children:"Congrats!"}),(0,x.jsxs)("div",{className:"text-content",children:["You got"," ",(0,x.jsxs)("b",{children:["both7day"===t.referral.giftType?"one week":"two weeks"," ","of Professional plan"]})," ","via your friend’s referral link!"]}),(0,x.jsxs)("div",{className:"expire-date",children:["Enjoy it until"," ",se()(1e3*t.gift.expireSec).format("ll")]})]})]}),(0,x.jsxs)("div",{className:"extension-box",children:[(0,x.jsx)("div",{className:"ext-title",children:"Add Awesome Screenshot to Chrome"}),(0,x.jsxs)("div",{className:"numbers-container",children:[(0,x.jsxs)("div",{className:"number-item",children:[(0,x.jsx)("div",{className:"num",children:"10+"}),(0,x.jsx)("div",{className:"num-desc",children:"10 years in business"})]}),(0,x.jsxs)("div",{className:"number-item",children:[(0,x.jsx)("div",{className:"num",children:"3M+"}),(0,x.jsx)("div",{className:"num-desc",children:"Over 3 million users globally"})]}),(0,x.jsxs)("div",{className:"number-item",children:[(0,x.jsx)("div",{className:"num",children:"24K+"}),(0,x.jsx)("div",{className:"num-desc",children:"24,000+Chrome store reviews"})]})]}),(0,x.jsxs)("div",{className:"ext-add-btn",children:[(0,x.jsxs)("div",{className:"add-to-chrome-btn",onClick:function(){var e="",t="width=800,height=700,top="+(window.screen.availHeight-30-700)/2+",left="+(window.screen.availWidth-10-800)/2,r=n();e="Chrome"===r?"https://chrome.google.com/webstore/detail/awesome-screenshot-screen/nlipoenfbbikpbjkfpfillcgkoblgpmj":"Edge"===r?"https://microsoftedge.microsoft.com/addons/detail/awesome-screenshot-scre/gpmljinohlbfgmeoaeceoajachkabijo":"Firefox"===r?"https://addons.mozilla.org/en-US/firefox/addon/screenshot-capture-annotate/":"https://chrome.google.com/webstore/detail/awesome-screenshot-screen/nlipoenfbbikpbjkfpfillcgkoblgpmj",window.open(e,"Install Awesome Screenshot",t),(0,he.I1)("Click add to chrome btn on congrats modal")},children:[(0,x.jsx)("div",{className:"browser-icon chrome"}),"Add to ",(0,x.jsx)("span",{className:"browser-name",children:n()}),(0,x.jsx)("span",{className:"free-tip",children:"It's free!"})]}),(0,x.jsxs)("div",{className:"supports",children:["Support:",(0,x.jsx)("div",{className:"support-browser chrome"}),(0,x.jsx)("div",{className:"support-browser edge"}),(0,x.jsx)("div",{className:"support-browser safari"}),(0,x.jsx)("div",{className:"support-browser firefox"})]})]})]})]}):(0,x.jsxs)("div",{className:"error-info",children:[(0,x.jsx)("div",{className:"icon",children:"😆"}),(0,x.jsx)("p",{children:"Hey~You have already registered on Awesome Screenshot."})]})})}const Gt=function(e){var t=e.visible,n=e.onCancel,r=e.referData;return(0,x.jsx)(U.Z,{footer:null,maskClosable:!1,destroyOnClose:!0,className:"active-gift-modal common-modal",closeIcon:(0,x.jsx)(j.Tw,{style:{fontSize:"12px"}}),visible:t,onCancel:n,width:740,children:(0,x.jsx)(Ft,{referData:r})})};var Vt=n(36073),Bt=(n(38620),n(19181)),Wt=(n(10602),n(14277)),zt=n(18035),Kt=n(26),$t=n(16514),qt=n(93604),Yt=n(95207);function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xt={moveToChannel:Kt.sK},en=(0,i.$j)(null,Xt);const tn=(0,o.memo)(en((function(e){var t=e.workspaceId,n=e.channel,r=e.moveToChannel,i=e.closePopover,a=Jt((0,qt.Z)(),5),o=a[0],s=a[1],c=a[2],l=a[3],u=a[4],d=Jt((0,zt.L)({accept:$t.JT.ITEM,drop:function(e){!function(e){r(t,n.id,e.data,(function(e){u(e),s(!0)}))}(e)},collect:function(e){return{isOver:!!e.isOver()}}}),2),f=d[0].isOver,m=d[1],h=b()("channel-list-item",{"is-over":f});return(0,x.jsxs)(le.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},layout:"position",children:[(0,x.jsxs)(re.OL,{to:"/workspace/".concat(t,"/").concat(n.id),className:h,ref:m,onClick:i,children:[(0,x.jsx)(j.MC,{}),(0,x.jsx)(je.Z,{text:n.name,width:"calc(100% - 32px)"})]}),(0,x.jsx)(Yt.Z,{visible:o,onCancel:c,isOwner:l,workspaceID:t,type:"itemAdd",channelID:n.id})]},n.id)})));function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const an=(0,i.$j)((function(e){return{channelHash:e.workspace.channelHash}}))((function(e){var t=e.workspace,n=e.channelHash,r=nn((0,o.useState)(!1),2),i=r[0],a=r[1],s=function(){a(!1)};return(0,x.jsx)(Bt.Z,{content:(0,x.jsx)("div",{className:"collapse-channel-list",children:0===t.channels.length?(0,x.jsx)(Wt.Z,{image:Wt.Z.PRESENTED_IMAGE_SIMPLE,description:"No channels"}):(0,x.jsx)(x.Fragment,{children:t.channels.map((function(e){return(0,x.jsx)(tn,{workspaceId:t.id,channel:n[e],closePopover:s},e)}))})}),overlayClassName:"folder-menu-popup",autoAdjustOverflow:!0,visible:i,placement:"rightTop",onVisibleChange:a,destroyTooltipOnHide:!0,children:(0,x.jsx)("div",{className:"folder-menu",children:(0,x.jsx)(ie.Z,{size:"28",username:t.name,type:"square"})})})}));var on=n(883);function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const ln=(0,i.$j)((function(e){return{channelHash:e.workspace.channelHash,userInfo:e.user.info}}))((function(e){var t=e.workspace,n=e.channelHash,r=sn((0,o.useState)(!1),2),i=r[0],a=r[1],s=t.channels.filter((function(e){return!0===n[e].isMember}));return(0,x.jsxs)("div",{className:"sidebar-workspace-item",children:[(0,x.jsx)(re.OL,{to:"/workspace/setting/".concat(t.id),children:(0,x.jsxs)("div",{className:"workspace-name",children:[(0,x.jsx)(ie.Z,{username:t.name,type:"square",size:30}),(0,x.jsx)(je.Z,{text:t.name,width:"calc(100% - 40px)"})]})}),(0,x.jsxs)("div",{className:"channel-list",style:{height:37*(s.length+1)-1+"px"},children:[(0,x.jsx)(ce.M,{initial:!1,children:s.map((function(e){return(0,x.jsx)(tn,{workspaceId:t.id,channel:n[e]},e)}))}),(0,x.jsxs)("div",{className:"add-channel-btn",onClick:function(){a(!0)},children:[(0,x.jsx)(j.dt,{}),"Create a channel"]})]}),(0,x.jsx)(on.Z,{workspaceId:t.id,visible:i,onCancel:function(){a(!1)}})]})}));var un={loadWorkspaces:l.Pf};const dn=(0,i.$j)((function(e){return{myWorkspaceIDList:e.workspace.myWorkspaceIDList,myWorkspaceHash:e.workspace.myWorkspaceHash,isLoading:e.workspace.isLoading}}),un)((function(e){var t=e.collapsed,n=e.myWorkspaceIDList,r=e.myWorkspaceHash,i=e.isLoading,a=e.loadWorkspaces;return(0,o.useEffect)((function(){a()}),[]),(0,x.jsx)("div",{className:"sidebar-workspace",children:i?(0,x.jsx)(d.Z,{size:"small"}):(0,x.jsx)(x.Fragment,{children:0!==n.length||t?(0,x.jsx)(x.Fragment,{children:n.map((function(e){return t?(0,x.jsx)(an,{workspace:r[e]},e):(0,x.jsx)(ln,{workspace:r[e]},e)}))}):(0,x.jsx)("div",{className:"sidebar-no-workspace",children:"No workspace"})})})}));var fn=n(16928);function mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pn(e){var t=e.folder,n=e.moveFolder,r=e.handleUpdateStarredFolders,i=(0,o.useRef)(),a=mn((0,o.useState)(),2),s=a[0],c=a[1],l=mn((0,o.useState)(""),2),u=l[0],d=l[1],f=(0,zt.L)({accept:$t.JT.ITEM,drop:function(e){!function(e){"onlyItem"===u?(n(t.folderID,e.data),(0,he.I1)("move to folder",{event_category:"folder"})):"onlyFolder"===u&&r(e.data,t,s)}(e)},canDrop:function(e){return!function(e){for(var t=0;t<e.data.length;t++)if("folder"===e.data[t].itemType)return!1;return!0}(e)?!function(e){for(var t=0;t<e.data.length;t++)if("folder"!==e.data[t].itemType)return!1;return!0}(e)?d(""):d("onlyFolder"):d("onlyItem"),null!==self},hover:function(e,t){if(i.current){var n=i.current.getBoundingClientRect(),r=(n.bottom-n.top)/2,a=t.getClientOffset().y-n.top;c(a<r?"up":"down")}},collect:function(e){return{isOver:!!e.isOver(),canDrop:e.canDrop()}}}),m=mn(f,2),h=m[0],p=h.isOver,v=h.canDrop,y=m[1];var g=b()("star-folder-list-item",{"is-over":p&&v&&"onlyItem"===u,"hover-up":"up"===s&&p&&"onlyFolder"===u,"hover-down":"down"===s&&p&&"onlyFolder"===u});return(0,x.jsx)(le.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},layout:"position",ref:i,children:(0,x.jsxs)(re.OL,{className:g,to:"/folder/".concat(t.folderID),ref:y,children:[(0,x.jsx)("div",{className:"icon",children:p&&v&&"onlyItem"===u?(0,x.jsx)(j.Hf,{}):(0,x.jsx)(j.wn,{})}),(0,x.jsx)("div",{className:"name",children:(0,x.jsx)(je.Z,{text:t.name,width:"calc(100% - 36px)"})})]})})}var vn={moveFolder:ct.J1};const yn=(0,i.$j)(null,vn)((0,o.memo)(pn));var gn=n(56831),bn=n(51889);function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const In=function(e){var t=e.folder,n=e.index,r=e.handleRemove;function i(){r(t.id)}return(0,x.jsx)(gn._l,{draggableId:t.id,index:n,children:function(e,n){return(0,x.jsxs)("div",xn(xn(xn({className:"edit-starred-folder-list-item ".concat(n.isDragging?"dragging":"")},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,children:[(0,x.jsx)(j.RO,{}),t.name,(0,x.jsx)(xe.Z,{title:"Remove from starred folder",mouseEnterDelay:.5,children:(0,x.jsx)("div",{className:"remove-btn",onClick:i})})]}))}})};function Sn(e){return function(e){if(Array.isArray(e))return Nn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){Dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var An={loadFolders:ct.PW,updateStarredFolders:ct.oW,removeFromStarredFolders:ct.kO},Cn=(0,i.$j)((function(e){var t=e.folder;return{isLoading:t.isLoading,loaded:t.loaded,starredFolderIDList:(0,fn.q)(e),folders:t.folders}}),An)((function(e){var t=e.starredFolderIDList,n=e.folders,r=e.updateStarredFolders,i=e.removeFromStarredFolders,a=(0,o.useCallback)((function(e){i(e)}),[]);return(0,x.jsx)(gn.Z5,{onDragEnd:function(e){var n=e.source,i=e.destination,a=e.draggableId,o=n.index,s=i.index,c=Sn(t);c.splice(o,1),c=(0,he.ZQ)(c,s,[a]),r(c.join(","),!0)},children:(0,x.jsxs)("div",{className:"edit-starred-folder-panel",children:[(0,x.jsx)("div",{className:"title",children:"Edit Starred Folders"}),(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("div",{className:"tip",children:"Drag to reset the sequence"}),(0,x.jsx)(gn.bK,{droppableId:"12",children:function(e){return(0,x.jsxs)("div",En(En({className:"folder-container",ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,t){return(0,x.jsx)(In,{folder:n[e],index:t,handleRemove:a},e)})),e.placeholder]}))}})]})]})})}));const Tn=function(e){return(0,x.jsx)(bn.Z,{visible:e.visible,onCancel:e.onCancel,children:(0,x.jsx)(Cn,En(En({},e),{},{closeModal:e.onCancel}))})};function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const kn=function(){var e=Pn((0,o.useState)(!1),2),t=e[0],n=e[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"starred-folder-edit-btn",onClick:function(){n(!0)},children:"Edit"}),(0,x.jsx)(Tn,{visible:t,onCancel:function(){n(!1)}})]})};function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mn={loadFolders:ct.PW,updateStarredFolders:ct.oW};const Zn=(0,i.$j)((function(e){var t=e.folder;return{isLoading:t.isLoading,loaded:t.loaded,starredFolderIDList:(0,fn.q)(e),folders:t.folders}}),Mn)((function(e){var t=e.loadFolders,n=e.folders,r=e.starredFolderIDList,i=e.isLoading,a=e.updateStarredFolders,s=Ln((0,o.useState)(!1),2),c=s[0],l=s[1],u=(0,zt.L)({accept:$t.JT.ITEM,drop:function(e){!function(e){var t=e.data.map((function(e){return e.id})).join(",");a(t)}(e)},canDrop:function(e){if(null===self)return!1;for(var t=0;t<e.data.length;t++)if("folder"!==e.data[t].itemType)return!1;return!0},collect:function(e){return{isOver:!!e.isOver()&&e.canDrop()}}}),f=Ln(u,2),m=f[0].isOver,h=f[1];(0,o.useEffect)((function(){t()}),[]);var p=(0,o.useCallback)((function(e,t,n){var i=e.map((function(e){return e.id}));if(-1===r.indexOf(i[0])){var o=r.findIndex((function(e){return e===t.folderID}));o="up"===n?o:o+1;var s=(0,he.ZQ)(r,o,i);a(s.join(","))}}),[r]),v=b()("dropzone",{over:m}),y=b()("show-more-btn",{collapse:c});return(0,x.jsx)("div",{className:"star-folder-list",children:i?(0,x.jsx)(d.Z,{size:"small"}):(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"star-folder-container",children:[(0,x.jsxs)("div",{className:"star-folder-title",children:[(0,x.jsx)(j.r7,{}),"Starred folders",r.length>0&&(0,x.jsx)(kn,{})]}),0===r.length?(0,x.jsx)("div",{className:v,ref:h,children:"Drag and drop your favorite folders here"}):(0,x.jsxs)("div",{className:"folder-list-box",children:[(0,x.jsxs)(ce.M,{initial:!1,children:[r.slice(0,5).map((function(e){return(0,x.jsx)(yn,{folder:n[e],handleUpdateStarredFolders:p},n[e].folderID)})),c&&r.slice(5,r.length).map((function(e){return(0,x.jsx)(yn,{folder:n[e],isShowMore:c,handleUpdateStarredFolders:p},n[e].folderID)}))]}),r.length>5&&(0,x.jsxs)("div",{className:y,onClick:function(){l(!c)},children:[(0,x.jsx)(j.Dn,{}),c?"Less":"More"]})]})]})})})}));var Un={loadFolders:ct.PW};const Hn=(0,i.$j)((function(e){var t=e.folder;return{isLoading:t.isLoading,loaded:t.loaded,starredFolderIDList:(0,fn.q)(e),folders:t.folders}}),Un)((function(e){var t=e.isLoading,n=e.starredFolderIDList,r=e.folders,i=e.loadFolders,a=e.loaded;(0,o.useEffect)((function(){i()}),[]);var s=(0,o.memo)((function(t){var i=t.index,a=t.style,o=n.map((function(e){return r[e]}))[i];return(0,x.jsx)("div",{style:a,children:(0,x.jsxs)(re.OL,{className:"folder-collapsed-list-item",to:"/folder/".concat(o.folderID),onClick:e.closePopover,title:o.name,children:[(0,x.jsx)(j.RO,{}),o.name]})})}),fe.wy);s.displayName="Row";var c=n.length>0?Math.min(36*n.length+24,280):"auto";return(0,x.jsx)("div",{className:"folder-collapsed-list ".concat(n&&n.length>7?"scrollable":""),style:{height:c},children:t?(0,x.jsx)(d.Z,{size:"small"}):(0,x.jsx)(x.Fragment,{children:a&&(0,x.jsx)(x.Fragment,{children:n&&n.length>0?(0,x.jsx)(de.Z,{children:function(e){var t=e.height,r=e.width;return(0,x.jsx)(fe.t7,{className:"list",height:t,itemCount:n.length,itemSize:36,width:r,children:s})}}):(0,x.jsx)("div",{className:"empty-tip",children:"No starred folders"})})})})}));function Fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Vn=function(){var e=Fn((0,o.useState)(!1),2),t=e[0],n=e[1];return(0,x.jsx)(Bt.Z,{content:(0,x.jsx)(Hn,{closePopover:function(){n(!1)}}),overlayClassName:"folder-menu-popup",autoAdjustOverflow:!0,visible:t,placement:"rightTop",onVisibleChange:n,destroyTooltipOnHide:!0,children:(0,x.jsx)("div",{className:"folder-menu",children:(0,x.jsx)(j.r7,{})})})};var Bn=n(25592),Wn=n(73218),zn=n(15873),Kn=n(14838),$n=n(13302);function qn(e){return"current"in e?e.current:e}function Yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qn={Pending:["Zipping",(0,x.jsx)(Bn.Z,{spin:!0,style:{color:"#4693ff"}},"Zipping")],Failed:["Zip failed",(0,x.jsx)(Wn.Z,{style:{color:"#FF4D4F"}},"Zip failed")],Canceled:["Zip canceled",(0,x.jsx)(tt.Z,{style:{color:"#FF9B2F"}},"Zip canceled")],Succeed:["Download ready",(0,x.jsx)(zn.Z,{style:{color:"#4BD330"}},"Download ready")]};var Xn=(0,i.$j)(null,{onCancel:function(e){return(0,Kn.H4)(e)}})((function(e){var t=e.status,n=e.fileName,r=e.id,i=e.onCancel,a=Yn(Qn[t],2),o=a[0],s=a[1],c=b()("download-list-item",{"is-zipping":"Pending"===t});return(0,x.jsxs)(le.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:c,children:[(0,x.jsx)("span",{className:"file-name",children:n||"File"}),(0,x.jsx)("span",{className:"status-message",children:o}),(0,x.jsx)("span",{className:"status-icon",children:s}),(0,x.jsx)("span",{className:"close-text",onClick:function(){if("Pending"!==t)return i(r);he.C2.confirm({title:"Cancel download?",content:"Your download is not complete. Would you like to cancel the download?",okText:"Cancel download",cancelText:"Continue download",cancelButtonProps:{type:"default"},okButtonProps:{type:"default",danger:!0}}).then((function(){return i(r)}))},children:"Cancel"})]})}));var er=(0,i.$j)((function(e){return{list:e.downloadList}}),{onCancelAll:Kn.tH})((function(e){var t=e.list,n=e.onCancelAll,r=Yn((0,o.useState)(!1),2),i=r[0],a=r[1],s=0===t.length;s&&i&&a(!1);var c=b()("download-list",{collapsed:i,closed:s}),l=(0,o.useRef)(null),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis.document.documentElement,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=(0,$n.r)(n);return(0,o.useEffect)((function(){var n=qn(t);null!=n&&n.style&&n.style.setProperty(e,r.value)}),[r,t,e]),r}("--list-count",l,"0");return(0,o.useEffect)((function(){u.value=t.length+""}),[t.length]),(0,x.jsxs)("div",{className:c,ref:l,children:[(0,x.jsxs)("div",{className:"title",children:[(0,x.jsxs)("span",{children:[(0,x.jsx)("span",{children:"Preparing download"}),i&&t.length>0&&(0,x.jsx)("span",{className:"list-length",children:t.length})]}),(0,x.jsxs)("div",{className:"flex-align",children:[(0,x.jsx)(j.nX,{className:"collapse-icon",onClick:function(){return a((function(e){return!e}))}}),(0,x.jsx)(j.Tw,{className:"close-icon",onClick:function(){he.C2.confirm({title:"Cancel all downloads?",content:"Your download is not complete. Would you like to cancel all your downloads?",cancelText:"Continue download",okText:"Cancel download",cancelButtonProps:{type:"default"},okButtonProps:{type:"default",danger:!0}}).then((function(){return n()}))}})]})]}),(0,x.jsx)("div",{className:"content",children:(0,x.jsx)(ce.M,{initial:!1,children:t.map((function(e){var t=e.id,n=e.fileName,r=e.status;return(0,x.jsx)(Xn,{fileName:n,id:t,status:r},t)}))})})]})}));function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rr=et.Z.Sider,ir=et.Z.Content;var ar={clearSelectedItem:nt.jh};const or=(0,i.$j)((function(e){return{user:e.user}}),ar)((function(e){var t=tr((0,o.useState)("true"===localStorage.collapse_nav),2),n=t[0],r=t[1],i=tr((0,o.useState)(!1),2),a=i[0],s=i[1],c=tr((0,o.useState)(null),2),l=c[0],d=c[1],f=tr((0,o.useState)(!1),2),h=f[0],p=f[1],v=(0,K.s0)(),g=(0,te.useMediaQuery)({query:"(max-width: 768px)"}),j=(0,te.useMediaQuery)({query:"(max-width: 1460px)"}),w=(0,K.TH)(),I=e.user,S=e.clearSelectedItem,N=(0,u.Z)().get("referKey");function O(){"team"===I.premium.currentPlan.PlanName&&I.premium.currentPlan.OwnerUID===I.premium.currentPlan.UID?p(!0):v("/workspace/create")}(0,o.useEffect)((function(){S()}),[w]),(0,o.useEffect)((function(){N&&(0,y.szH)(N).then((function(e){d(e),s(!0)})).catch((function(e){s(!0),(0,he.I1)("Click refer sign in when registered")}))}),[]),(0,o.useEffect)((function(){"true"!==localStorage.isNoticeTransfer&&I.premium.currentPlan&&"team"===I.premium.currentPlan.PlanName&&I.premium.currentPlan.OwnerUID===I.premium.currentPlan.UID&&(p(!0),localStorage.isNoticeTransfer=!0)}),[I]);var E=b()("main-container",{hidden:!1}),D=I.premium.currentPlan&&"team"===I.premium.currentPlan.PlanName&&I.premium.currentPlan.OwnerUID===I.premium.currentPlan.UID,A=(0,x.jsxs)("div",{className:"discount-tip-header",children:["Transfer to Workspace to boost workflow with ",(0,x.jsx)("b",{children:"NO additional cost"}),".",(0,x.jsx)(re.rU,{className:"btn primary",to:"/workspace/transfer",children:"Transfer"})]}),C=(I.premium.currentPlan&&("free"===I.premium.currentPlan.PlanName||"basic"===I.premium.currentPlan.PlanName)&&parseInt(I.counts.video)>=.75*I.counts.videoLimitation&&(parseInt(I.counts.video),I.counts.videoLimitation),I.premium.currentPlan&&("free"===I.premium.currentPlan.PlanName||"basic"===I.premium.currentPlan.PlanName)&&(parseInt(I.counts.video),I.counts.videoLimitation),I.premium.currentPlan&&"free"===I.premium.currentPlan.PlanName&&parseInt(I.counts.image)>=.75*I.counts.imageLimitation&&(parseInt(I.counts.image),I.counts.imageLimitation),I.premium.currentPlan&&"free"===I.premium.currentPlan.PlanName&&(parseInt(I.counts.image),I.counts.imageLimitation),b()("my-items",{"header-tip":D,collapsed:n})),T=245;g?T=0:j&&!g&&(T=205);var P=b()("",{collapsed:n});return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:C,children:[D&&A,(0,x.jsxs)(et.Z,{className:E,children:[(0,x.jsx)(rr,{className:"side-bar",width:T,collapsed:n,collapsedWidth:Math.min(T,65),children:(0,x.jsxs)("div",{className:"sidebar-inner",children:[!g&&function(){var e=b()("sidebar-container",{collapsed:n});return(0,x.jsxs)("div",{className:e,children:[(0,x.jsx)("div",{className:"sidebar-section-title",children:"Personal"}),(0,x.jsxs)("ul",{className:"sidebar-nav",children:[(0,x.jsx)("li",{children:(0,x.jsx)(ft,{collapsed:n})}),(0,x.jsx)(xe.Z,{title:n?"Shared with me":"",placement:"right",children:(0,x.jsx)("li",{children:(0,x.jsx)(pt,{})})})]}),(0,x.jsx)("div",{className:"star-folder-area",children:n?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"sep"}),(0,x.jsx)(Vn,{})]}):(0,x.jsx)("div",{className:"folder-area",children:(0,x.jsx)(Zn,{})})}),(0,x.jsxs)("div",{className:"workspace-area",children:[n?(0,x.jsx)("div",{className:"sep"}):(0,x.jsx)("div",{className:"sidebar-section-title",children:"Workspace"}),(0,x.jsx)(dn,{collapsed:n})]}),!n&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"sidebar-divider"}),(0,x.jsx)("div",{className:"create-workspace-btn-area",children:(0,x.jsx)(m.Z,{block:!0,onClick:O,children:"Create a workspace"})})]})]})}(),(0,x.jsxs)("div",{className:"sidebar-bottom ".concat(n?"collapsed":""),children:[(0,x.jsx)(xe.Z,{title:n?"Trash":"",placement:"right",children:(0,x.jsx)("div",{className:"sidebar-bottom-btn trash-btn",children:(0,x.jsx)(St,{})})}),!g&&(0,x.jsx)(jt,{toggleCollapse:function(){r(!n),localStorage.collapse_nav=!n},collapsed:n})]})]})}),(0,x.jsxs)(ir,{className:"content",children:[e.children,(0,x.jsx)(er,{}),(0,x.jsx)(Pt,{className:P})]})]}),(0,x.jsx)(ot,{}),(0,x.jsx)(Mt,{}),(0,x.jsx)(Gt,{visible:a,onCancel:function(){s(!1)},referData:l}),(0,x.jsx)(Vt.Z,{visible:h,onCancel:function(){p(!1)}})]})})}));var sr=n(89862),cr=n(57865);const lr=function(e){return z.Z.get("screenshot_personal_uid")?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Qe,{type:"item"}),(0,x.jsx)(sr.W,{backend:cr.PD,children:(0,x.jsx)(or,{children:(0,x.jsx)(K.j3,{})})})]}):(window.location.href="/signin","")};n(79255);var ur=n(27279),dr=(n(6212),n(34041)),fr=n(86664),mr=n(54465),hr=n(6137),pr=n(75541),vr=n(25894),yr=n(56026),gr=(n(48865),[{type:"free",displayName:"Free",tip:"Great starter",features:{integrations_cs:[{name:"googleDrive",displayName:"Google Drive"}],integrations_cp:[],screenshot:["Access the latest 50 screenshots","Basic annotation tools"],record:[{type:"string",text:"5 minutes per recording",preview:"local"},{type:"string",text:"Access the latest 20 cloud videos"},{type:"string",text:"Resolution up to 720p"},{type:"string",text:"Recover from Trash within 3 days"}],others:["Capture visible/full page screenshot","Basic annotation tools","1 Project to host, manage and share screenshots","30 images per project","5 minutes video recording per video","20 free videos access","Recover items from Trash within 3 days"]}},{type:"basic",displayName:"Basic",tip:"Perfect to video recording& taking screenshots",features:{integrations_cs:[{name:"googleDrive",displayName:"Google Drive"},{name:"dropbox",displayName:"Dropbox"},{name:"box",displayName:"Box"}],integrations_cp:[],screenshot:["Unlimited screenshots","All annotation tools"],record:[{type:"string",text:"5 minutes per recording",preview:"local"},{type:"string",text:"Access the latest 20 cloud videos"},{type:"string",text:"Resolution up to 720p"},{type:"string",text:"Recover from Trash within 30 days"}],others:["All Capture features","All advanced annotation tools","Unlimited screenshot storage","Unlimited projects to host, manage and share screenshots","Unlimited video recording for Tabs and Desktop","20 free videos access","Recover items from Trash within 30 days"]}},{type:"professional",displayName:"Professional",tip:"Best for taking screenshots",features:{integrations_cs:[{name:"googleDrive",displayName:"Google Drive"},{name:"dropbox",displayName:"Dropbox"},{name:"box",displayName:"Box"}],integrations_cp:[{name:"slack",displayName:"Slack"},{name:"trello",displayName:"Trello"},{name:"asana",displayName:"Asana"},{name:"github",displayName:"Github"},{name:"jira",displayName:"Jira"}],screenshot:["Unlimited screenshots","All annotation tools"],record:[{type:"string",text:"Unlimited recording length",preview:"cloud"},{type:"string",text:"Unlimited access to cloud videos"},{type:"string",text:"Resolution up to 4k"},{type:"string",text:"Recover from Trash within 30 days"},{type:"string",text:"Download in MP4 (from the Cloud)"},{type:"string",text:"Priority MP4 conversion"},{type:"string",text:"Edit video with Cut, Text, Shape..."}],others:["All Capture features","All advanced annotation tools","Unlimited screenshot storage","Unlimited projects to host, manage and share screenshots","Unlimited video recording for Tabs and Desktop","Unlimited video recording and access"]}},{type:"team",displayName:"Team",features:{integrations_cs:[{name:"googleDrive",displayName:"Google Drive"},{name:"dropbox",displayName:"Dropbox"},{name:"box",displayName:"Box"}],integrations_cp:[{name:"slack",displayName:"Slack"},{name:"trello",displayName:"Trello"},{name:"asana",displayName:"Asana"},{name:"github",displayName:"Github"},{name:"jira",displayName:"Jira"}],screenshot:["Unlimited screenshots","All annotation tools"],record:[{type:"string",text:"Unlimited recording length",preview:"cloud"},{type:"string",text:"Unlimited access to cloud videos"},{type:"string",text:"Resolution up to 4k"},{type:"string",text:"Recover from Trash within 30 days"},{type:"string",text:"Download in MP4 (from the Cloud)"},{type:"string",text:"Priority MP4 conversion"},{type:"string",text:"Edit video with Cut, Text, Shape..."}],others:["All Capture features","All advanced annotation tools","Unlimited screenshot storage","Unlimited projects to host, manage and share screenshots","Unlimited video recording for Tabs and Desktop","Unlimited video recording and access"]}}]),br=[{header:"Can I cancel my subscription anytime?",content:"Yes, you can cancel your subscription in settings anytime."},{header:"Can I get a refund if I cancel my subscription?",content:"You can write us an email to ask for a refund for a yearly subscription if you cancel it within 14 days of purchase. No refund available for a monthly subscription."},{header:"How long does a refund take?",content:"It usually takes 2~7 business days."}],jr=[5,10,15,20,25,30];function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ir=dr.Z.Option;const Sr=function(e){var t=xr((0,o.useState)((function(){return e.currentTeamNum})),2),n=t[0],r=t[1],i=e.plan,a=e.upgradeInfo;(0,o.useEffect)((function(){r(e.currentTeamNum)}),[e.currentTeamNum]);var s=a.CurrentPlan,c=function(e){if(""==s.PlanName)return{text:"Get started",isDisabled:!1};if("basic"===e)var t=a.Personal;else if("professional"===e)t=a.Pro;else if("team"===e)t=a.Team;else if("free"===e)return{text:"Free to use",isDisabled:!0};return t.CanUpgrade?"basic"===e||"professional"===e?t.CanUpgrade2Monthly&&t.CanUpgrade2Yearly?{text:"Upgrade",isDisabled:!1}:t.CanUpgrade2Yearly&&!t.CanUpgrade2Monthly?s.PlanName===e?{text:"Change to yearly",isForceYear:!0,isDisabled:!1}:{text:"Upgrade",isForceYear:!0,isDisabled:!1}:{text:"Upgrade",isDisabled:!0}:"team"===e?a.CurrentPlan.Cap<n?{text:"Upgrade",isDisabled:!1}:a.CurrentPlan.Cap===n?"Monthly"===s.Interval?{text:"Change to yearly",isForceYear:!0,isDisabled:!1}:{text:"Your plan",isDisabled:!0}:{text:"Upgrade",isDisabled:!0}:void 0:a.CurrentPlan.PlanName===e?{text:"Your plan",isDisabled:!0}:{text:"Upgrade",isDisabled:!0}}(i.type),l=function(t){""!=s.PlanName?(e.handleChoose(t,n,"Change to yearly"===c.text||!0===c.isForceYear),(0,he.I1)("click upgrade button",{event_category:"pricing"})):window.location.href="/user/login?redirect_url=https://www.awesomescreenshot.com/pricing"},u=(i.type,""),d=(0,he.IT)(),f="free"===s.PlanName&&"professional"===i.type?"best-value":"",h="team"===i.type?"month"===e.purchaseType?i.EnableDiscount[n]:i.EnableDiscount_y[n]:"month"===e.purchaseType?i.EnableDiscount:i.EnableDiscount_y;return(0,x.jsxs)("div",{className:"plan-item ".concat(i.type," ").concat(f),id:"team"===i.type?"team-plan":"",children:["professional"!==s.PlanName&&"team"!==s.PlanName&&"professional"===i.type&&d&&(0,x.jsxs)("div",{className:"pro-tip",children:[(0,x.jsx)("div",{className:"title",children:"💡Suggested"}),(0,x.jsxs)("div",{className:"content",children:["Upgrade to Pro to gain",(0,x.jsx)("br",{}),(0,x.jsx)("b",{children:"unlimited video access"})]})]}),"free"!==s.PlanName&&s.PlanName===i.type&&(0,x.jsxs)("div",{className:"your-plan",children:[(0,x.jsx)("div",{className:"icon"}),"Your current plan"]}),"free"===s.PlanName&&"professional"===i.type&&(0,x.jsx)("div",{className:"your-plan",children:"BEST VALUE"}),(0,x.jsxs)("div",{className:"info-box ".concat(u),children:[(0,x.jsx)("div",{className:"discount-tip"}),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"type",children:i.displayName}),(0,x.jsx)("div",{className:"price",children:"team"===i.type?(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"price-num",children:[(0,x.jsx)("div",{className:"price-tag",children:(0,x.jsx)(j.fY,{})}),"month"===e.purchaseType?i.price[n]:i.price_y[n],0!==h&&(0,x.jsxs)("div",{className:"original-price",children:[(0,x.jsx)("span",{children:"$"}),"month"===e.purchaseType?i.price_o[n]:i.price_y_o[n]]})]})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"original-price-num",children:"$6/Month"}),(0,x.jsxs)("div",{className:"price-num",children:[(0,x.jsx)("div",{className:"price-tag",children:(0,x.jsx)(j.fY,{})}),"month"===e.purchaseType?i.price:i.price_y,0!==h&&"free"!==i.type&&(0,x.jsxs)("div",{className:"original-price",children:[(0,x.jsx)("span",{children:"$"}),"month"===e.purchaseType?i.price_o:i.price_y_o]})]})]})}),(0,x.jsx)("div",{className:"user-number",children:"team"===i.type?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(dr.Z,{defaultValue:n,getPopupContainer:function(){return document.getElementById("team-plan")},onChange:function(e){r(e)},children:jr.map((function(e){return(0,x.jsxs)(Ir,{value:e,children:[e," users"]},e)}))}),"/ month"]}):(0,x.jsx)(x.Fragment,{children:"free"===i.type?"Permanently valid":"Per user / month"})}),function(e){return"Your plan"===e.text?(0,x.jsx)(m.Z,{type:"primary",className:"choose-btn",disabled:e.isDisabled,onClick:l.bind(null,i.type),children:"Upgrade"}):"Change to yearly"===e.text?(0,x.jsxs)("div",{className:"change-to-yearly",children:[(0,x.jsx)("div",{className:"tip",children:"You're paying monthly"}),(0,x.jsx)(m.Z,{type:"primary",className:"choose-btn",disabled:e.isDisabled,onClick:l.bind(null,i.type),children:e.text})]}):(0,x.jsx)(m.Z,{type:"primary",className:"choose-btn",disabled:e.isDisabled,onClick:l.bind(null,i.type),children:e.text})}(c)]})]}),(0,x.jsx)("div",{className:"sep"}),(0,x.jsxs)("div",{className:"feature-box",children:[(0,x.jsx)("div",{className:"title",children:"Screenshot"}),(0,x.jsx)("div",{className:"feature-section",children:(0,x.jsx)("ul",{className:"feature-list",children:i.features.screenshot.map((function(e,t){return(0,x.jsx)("li",{children:(0,x.jsxs)("div",{className:"feature-item",children:[(0,x.jsx)("span",{dangerouslySetInnerHTML:{__html:e.replace(/(Unlimited|All)/gi,"<b>$&</b>")}}),"Save screenshots to:"===e&&(0,x.jsx)("div",{className:"integrations-container",children:i.features.integrations_cs.map((function(e,t){return(0,x.jsx)(xe.Z,{title:e.displayName,children:(0,x.jsx)("div",{className:"integration-item small ".concat(e.name)})},e.name)}))})]})},t)}))})}),(0,x.jsxs)("div",{className:"feature-section",children:[(0,x.jsx)("div",{className:"title",children:"Video Recording"}),(0,x.jsx)("ul",{className:"feature-list",children:i.features.record.map((function(e,t){return(0,x.jsx)("li",{children:(0,x.jsx)("div",{className:"feature-item",children:"string"===e.type?(0,x.jsx)("span",{dangerouslySetInnerHTML:{__html:e.text.replace(/(Unlimited|All|4k)/gi,"<b>$&</b>")}}):(0,x.jsxs)("div",{className:"feature-link",children:[(0,x.jsx)("span",{dangerouslySetInnerHTML:{__html:e.text.replace(/(Unlimited|All|4k)/gi,"<b>$&</b>")}}),(0,x.jsxs)("div",{className:"feature-preview ".concat(e.preview),children:[(0,x.jsx)("div",{className:"text",children:"local"===e.preview?'Local Recordings: temporarily stored under "My Local Recordings", can be further saved to your local disk.':"Cloud Recordings: automatically saved to your account, can be shared instantly and also downloadable."}),(0,x.jsx)("div",{className:"pic"})]})]})})},t)}))}),("free"===i.type||"basic"===i.type)&&(0,x.jsxs)("div",{className:"extra",children:[(0,x.jsx)("div",{className:"extra-title",children:"For the first 20 videos recorded with cloud mode, you can try professional features listed below:"}),(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{className:"list-item",children:"Download in MP4 (less than 1 hour)"}),(0,x.jsx)("li",{className:"list-item",children:"Use annotation tools while recording"}),(0,x.jsx)("li",{className:"list-item",children:"Unlimited length per recording"}),(0,x.jsx)("li",{className:"list-item",children:"Edit video (less than 1 hour)"})]})]})]}),i.features.integrations_cp.length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"title",children:"Integrations"}),(0,x.jsx)("div",{className:"integrations-container",children:i.features.integrations_cp.map((function(e,t){return(0,x.jsx)(xe.Z,{title:e.displayName,children:(0,x.jsx)("div",{className:"integration-item ".concat(e.name)})},e.name)}))})]})]})]})};var Nr;n(59331);function Or(e){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(e)}function Er(e){return function(e){if(Array.isArray(e))return Dr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){Tr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _r(e,t){return _r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_r(e,t)}function kr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mr(e);if(t){var i=Mr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Lr(this,n)}}function Lr(e,t){if(t&&("object"===Or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rr(e)}function Rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e){return Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mr(e)}dr.Z.Option;var Zr=ur.Z.Panel,Ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_r(e,t)}(a,e);var t,n,r,i=kr(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={billingPeriod:"year",currentTeamNum:5,currentPlanName:"",currentAmount:0,isShownOverview:!1,isShownCancel:!1,isShownPayment:!1,currentPlan:"",currentChoose:"",planOverviewTitle:"Billing overview",planOverviewBtnText:"Pay Now",coupon:null,planText:"",price:"",price_m:"",needCreate:!1,upgradeCostInfo:null,isForceYear:!1,isUpgradeBtnLoading:!1,paymentType:"success",purchaseType:"year",isCheckoutLoaded:!1,isShowOverviewLoading:!1},t.handleBillingPeriodChange=t.handleBillingPeriodChange.bind(Rr(t)),t.handleTeamNumChange=t.handleTeamNumChange.bind(Rr(t)),t.handleChoosePlan=t.handleChoosePlan.bind(Rr(t)),t.handlePay=t.handlePay.bind(Rr(t)),t.handleApplePay=t.handleApplePay.bind(Rr(t)),t.handleCancel=t.handleCancel.bind(Rr(t)),t.handleCancelPlanSuccess=t.handleCancelPlanSuccess.bind(Rr(t)),t.handleChangePlanSuccess=t.handleChangePlanSuccess.bind(Rr(t)),t.refreshUpgradeCostInfo=t.refreshUpgradeCostInfo.bind(Rr(t)),t.handleChangePurchaseType=t.handleChangePurchaseType.bind(Rr(t)),t.createStripHandler=t.createStripHandler.bind(Rr(t)),t._createPlan=t._createPlan.bind(Rr(t)),t}return t=a,n=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;(0,he.ve)("strip-checkout","https://checkout.stripe.com/checkout.js",(function(){e.setState({isCheckoutLoaded:!0})}))}},{key:"componentDidMount",value:function(){var e=this;this.props.loadUserInfo();var t=new URLSearchParams(this.props.location.search);this.promotionCode=t.get("promotionCode"),this.props.loadPlans(this.promotionCode),this.createStripHandler(),window.addEventListener("popstate",(function(){e.handler&&e.handler.close()}));try{var n=window.location.href.match(/\?success=(.*)$/);n&&("true"===(n=n[1])?this.setState({isShownPayment:!0,paymentType:"success"}):U.Z.error({title:"Payment Failed",content:"Your payment didn’t go through. Please check your card information then try again.",okText:"Got it"}));var r=window.location.href.match(/from=(.*)$/);if(r)var i=r[1];else i="website";i&&setTimeout((function(){(0,y.tM0)(i)}),1e3)}catch(e){}document.title="Pricing - Awesome Screenshot"}},{key:"componentDidUpdate",value:function(e){e.user.premium!==this.props.user.premium&&"team"===this.props.user.premium.currentPlan.PlanName&&this.setState({currentTeamNum:this.props.user.premium.currentPlan.Cap})}},{key:"componentWillUnmount",value:function(){var e=this;window.removeEventListener("popstate",(function(){e.handler.close()}))}},{key:"_createPlan",value:function(e,t){var n=this,r=this;this.setState({isShowOverviewLoading:!0}),(0,y.e$B)(this.state.currentPlanName,t,e,this.promotionCode).then((function(){n.setState({isShownOverview:!1,isUpgradeBtnLoading:!1,isShowOverviewLoading:!1}),n.props.loadPlans(r.promotionCode),n.props.loadUserInfo(!0)}),(function(e){n.setState({isUpgradeBtnLoading:!1,isShowOverviewLoading:!1}),U.Z.error({title:"Payment Failed",content:e+" Please try a different card or contact your card issuer.",okText:"Got it"})}))}},{key:"handleBillingPeriodChange",value:function(e,t){var n=this.state,r=n.currentChoose,i=n.currentTeamNum,a="";"team"===r?a="team_plan_"+i+("month"===e?"m":""):"basic"===r?a="premium_plan"+("month"===e?"m":""):"professional"===r&&(a="pro_plan"+("month"===e?"m":"")),this.setState({purchaseType:e,billingPeriod:e,currentPlanName:a,upgradeCostInfo:null}),t||this.refreshUpgradeCostInfo(a)}},{key:"refreshUpgradeCostInfo",value:function(e){var t=this;(0,y.qQg)(e,this.promotionCode).then((function(e){t.setState({upgradeCostInfo:e})}))}},{key:"handleTeamNumChange",value:function(e){this.setState({currentTeamNum:e})}},{key:"handleCancel",value:function(e){var t="isShown".concat(e);this.setState(Tr({},t,!1))}},{key:"createStripHandler",value:function(){var e=this,t=this;"undefined"!=typeof StripeCheckout&&(this.handler=StripeCheckout.configure({key:"pk_live_dEyUjlPXO4pAhgsnnuUwrbEm",image:"https://www.awesomescreenshot.com/images/logo_128.png",locale:"auto",email:/privaterelay.appleid.com/.test(this.props.user.info.mail)?"":this.props.user.info.mail,token:function(n){e.token=n,"Paypal"===e.props.user.premium.currentPlan.PaymentMethod?(0,y.oH9)().then((function(e){t._createPlan("1",n)}),(function(e){t._createPlan("0",n)})):t._createPlan("1",n)},closed:function(t){e.token||e.setState({isUpgradeBtnLoading:!1})}}))}},{key:"handlePay",value:function(e){var t=this,n=(this.props.plan.plans,this.state),r=(n.currentChoose,n.coupon,n.price,n.price_m,n.planText),i=n.needCreate,a=(n.currentTeamNum,n.currentPlanName),o=(n.billingPeriod,n.upgradeCostInfo);if(n.purchaseType,"PayPal"===e)this.setState({isUpgradeBtnLoading:!0}),(0,y.GMb)(a,this.promotionCode).then((function(e){e.URL&&(window.location.href=e.URL)})).catch((function(e){t.setState({isUpgradeBtnLoading:!1})}));else if(i){var s=o.UpgradeCost.toFixed(2);s=Number((""+s).replace(".","")),this.setState({isUpgradeBtnLoading:!0}),this.handler||this.createStripHandler(),this.handler.open({name:"Awesome Screenshot",description:r,zipCode:!0,amount:s})}else this.setState({isUpgradeBtnLoading:!0}),(0,y.BBL)(a).then((function(e){t.props.loadUserInfo(!0),t.setState({isShownOverview:!1,isUpgradeBtnLoading:!1}),v.ZP.success("Your plan has been upgraded to "+r+" successfully!")}),(function(e){t.setState({isUpgradeBtnLoading:!1}),U.Z.error({title:"Payment Failed",content:e+" Please try a different card or contact your card issuer.",okText:"Got it"})}))}},{key:"handleChoosePlan",value:function(e,t,n){var r=this.state.billingPeriod,i=this.props.plan.plans,a=this.props.user.premium.upgradeInfo;if(n=n||"Yearly"===a.CurrentPlan.Interval&&"PayPal"===a.CurrentPlan.PaymentMethod,"basic"===e){var o="Basic (1 user)",s=a.Personal.Coupon,c=a.Personal.NeedCreate,l="premium_plan";l=n?"premium_plan":"premium_plan"+("month"===r?"m":"")}else if("professional"===e)o="Professional (1 user)",s=a.Pro.Coupon,c=a.Pro.NeedCreate,l=n?"pro_plan":"pro_plan"+("month"===r?"m":"");else if("team"===e){o="Team ("+t+" users)";var u=i["team_plan_"+t+"m"].Price;s=a.Team.Coupon,c=a.Team.NeedCreate,l=n?"team_plan_"+t:"team_plan_"+t+("month"===r?"m":"")}var d={currentChoose:e,currentTeamNum:t,planText:o,needCreate:c,price_m:u||"",coupon:s,planOverviewBtnText:"Upgrade",currentPlanName:l};d.isForceYear=!!n,this.setState(Cr(Cr({},d),{},{upgradeCostInfo:null,isShownOverview:!0})),this.refreshUpgradeCostInfo(l)}},{key:"handleCancelPlanSuccess",value:function(){this.props.loadUserInfo(),this.token=null,this.setState({isShownOverview:!0})}},{key:"handleChangePlanSuccess",value:function(){this.props.loadUserInfo(),this.setState({isShownOverview:!1})}},{key:"handleApplePay",value:function(e){var t=this,n=this;this.setState({isShowOverviewLoading:!0}),(0,y.tRN)({stripeEmail:e.billing_details.email,name:e.billing_details.name,paymentMethod:e.id,planName:this.state.currentPlanName,promotionCode:this.promotionCode}).then((function(e){t.setState({isShownOverview:!1,isShowOverviewLoading:!1}),t.props.loadPlans(n.promotionCode),t.props.loadUserInfo(!0)})).catch((function(e){t.setState({isShowOverviewLoading:!1}),U.Z.error({title:"Payment Failed",content:e+" Please try a different card or contact your card issuer.",okText:"Got it"})}))}},{key:"handleChangePurchaseType",value:function(e){this.handleBillingPeriodChange(e,!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.plan,r=t.user,i=this.state,a=i.purchaseType,o=i.currentTeamNum,s=i.isShownOverview,c=(i.currentPlanName,i.currentPlan,i.currentAmount,i.currentChoose),l=i.planOverviewTitle,u=i.isShownCancel,d=(i.coupon,i.planOverviewBtnText),f=i.price,m=(i.price_m,i.planText),h=i.upgradeCostInfo,p=i.isForceYear,v=i.billingPeriod,y=i.isUpgradeBtnLoading,g=i.isShownPayment,w=i.paymentType,I=i.isCheckoutLoaded,S=i.isShowOverviewLoading,N=b()("switch",{active:"year"===a}),O=n.plans,E=r.premium||"",D=function(e,t,n){if("free"===e)return 0;if("basic"===e)return n?O.premium_planm.OriginPrice:O.premium_planm.Price;if("professional"===e)return n?O.pro_planm.OriginPrice:O.pro_planm.Price;if("team"===e){var r="team_plan_"+t+"m";return n?O[r].OriginPrice:O[r].Price}},A=function(e,t,n){if("free"===e)return 0;if("basic"===e)return n?O.premium_plan.OriginPrice:O.premium_plan.Price;if("professional"===e)return n?O.pro_plan.OriginPrice:O.pro_plan.Price;if("team"===e){var r="team_plan_"+t;return n?O[r].OriginPrice:O[r].Price}},C=function(e,t){if("basic"===e)return{m:O.premium_planm.EnableDiscount,y:O.premium_plan.EnableDiscount};if("professional"===e)return{m:O.pro_planm.EnableDiscount,y:O.pro_plan.EnableDiscount};if("team"===e){var n="team_plan_"+t;return{m:O["team_plan_"+t+"m"].EnableDiscount,y:O[n].EnableDiscount}}},T=Er(gr);O.premium_plan&&T.forEach((function(e){if("free"===e.type)e.EnableDiscount=!1,e.EnableDiscount_y=!1;else if("team"!==e.type){var t=C(e.type);e.EnableDiscount=t.m,e.EnableDiscount_y=t.y}else e.EnableDiscount={},e.EnableDiscount_y={},jr.forEach((function(t){var n=C("team",t);e.EnableDiscount[t]=n.m,e.EnableDiscount_y[t]=n.y}));if("team"!==e.type)e.price=D(e.type),e.price_y=(0,he.MW)(A(e.type)),e.price_o=D(e.type,0,!0),e.price_y_o=(0,he.MW)(A(e.type,0,!0));else if("team"===e.type){var n={},r={},i={},a={};jr.forEach((function(e){n[e]=D("team",e),r[e]=(0,he.MW)(A("team",e)),i[e]=D("team",e,!0),a[e]=(0,he.MW)(A("team",e,!0))})),e.price=n,e.price_y=r,e.price_o=i,e.price_y_o=a}})),E.PlanName,E.PlanName,"Team Plan"===E.PlanName&&E.Cap===o&&E.Interval;var P=function(){return(0,x.jsxs)("div",{className:"plan-page",children:[(0,x.jsx)("div",{className:"bg-container"}),(0,x.jsxs)("div",{className:"main",children:[(0,x.jsx)("div",{className:"title",children:"Pick a plan that suits your needs"}),(0,x.jsx)("div",{className:"title-tip",children:"All prices listed below are in USD."}),!n.isLoading&&!r.isLoading&&I&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"switcher",children:(0,x.jsxs)("div",{className:N,children:[(0,x.jsx)("div",{className:"switch-tip"}),(0,x.jsx)("div",{className:"switch-thumb"}),(0,x.jsx)("div",{className:"switch-item month",onClick:function(){e.handleChangePurchaseType("month")},children:"Billed Monthly"}),(0,x.jsx)("div",{className:"switch-item year",onClick:function(){e.handleChangePurchaseType("year")},children:"Billed Yearly"})]})}),(0,x.jsx)("div",{className:"plan-container",children:(0,x.jsx)("div",{className:"plan-box",children:T.map((function(t){return(0,x.jsx)(Sr,{plan:t,purchaseType:a,currentTeamNum:o,upgradeInfo:r.premium.upgradeInfo,handleChoose:e.handleChoosePlan},t.type)}))})}),(0,x.jsx)(vr.Z,{visible:s,price:f,planText:m,title:l,handleCancel:e.handleCancel.bind(null,"Overview"),handlePay:e.handlePay,handleBillingPeriodChange:e.handleBillingPeriodChange,btnText:d,currentChoose:c,billingPeriod:v,upgradeCostInfo:h,isForceYear:p,isUpgradeBtnLoading:y,isShowOverviewLoading:S,handleApplePay:e.handleApplePay}),(0,x.jsx)(hr.Z,{visible:u,handleCancel:e.handleCancel.bind(null,"Cancel"),handleCancelPlanSuccess:e.handleCancelPlanSuccess}),(0,x.jsx)(pr.Z,{visible:g,handleCancel:e.handleCancel.bind(null,"Payment"),type:w})]})]}),!n.isLoading&&!r.isLoading&&I&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"faq-area",children:(0,x.jsxs)("div",{className:"faq",children:[(0,x.jsx)("div",{className:"title",children:"FAQs"}),(0,x.jsx)(ur.Z,{ghost:!0,expandIconPosition:"right",expandIcon:function(e){var t=e.isActive;return(0,x.jsx)(j.e0,{rotate:t?270:90})},children:br.map((function(e){return(0,x.jsx)(Zr,{className:"faq-header",header:e.header,children:(0,x.jsx)("div",{children:e.content})},e.header)}))})]})}),(0,x.jsx)("div",{className:"contact",children:(0,x.jsxs)("div",{className:"contact-win",children:[(0,x.jsx)("div",{className:"pic"}),(0,x.jsx)("div",{className:"form-area",children:(0,x.jsx)(yr.Z,{})})]})})]})]})};return be.Z.isSafari()?(0,x.jsx)(fr.Elements,{stripe:(!Nr&&be.Z.isSafari()&&(Nr=(0,mr.J)("pk_live_dEyUjlPXO4pAhgsnnuUwrbEm")),Nr),children:P()}):P()}}],n&&Pr(t.prototype,n),r&&Pr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component),Hr={loadUserInfo:c.Lk,loadPlans:s.Z};const Fr=(0,i.$j)((function(e){return{user:e.user,plan:e.plan}}),Hr)(Ur);var Gr=n(53962),Vr=(n(48475),n(69807),n(85986)),Br=n(78338),Wr=n(60714),zr=n(21807),Kr=n(65425),$r=n(91615);function qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jr=null,Qr=null,Xr=null,ei=null,ti=null,ni=null;function ri(e){var t=qr((0,o.useState)(!1),2),n=t[0],r=t[1],i=qr((0,o.useState)(""),2),a=i[0],s=i[1],c=qr((0,o.useState)([]),2),l=c[0],u=c[1],d=qr((0,o.useState)(!1),2),f=d[0],m=d[1],h=e.recordType,p=e.showRecordModel,y=e.recordStatus,g=e.setupAction,b=e.updateCellUI,w=e.updateAudioStatus,I=e.updateAudioStream;(0,o.useEffect)((function(){localStorage["record_mic_"+h]||(localStorage["record_mic_"+h]=!0),r("true"==localStorage["record_mic_"+h]),p&&S("")}),[h,p]),(0,o.useEffect)((function(){"normal"!==y?D():A()}),[y]),(0,o.useEffect)((function(){f&&S()}),[b]),(0,o.useEffect)((function(){return function(){D()}}),[]);var S=function(e,t){"normal"===y&&(0,$r.D)((function(n){var r=n,i=(0,$r.P)(r.audioInputDevices);if(u(i),s(e&&e.length>0?e:i.length>0?i[0].deviceId:""),0===i.length&&r.audioInputDevices.length>0?(m(!0),w("audio_setup",!0)):(m(!1),w("audio_setup",!1)),t)t(!0);else{var a=localStorage["mic-deviceId"];"true"==localStorage["record_mic_"+h]&&i.length>0?((!a||a.length<=0)&&(a=i[0].deviceId,localStorage["mic-deviceId"]=a),N()):C()}}))},N=function(){if("true"===localStorage["record_mic_"+h]){var e=!0;ti&&ti.active&&(ti.getTracks().forEach((function(t){t.getSettings().deviceId===localStorage["mic-deviceId"]&&(e=!1)})),!e)||(C(),navigator.mediaDevices.getUserMedia({audio:{deviceId:localStorage["mic-deviceId"]}}).then((function(e){(ti=e).getTracks().forEach((function(e){"audio"==e.kind&&(localStorage["mic-deviceId"]=e.getSettings().deviceId,s(localStorage["mic-deviceId"]))})),I&&I(ti),A()})).catch((function(e){e&&"Permission denied by system"===e.message?(m(!0),w("audio_setup",!0)):v.ZP.error("Invalid microphone, please choose another one.",10)})))}else C()},O=function e(){var t=document.getElementById("volume-canvas");if(t&&Qr){var n=t.getContext("2d");n&&(n.clearRect(0,0,6,18),Qr.checkClipping()?n.fillStyle="red":n.fillStyle="#47d892",n.fillRect(0,0,6,18*Qr.volume*5),Jr=window.requestAnimationFrame(e))}},E=function(e){if(Qr){for(var t,n=e.inputBuffer.getChannelData(0),r=n.length,i=0,a=0;a<r;a++)t=n[a],Math.abs(t)>=Qr.clipLevel&&(Qr.clipping=!0,Qr.lastClip=window.performance.now()),i+=t*t;var o=Math.sqrt(i/r);Qr.volume=Math.max(o,Qr.volume*Qr.averaging)}},D=function(){Jr&&window.cancelAnimationFrame(Jr),Qr&&(ei.disconnect(Qr),Qr.disconnect(Xr.destination)),Xr&&Xr.close(),Qr=null,ei=null,Xr=null},A=function(){if(ti&&!Qr){if(!Xr){var e=window.AudioContext||window.webkitAudioContext;Xr=new e}ei=Xr.createMediaStreamSource(ti),Qr=function(e,t,n,r){var i=e.createScriptProcessor(512);return i.onaudioprocess=E,i.clipping=!1,i.lastClip=0,i.volume=0,i.clipLevel=t||.98,i.averaging=n||.95,i.clipLag=r||750,i.connect(e.destination),i.checkClipping=function(){return!!i.clipping&&(i.lastClip+i.clipLag<window.performance.now()&&(i.clipping=!1),i.clipping)},i.shutdown=function(){i.disconnect(),i.onaudioprocess=null},i}(Xr),ei.connect(Qr),O()}},C=function(){D(),T()},T=function(){ti&&(ti.getTracks().forEach((function(e){e.stop()})),ti.stop(),ti=null,I&&I(null))},P=function(){var e,t;e={audio:!0},t=function(e){w&&(e?e&&w("showGuide",!e):w("showGuide",!e,"setup2")),e&&"true"===localStorage["record_mic_"+h]&&N()},navigator.mediaDevices.getUserMedia(e).then((function(e){var n="";e.getTracks().forEach((function(e){"audio"==e.kind&&(n=e.getSettings().deviceId,localStorage["mic-deviceId"]=n),"Firefox"!=Ht().name&&e.stop()})),"Firefox"!=Ht().name&&e.stop(),S(n,t)}),(function(e){e&&"Permission denied"===e.message&&(m(!0),w("audio_setup",!0)),t?t(!1):C()}))};return(0,x.jsxs)("div",{className:"record-setting-item field-mic",children:[(0,x.jsxs)("div",{className:"option-part",children:[(0,x.jsx)(j.ZO,{className:"record-option-item-icon"}),(0,x.jsxs)("span",{className:"record-option-title",children:["Record Mic Sound",(0,x.jsx)("canvas",{orientation:"vertical",id:"volume-canvas",className:"volume-canvas ".concat(n&&!f?"show-inline":""),width:"4",height:"18"})]}),(0,x.jsx)("div",{className:"action",children:f?(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"setup-mic-btn",onClick:g,children:"Grant Access"})}):(0,x.jsxs)("label",{className:"toggle-checkbox",children:[(0,x.jsx)("input",{type:"checkbox",className:"record-option-checkbox",id:"record-mic",onChange:function(e){r(e.target.checked),localStorage["record_mic_"+h]=e.target.checked,e.target.checked?P():C()},checked:n,"data-type":"mic"}),(0,x.jsx)("span",{className:"switch"}),(0,x.jsx)("span",{className:"toggle"})]})})]}),(0,x.jsx)("div",{className:"option-part source-part ".concat(n&&!f?"show":""),id:"mic-source-part",children:l.length>0?(0,x.jsx)("div",{className:"option-select device-select",children:(0,x.jsx)(dr.Z,{name:"mic-source",id:"mic-source",className:"option-select-button",size:"small",value:a,onChange:function(e){e&&e.length>0&&(localStorage["mic-deviceId"]=e,s(e),N())},"data-source":"mic",children:l.map((function(e){return(0,x.jsx)(dr.Z.Option,{title:e.label,value:e.deviceId,children:e.label},e.deviceId)}))})}):"No Microphone detected"})]})}function ii(e){var t=qr((0,o.useState)(""),2),n=t[0],r=t[1],i=qr((0,o.useState)([]),2),a=i[0],s=i[1],c=e.recordType,l=e.resolution,u=e.setupAction,d=e.recordStatus,f=e.updateCellUI,m=e.showRecordModel,h=e.updateCameraStatus,p=e.updateCameraStream,y=qr((0,o.useState)(!1),2),g=y[0],b=y[1],w=qr((0,o.useState)(!1),2),I=w[0],S=w[1],N=(0,o.useRef)(c);N.current=c;var O=(0,o.useRef)(d);O.current=d,(0,o.useEffect)((function(){localStorage.record_cam_screen||(localStorage.record_cam_screen=!1),localStorage.record_cam_camera||(localStorage.record_cam_camera=!0),h("camera_status","true"==localStorage["record_cam_"+c]);var e="true"==localStorage["record_cam_"+c];b(e)}),[c]),(0,o.useEffect)((function(){return function(){ni=null}}),[]),(0,o.useEffect)((function(){I&&A(localStorage["cam-deviceId"],(function(e,t){e&&t&&k(t)}))}),[f]),(0,o.useEffect)((function(){A(localStorage["cam-deviceId"])}),[c,m]);var E,D,A=function(e,t){"normal"===d&&(0,$r.D)((function(n){var i=n,a=(0,$r.P)(i.videoInputDevices);s(a);var o=function(e,t){if(t&&t.length>0){var n=!1;return t.forEach((function(t){t.deviceId==e&&(n=!0)})),n?e:t[0].deviceId}return""}(e,a);if(r(o),0===a.length&&i.videoInputDevices.length?(S(!0),h("camera_setup",!0)):(S(!1),h("camera_setup",!1)),t)t(!0,o);else{var l=localStorage["cam-deviceId"];a.length>0&&!o&&(!l||l.length<=0)&&(localStorage["cam-deviceId"]=o),a.length>0&&"true"==localStorage["record_cam_"+c]||"camera"===c?o?k(o):u():P()}}))},C=function(e){b(e.target.checked),h("camera_status",e.target.checked),"screen"===c&&(localStorage["record_cam_"+c]=e.target.checked),e.target.checked?k(localStorage["cam-deviceId"]):P()},T=function(e){e&&e.length>0&&(localStorage["cam-deviceId"]=e,r(e),k(e,localStorage["mic-deviceId"]))},P=function(){var e=null;(e=document.querySelector("#main-video"))&&e.srcObject&&(ni==e.srcObject&&(ni=null),e.srcObject.getTracks().forEach((function(e){e.stop()})),e.srcObject.stop(),e.srcObject=null),_(ni),h("camera_status",!1),p&&p(null)},_=function(e){e&&(e.getTracks().forEach((function(e){e.stop()})),e.stop(),e=null)},k=function(e){var t=l.maxWidth,n=l.maxHeight,i=!0;if(ni&&ni.active){if(ni.getTracks().forEach((function(t){t.getSettings().deviceId===e?i=!1:t.stop()})),!i)return;ni.stop()}else ni=null;navigator.mediaDevices.getUserMedia({video:{deviceId:e,echoCancellation:!1,aspectRatio:1.777,width:{max:t*window.devicePixelRatio},height:{max:n*window.devicePixelRatio},maxFrameRate:30}}).then((function(e){ni=e,!0,"screen"===N.current&&"true"==localStorage.record_cam_screen||"camera"===N.current?(ni.getTracks().forEach((function(e){"video"==e.kind&&(localStorage["cam-deviceId"]=e.getSettings().deviceId,r(localStorage["cam-deviceId"]))})),p&&p(ni),h("camera_status",!0),function(e){var t=document.querySelector("#main-video");t&&(t.srcObject=e,t.onloadedmetadata=function(){t.play()},t.ondurationchange=function(){})}(e),0==a.length&&A(localStorage["cam-deviceId"],(function(){})),ni.oninactive=function(e){"normal"===O.current&&(A(localStorage["cam-deviceId"],(function(){})),"screen"===N.current&&h("camera_status",!1))}):_(ni),L()})).catch((function(e){e&&"Permission denied"===e.message?(S(!0),h("camera_setup",!0),!0,h("showGuide",!0,"setup2")):e&&"Permission denied by system"===e.message?(S(!0),h("camera_setup",!0)):v.ZP.error("Invalid camera, please choose another one.",10),P()}))},L=function(){h("showGuide",!1),S(!1),h("camera_setup",!1)};return E="camera"!==c&&("Chrome"===Ht().name||"Safari"===Ht().name||Ht().name.indexOf("Edge")>=0),D="camera"==c||("Chrome"===Ht().name||"Safari"===Ht().name||Ht().name.indexOf("Edge")>=0)&&g,(0,x.jsxs)("div",{className:"record-setting-item record-option-camera camera-rel-setting",children:[(0,x.jsxs)("div",{className:"option-part",children:[(0,x.jsx)(j.xm,{className:"record-option-item-icon"}),(0,x.jsxs)("span",{className:"record-option-title camera-rel-title",children:["camera"===c?"":"Embed"," Camera"]}),E||I?(0,x.jsx)("div",{className:"action",children:I?(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"setup-mic-btn",onClick:u,children:"Grant Access"})}):(0,x.jsxs)("label",{className:"toggle-checkbox",children:[(0,x.jsx)("input",{type:"checkbox",className:"record-option-checkbox",id:"record-cam",onChange:C,checked:g,"data-type":"cam"}),(0,x.jsx)("span",{className:"switch"}),(0,x.jsx)("span",{className:"toggle"})]})}):""]}),(0,x.jsx)("div",{className:"option-part source-part ".concat(D&&!I?"show":""),id:"cam-source-part",children:a.length>0?(0,x.jsx)("div",{className:"option-select device-select",children:(0,x.jsx)(dr.Z,{name:"cam-source",id:"cam-source",className:"option-select-button",size:"small",value:n,onChange:T,"data-source":"cam",children:a.map((function(e){return(0,x.jsx)(dr.Z.Option,{title:e.label,value:e.deviceId,children:e.label},e.deviceId)}))})}):"No Camera detected"})]})}var ai=n(2090),oi=n.n(ai),si=n(53284);const ci=n.p+"images/0862d19d3c4283d41874.gif",li=n.p+"images/2abf6b66610dd46d4406.gif",ui=n.p+"images/885722605a96aeda5144.mp4",di=n.p+"images/83527950aacdc3e8415b.mp4";function fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hi="",pi={720:"HD 720p",1080:"FHD 1080p","4k":"4k"},vi=null,yi=null,gi=null,bi=null,ji=null,xi=null,wi=null,Ii=null,Si=null,Ni=null,Oi=null,Ei=!0,Di=!0,Ai=null,Ci=!1,Ti=function(e){e.preventDefault(),e.returnValue="Your recording is not completed, are you sure you want to leave? "};var Pi={loadUserInfo:c.Lk,updateRecordPanel:_t.i0,updateIsRecording:_t.uz,restoreChannelItemList:Kt.A3,restoreItemList:Wr.LD,restoreVideoList:zr.U2};const _i=(0,i.$j)((function(e){return Ci=!Ci,{user:e.user,userInfo:e.user.info,workspaceID:e.ui?e.ui.workspaceID:"",channelID:e.ui?e.ui.channelID:"",folderID:e.ui?e.ui.folderID:"",currentPlan:e.user.premium&&e.user.premium.currentPlan,total:e.user.counts?e.user.counts.videoTotalLimitation:0,showTotal:e.user.counts?e.user.counts.video:0,videoLimitation:e.user.counts?e.user.counts.videoLimitation:20,showRecordPanel:!!e.ui&&e.ui.showRecordPanel,isSpaceOwner:!!e.ui&&e.ui.isSpaceOwner,updateContent:Ci}}),Pi)((function(e){var t=this,n=fi((0,o.useState)(!1),2),r=n[0],i=n[1],a=fi((0,o.useState)("normal"),2),s=a[0],c=a[1],l=fi((0,o.useState)("screen"),2),u=l[0],d=l[1],f=fi((0,o.useState)(3),2),h=f[0],p=f[1],g=fi((0,o.useState)("1080"),2),b=g[0],w=g[1],I=fi((0,o.useState)(""),2),S=I[0],N=I[1],O=fi((0,o.useState)("00:00"),2),E=O[0],D=O[1],A=fi((0,o.useState)("3"),2),C=A[0],T=A[1],P=fi((0,o.useState)(!1),2),_=P[0],k=P[1],L=fi((0,o.useState)(!1),2),R=L[0],M=L[1],Z=fi((0,o.useState)(!1),2),H=Z[0],F=Z[1],G=fi((0,o.useState)(5),2),V=G[0],B=G[1],W=fi((0,o.useState)(!1),2),z=W[0],q=W[1],Q=fi((0,o.useState)(""),2),X=Q[0],ee=Q[1],te=fi((0,o.useState)(!1),2),ne=te[0],re=te[1],ie=fi((0,o.useState)(!1),2),ae=ie[0],oe=ie[1],se=fi((0,o.useState)(!1),2),ce=se[0],le=se[1],ue=fi((0,o.useState)(!0),2),de=ue[0],fe=ue[1],me=fi((0,o.useState)(!0),2),pe=me[0],ve=me[1],ye=fi((0,o.useState)(!1),2),ge=ye[0],be=ye[1],je=fi((0,o.useState)(0),2),we=je[0],Ie=je[1],Se=fi((0,o.useState)(0),2),Ne=Se[0],Oe=Se[1],Ee=fi((0,o.useState)(!1),2),De=Ee[0],Ae=Ee[1],Ce=fi((0,o.useState)(!1),2),Te=Ce[0],Pe=Ce[1],_e=fi((0,o.useState)(!1),2),ke=_e[0],Le=_e[1],Re=(0,o.useRef)(),Me=(0,o.useRef)(ne);Me.current=ne;var Ze=(0,o.useRef)(s);Ze.current=s;var Ue,He,Fe,Ge,Ve=e.updateRecordPanel,Be=e.updateIsRecording,We=(0,K.s0)(),ze=function(){var e,t;return"1080"===b?(e=1920,t=1080):"720"===b?(e=1280,t=720):(e=3840,t=2160),{maxWidth:e,maxHeight:t}},Ke=ze(),$e=Ke.maxWidth,qe=Ke.maxHeight;(0,o.useEffect)((function(){if(0===we&&0===Ne&&localStorage.tranX&&localStorage.tranY){var e=Zt(localStorage.tranY),t=Ut(localStorage.tranX);Ie(t),Oe(e)}}),[]),(0,o.useEffect)((function(){Je()&&Ye()}),[e.updateContent]);var Ye=function(){hi=document.cookie.replace(/(?:(?:^|.*;\s*)screenshot_personal_uid=([^;]*).*$)|^.*$/,"$1"),S.length<=0&&hi&&hi.length>0&&!ke?(Le(!0),(0,y.kA_)().then((function(e){N(e.token),Le(!1)})).catch((function(e){Le(!1)}))):hi&&hi.length>0&&S.length>0&&Le(!1)};(0,o.useEffect)((function(){e.showRecordPanel&&Ye()}),[e.showRecordPanel]);var Je=function(){var e=window.location.pathname;return!(!e||!(e.startsWith("/my_items")||e.startsWith("/all_videos")||e.startsWith("/folder")||e.startsWith("/workspace")))};(0,o.useEffect)((function(){localStorage.record_countdown&&"undefined"!=localStorage.record_countdown&&"null"!=localStorage.record_countdown||(localStorage.record_countdown=3),p(parseInt(localStorage.record_countdown)),localStorage.max_resolution&&"undefined"!=localStorage.max_resolution||(window.screen.width*window.devicePixelRatio>3e3?localStorage.max_resolution="1080":localStorage.max_resolution="720"),w(localStorage.max_resolution)}),[u]);var Qe,Xe=1,et=function(e){e=!e||e.length<=0||null==e?0:Math.round(e),localStorage.record_countdown=e,p(e)},tt=function(e,t){Si?(e||(B(Si.uploadRate()),c("uploading")),V<100&&!e?ji=setInterval((function(){var e;Si&&"connected"===Si.status?(e=Si.uploadRate(),B(e)):e=100,e>=100&&(ji&&clearInterval(ji),t&&t())}),300):t&&t()):t&&t()},nt=function(e){localStorage.record_type=e.target.value,d(e.target.value),"screen"===e.target.value&&"Firefox"===Ht().name&&(wi&&(wi.getTracks().forEach((function(e){e.stop()})),wi.stop(),wi=null),i(!1))},rt=function(e){localStorage.max_resolution=e,w(e);var t=ze();$e=t.maxWidth,qe=t.maxHeight},it=function(){"paused"!==s&&(Si&&Si.pauseIt(),Ni&&Ni.pauseRecording(),c("paused"),xi=(new Date).getTime(),bi&&clearInterval(bi))},at=function(){Ii&&(Ii.getTracks().forEach((function(e){e.stop()})),Ii.stop(),Ii=null),function(){Nt();var e=document.querySelector("#main-video");e&&(e.srcObject&&(wi==e.srcObject&&(wi=null),e.srcObject.getTracks().forEach((function(e){e.stop()})),e.srcObject.stop(),e.srcObject=null),e.pause(),e.srcObject=null)}(),At(wi),vi&&(vi.getTracks().forEach((function(e){e.stop()})),vi.stop(),vi=null),Ai&&(Ai.close(),Ai=null),e.loadUserInfo(!0)},ot=function(t,n){at();var r=function(){try{Si.cancel(),Si.needReconnect=!1,Si.sentQueue=[],Si.willSendQueue=[],Si.close(1e3)}catch(e){}};Ni?Ni.stopRecording((function(){t?(r(),tt(!0,(function(){xt(),Si=null,Ni=null}))):Si&&(Si.complete(),tt(!1,(function(){xt(),Si&&(e.workspaceID?We("/video/"+Si.videoID,{state:{lastPath:"/workspace/"+e.workspaceID+"/"+e.channelID}}):e.folderID&&e.folderID.length>0?We("/video/"+Si.videoID,{state:{lastPath:"0"!==e.folderID?"/folder/"+e.folderID:"/my_items/"}}):We("/video/"+Si.videoID,{state:{lastPath:"/all_videos/"}})),Si=null,Ni=null,e.workspaceID?e.restoreChannelItemList():(e.restoreItemList(),e.restoreVideoList())})))})):(xt(),Si&&(t&&r(),Si=null)),bi&&clearInterval(bi),yi=null,gi=null,xi=null,F(!1),localStorage.video_need_complete=""},st=function(e){ot(1==e)},ct=function(t){Si&&(Si.active=!1),t.serverError=function(t){st(!1),t&&(t.indexOf("upgrade")>=0||"Professional Plan Required!"===t)?e.workspaceID&&e.workspaceID.length>0?be(!0):(fe(!1),le(!0)):v.ZP.error(t,10)},t.connectError=function(){v.ZP.error("Network error! Please try again later!",10),F(!0),it()},t.client="web_recorder",t.token=S,t.videoCodec="Safari"==Ht().name?"h264":"vp8",t.uid=hi,t.version="1.0.1",t.videoName="AwesomeScreenshot-"+(new Date).toLocaleString("en-US").replace(/\s/g,""),t.workspaceID=e.workspaceID,t.channelID=e.channelID,t.folderID=e.folderID,(Si=new si.$(t)).connect((function(){}))},lt=function(){S.length<=0?!(hi=document.cookie.replace(/(?:(?:^|.*;\s*)screenshot_personal_uid=([^;]*).*$)|^.*$/,"$1"))||hi&&hi.length<=0?oe(!0):Ye():(window.addEventListener("beforeunload",Ti,!1),yt({recordType:u,countdown:parseInt(localStorage.record_countdown),saveLocation:!1,resolution:localStorage.max_resolution,isRecordCam:r,camDeviceId:localStorage["cam-deviceId"],micDeviceId:localStorage["mic-deviceId"],isRecordTabSound:!1}))},ut=0,dt=function(e,t){if(document.querySelector("#aws-page-countdown"))t&&t(!1);else if(bt(),e<=0)t&&t(!0);else{k(!0);var n=e;T(n),D(n),n--,ut=setInterval((function(){if(T(n),D(n),n<=0)return clearInterval(ut),ut=null,k(!1),void(t&&t(!0));n--}),1e3)}},ft=function(e){e.preventDefault(),"uploading"!==s&&ot(!1)},mt=function(t){t.preventDefault(),"uploading"!==s&&(ve(e.showRecordPanel),M(!0),Ve({status:!0,channelID:e.channelID,workspaceID:e.workspaceID}))},ht=function(e){e.preventDefault(),"recording"===s?it():"paused"===s&&(Si&&"connected"!==Si.status&&Si.resumeIt(),Ni&&Ni.resumeRecording(),Si&&(Si.isPaused=!1),bt(),gi=gi+(new Date).getTime()-xi,F(!1),bi=setInterval(gt,100))},pt=function(){M(!1),pe||Ve({status:pe,channelID:e.channelID,workspaceID:e.workspaceID})},vt=function(){M(!1),Ve({status:!1,channelID:e.channelID,workspaceID:e.workspaceID}),c("normal"),Be({isRecording:!1}),window.removeEventListener("beforeunload",Ti,!1),st(!0)},yt=function(e){if(Ot(),c("preparing"),Be({isRecording:!0}),"camera"==u)wi&&wi.active?ct({recordType:u,onopen:function(){dt(e.countdown,(function(){jt(e,wi)}))},onFailed:st}):(wt(),Lt("showGuide",!0,"setup2"));else{var t={video:{cursor:"always",width:{max:$e},height:{max:qe},autoGainControl:!1,maxFrameRate:30},audio:!0};navigator.mediaDevices.getDisplayMedia(t).then((function(t){Ii=t,ct({recordType:u,onopen:function(){dt(e.countdown,(function(){jt(e,Ii)}))},onFailed:st})})).catch((function(e){"NotAllowedError"!==e.name&&v.ZP.error(e.message,10),wt(),"Permission denied by system"===e.message&&(q(!0),/Mac OS/.test(navigator.userAgent)?ee("setup_mac"):ee("setup_win")),Nt()}))}},gt=function(){var t,n,r=(new Date).getTime()-yi;gi&&(r-=gi),(t=r)>=(n=72e5*Xe)&&t<=n+100&&(window.open("/notification-recorder.html","Notification","chrome=yes,alwaysLowered=yes,alwaysRaised=yes,centerscreen=yes,width=300,height=320"),Xe++);var i=(0,he.nH)(Math.round(r/1e3));D(i),r>3e5&&(S.length<=0||!e.user||!e.user.premium||!e.user.premium.currentPlan||e.total>e.videoLimitation&&e.user.premium.currentPlan&&(""===e.user.premium.currentPlan.PlanName||"free"===e.user.premium.currentPlan.PlanName||"basic"===e.user.premium.currentPlan.PlanName))&&ot(!1)},bt=function(){c("recording"),Be({isRecording:!0})},jt=function(e,t){bt(),yi=(new Date).getTime(),bi=setInterval(gt,100),It(t,e)},xt=function(){wt(),Ve({status:!1,channelID:e.channelID,workspaceID:e.workspaceID})},wt=function(){c("normal"),Be({isRecording:!1}),window.removeEventListener("beforeunload",Ti,!1)},It=function(e){if(e&&e.active){var t={type:"video",disableLogs:!1,getNativeBlob:!0,timeSlice:500,ondataavailable:function(e){Si.send(e)}},n=t.videoCodec;t.videoCodec||(n="Safari"==Ht().name?"h264":"vp8"),n&&(t.mimeType="video/webm; codecs="+n.toLowerCase());var r=new MediaStream;if(vi)t.mimeType+=",opus",St([vi,e]).getAudioTracks().forEach((function(e){r.addTrack(e)}));else e.getAudioTracks().forEach((function(e){r.addTrack(e)}));e.getVideoTracks().forEach((function(e){r.addTrack(e)})),Ni=new(oi())(r,t);try{Ni.startRecording()}catch(e){}r.onended=function(e){st(!1)},r.getVideoTracks()[0].onended=function(){r.stop(),r&&r.onended&&r.onended()}}else st(!0)},St=function(e){var t=window.AudioContext||window.webkitAudioContext;Ai=new t;var n=[],r=Ai.createGain();r.connect(Ai.destination),r.gain.value=0;var i=0;if(e.forEach((function(e){if(e.getAudioTracks().length){i++;var t=Ai.createMediaStreamSource(e);t.connect(r),n.push(t)}})),i){var a=Ai.createMediaStreamDestination();return n.forEach((function(e){e.connect(a)})),a.stream}},Nt=function(){var e=document.querySelector("#main-video");e||(e=Oi),"screen"==u&&(document.exitPictureInPicture?document.exitPictureInPicture().catch((function(){})):e&&e.webkitSetPresentationMode&&e.webkitSetPresentationMode("inline")),e&&r&&"normal"===s&&wi&&(e.srcObject=wi)},Ot=function(){var e=document.querySelector("#main-video");e&&"screen"===u&&wi&&(e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSupportsPresentationMode?e.webkitSupportsPresentationMode("picture-in-picture"):e.requestPictureInPicture&&e.requestPictureInPicture(),e.addEventListener("leavepictureinpicture",(function(e){e.target&&e.target.srcObject&&"recording"===Ze.current&&At(e.target.srcObject)})))},Dt=function(t){Ve({status:t,channelID:e.channelID,workspaceID:e.workspaceID}),t||"normal"!==s||at()},At=function(e){e&&(e===wi&&re(!1),e.getTracks().forEach((function(e){e.stop()})),e.stop(),e=null)},Ct=function(e){(e.preventDefault(),"screen"===u)&&(ne?(re(!1),Nt(),At(wi)):(re(!0),navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){!function(e){if(Me.current){wi=e;var t=document.querySelector("#main-video");t||(t=document.createElement("video"),Oi=t),t&&"screen"===u&&e&&(t.srcObject=e,t.onloadedmetadata=function(){t.play(),t.webkitSupportsPresentationMode&&"function"==typeof t.webkitSupportsPresentationMode?t.webkitSupportsPresentationMode("picture-in-picture"):t.requestPictureInPicture&&t.requestPictureInPicture().then((function(){}),(function(e){}))},t.addEventListener("leavepictureinpicture",(function(e){e.target&&e.target.srcObject&&At(e.target.srcObject)})))}else re(!1),At(e)}(e),Lt("showGuide",!1)}),(function(e){re(!1),e&&"Permission denied"===e.message&&Lt("showGuide",!0,"setup2")}))))},Tt=function(){Ve({status:!1}),"normal"===s&&at(),We("/pricing?from=video-alert")},Pt=(0,x.jsxs)(Y.Z,{onClick:function(t){var n=t.key;if(n){if("720"!=n){if(S.length<=0||!e.user||!e.user.premium||!e.user.premium.currentPlan)return void oe(!0);if(e.user.premium.currentPlan&&e.total>e.videoLimitation&&(""===e.user.premium.currentPlan.PlanName||"free"===e.user.premium.currentPlan.PlanName||"basic"===e.user.premium.currentPlan.PlanName))return st(!1),fe(!0),void le(!0)}rt(n)}},selectedKeys:b,children:[(0,x.jsx)(Y.Z.Item,{className:"resolution-select-item",children:(0,x.jsx)("span",{children:pi[720]})},"720"),(0,x.jsx)(Y.Z.Item,{className:"resolution-select-item",children:(0,x.jsx)("span",{className:"pro-icon",children:pi[1080]})},"1080"),(0,x.jsx)(Y.Z.Item,{className:"resolution-select-item",children:(0,x.jsx)("span",{className:"pro-icon",children:pi["4k"]})},"4k")]}),_t=function(e){vi=e},kt=function(e,t,n){"showGuide"===e?(q(t),ee("setup2"===n?"setup2":"setup1")):"audio_setup"===e&&(Ei=t)},Lt=function(e,t,n){"camera_status"==e?i(t):"showGuide"===e?(q(t),ee("setup2"===n?"setup2":"setup1")):"camera_setup"===e&&(Di=t)},Rt=function(e){wi=e,"screen"===u&&re(!!wi)},Mt=function(e){e.preventDefault(),Fe>=0&&Ge>=0&&(Ue=parseInt(e.pageX-Fe)+parseInt(we),He=parseInt(e.pageY-Ge)+parseInt(Ne),He=Zt(He),Ue=Ut(Ue),Re.current.style.transform="translate("+Ue+"px,"+He+"px)")},Zt=function(e){return isNaN(e)?0:(e<0?e=0:e>window.innerHeight-60&&(e=window.innerHeight-60),e)},Ut=function(e){if(isNaN(e))return 0;var t=window.innerWidth/2-("uploading"===s?134:210),n=t+("uploading"===s?40:50);return e>t?e=t:e+n<0&&(e=0-n),e},Ft=function e(t){t.preventDefault(),Ae(!1),Fe>0&&Ge>0&&void 0!==Ue&&void 0!==He&&(Oe(Zt(He)),Ie(Ut(Ue)),localStorage.tranX=parseInt(Ut(Ue)),localStorage.tranY=parseInt(Zt(He)),Fe=-1,Ge=-1,Ue=void 0,He=void 0),document.documentElement.removeEventListener("mousemove",Mt,!1),document.documentElement.removeEventListener("mouseup",e,!1)},Gt=function(e){e.stopPropagation()},Vt=function(){var e=!1,t=900,n={video:!0,audio:!0};Di&&!Ei?n={video:!0}:Ei&&!Di&&(n={audio:!0},t=400),setTimeout((function(){e||(e=!0,Lt("showGuide",!0,"setup1"))}),t),navigator.mediaDevices.getUserMedia(n).then((function(t){e=!0;var n="",r="";t.getTracks().forEach((function(e){"audio"==e.kind?(n=e.getSettings().deviceId,localStorage["mic-deviceId"]=n):"video"==e.kind&&(r=e.getSettings().deviceId,localStorage["cam-deviceId"]=r),"Firefox"!=Ht().name&&e.stop()})),"Firefox"!=Ht().name&&t.stop(),Lt("showGuide",!1),Pe(!Te)}),(function(t){e=!0,"Permission denied by system"===t.message?(q(!0),/Mac OS/.test(navigator.userAgent)?ee("setup_mac"):ee("setup_win")):Lt("showGuide",!0,"setup2"),Pe(!Te)}))};return(0,x.jsxs)(x.Fragment,{children:[e.showRecordPanel||"normal"===s?(0,x.jsx)(x.Fragment,{}):(0,x.jsxs)("div",{ref:Re,className:"recorder-miniview "+s+(De?" drag":""),style:{transform:"translate("+we+"px,"+Ne+"px)"},children:[(0,x.jsx)("div",{className:"drag-item",onMouseDown:function(e){e.preventDefault(),Fe=e.pageX,Ge=e.pageY,Ue=void 0,He=void 0,Ae(!0),document.documentElement.addEventListener("mousemove",Mt,!1),document.documentElement.addEventListener("mouseup",Ft,!1)},children:(0,x.jsx)(j.Vn,{className:"icon"})}),"recording"===s||"paused"===s?(0,x.jsxs)("div",{className:"mini-content "+s,children:[(0,x.jsx)(xe.Z,{title:"Discard",mouseEnterDelay:0,mouseLeaveDelay:0,children:(0,x.jsx)("div",{className:"action-item",onClick:mt,children:(0,x.jsx)(j.GR,{className:"icon"})})}),"screen"===u?(0,x.jsx)(xe.Z,{title:ne?"Close Camera":"Embed Camera",mouseEnterDelay:0,mouseLeaveDelay:0,children:(0,x.jsx)("div",{className:"action-item",onClick:Ct,children:ne?(0,x.jsx)(j.aY,{className:"icon"}):(0,x.jsx)(j.pG,{className:"icon"})})}):(0,x.jsx)(x.Fragment,{}),(0,x.jsxs)("div",{className:"action-records",children:[(0,x.jsx)(xe.Z,{title:"recording"===s?"Pause":"Resume",mouseEnterDelay:0,mouseLeaveDelay:0,children:(0,x.jsx)("div",{className:"icon-pause",onClick:ht,children:"recording"===s?(0,x.jsx)(j.HC,{className:"icon"}):(0,x.jsx)(j.a6,{className:"icon"})})}),(0,x.jsx)(xe.Z,{title:"Stop",mouseEnterDelay:0,mouseLeaveDelay:0,children:(0,x.jsxs)("div",{className:"icon-stop",onClick:ft,children:[(0,x.jsx)(j.vp,{className:"icon"}),(0,x.jsxs)("div",{className:"record-time",children:[" ",E]})]})})]}),(0,x.jsx)(xe.Z,{title:"MaxSize",mouseEnterDelay:0,mouseLeaveDelay:0,children:(0,x.jsx)("div",{className:"resize",onClick:Dt.bind(t,!0),children:(0,x.jsx)(j.tj,{className:"icon"})})})]}):"uploading"===s?(0,x.jsxs)("div",{className:"mini-content",children:[(0,x.jsx)(J.Z,{className:"progress",strokeWidth:6,trailColor:"rgba(191, 213, 251, 0.3)",strokeColor:"#5794FF",style:{color:"#ffff"},type:"circle",percent:V,width:40}),(0,x.jsx)("div",{className:"tips",children:"uploading"}),(0,x.jsx)("div",{className:" resize",onClick:Dt.bind(t,!0),children:(0,x.jsx)(j.tj,{className:"icon"})})]}):void 0]}),(0,x.jsx)(U.Z,{visible:e.showRecordPanel,onCancel:Dt.bind(this,!1),footer:null,bodyStyle:{padding:10},maskClosable:!1,closable:"normal"===s,closeIcon:(0,x.jsx)(j.Tw,{style:{fontSize:"12px"}}),destroyOnClose:!0,height:500,width:"auto",centered:!0,children:(0,x.jsxs)("div",{className:"recorder-content "+u+" "+s,children:[(0,x.jsx)("div",{className:"video-content model-item "+("camera"===u||r&&"normal"===s?"show":""),children:(0,x.jsx)("video",{id:"main-video",autoPlay:!0})}),(0,x.jsx)("div",{className:"siderbar-area model-item "+s+" "+u,children:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"normal-view layout-view",children:[(0,x.jsxs)("div",{className:"record-type-container ".concat(u+"-display"),children:[(0,x.jsx)("div",{className:"record-type-item desktop",children:(0,x.jsxs)("label",{htmlFor:"record-type-desktop",className:"record-type-label",children:[(0,x.jsx)("input",{type:"radio",name:"record-type",onChange:nt,id:"record-type-desktop",value:"screen"}),(0,x.jsx)("div",{children:(0,x.jsx)(j.tN,{})}),"Desktop"]})}),(0,x.jsx)("div",{className:"record-type-item camera",children:(0,x.jsxs)("label",{htmlFor:"record-type-camera",className:"record-type-label",children:[(0,x.jsx)("input",{type:"radio",name:"record-type",onChange:nt,id:"record-type-camera",value:"camera"}),(0,x.jsx)("div",{children:(0,x.jsx)(j.V_,{})}),"Camera Only"]})})]}),(0,x.jsxs)("div",{className:"record-menu",children:[(0,x.jsxs)("div",{className:"record-settings",children:[(0,x.jsx)(ri,{recordType:u,recordStatus:s,showRecordModel:e.showRecordPanel,updateAudioStream:_t,updateAudioStatus:kt,setupAction:Vt,updateCellUI:Te}),"camera"===u||"Firefox"!=Ht().name?(0,x.jsx)(ii,{recordType:u,showRecordModel:e.showRecordPanel,recordStatus:s,updateCameraStream:Rt,updateCameraStatus:Lt,resolution:ze(),setupAction:Vt,updateCellUI:Te}):"",(0,x.jsxs)("div",{className:"record-setting-item field-resolution",children:[(0,x.jsx)(j.HH,{className:"record-option-item-icon"}),(0,x.jsx)("span",{className:"record-option-title",children:"Max Resolution"}),(0,x.jsx)("div",{className:"action",children:(0,x.jsx)("div",{className:"option-select",children:(0,x.jsx)($.Z,{overlay:Pt,trigger:["click"],placement:"bottomRight",children:(0,x.jsxs)(m.Z,{className:"option-select-button",size:"small",children:[pi[b],(0,x.jsx)("span",{className:"option-select-arrow",unselectable:"on","aria-hidden":"true",style:{userSelect:"none"},children:(0,x.jsx)("span",{role:"img","aria-label":"down",className:"anticon anticon-down ant-select-suffix",children:(0,x.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,x.jsx)("path",{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"})})})})]})})})})]}),(0,x.jsxs)("div",{className:"record-setting-item field-countdown",children:[(0,x.jsx)(Br.Z,{className:"record-option-item-icon"}),(0,x.jsx)("span",{className:"record-option-title",children:"Countdown"}),(0,x.jsxs)("div",{className:"action",children:[(0,x.jsx)(Vr.Z,{id:"countdown-input",className:"record-option-number",type:"number",size:"small",min:0,max:10,onChange:et,value:h}),"s"]})]})]}),e.currentPlan&&("professional"===e.currentPlan.PlanName||"team"===e.currentPlan.PlanName||e.total>=e.videoLimitation)?"":(0,x.jsxs)("div",{className:"premium-alert-container",children:[(0,x.jsx)("div",{className:"premium-alert-txt",children:e.total<=e.videoLimitation&&(""===e.currentPlan.PlanName||"free"===e.currentPlan.PlanName||"basic"===e.currentPlan.PlanName)?(0,x.jsxs)("div",{className:"try",children:["Enjoy all premium features for first 20 videos.",(0,x.jsx)("a",{className:"upgrade",onClick:Tt,children:"Upgrade"})," ","to unlock unlimited videos."]}):"Your free trial of Professional video features has ended. Now your recording can be up to 5 minutes."}),(0,x.jsx)("div",{className:"premium-alert-sep"}),(0,x.jsx)("div",{className:"premium-alert-link",children:e.total<=e.videoLimitation&&(""===e.currentPlan.PlanName||"free"===e.currentPlan.PlanName||"basic"===e.currentPlan.PlanName)?e.showTotal+"/"+e.videoLimitation:(0,x.jsx)("div",{to:"/pricing?from=web-recorder-tip",onClick:Tt,children:"Upgrade"})})]}),(0,x.jsx)(m.Z,{onClick:lt,loading:ke,className:"record-start-btn ".concat(ke||"camera"===u&&!r?"disabled":""),id:"record-start",children:"Start Recording"})]})]}),(0,x.jsxs)("div",{className:"preparing-view layout-view "+u,children:[(0,x.jsxs)("div",{className:"loading",children:[(0,x.jsx)("div",{className:"double-bounce1"}),(0,x.jsx)("div",{className:"double-bounce2"})]}),(0,x.jsx)("div",{className:"prepare-tip",children:"Preparing for recording ..."})]}),(0,x.jsxs)("div",{className:"recording-view layout-view "+u,children:[(0,x.jsxs)("div",{className:"recording-header",children:[(0,x.jsx)("div",{className:"recording-tips",children:"uploading"===s?"Uploading":"paused"===s?"Paused":"Recording"}),(0,x.jsx)(xe.Z,{title:"MinSize",mouseEnterDelay:0,mouseLeaveDelay:0,children:(0,x.jsx)("div",{className:"recording-action-btn",onClick:Dt.bind(t,!1),children:(0,x.jsx)(j.Mj,{})})})]}),(0,x.jsx)("div",{className:"blue-area",style:{display:"uploading"===s?"none":"block"},children:(0,x.jsx)("div",{className:"time",children:E})}),(0,x.jsx)("div",{className:"upload-process",style:{display:"uploading"===s?"block":"none"},children:(0,x.jsx)(J.Z,{className:"progress",strokeWidth:6,trailColor:"rgba(191, 213, 251, 0.3)",strokeColor:"#5794FF",type:"circle",percent:V,width:60})}),(0,x.jsxs)("div",{className:"popup",style:{display:R?"block":"none"},children:[(0,x.jsx)("h3",{children:"Warning"}),(0,x.jsx)("p",{children:"Discarded recording will be permanently deleted. Are you sure you want to discard this recording?"}),(0,x.jsxs)("div",{className:"btn-area",children:[(0,x.jsx)("div",{className:"popup-btn",onClick:pt,id:"discard-cancel",children:"No"}),(0,x.jsx)("div",{className:"popup-btn discard-btn",onClick:vt,id:"discard-confirm",children:"Yes, discard"})]})]}),H?(0,x.jsx)("div",{className:"recording-error",children:"Recording paused due to network error. Check your network and click resume to continue recording after your network is back to normal; or click Stop to save what has been recorded and then report the issue to us."}):"",(0,x.jsxs)("div",{className:"recording-action ".concat("uploading"===s?"disabled":""," ").concat("paused"===s?"paused":""),children:[(0,x.jsx)(xe.Z,{title:"Discard",mouseEnterDelay:0,mouseLeaveDelay:0,children:(0,x.jsx)("div",{className:"recording-action-btn icon",onClick:mt,id:"record-discard",children:(0,x.jsx)(j.GR,{})})}),"screen"===u?(0,x.jsx)(xe.Z,{title:ne?"Close Camera":"Embed Camera",mouseEnterDelay:0,mouseLeaveDelay:0,children:(0,x.jsx)("div",{className:"recording-action-btn icon",onClick:Ct,children:ne?(0,x.jsx)(j.aY,{className:"icon"}):(0,x.jsx)(j.pG,{className:"icon"})})}):(0,x.jsx)(x.Fragment,{}),(0,x.jsxs)("div",{className:"record-actions",children:[(0,x.jsx)(xe.Z,{title:"recording"===s?"Pause":"Resume",mouseEnterDelay:0,mouseLeaveDelay:0,children:(0,x.jsx)("div",{className:"recording-action-btn icon-pause icon",onClick:ht,id:"record-pause",children:"recording"===s?(0,x.jsx)(j.HC,{className:"icon"}):(0,x.jsx)(j.a6,{className:"icon"})})}),(0,x.jsx)(xe.Z,{title:"Stop",mouseEnterDelay:0,mouseLeaveDelay:0,children:(0,x.jsxs)("div",{className:"recording-action-btn stop",onClick:ft,id:"record-stop",children:[(0,x.jsx)(j.vp,{className:"icon-stop"}),"STOP"]})})]})]})]}),(0,x.jsx)("div",{className:"uploading-view layout-view"})]})})]})}),_?(0,x.jsx)("div",{className:"fullscreen-wrapper",children:(0,x.jsxs)("div",{className:"content center",children:[(0,x.jsx)("div",{className:"sec",children:C}),(0,x.jsx)("div",{className:"tip",children:"Ready to record"})]})}):"",z?(0,x.jsx)("div",{className:"fullscreen-wrapper",onClick:function(){q(!1)},children:(Qe=X,"setup1"===Qe?(0,x.jsx)("div",{className:"content topleft",children:(0,x.jsx)("div",{className:"arrow"})}):"setup2"===Qe?(0,x.jsxs)("div",{className:"block-guide",onClick:Gt,children:[(0,x.jsxs)("div",{className:"title-field",children:[(0,x.jsx)("span",{children:"Camera and microphone blocked"}),(0,x.jsx)(j.Tw,{style:{fontSize:"12px"},onClick:function(){q(!1)}})]}),(0,x.jsxs)("div",{className:"des",children:["Please click"," ",(0,x.jsx)("div",{children:(0,x.jsx)(j.mB,{})})," ","Icon, find the microphone and camera, and turn on the switch."]}),(0,x.jsx)("video",{src:/Edg/.test(window.navigator.userAgent)?di:ui,autoPlay:!0,loop:!0,muted:!0})]}):"setup_mac"===Qe?(0,x.jsxs)("div",{className:"block-guide",onClick:Gt,children:[(0,x.jsxs)("div",{className:"title-field",children:[(0,x.jsx)("span",{children:"Recording failed to start"}),(0,x.jsx)(j.Tw,{style:{fontSize:"12px"},onClick:function(){q(!1)}})]}),(0,x.jsx)("p",{children:"Please follow steps below to enable access so that you can continue recording."}),(0,x.jsxs)("ol",{children:[(0,x.jsxs)("li",{children:["Choose ",(0,x.jsx)("span",{className:"bold",children:"Apple menu"})," >",(0,x.jsx)("span",{className:"bold",children:" System Preferences"}),", click",(0,x.jsx)("span",{className:"bold",children:"Security & Privacy"}),", then click  ",(0,x.jsx)("span",{className:"bold",children:"Privacy"})]}),(0,x.jsxs)("li",{children:["Select ",(0,x.jsx)("span",{className:"bold",children:"Screen Recording"}),"(must), ",(0,x.jsx)("span",{className:"bold",children:" Microphone"}),"  or",(0,x.jsx)("span",{className:"bold",children:" Camera"})]}),(0,x.jsx)("li",{children:"Select the checkbox next to the browser"}),(0,x.jsx)("li",{children:"Restart your browser and retry"})]}),(0,x.jsx)("img",{src:ci})]}):"setup_win"===Qe?(0,x.jsxs)("div",{className:"block-guide",onClick:Gt,children:[(0,x.jsxs)("div",{className:"title-field",children:[(0,x.jsx)("span",{children:"Recording failed to start"}),(0,x.jsx)(j.Tw,{style:{fontSize:"12px"},onClick:function(){q(!1)}})]}),(0,x.jsx)("p",{children:"Please follow steps below to enable access so that you can continue recording."}),(0,x.jsxs)("ol",{children:[(0,x.jsxs)("li",{children:["Go to ",(0,x.jsx)("span",{className:"bold",children:"Start"})," > ",(0,x.jsx)("span",{className:"bold",children:"Settings"})," > ",(0,x.jsx)("span",{className:"bold",children:"Privacy"})," > ",(0,x.jsx)("span",{className:"bold",children:"Camera"})," or  ",(0,x.jsx)("span",{className:"bold",children:"Microphone"})]}),(0,x.jsxs)("li",{children:["Turn on ",(0,x.jsx)("span",{className:"bold",children:"Allow apps to access your camera or microphone"}),"."]}),(0,x.jsxs)("li",{children:["Turn on ",(0,x.jsx)("span",{className:"bold",children:"Allow desktop apps to access your camera or microphone"})]}),(0,x.jsx)("li",{children:"Restart your browser and retry"})]}),(0,x.jsx)("img",{src:li,alt:""})]}):void 0)}):"",(0,x.jsx)(Kr.Z,{visible:ae,onCancel:function(){oe(!1)},type:"web",onSignInFinish:function(){var t=hi.length<=0;oe(!1),t&&((hi=document.cookie.replace(/(?:(?:^|.*;\s*)screenshot_personal_uid=([^;]*).*$)|^.*$/,"$1"))&&hi.length>0?(e.loadUserInfo(),(0,y.kA_)().then((function(e){N(e.token)}))):oe(!0))}}),(0,x.jsx)(Et.Z,{visible:ce,onCancel:function(){le(!1),rt("720")},type:de?"recordResolution":"uploadVideo"}),(0,x.jsx)(Yt.Z,{visible:ge,onCancel:function(){be(!1)},isOwner:e.isChannelOwner,workspaceID:e.workspaceID,type:"itemAdd",channelID:e.channelID})]})}));n(65017);var ki=n(97491),Li=n(15574),Ri=n(3646),Mi=n(45518),Zi=n(71865),Ui=n(48719);const Hi=function(e,t){var n=e;function r(e){"google_login_success"===e.data&&t&&t()}return(0,o.useEffect)((function(){return window.addEventListener("message",r),function(){window.removeEventListener("message",r)}})),[function(){var e="";n&&(e=n+"_google");var t="width=800,height=700,top="+(window.screen.availHeight-30-700)/2+",left="+(window.screen.availWidth-10-800)/2;if(be.Z.isSafari()){var r="/web/user/google_login";e&&(r=r+"?from="+e),window.open(r,"Login in with Google",t)}else(0,y.EaK)(e).then((function(e){var n=e.data.data.login_url;window.open(n,"Login in with Google",t)}))}]};var Fi=n(34979);function Gi(e){return function(e){if(Array.isArray(e))return $i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ki(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(n),!0).forEach((function(t){Wi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||Ki(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ki(e,t){if(e){if("string"==typeof e)return $i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$i(e,t):void 0}}function $i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qi={loadUserInfo:c.Lk,showItem:_t.oV};const Yi=(0,i.$j)((function(e){return{isUserLoaded:e.user.isLoaded,userInfo:e.user.info}}),qi)((function(e){var t=e.isUserLoaded,n=e.userInfo,r=e.loadUserInfo,i=e.showItem,a=(0,K.UO)(),s=(0,u.Z)(),c=(0,K.s0)(),l=(0,K.TH)(),f=zi((0,o.useState)(null),2),h=f[0],p=f[1],v=zi((0,o.useState)([]),2),g=v[0],b=v[1],w=zi((0,o.useState)([]),2),I=w[0],S=w[1],N=zi((0,o.useState)(!1),2),O=N[0],E=N[1],D=zi((0,o.useState)(!1),2),A=D[0],C=D[1],T=zi((0,o.useState)(!1),2),P=T[0],_=T[1],k=zi((0,o.useState)(null),2),L=k[0],R=k[1],M=zi((0,o.useState)(!1),2),Z=M[0],U=M[1],F=zi((0,o.useState)(1),2),G=F[0],V=F[1],B=(0,o.useRef)(),W=zi(Hi("sharefolder",ee),1)[0],z=s.get("page")?Number(s.get("page")):1,$=(0,Zi.Z)(O,Z,200,(function(){if(O||P||G===$t.J6||Z||L&&L.total<20||A)return;E(!0),(0,y.usf)("",z,Q,B.current,!1,X,G+1).then((function(e){E(!1),null!==e.items?(R((function(t){return Bi(Bi({},t),{},{items:[].concat(Gi(t.items),Gi(e.items)),total:e.total})})),B.current="create"===e.sort?e.items[e.items.length-1].createdSec:e.items[e.items.length-1].updatedSec,V((function(e){return e+1})),e.items.length<20&&U(!0)):U(!0)}))})),q=zi($,2),Y=q[0],J=q[1],Q=a.folderID,X=a.shareKey;function ee(){r()}(0,o.useEffect)((function(){if(localStorage.restore_modal){var e=JSON.parse(localStorage.restore_modal);i(e),localStorage.removeItem("restore_modal")}}),[]),(0,o.useEffect)((function(){C(!0),(0,y.vQG)(Q,X).then((function(e){C(!1),p(Bi(Bi({},e.folder),{},{owner:e.owner})),e.parentFolders.length?b(function(e,t){return[].concat(Gi(t.reverse()),[e])}(e.folder,e.parentFolders)):b([]),S(e.subFolders)})).catch((function(e){"Invalid share key."===e&&c("/404")}))}),[Q]),(0,o.useEffect)((function(){_(!0),(0,y.usf)("",z,Q,"",!1,X).then((function(e){if(_(!1),null===e.items)return R(e),void U(!0);R(e),V(1),U(!1),B.current="create"===e.sort?e.items[e.items.length-1].createdSec:e.items[e.items.length-1].updatedSec})).catch((function(e){_(!1),"Invalid share key."===e&&c("/404")})),Y.current&&(Y.current.scrollTop=0)}),[Q,z]),(0,o.useEffect)((function(){void 0===n.uid&&t&&(0,he.Zf)(ee)}),[n,t]);var te=(0,o.useCallback)((function(e){var t=L.items.map((function(e){return{id:e.id,itemType:e.itemType,shareKey:e.shareKey}}));i({currentItem:e,itemList:t})}),[L]);function ne(){var e=g[g.length-2].folderID;c("/s/folder/"+e+"/"+X)}return(0,x.jsxs)(x.Fragment,{children:[!t&&(0,x.jsx)(H.Z,{}),h&&(0,x.jsx)("div",{className:"share-folder-page",ref:Y,id:"item-container",children:(0,x.jsxs)("div",{className:"inner-container",children:[t&&!n.uid&&(0,x.jsxs)("div",{className:"sign-in-banner",children:[(0,x.jsx)("span",{className:"h1",children:"Welcome !"})," Sign in to save the folder shared with you",(0,x.jsx)(m.Z,{ghost:!0,className:"other-sign-in-btn",onClick:function(){window.location.href="https://"+window.location.host+"/signin?expand=true&redirect="+window.location.href},children:"Other ways to sign in"}),(0,x.jsxs)("div",{className:"google-sign-in-btn",onClick:W,children:[(0,x.jsx)(j.Kv,{})," Sign in with Google"]})]}),t&&n.uid&&n.uid!==h.owner.uid&&(0,x.jsxs)("a",{className:"share-with-me-link",onClick:function(){l.state&&l.state.inApp?c(-1):c("/shared_with_me")},children:[(0,x.jsx)(j.Dn,{})," Shared with me"]}),(0,x.jsxs)("div",{className:"topbar",children:[(0,x.jsxs)("div",{className:"title-area ".concat(h.description?"crumb":""),children:[(0,x.jsx)("div",{className:"title",children:0===g.length?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(j.RO,{className:"title-folder-icon"}),h.name]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"crumb-back-btn",onClick:ne,children:(0,x.jsx)(j.e0,{})}),g.map((function(e,t){var n=g.length-1!==t;return(0,x.jsx)(Mi.Z,{count:g.length,folder:e,clickable:n,shareKey:X,noShareIcon:!0},e.folderID)}))]})}),(0,x.jsx)("div",{className:"desc",children:h.description})]}),(0,x.jsxs)("div",{className:"author-area",children:[(0,x.jsx)("div",{className:"author-title",children:"Shared by"}),(0,x.jsxs)("div",{className:"author-info",children:[(0,x.jsx)(ie.Z,{size:32,username:h.owner.fullName,avatarUrl:h.owner.avatarURL}),(0,x.jsx)(je.Z,{width:200,text:h.owner.fullName})]})]})]}),(0,x.jsxs)("div",{className:"share-folder-item-container",children:[I.length>0&&(0,x.jsx)(Li.Z,{type:"compact",subTitle:"Folders",children:I.map((function(e){return(0,x.jsx)(Ri.Z,{shareKey:X,folder:e},e.folderID)}))}),L&&L.items&&L.items.length&&(0,x.jsxs)(Li.Z,{subTitle:"Images & Videos",children:[L.items.map((function(e){return e.shareKey=X,(0,x.jsx)(Ui.Z,{item:e,handleShowItem:te,isFolder:!0},e.id)})),O&&(0,x.jsx)(Fi.Z,{})]}),O&&(0,x.jsx)(d.Z,{}),G<$t.J6&&!Z&&(0,x.jsx)("div",{style:{height:"10px"},ref:J}),(G===$t.J6||Z)&&L.total>100&&(0,x.jsx)("div",{className:"pagination",children:(0,x.jsx)(ki.Z,{current:z,pageSize:100,total:L.total,showSizeChanger:!1,onChange:function(e){c(l.pathname+"?page="+e)}})})]})]})}),(0,x.jsx)(Mt,{})]})}));var Ji=(0,o.lazy)((function(){return n.e(267).then(n.bind(n,56274))})),Qi=(0,o.lazy)((function(){return n.e(682).then(n.bind(n,51618))})),Xi=(0,o.lazy)((function(){return Promise.resolve().then(n.bind(n,43313))})),ea=(0,o.lazy)((function(){return Promise.all([n.e(875),n.e(29)]).then(n.bind(n,15421))})),ta=(0,o.lazy)((function(){return Promise.resolve().then(n.bind(n,85191))})),na=(0,o.lazy)((function(){return n.e(538).then(n.bind(n,42749))})),ra=(0,o.lazy)((function(){return Promise.all([n.e(211),n.e(955),n.e(314)]).then(n.bind(n,47808))})),ia=(0,o.lazy)((function(){return Promise.all([n.e(463),n.e(717)]).then(n.bind(n,83576))})),aa=(0,o.lazy)((function(){return Promise.all([n.e(211),n.e(970),n.e(463),n.e(685)]).then(n.bind(n,83483))})),oa=(0,o.lazy)((function(){return n.e(680).then(n.bind(n,63899))})),sa=(0,o.lazy)((function(){return n.e(121).then(n.bind(n,17404))})),ca=(0,o.lazy)((function(){return n.e(517).then(n.bind(n,60767))})),la=(0,o.lazy)((function(){return n.e(808).then(n.bind(n,95685))})),ua=(0,o.lazy)((function(){return n.e(415).then(n.bind(n,83395))}));Gr.S({dsn:"https://a5f0a913050f4360a69e1709083de3eb@o417487.ingest.sentry.io/5317756",release:"awesomescreenshot-web@2022-10-24, 06:36:52",ignoreErrors:["ResizeObserver loop limit exceeded","Extension context invalidated","Non-Error promise rejection captured with value: Invalid share key"],denyUrls:[/chrome-extension:\/\//,/gtag\/js/]});const da=function(){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.Suspense,{fallback:(0,x.jsx)(H.Z,{}),children:(0,x.jsxs)(K.Z5,{children:[(0,x.jsx)(K.AW,{path:"/loading",element:(0,x.jsx)(H.Z,{})}),!1,(0,x.jsxs)(K.AW,{path:"/",element:(0,x.jsx)(lr,{}),children:[(0,x.jsx)(K.AW,{path:"invite",type:"invite",element:(0,x.jsx)(aa,{type:"invite"})}),(0,x.jsx)(K.AW,{path:"all_videos",type:"video",element:(0,x.jsx)(aa,{type:"video"})}),(0,x.jsx)(K.AW,{path:"all_images",type:"image",element:(0,x.jsx)(aa,{type:"image"})}),(0,x.jsx)(K.AW,{type:"item",path:"my_items",element:(0,x.jsx)(aa,{type:"item"})}),(0,x.jsx)(K.AW,{type:"shared",path:"shared",element:(0,x.jsx)(aa,{type:"shared"})}),(0,x.jsx)(K.AW,{type:"workspaceSetting",path:"workspace/setting/:workspaceID",element:(0,x.jsx)(aa,{type:"workspaceSetting"})}),(0,x.jsx)(K.AW,{type:"sharedWithMe",path:"shared_with_me",element:(0,x.jsx)(aa,{type:"sharedWithMe"})}),(0,x.jsx)(K.AW,{path:"search/:query",type:"search",element:(0,x.jsx)(aa,{type:"search"})}),(0,x.jsx)(K.AW,{path:"folder/:folderID",type:"item",element:(0,x.jsx)(aa,{type:"item"})}),(0,x.jsx)(K.AW,{path:"workspace/:workspaceID/:channelID",type:"channel",element:(0,x.jsx)(aa,{type:"channel"})}),(0,x.jsx)(K.AW,{path:"trash",type:"trash",element:(0,x.jsx)(aa,{type:"trash"})})]}),(0,x.jsx)(K.AW,{path:"/",element:(0,x.jsx)(Xe,{private:!0}),children:(0,x.jsxs)(K.AW,{path:"settings",children:[(0,x.jsx)(K.AW,{index:!0,element:(0,x.jsx)(K.Fg,{replace:!0,to:"profile"})}),(0,x.jsx)(K.AW,{path:":name/:id",element:(0,x.jsx)(ra,{})}),(0,x.jsx)(K.AW,{path:":name",element:(0,x.jsx)(ra,{})})]})}),(0,x.jsxs)(K.AW,{path:"/",element:(0,x.jsx)(Xe,{}),children:[(0,x.jsx)(K.AW,{path:"contact_us",type:"contact",element:(0,x.jsx)(ca,{})}),(0,x.jsx)(K.AW,{path:"team/join/:teamID/:code",type:"teamjoin",element:(0,x.jsx)(Qi,{})}),(0,x.jsx)(K.AW,{path:"pricing",type:"pricing",element:(0,x.jsx)(ia,{})}),(0,x.jsx)(K.AW,{path:"recorder",type:"recorder",element:(0,x.jsx)(na,{})}),(0,x.jsx)(K.AW,{path:"video/:videoID",type:"video",element:(0,x.jsx)(Xi,{})}),(0,x.jsx)(K.AW,{path:"image/:imageID",type:"image",element:(0,x.jsx)(ta,{})}),(0,x.jsx)(K.AW,{path:"/s/folder/:folderID/:shareKey",element:(0,x.jsx)(Yi,{})}),(0,x.jsx)(K.AW,{path:"*",element:(0,x.jsx)(oa,{})})]}),(0,x.jsx)(K.AW,{path:"/workspace/create",element:(0,x.jsx)(Z,{})}),(0,x.jsx)(K.AW,{path:"/workspace/transfer",element:(0,x.jsx)(W,{})}),(0,x.jsx)(K.AW,{path:"/workspace/invite/:key",element:(0,x.jsx)(la,{})}),(0,x.jsx)(K.AW,{path:"/workspace/do_invite/:key",element:(0,x.jsx)(ua,{})}),(0,x.jsx)(K.AW,{path:"/image/annotate/:imageID",element:(0,x.jsx)(sa,{})}),(0,x.jsx)(K.AW,{path:"/veditor/:videoID",element:(0,x.jsx)(ea,{})}),(0,x.jsx)(K.AW,{path:"/uninstall",type:"uninstall",element:(0,x.jsx)(Ji,{})}),(0,x.jsx)(K.AW,{path:"/pricing2",element:(0,x.jsx)(Fr,{})})]})}),(0,x.jsx)(_i,{})]})};var fa,ma=n(14890);function ha(e){return function(e){if(Array.isArray(e))return pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pa(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){ga(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ga(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ba={workspaceID:"",channelID:"",members:[],itemIDList:[],items:{},page:0,subPage:0,isSubPageLoading:!1,isLoading:!1,initialLoaded:!1,lastTimestamp:"",isEnd:!1,total:0,showPageCount:0,sort:z.Z.get("channel_sort")||"create",currentDisplayPage:0,scrollTop:0,isMemberLoading:!1},ja=(0,a.Lq)(ba,(ga(fa={},Ae.a.CHANNEL_LIST_LOADING,(function(e){e.isLoading=!0})),ga(fa,Ae.a.CHANNEL_LIST_LOAD_ERROR,(function(e){e.isLoading=!1})),ga(fa,Ae.a.CHANNEL_LIST_LOAD,(function(e,t){var n=t.payload,r=n.items,i=n.workspaceID,a=n.currentDisplayPage,o=n.channelID,s=n.page,c=n.total;if(e.isLoading=!1,e.workspaceID=i,e.channelID=o,e.total=c,e.currentDisplayPage=a,null===r)e.itemIDList=[];else{e.itemIDList=r.map((function(e){return{itemType:e.itemType,id:e.itemID}}));var l={};r.forEach((function(e){l[e.itemType+e.itemID]=e}));var u="create"===e.sort?r[r.length-1].createdSec:r[r.length-1].updatedSec;e.items=l,e.isLoading=!1,e.page=s,e.lastTimestamp=u,e.showPageCount=e.showPageCount+1,e.initialLoaded=!0,e.isEnd=!1,e.subPage=0}})),ga(fa,Ae.a.CHANNEL_LIST_SUB_LOADING,(function(e){e.isSubPageLoading=!0})),ga(fa,Ae.a.CHANNEL_LIST_LOAD_MORE,(function(e,t){var n=t.payload;if(e.isSubPageLoading=!1,null===n||null==e.itemIDList)e.isEnd=!0;else{var r=n.map((function(e){return{itemType:e.itemType,id:e.itemID}})),i={};n.forEach((function(e){i[e.itemType+e.itemID]=e}));var a="create"===e.sort?n[n.length-1].createdSec:n[n.length-1].updatedSec;n.length<20&&(e.isEnd=!0),e.items=ya(ya({},e.items),i),e.lastTimestamp=a,e.itemIDList=e.itemIDList.concat(r),e.subPage+=1}})),ga(fa,Ae.a.CHANNEL_ITEM_ADD,(function(e,t){var n=t.payload,r=n.workspaceID,i=n.channelID,a=n.items;if(i===e.channelID&&r===e.workspaceID){var o=a.map((function(e){return{itemType:e.itemType,id:e.itemID}})),s={};a.forEach((function(e){s[e.itemType+e.itemID]=e})),e.items=ya(ya({},e.items),s);var c=null==e.itemIDList?[]:e.itemIDList.slice();e.itemIDList=[].concat(ha(o),ha(c))}})),ga(fa,Ae.a.CHANNEL_MEMBERS_LOADING,(function(e){e.isMemberLoading=!0})),ga(fa,Ae.a.CHANNEL_MEMBERS_LOAD,(function(e,t){var n=t.payload;e.members=n,e.isMemberLoading=!1})),ga(fa,Ae.a.CHANNEL_CHANGE_SORT,(function(e,t){var n=t.payload;e.sort=n})),ga(fa,Ae.a.CHANNEL_UPDATE_SCROLL,(function(e,t){e.scrollTop=t.payload})),ga(fa,Ae.a.CHANNEL_OWNER_TRANSFER,(function(e,t){var n=t.payload,r=e.members.findIndex((function(e){return"owner"===e.role}));e.members[r].role="member";var i=e.members.findIndex((function(e){return e.userID===n}));e.members[i].role="owner"})),ga(fa,Ae.a.CHANNEL_MEMBER_REMOVE,(function(e,t){var n=t.payload,r=e.members.findIndex((function(e){return e.userID===n}));e.members.splice(r,1)})),ga(fa,Ae.a.CHANNEL_ADD_MEMBER_FROM_WORKSPACE,(function(e,t){var n=t.payload;for(var r in n)e.members.push(n[r])})),ga(fa,Ae.a.CHANNEL_ITEM_RENAME,(function(e,t){var n=t.payload,r=n.id,i=n.itemType,a=n.name;e.items[i+r]&&(e.items[i+r].info.title=a)})),ga(fa,Ae.a.CHANNEL_ITEM_DELETE,(function(e,t){var n=t.payload;e.itemIDList=e.itemIDList.filter((function(e){return e.itemType+e.id!==n}))})),ga(fa,Ae.a.CHANNEL_ITEM_RESTORE,(function(e){e.page=0})),ga(fa,Ae.a.CHANNEL_ITEM_MULTIPLE_DELETE,(function(e,t){var n=t.payload;e.itemIDList=e.itemIDList.filter((function(e){return-1===n.findIndex((function(t){return t.itemType===e.itemType&&t.id===e.id+""}))}))})),ga(fa,Ae.a.CHANNEL_VIDEO_SET_COMPLETE_DONE,(function(e,t){var n=t.payload,r=n.id,i=n.info;e.items["video"+r].info=i})),ga(fa,Ae.a.IMAGE_ANNOTATED,(function(e,t){var n=t.payload;e.items["image"+n]&&(e.items["image"+n].info.useName="")})),fa));const xa=ja;var wa;function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Na=(0,a.Lq)({isLoading:!1,isCreating:!1,isCreateSuccess:!1,comments:{},userList:[],isUserListLoading:!1},(Sa(wa={},Ae.a.COMMENT_LOADING,(function(e){e.isLoading=!0})),Sa(wa,Ae.a.COMMENT_CREATING,(function(e){e.isCreateSuccess=!1,e.isCreating=!0})),Sa(wa,Ae.a.COMMENT_CREATE_FAILED,(function(e){e.isCreating=!1})),Sa(wa,Ae.a.COMMENT_LOADED,(function(e,t){e.isLoading=!1;var n=t.payload,r=n.itemType,i=n.itemId,a=n.data;e.comments[r+i]=a})),Sa(wa,Ae.a.COMMENT_USER_LIST_LOADING,(function(e){e.isUserListLoading=!0})),Sa(wa,Ae.a.COMMENT_USER_LIST_LOADED,(function(e,t){e.userList=t.payload,e.isUserListLoading=!1})),Sa(wa,Ae.a.COMMENT_CREATED,(function(e,t){var n=t.payload,r=n.itemType,i=n.itemId,a=n.data;e.comments[r+i]||(e.comments[r+i]=[]),e.comments[r+i].push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach((function(t){Sa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({animation:!!a.isEmoji},a)),e.isCreating=!1,e.isCreateSuccess=!0})),Sa(wa,Ae.a.COMMENT_REMOVED,(function(e,t){var n=t.payload,r=n.itemType,i=n.itemId,a=n.id;e.comments[r+i]=e.comments[r+i].filter((function(e){return e.id!==a}))})),Sa(wa,Ae.a.COMMENT_REMOVE_ANIMATION,(function(e,t){var n=t.payload,r=n.itemType,i=n.itemId,a=n.id,o=e.comments[r+i].findIndex((function(e){return e.id===a}));e.comments[r+i][o].animation=!1})),Sa(wa,Ae.a.COMMENT_REMOVE_MENTIONED,(function(e,t){var n=t.payload,r=n.itemType,i=n.itemId,a=n.id,o=e.comments[r+i].findIndex((function(e){return e.id===a}));e.comments[r+i][o].isMention=0})),wa));var Oa;function Ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Da=(0,a.Lq)({isLoading:!1,accounts:[]},(Ea(Oa={},Ae.a.CONNECTED_ACCOUNT_LOAD_DOING,(function(e){e.isLoading=!0})),Ea(Oa,Ae.a.CONNECTED_ACCOUNT_LOAD_RECEIVED,(function(e,t){e.isLoading=!1,e.accounts=t.payload.accounts||[]})),Ea(Oa,Ae.a.CONNECTED_ACCOUNT_SUCCESS,(function(e,t){e.accounts.unshift(t.payload.account)})),Ea(Oa,Ae.a.CONNECTED_ACCOUNT_DELETED,(function(e,t){var n=e.accounts.findIndex((function(e){return e.id===t.payload.accountID}));e.accounts.splice(n,1)})),Oa));var Aa;function Ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ta=(0,a.Lq)({isLoading:!1,destinations:[],screenshotsMap:{},videosMap:{}},(Ca(Aa={},Ae.a.DESTINATIONS_LOAD_DOING,(function(e){e.isLoading=!0})),Ca(Aa,Ae.a.DESTINATIONS_LOAD_RECEIVED,(function(e,t){e.isLoading=!1,e.destinations=t.payload.destinations||[]})),Ca(Aa,Ae.a.DESTINATION_CREATED,(function(e,t){var n=t.payload.destination,r=n.id,i=e.destinations.findIndex((function(e){return e.id===r}));i<0?e.destinations.unshift(n):e.destinations.splice(i,1,n)})),Ca(Aa,Ae.a.DESTINATION_DELETED,(function(e,t){var n=t.payload.destination.id,r=e.destinations.findIndex((function(e){return e.id===n}));e.destinations.splice(r,1)})),Ca(Aa,Ae.a.DESTINATION_PRIVACY_CHANGED,(function(e,t){var n=t.payload.destination.id,r=e.destinations.findIndex((function(e){return e.id===n}));e.destinations[r]=t.payload.destination})),Ca(Aa,Ae.a.DESTINATION_LOAD_SCREENSHOTS_RECEIVED,(function(e,t){var n,r,i,a=t.payload,o=a.destinationID,s=a.screenshots,c=a.currentPage,l=a.total,u=a.limit,d=(null===(n=e.screenshotsMap)||void 0===n||null===(r=n[o])||void 0===r||null===(i=r.screenshot)||void 0===i?void 0:i.screenshots)||[],f=s.concat(d);e.screenshotsMap=Ca({},o,{currentPage:c,total:l,limit:u,screenshots:f})})),Ca(Aa,Ae.a.DESTINATION_LOAD_VIDEOS_RECEIVED,(function(e,t){var n,r,i,a=t.payload,o=a.destinationID,s=a.videos,c=a.currentPage,l=a.total,u=a.limit,d=(null===(n=e.videosMap)||void 0===n||null===(r=n[o])||void 0===r||null===(i=r.video)||void 0===i?void 0:i.videos)||[],f=s.concat(d);e.videosMap=Ca({},o,{currentPage:c,total:l,limit:u,videos:f})})),Aa));var Pa;function _a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ka=(0,a.Lq)([],(_a(Pa={},Ae.a.DOWNLOADLIST_ADD,(function(e,t){var n=t.payload;e.push(n)})),_a(Pa,Ae.a.DOWNLOADLIST_CHANGE,(function(e,t){var n=t.payload,r=n.id,i=e.find((function(e){return e.id===r}));i&&Object.assign(i,n)})),_a(Pa,Ae.a.DOWNLOADLIST_EMPTY,(function(e){e.forEach((function(e){var t=e.retryTimer;return clearTimeout(t)})),e.length=0})),_a(Pa,Ae.a.DOWNLOADLIST_REMOVE,(function(e,t){var n=t.payload,r=e.findIndex((function(e){return e.id===n}));r>=0&&(clearTimeout(e[r].retryTimer),e.splice(r,1))})),Pa));var La;function Ra(e){return function(e){if(Array.isArray(e))return Ma(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ma(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ma(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){Ha(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Fa=(0,a.Lq)({folders:{},starredFolderIDList:[],isLoading:!1,folderIDList:{},loaded:!1,isGeneratingShareUrl:!1,myItemSort:""},(Ha(La={},Ae.a.FOLDER_LOAD,(function(e,t){var n=t.payload,r=n.folders,i=n.favoriteFolders,a=n.sort,o={},s=Ua({},e.folders),c=function(e){o[e]=[],r[e].forEach((function(t){o[e].push(t.folderID),s[t.folderID]=Ua(Ua({},t),{},{id:t.folderID,itemType:"folder",title:t.name})}))};for(var l in r)c(l);return Ua(Ua({},e),{},{isLoading:!1,starredFolderIDList:i,folders:s,folderIDList:o,loaded:!0,myItemSort:a})})),Ha(La,Ae.a.FOLDER_RECEIVED,(function(e,t){var n=t.payload.folders,r=Ua({},e.folders);return n.forEach((function(e){r[e.folderID]=Ua({name:e.title,id:e.folderID,itemType:"folder"},e)})),Ua(Ua({},e),{},{folders:r})})),Ha(La,Ae.a.FOLDER_LOADING,(function(e){return Ua(Ua({},e),{},{isLoading:!0})})),Ha(La,Ae.a.FOLDER_CREATE,(function(e,t){var n=t.payload;n=Ua(Ua({},n),{},{id:n.folderID,title:n.name,itemType:"folder"});var r=e.folderIDList;r[n.parentID]||(r[n.parentID]=[]),r[n.parentID].unshift(n.folderID),e.folders=Ua(Ua({},e.folders),{},Ha({},n.folderID,n))})),Ha(La,Ae.a.FOLDER_MOVE,(function(e,t){var n=t.payload,r=n.folderID,i=n.folders,a=e.folders,o=e.folderIDList;i.forEach((function(t){var n=t.parentID?t.parentID:e.folders[t.id].parentID;o[n]=o[n].filter((function(e){return e!==t.id})),o[r]||(o[r]=[]),o[r].unshift(t.id),a[e.folders[t.id].folderID].parentID=r}))})),Ha(La,Ae.a.FOLDER_RENAME,(function(e,t){var n,r,i=t.payload,a=i.folderID,o=i.name;Object.assign(null!==(r=(n=e.folders)[a])&&void 0!==r?r:n[a]={},{title:o,name:o})})),Ha(La,Ae.a.FOLDER_EDIT_DESC,(function(e,t){var n=t.payload,r=n.folderID,i=n.desc;e.folders[r].description=i})),Ha(La,Ae.a.FOLDER_GETTING_SHARE_LINK,(function(e){e.isGeneratingShareUrl=!0})),Ha(La,Ae.a.FOLDER_GET_SHARE_LINK,(function(e,t){var n=t.payload,r=n.folderID,i=n.shareKey;e.folders[r].shareKey=i,e.isGeneratingShareUrl=!1})),Ha(La,Ae.a.FOLDER_REVOKE_SHARE_LINK,(function(e,t){var n=t.payload;e.folders[n].shareKey=""})),Ha(La,Ae.a.FOLDER_DELETE,(function(e,t){var n=t.payload.folders,r=Ua({},e.folderIDList),i=Ra(e.starredFolderIDList);function a(t){e.folderIDList[t]&&e.folderIDList[t].forEach((function(e){a(e)})),i=i.filter((function(e){return e!==t}))}return n.forEach((function(t){var n=t.parentID?t.parentID:e.folders[t.id].parentID;r[n]&&(r[n]=r[n].filter((function(e){return e!==t.id})))})),n.forEach((function(e){a(e.id)})),Ua(Ua({},e),{},{folderIDList:r,starredFolderIDList:i})})),Ha(La,Ae.a.STAR_FOLDER_UPDATE,(function(e,t){var n=t.payload;e.starredFolderIDList=n.split(",")})),Ha(La,Ae.a.STAR_FOLDER_REMOVE,(function(e,t){var n=t.payload;e.starredFolderIDList=e.starredFolderIDList.filter((function(e){return e!==n}))})),Ha(La,Ae.a.STAR_FOLDER_DELETE,(function(e,t){t.payload.folders.forEach((function t(n){e.folderIDList[n]&&e.folderIDList[n].forEach((function(e){t(e)})),e.starredFolderIDList=e.starredFolderIDList.filter((function(e){return e!==n}))}))})),Ha(La,Ae.a.FOLDER_CHANGE_SORT,(function(e,t){var n=t.payload,r=n.folderID,i=n.sort;"0"===r?e.myItemSort=i:e.folders[r]&&(e.folders[r].sort=i)})),La));var Ga;function Va(e){return function(e){if(Array.isArray(e))return Ba(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ba(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(n),!0).forEach((function(t){Ka(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $a={images:{},sort:z.Z.get("image_sort")||"create",scrollTop:0,page:0,activeImages:{isLoading:!1,isSubPageLoading:!1,subPage:0,isEnd:!1,imageIDList:[],totalCount:0,lastTimestamp:"",pageSize:0,page:0},inactiveImages:{isLoading:!1,imageIDList:[],totalCount:0,pageSize:0,page:0}};const qa=(0,a.Lq)($a,(Ka(Ga={},Ae.a.IMAGE_LIST_LOAD,(function(e,t){var n=t.payload,r=n.images,i=n.page,a=n.total;if(null==r)return za(za({},e),{},{activeImages:za(za({},e.activeImages),{},{isSubPageLoading:!1,imageIDList:null,isLoading:!1,page:i})});var o=r.map((function(e){return e.id})),s=za({},e.images);r.forEach((function(e){s[e.id]={isLoading:!1,info:e}}));var c="create"===e.sort?r[r.length-1].createdSec:r[r.length-1].updatedSec;return za(za({},e),{},{images:s,scrollTop:0,page:i,activeImages:za(za({},e.activeImages),{},{imageIDList:o,lastTimestamp:c,isSubPageLoading:!1,page:i,isEnd:!1,subPage:0,isLoading:!1,totalCount:a})})})),Ka(Ga,Ae.a.IMAGE_LIST_LOAD_MORE,(function(e,t){var n=t.payload.images;if(null===n)return za(za({},e),{},{activeImages:za(za({},e.activeImages),{},{isSubPageLoading:!1,isEnd:!0})});var r=n.map((function(e){return e.id})),i=za({},e.images);n.forEach((function(e){i[e.id]={isLoading:!1,info:e}}));var a="create"===e.sort?n[n.length-1].createdSec:n[n.length-1].updatedSec;return za(za({},e),{},{images:i,activeImages:za(za({},e.activeImages),{},{imageIDList:[].concat(Va(e.activeImages.imageIDList),Va(r)),lastTimestamp:a,isSubPageLoading:!1,subPage:e.activeImages.subPage+1})})})),Ka(Ga,Ae.a.IMAGE_LIST_LOADING,(function(e){return za(za({},e),{},{activeImages:za(za({},e.activeImages),{},{isLoading:!0})})})),Ka(Ga,Ae.a.IMAGE_LIST_SUB_LOADING,(function(e){return za(za({},e),{},{activeImages:za(za({},e.activeImages),{},{isSubPageLoading:!0})})})),Ka(Ga,Ae.a.IMAGE_SCROLL_UPDATE,(function(e,t){var n=t.payload;return za(za({},e),{},{scrollTop:n})})),Ka(Ga,Ae.a.IMAGE_RECEIVED,(function(e,t){var n=t.payload.images,r=za({},e.images);return n.forEach((function(e){r[e.id]={isLoading:!1,info:e}})),za(za({},e),{},{images:r})})),Ka(Ga,Ae.a.IMAGE_DELETE,(function(e,t){var n=t.payload,r=za({},e.images),i=e.activeImages.imageIDList.slice(),a=n.map((function(e){return e.id}));return i=i.filter((function(e){return-1===a.indexOf(e)})),n.forEach((function(e){delete r[e.id]})),za(za({},e),{},{images:r,activeImages:za(za({},e.activeImages),{},{imageIDList:i,totalCount:e.activeImages.totalCount-n.length})})})),Ka(Ga,Ae.a.IMAGE_ADD,(function(e,t){var n=t.payload.images,r=e.images;if(n.forEach((function(e){r[e.id]={isLoading:!1,info:za({},e)}})),1===e.activeImages.page)if(e.inactiveImages.imageIDList.length){var i=e.activeImages.imageIDList||[],a=e.inactiveImages.imageIDList||[],o=[],s=[];n.forEach((function(e){o.unshift(e.id),s.unshift(i.pop())})),e.activeImages.imageIDList=[].concat(o,Va(i)),e.inactiveImages.imageIDList=[].concat(s,Va(a)),e.activeImages.totalCount=e.totalCount+n.length}else{var c=e.activeImages.imageIDList||[];n.forEach((function(e){c.unshift(e.id)})),e.activeImages.imageIDList=[].concat([],Va(c)),e.activeImages.totalCount=e.activeImages.totalCount+n.length}})),Ka(Ga,Ae.a.IMAGE_MOVE,(function(e,t){var n=t.payload,r=n.folderID,i=n.images,a=n.folderName,o=za({},e.images);return i.forEach((function(e){o[e.id]=za(za({},o[e.id]),{},{info:za(za({},o[e.id].info),{},{folderID:r,folderName:a})})})),za(za({},e),{},{images:o})})),Ka(Ga,Ae.a.IMAGE_CHANGE_SORT,(function(e,t){var n=t.payload;return za(za({},e),{},{sort:n})})),Ka(Ga,Ae.a.IMAGE_RENAME,(function(e,t){var n=t.payload,r=n.id,i=n.name;return za(za({},e),{},{images:za(za({},e.images),{},Ka({},r,za(za({},e.images[r]),{},{info:za(za({},e.images[r].info),{},{title:i})})))})})),Ka(Ga,Ae.a.IMAGE_INFO_LOAD,(function(e,t){var n=t.payload,r=n.id,i=n.image;return za(za({},e),{},{images:za(za({},e.images),{},Ka({},r,za(za({},e.images[r]),{},{isLoading:!1,info:i||{},loaded:!0})))})})),Ka(Ga,Ae.a.IMAGE_INFO_LOADING,(function(e,t){var n=t.payload;return za(za({},e),{},{images:za(za({},e.images),{},Ka({},n,za(za({},e.images[n]),{},{isLoading:!0})))})})),Ka(Ga,Ae.a.IMAGE_PAGE_UPDATE,(function(e){return za(za({},e),{},{page:-1})})),Ka(Ga,Ae.a.IMAGE_GENERATE_SHARE_LINK_LOADING,(function(e,t){var n=e.images[t.payload.id];return za(za({},e),{},{images:za(za({},e.images),{},Ka({},t.payload.id,za(za({},n),{},{isGenerateShareLinkLoading:!0})))})})),Ka(Ga,Ae.a.IMAGE_GENERATE_SHARE_LINK_FAILED,(function(e,t){var n=e.images[t.payload.id];return za(za({},e),{},{images:za(za({},e.images),{},Ka({},t.payload.id,za(za({},n),{},{isGenerateShareLinkLoading:!1})))})})),Ka(Ga,Ae.a.IMAGE_GENERATE_SHARE_LINK,(function(e,t){var n=e.images[t.payload.id];return za(za({},e),{},{images:za(za({},e.images),{},Ka({},t.payload.id,za(za({},n),{},{isGenerateShareLinkLoading:!1,info:za(za({},n.info),{},{shareURI:t.payload.shareURI,shareKey:t.payload.shareKey})})))})})),Ka(Ga,Ae.a.IMAGE_REVOKE_SHARE_LINK,(function(e,t){return za(za({},e),{},{images:za(za({},e.images),{},Ka({},t.payload.id,za(za({},e.images[t.payload.id]),{},{isGenerateShareLinkLoading:!1,info:za(za({},e.images[t.payload.id].info),{},{shareURI:""})})))})})),Ka(Ga,Ae.a.IMAGE_LIST_RESTORE,(function(e){return za(za({},e),{},{page:-1,activeImages:za(za({},e.activeImages),{},{page:-1})})})),Ka(Ga,Ae.a.IMAGE_MOVE_TO_CHANNEL,(function(e,t){t.payload.forEach((function(t){e.images[t.id]&&(e.images[t.id].info=t)}))})),Ka(Ga,Ae.a.IMAGE_ANNOTATED,(function(e,t){var n=t.payload;e.images[n]&&(e.images[n].info.userName="")})),Ka(Ga,Ae.a.ITEM_LOADED_RESET,(function(e){for(var t in e.images)e.images[t].loaded&&(e.images[t].loaded=!1)})),Ga));var Ya;function Ja(e){return function(e){if(Array.isArray(e))return Qa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qa(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xa(Object(n),!0).forEach((function(t){to(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function to(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const no=(0,a.Lq)({isLoading:!1,isSubPageLoading:!1,isScrollLoading:!1,itemIDList:[],page:0,sort:"",scrollTop:0,total:0,lastTimestamp:"",subPage:1,folderID:0,showPageCount:0,initialLoaded:!1,isEnd:!1,isShowItemView:!1,currentViewItem:{itemType:"",id:""},isShared:!1},(to(Ya={},Ae.a.ITEM_LIST_LOAD,(function(e,t){var n=t.payload,r=n.items,i=n.page,a=n.folderID,o=n.total,s=n.isShared,c=n.sort;if(null===r)return eo(eo({},e),{},{itemIDList:null,isLoading:!1,folderID:a,total:0,sort:c,page:i,subPage:0,isSubPageLoading:!1,scrollTop:0,isEnd:!1,isShared:s});var l=r.map((function(e){return{itemType:e.itemType||e.ItemType,id:e.id}})),u="create"===c?r[r.length-1].createdSec:r[r.length-1].updatedSec;return eo(eo({},e),{},{itemIDList:l,isLoading:!1,page:i,folderID:a,subPage:1,scrollTop:0,sort:c,isEnd:!1,total:o,isScrollLoading:!1,lastTimestamp:u,showPageCount:e.showPageCount+1,initialLoaded:!0,isShared:s})})),to(Ya,Ae.a.ITEM_LIST_LOAD_MORE,(function(e,t){var n=t.payload.items;if(null===n||null===e.itemIDList)return eo(eo({},e),{},{isSubPageLoading:!1,isEnd:!0});var r=n.map((function(e){return{itemType:e.itemType||e.ItemType,id:e.id}})),i="create"===e.sort?n[n.length-1].createdSec:n[n.length-1].updatedSec;return eo(eo({},e),{},{lastTimestamp:i,itemIDList:[].concat(Ja(e.itemIDList),Ja(r)),isSubPageLoading:!1,subPage:e.subPage+1,isEnd:n.length<20})})),to(Ya,Ae.a.ITEM_LIST_LOADING,(function(e){return eo(eo({},e),{},{isLoading:!0})})),to(Ya,Ae.a.ITEM_SUB_LOADING,(function(e){return eo(eo({},e),{},{isSubPageLoading:!0})})),to(Ya,Ae.a.ITEM_SHOW_PAGE_COUNT_RESTORE,(function(e){return eo(eo({},e),{},{showPageCount:1})})),to(Ya,Ae.a.ITEM_SHOW_PAGE_COUNT_ADD,(function(e){return eo(eo({},e),{},{showPageCount:e.showPageCount+1})})),to(Ya,Ae.a.ITEM_VIEW_SHOW,(function(e){return eo(eo({},e),{},{isShowItemView:!0})})),to(Ya,Ae.a.ITEM_VIEW_HIDE,(function(e){return eo(eo({},e),{},{isShowItemView:!1})})),to(Ya,Ae.a.ITEM_MOVE,(function(e,t){var n=t.payload.items,r=e.itemIDList;if(null===r)return eo({},e);var i=r.slice(),a=n.map((function(e){return e.id}));return i=r.filter((function(e){return-1===a.indexOf(e.id)})),eo(eo({},e),{},{itemIDList:i})})),to(Ya,Ae.a.ITEM_DELETE,(function(e,t){var n=t.payload.items,r=e.itemIDList;if(null===r)return eo({},e);var i=n.map((function(e){return e.id}));return r=r.filter((function(e){return-1===i.indexOf(e.id)})),eo(eo({},e),{},{itemIDList:r})})),to(Ya,Ae.a.ITEM_CHANGE_SORT,(function(e,t){var n=t.payload;return eo(eo({},e),{},{sort:n})})),to(Ya,Ae.a.ITEM_UPDATE_SCROLL,(function(e,t){var n=t.payload;return eo(eo({},e),{},{scrollTop:n})})),to(Ya,Ae.a.ITEM_ADD,(function(e,t){var n=t.payload,r=n.folderID,i=n.items;if(r+""===e.folderID){var a=i.map((function(e){return{itemType:e.itemType||e.ItemType,id:e.id}})),o=null==e.itemIDList?[]:e.itemIDList.slice();return eo(eo({},e),{},{itemIDList:[].concat(Ja(a),Ja(o))})}return eo({},e)})),to(Ya,Ae.a.ITEM_LIST_RESTORE,(function(e){return eo(eo({},e),{},{page:0})})),Ya));var ro;function io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ao=(0,a.Lq)({selectedItems:[],selectedTrashItems:[]},(io(ro={},Ae.a.SELECTED_ADD,(function(e,t){var n=t.payload.info,r=n.itemType,i=n.id,a=n.folderID,o=n.parentID,s=n.title,c=n.canVisit;e.selectedItems.push({itemType:r,id:i,title:s,folderID:o||a,canVisit:c})})),io(ro,Ae.a.SELECTED_REMOVE,(function(e,t){var n=t.payload.info;e.selectedItems=e.selectedItems.filter((function(e){var t=e.id;return e.itemType!==n.itemType||t!==n.id}))})),io(ro,Ae.a.SELECTED_TRASH_ADD,(function(e,t){var n=t.payload.id;e.selectedTrashItems.push({id:n})})),io(ro,Ae.a.SELECTED_TRASH_REMOVE,(function(e,t){var n=t.payload.id;e.selectedTrashItems=e.selectedTrashItems.filter((function(e){return e.id!==n}))})),io(ro,Ae.a.SELECTED_CLEAR,(function(e){e.selectedItems.length=0,e.selectedTrashItems.length=0})),ro));var oo;function so(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const co=(0,a.Lq)({users:{},notifications:[],isLoading:!1},(so(oo={},Ae.a.NOTIFICATION_LOADING,(function(e){e.isLoading=!0})),so(oo,Ae.a.NOTIFICATION_LOAD,(function(e,t){var n=t.payload,r=n.notifications,i=n.users;e.notifications=r,e.users=i,e.isLoading=!1})),so(oo,Ae.a.NOTIFICATION_MARK_AS_READ,(function(e,t){var n=t.payload;e.notifications.forEach((function(t,r){t.id===n&&(e.notifications[r].status="read")}))})),so(oo,Ae.a.NOTIFICATION_ALL_MARK_AS_READ,(function(e){e.notifications.forEach((function(t,n){e.notifications[n].status="read"}))})),oo));function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(n),!0).forEach((function(t){fo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const mo=(0,a.Lq)({isLoading:!0,plans:{}},fo({},Ae.a.PLANS_LOAD_RECEICED,(function(e,t){return uo(uo({},e),{},{isLoading:!1,plans:t.payload.data})})));var ho;function po(e){return function(e){if(Array.isArray(e))return vo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return vo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(n),!0).forEach((function(t){bo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jo=(0,a.Lq)({isLoading:!1,items:[],isMetaLoaded:!1,page:1,itemIDList:[],folderIDList:[],isItemLoading:!1,query:"",scrollTop:0},(bo(ho={},Ae.a.SEARCH_LOAD,(function(e,t){var n=t.payload;return go(go({},e),{},{items:n||[],isLoading:!1,isMetaLoaded:!0})})),bo(ho,Ae.a.SEARCH_LOADING,(function(e,t){return go(go({},e),{},{isLoading:!0})})),bo(ho,Ae.a.SEARCH_ITEM_LOAD,(function(e,t){var n=t.payload,r=n.items,i=n.folders,a=n.query,o=i.map((function(e){return e.folderID})),s=r.map((function(e){return{id:e.id,itemType:e.itemType}}));return go(go({},e),{},{query:a,folderIDList:o,itemIDList:s,isItemLoading:!1})})),bo(ho,Ae.a.SEARCH_ITEM_LOADING,(function(e,t){return go(go({},e),{},{isItemLoading:!0})})),bo(ho,Ae.a.SEARCH_PAGE_CHANGE,(function(e,t){var n=t.payload;return go(go({},e),{},{page:n})})),bo(ho,Ae.a.SEARCH_SCROLL_UPDATE,(function(e,t){var n=t.payload;return go(go({},e),{},{scrollTop:n})})),bo(ho,Ae.a.SEARCH_QUERY_UPDATE,(function(e,t){var n=t.payload;return go(go({},e),{},{query:n})})),bo(ho,Ae.a.SEARCH_ITEM_DELETE,(function(e,t){var n=t.payload,r=e.folderIDList,i=e.itemIDList,a=[],o=[];return n.forEach((function(e){"folder"===e.itemType?a.push(e.id):o.push(e.id)})),r=r.filter((function(e){return-1===a.indexOf(e)})),i=i.filter((function(e){return-1===o.indexOf(e.id)})),go(go({},e),{},{folderIDList:r,itemIDList:i})})),bo(ho,Ae.a.SEARCH_META_DELETE,(function(e,t){var n=t.payload.map((function(e){return e.id+e.itemType})),r=e.items.filter((function(e){return-1===n.indexOf(e.id+e.itemType)}));return go(go({},e),{},{items:r})})),bo(ho,Ae.a.SEARCH_META_ADD,(function(e,t){var n=t.payload.map((function(e){return{id:e.id,title:e.title,createdSec:e.createdSec,itemType:e.itemType}}));return go(go({},e),{},{items:[].concat(po(n),po(e.items))})})),bo(ho,Ae.a.SEARCH_META_RENAME,(function(e,t){var n=t.payload,r=n.id,i=n.itemType,a=n.name;e.items.forEach((function(e){e.id===r&&e.itemType===i&&(e.title=a)}))})),ho));const xo=jo;var wo;function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function So(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){No(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function No(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oo=(0,a.Lq)({isLoading:!1,isFolderLoading:!1,isSubPageLoading:!1,isScrollLoading:!1,page:0,subPage:0,scrollTop:0,total:0,lastTimestamp:"",folderList:[],sharedIDList:[],sharedItems:{},showPageCount:0,initialLoaded:!1,isEnd:!1,newCommentList:[],newCommentTotal:0,currentDisplayPage:0},(No(wo={},Ae.a.SHARED_FOLDER_LOADING,(function(e){e.isFolderLoading=!0})),No(wo,Ae.a.SHARED_FOLDER_LIST_LOAD,(function(e,t){var n=t.payload.folders;e.isFolderLoading=!1,e.folderList=n})),No(wo,Ae.a.SHARED_LIST_LOADING,(function(e){e.isLoading=!0})),No(wo,Ae.a.SHARED_LIST_LOAD,(function(e,t){var n=t.payload,r=n.items,i=n.total,a=n.page,o=n.currentDisplayPage;if(e.isLoading=!1,e.page=a,e.currentDisplayPage=o,e.total=i,null===r)e.sharedIDList=[];else{var s=r.map((function(e){return{itemType:e.itemType,id:e.id}})),c={};r.forEach((function(e){c[e.itemType+e.id]=e})),e.sharedIDList=s,e.sharedItems=c,e.lastTimestamp=r[r.length-1].updatedSec,e.showPageCount=e.showPageCount+1,e.initialLoaded=!0,e.isEnd=!1,e.subPage=0}})),No(wo,Ae.a.SHARED_SUB_LOADING,(function(e){e.isSubPageLoading=!0})),No(wo,Ae.a.SHARED_LIST_LOAD_MORE,(function(e,t){var n=t.payload;if(e.isSubPageLoading=!1,null===n||null==e.sharedIDList)e.isEnd=!0;else{var r=n.map((function(e){return{itemType:e.itemType,id:e.id}})),i={};n.forEach((function(e){i[e.itemType+e.id]=e})),n.length<20&&(e.isEnd=!0),e.sharedItems=So(So({},e.sharedItems),i),e.sharedIDList=e.sharedIDList.concat(r),e.subPage+=1}})),No(wo,Ae.a.SHARED_NOTI_LOAD,(function(e,t){var n=t.payload;e.newCommentList=n,e.sharedIDList=e.sharedIDList.filter((function(e){return!(0,he.wD)(e,n)})),n.forEach((function(t){e.sharedItems[t.itemType+t.id]=t}));for(var r=n.length-1;r>=0;r--)e.sharedIDList.unshift({itemType:n[r].itemType,id:n[r].id})})),No(wo,Ae.a.SHARED_NEW_COMMENTS_VIEWED,(function(e,t){var n=t.payload.itemType;e.newCommentList=e.newCommentList.filter((function(e){e.itemType!==n&&(e.id,e.id)}))})),No(wo,Ae.a.SHARED_LIST_ADD,(function(e,t){var n=t.payload;e.sharedIDList.unshift({itemType:n.itemType,id:n.id}),e.sharedItems[n.itemType+n.id]=n})),No(wo,Ae.a.SHARED_LIST_DELETE,(function(e,t){var n=t.payload;e.sharedIDList=e.sharedIDList.filter((function(e){var t=n.findIndex((function(t){return t.itemType===e.itemType&&t.id===e.id}));return-1===t})),e.newCommentList=e.newCommentList.filter((function(e){var t=n.findIndex((function(t){return t.itemType===e.itemType&&t.id===e.id}));return-1===t}))})),No(wo,Ae.a.SHARED_LIST_RESTORE,(function(e){e.page=0})),No(wo,Ae.a.SHARED_TITLE_EDIT,(function(e,t){var n=t.payload,r=n.id,i=n.itemType,a=n.name;e.sharedItems[i+r]&&(e.sharedItems[i+r].title=a)})),No(wo,Ae.a.SHARED_UPDATE_SCROLL,(function(e,t){e.scrollTop=t.payload})),wo));const Eo=Oo;var Do;function Ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Co(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ao(Object(n),!0).forEach((function(t){To(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function To(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Po=(0,a.Lq)({isMemberLoading:!1,info:{},members:[],joinStat:{doing:!0,success:!0,message:""}},(To(Do={},Ae.a.TEAM_INFO_LOAD_RECEIVED,(function(e,t){return Co(Co({},e),{},{info:t.payload.info||{}})})),To(Do,Ae.a.TEAM_MEMBER_LOAD_DOING,(function(e,t){return Co(Co({},e),{},{isMemberLoading:!0})})),To(Do,Ae.a.TEAM_MEMBER_LOAD_RECEIVED,(function(e,t){return Co(Co({},e),{},{isMemberLoading:!1,members:t.payload.members||[]})})),To(Do,Ae.a.TEAM_MEMBER_REMOVED,(function(e,t){var n=t.payload.userID,r=e.members.findIndex((function(e){return e.userID===n})),i=e.members.slice(0);return i.splice(r,1),Co(Co({},e),{},{members:i})})),To(Do,Ae.a.TEAM_JOIN_DONE,(function(e,t){return Co(Co({},e),{},{info:t.payload.info||e.info,joinStat:{doing:!1,success:t.payload.success,message:t.payload.message}})})),Do));var _o;function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(n),!0).forEach((function(t){Ro(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mo=(0,a.Lq)({isLoading:!1,trashItems:{},isScrollLoading:!1,itemIDList:[],page:1,subPage:0,initialLoaded:!1,isEnd:!1},(Ro(_o={},Ae.a.TRASH_LOAD,(function(e,t){var n=t.payload.items;if(null===n)return Lo(Lo({},e),{},{isLoading:!1,itemIDList:null});var r=n.map((function(e){return e.id})),i={};return n.forEach((function(e){i[e.id]=e})),Lo(Lo({},e),{},{isLoading:!1,trashItems:i,itemIDList:r})})),Ro(_o,Ae.a.TRASH_PAGE_CHANGE,(function(e,t){var n=t.payload;e.page=n})),Ro(_o,Ae.a.TRASH_LOADING,(function(e,t){return Lo(Lo({},e),{},{isLoading:!0})})),Ro(_o,Ae.a.TRASH_RESTORE,(function(e,t){var n=t.payload,r=e.itemIDList.filter((function(e){return-1===n.indexOf(e)}));return Lo(Lo({},e),{},{itemIDList:r})})),Ro(_o,Ae.a.TRASH_DELETE,(function(e,t){var n=t.payload,r=e.itemIDList.filter((function(e){return-1===n.indexOf(e)}));return Lo(Lo({},e),{},{itemIDList:r})})),Ro(_o,Ae.a.TRASH_EMPTY,(function(e,t){return Lo(Lo({},e),{},{itemIDList:[],trashItems:{}})})),_o));const Zo=Mo;var Uo;function Ho(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fo=(0,a.Lq)({itemDetailVisible:!1,isItemBrowsing:!1,itemList:[],currentItemType:"",currentItemID:"",currentShareKey:"",showRecordPanel:!1,workspaceID:"",channelID:"",isSpaceOwner:!1,isRecording:!1},(Ho(Uo={},Ae.a.UI_SHOW_ITEM,(function(e,t){var n=t.payload,r=n.currentItem,i=n.itemList,a=r.itemType,o=r.id,s=(r.shareKey,i.findIndex((function(e){return e.itemType===a&&e.id===o})));e.currentItemIndex=s,e.itemDetailVisible=!0,e.itemList=i})),Ho(Uo,Ae.a.UI_NEXT_ITEM,(function(e){e.currentItemIndex<e.itemList.length-1&&(e.currentItemIndex+=1)})),Ho(Uo,Ae.a.UI_PREV_ITEM,(function(e){e.currentItemIndex>0&&(e.currentItemIndex-=1)})),Ho(Uo,Ae.a.UI_HIDE_ITEM,(function(e){e.itemDetailVisible=!1,e.currentItemType="",e.currentItemID="",e.isItemBrowsing=!1,e.items=[]})),Ho(Uo,Ae.a.UI_RESET_BROWSING,(function(e){e.isItemBrowsing=!1})),Ho(Uo,Ae.a.UI_UPDATE_RECORD_PANEL,(function(e,t){var n=t.payload,r=n.status,i=n.channelID,a=n.workspaceID,o=n.folderID,s=n.isSpaceOwner;e.showRecordPanel=r,e.isRecording||(e.channelID=i||"",e.workspaceID=a||"",e.folderID=o||"",e.isSpaceOwner=s||!1)})),Ho(Uo,Ae.a.UI_IS_RECORDING,(function(e,t){var n=t.payload.isRecording;e.isRecording=n})),Uo));const Go=Fo;var Vo;function Bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(n),!0).forEach((function(t){zo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ko=(0,a.Lq)({isLoading:!1,isLoadingPermission:!1,info:{},premium:{},permissions:{},counts:{},passwordSet:!0,isLoaded:!1},(zo(Vo={},Ae.a.USER_LOAD_INFO,(function(e,t){return Wo(Wo({},e),{},{isLoading:!1,isLoaded:!0},t.payload.data)})),zo(Vo,Ae.a.USER_LOAD_INFO_LOADING,(function(e){return Wo(Wo({},e),{},{isLoading:!0})})),zo(Vo,Ae.a.USER_AVATAR_REFRESH,(function(e){var t=e.info.avatarURL;if(t)if(/\?t=/.test(t)){var n=t.match(/(.*)\?t=/)[1];e.info.avatarURL=n+"?t="+(new Date).getTime()}else e.info.avatarURL=t+"?t="+(new Date).getTime();else e.info.avatarURL="/web/user/avatar/"+Number(e.info.uid)%100+"/"+e.info.uid+"?t="+(new Date).getTime()})),zo(Vo,Ae.a.USER_CLICK_FIVE_STAR,(function(e){e.permissions.showChromeFiveStar=!1})),zo(Vo,Ae.a.USER_PERMISSION_LOADING,(function(e){e.isLoadingPermission=!0})),zo(Vo,Ae.a.USER_PERMISSION_RECEIVE,(function(e,t){var n=t.payload,r=n.permissions,i=n.counts;e.permissions=r,e.counts=i})),Vo));var $o,qo,Yo,Jo,Qo={isLoading:!1,theme:($o=z.Z.get("screenshot_personal_user_theme"),"1"===$o?"dark":"0"===$o?"light":"2"===$o?"auto":"light")};const Xo=(0,a.Lq)(Qo,(qo={},Yo=Ae.a.SETTING_THEME_CHANGE,Jo=function(e,t){e.theme=t.payload},Yo in qo?Object.defineProperty(qo,Yo,{value:Jo,enumerable:!0,configurable:!0,writable:!0}):qo[Yo]=Jo,qo));var es;function ts(e){return function(e){if(Array.isArray(e))return ns(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ns(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ns(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rs(e){return rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rs(e)}function is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?is(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function os(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ss={videos:{},sort:z.Z.get("video_sort")||"create",scrollTop:0,page:0,activeVideos:{isLoading:!1,videoIDList:[],isSubPageLoading:!1,subPage:0,isEnd:!1,totalCount:0,pageSize:0,page:0},inactiveVideos:{isLoading:!1,videoIDList:[],totalCount:0,pageSize:0,page:0}},cs=(0,a.Lq)(ss,(os(es={},Ae.a.VIDEO_LOADING_ANNOTATIONS,(function(e,t){return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,as(as({},e.videos[t.payload.id]),{},{isAnnsActionLoading:!0})))})})),os(es,Ae.a.VIDEO_LOADED_ANNOTATIONS,(function(e,t){var n=t.payload.actions;return"object"==rs(n)&&n.actions&&(n=n.actions),"string"==typeof n&&(n=JSON.parse(n)),Array.isArray(n)?as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,as(as({},e.videos[t.payload.id]),{},{isAnnsActionLoading:!1,actionVersion:t.payload.version,baseVersion:t.payload.baseVersion,annActions:n})))}):as({},e)})),os(es,Ae.a.VIDEO_RECEIVED,(function(e,t){var n=t.payload.videos,r=as({},e.videos);return n.forEach((function(e){r[e.id]={isLoading:!1,info:e}})),as(as({},e),{},{videos:r})})),os(es,Ae.a.VIDEO_MOVE,(function(e,t){var n=t.payload,r=n.folderID,i=n.videos,a=n.folderName,o=as({},e.videos);return i.forEach((function(e){o[e.id]=as(as({},o[e.id]),{},{info:as(as({},o[e.id].info),{},{folderID:r,folderName:a})})})),as(as({},e),{},{videos:o})})),os(es,Ae.a.VIDEO_RENAME,(function(e,t){var n=t.payload,r=n.id,i=n.name,a=e.videos;return a[r].title=i,as(as({},e),{},{videos:a})})),os(es,Ae.a.VIDEO_INFO_LOADING,(function(e,t){return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,as(as({},e.videos[t.payload.id]),{},{isLoading:!0})))})})),os(es,Ae.a.VIDEO_SCROLL_UPDATE,(function(e,t){var n=t.payload;return as(as({},e),{},{scrollTop:n})})),os(es,Ae.a.VIDEO_LOAD_INFO,(function(e,t){return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,as(as({},e.videos[t.payload.id]),{},{isLoading:!1,loaded:!0,error:t.payload.error?t.payload.error:null,info:t.payload.data.video?as(as({planName:t.payload.data.planName},t.payload.data.video),{},{visitRestrict:t.payload.data.visitRestrict,restrictCanClose:t.payload.data.restrictCanClose,isChannelMember:t.payload.data.isChannelMember,channelItemId:t.payload.data.channelItemId}):{}})))})})),os(es,Ae.a.VIDEO_LOAD_ACTIVE_LIST,(function(e,t){var n=t.payload,r=n.videos,i=n.total,a=n.page;if(null==r)return as(as({},e),{},{activeVideos:as(as({},e.activeVideos),{},{videoIDList:null,isLoading:!1})});var o=[],s=as({},e.videos);r.forEach((function(e){o.push(e.id),s[e.id]={isLoading:!1,info:e}}));var c="create"===e.sort?r[r.length-1].createdSec:r[r.length-1].updatedSec;return as(as({},e),{},{videos:s,page:a,activeVideos:as(as({},e.activeVideos),{},{isLoading:!1,isEnd:!1,subPage:0,videoIDList:o,totalCount:i,lastTimestamp:c,page:a})})})),os(es,Ae.a.VIDEO_LIST_LOAD_MORE,(function(e,t){var n=t.payload.videos;if(null===n)return as(as({},e),{},{activeVideos:as(as({},e.activeVideos),{},{isSubPageLoading:!1,isEnd:!0})});var r=n.map((function(e){return e.id})),i=as({},e.videos);n.forEach((function(e){i[e.id]={isLoading:!1,info:e}}));var a="create"===e.sort?n[n.length-1].createdSec:n[n.length-1].updatedSec;return as(as({},e),{},{videos:i,activeVideos:as(as({},e.activeVideos),{},{videoIDList:[].concat(ts(e.activeVideos.videoIDList),ts(r)),lastTimestamp:a,isSubPageLoading:!1,subPage:e.activeVideos.subPage+1})})})),os(es,Ae.a.VIDEO_LIST_SUB_LOADING,(function(e){return as(as({},e),{},{activeVideos:as(as({},e.activeVideos),{},{isSubPageLoading:!0})})})),os(es,Ae.a.VIDEO_ACTIVE_LIST_LOADING,(function(e){return as(as({},e),{},{activeVideos:as(as({},e.activeVideos),{},{isLoading:!0})})})),os(es,Ae.a.VIDEO_LOAD_INACTIVE_LIST,(function(e,t){var n=t.payload.data,r=n.videos,i=n.total,a=n.page,o=n.pageSize,s=[],c=as({},e.videos);return r.forEach((function(e){s.push(e.id),c[e.id]={isLoading:!1,info:e}})),as(as({},e),{},{videos:c,page:a,scrollTop:0,inactiveVideos:{isLoading:!1,videoIDList:s,totalCount:i,page:a,pageSize:o}})})),os(es,Ae.a.VIDEO_INACTIVE_LIST_LOADING,(function(e){return as(as({},e),{},{inactiveVideos:as(as({},e.inactiveVideos),{},{isLoading:!0})})})),os(es,Ae.a.VIDEO_DELETE_MULTIPLE,(function(e,t){var n=t.payload,r=e.videos,i=e.activeVideos.videoIDList,a=e.inactiveVideos.videoIDList;n.forEach((function(t){var n=e.videos[t.id].info;if(n.canVisit)if((0,he.Jp)(i,n.id),a.length>0){var o=a[0];i.push(o),a.splice(0,1),e.inactiveVideos.totalCount=e.inactiveVideos.totalCount-1;var s=r[o];s.info.canVisit=!0,r[o]=s}else e.activeVideos.totalCount=e.activeVideos.totalCount-1;else(0,he.Jp)(a,n.id),e.inactiveVideos.totalCount=e.inactiveVideos.totalCount-1;delete r[n.id]}))})),os(es,Ae.a.VIDEO_DELETED,(function(e,t){var n,r=t.payload,i=e.videos,a=e.activeVideos,o=e.inactiveVideos;if(i[r].info.canVisit){var s=e.activeVideos.videoIDList.slice(0).filter((function(e){return e!==r})),c=a.totalCount-1,l=e.inactiveVideos.videoIDList.slice(0),u=e.inactiveVideos.totalCount;if(l.length>0){var d=l[0];s.push(d),c+=1,l.splice(0,1),u-=1;var f=i[d];f.info.canVisit=!0,i[d]=f}n=as(as({},e),{},{videos:i,activeVideos:as(as({},a),{},{videoIDList:s,totalCount:c}),inactiveVideos:as(as({},o),{},{videoIDList:l,totalCount:u})})}else n=as(as({},e),{},{inactiveVideos:as(as({},o),{},{videoIDList:o.videoIDList.filter((function(e){return e!==r})),totalCount:o.totalCount-1})});return delete i[r],n})),os(es,Ae.a.VIDEO_GENERATE_SHARE_LINK_LOADING,(function(e,t){var n=e.videos[t.payload.id];return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,as(as({},n),{},{isGenerateShareLinkLoading:!0})))})})),os(es,Ae.a.VIDEO_GENERATE_SHARE_LINK_FAILED,(function(e,t){var n=e.videos[t.payload.id];return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,as(as({},n),{},{isGenerateShareLinkLoading:!1})))})})),os(es,Ae.a.VIDEO_GENERATE_SHARE_LINK,(function(e,t){var n=e.videos[t.payload.id];return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,{isGenerateShareLinkLoading:!1,info:as(as({},n.info),{},{shareURI:t.payload.shareURI,shareKey:t.payload.shareKey})}))})})),os(es,Ae.a.VIDEO_REVOKE_SHARE_LINK,(function(e,t){return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,as(as({},e.videos[t.payload.id]),{},{isGenerateShareLinkLoading:!1,info:as(as({},e.videos[t.payload.id].info),{},{shareURI:""})})))})})),os(es,Ae.a.VIDEO_EDIT_TITLE_LOADING,(function(e,t){return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,as(as({},e.videos[t.payload.id]),{},{isEditTitleLoading:!0})))})})),os(es,Ae.a.VIDEO_EDIT_TITLE,(function(e,t){return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,as(as({},e.videos[t.payload.id]),{},{isEditTitleLoading:!1,isOpenEditTitle:!1,info:as(as({},e.videos[t.payload.id].info),{},{title:t.payload.title})})))})})),os(es,Ae.a.VIDEO_OPEN_EDIT_TITLE,(function(e,t){return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,as(as({},e.videos[t.payload.id]),{},{isOpenEditTitle:!0})))})})),os(es,Ae.a.VIDEO_HIDE_EDIT_TITLE,(function(e,t){return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,as(as({},e.videos[t.payload.id]),{},{isOpenEditTitle:!1})))})})),os(es,Ae.a.VIDEO_CHANGE_SORT,(function(e,t){var n=t.payload;return as(as({},e),{},{sort:n})})),os(es,Ae.a.VIDEO_SET_COMPLETE_DONE,(function(e,t){return as(as({},e),{},{videos:as(as({},e.videos),{},os({},t.payload.id,{isLoading:!1,info:t.payload.info}))})})),os(es,Ae.a.VIDEO_PAGE_UPDATE,(function(e){return as(as({},e),{},{page:-1})})),os(es,Ae.a.VIDEO_LIST_RESTORE,(function(e){return as(as({},e),{},{page:-1,activeVideos:as(as({},e.activeVideos),{},{page:-1})})})),os(es,Ae.a.VIDEO_MOVE_TO_CHANNEL,(function(e,t){t.payload.forEach((function(t){e.videos[t.id]&&(e.videos[t.id].info=t)}))})),os(es,Ae.a.ITEM_LOADED_RESET,(function(e){for(var t in e.videos)e.videos[t].loaded&&(e.videos[t].loaded=!1)})),es));const ls=cs;var us;function ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(n),!0).forEach((function(t){ms(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hs=(0,a.Lq)({workspaces:[],currentWorkspaceID:"",myWorkspaceIDList:[],workspaceAllChannelIDList:[],workspaceAllMembers:[],myWorkspaceHash:{},channelHash:{},isCreating:!1,isCreatingChannel:!1,isLoading:!1,isLoadingAllMembers:!1,loaded:!1,memberLoadedID:"",isChannelLoading:!1},(ms(us={},Ae.a.WORKSPACE_CREATE,(function(e){e.isCreating=!1})),ms(us,Ae.a.WORKSPACE_CREATING,(function(e){e.isCreating=!0})),ms(us,Ae.a.WORKSPACE_LOAD,(function(e,t){var n=t.payload,r={},i={};e.myWorkspaceIDList=n.map((function(e){return e.id}));for(var a=0;a<n.length;a++){for(var o=n[a],s=0;s<o.channels.length;s++)i[o.channels[s].id]=o.channels[s];o.channels=o.channels.map((function(e){return e.id})),r[o.id]=o}e.myWorkspaceHash=r,e.channelHash=fs(fs({},e.channelHash),i),e.isLoading=!1,e.loaded=!0})),ms(us,Ae.a.WORKSPACE_CHANNEL_LOADING,(function(e){e.isChannelLoading=!0})),ms(us,Ae.a.WORKSPACE_CHANNEL_LOAD,(function(e,t){var n=t.payload,r={};n.forEach((function(e){r[e.id]=e})),e.workspaceAllChannelIDList=n.map((function(e){return e.id})),e.channelHash=fs(fs({},e.channelHash),r),e.isChannelLoading=!1})),ms(us,Ae.a.WORKSPACE_LOADING,(function(e){e.isLoading=!0})),ms(us,Ae.a.CHANNEL_CREATE,(function(e,t){var n=t.payload,r=n.workspaceID,i=n.channel;e.isCreatingChannel=!1,e.channelHash[i.id]=i,e.myWorkspaceHash[r].channels.push(i.id),e.currentWorkspaceID===r&&e.workspaceAllChannelIDList.push(i.id)})),ms(us,Ae.a.CHANNEL_CREATING,(function(e){e.isCreatingChannel=!0})),ms(us,Ae.a.CHANNEL_META_EDIT,(function(e,t){var n=t.payload,r=n.channelID,i=n.type,a=n.value,o=e.channelHash[r];"name"===i?o.name=a:"desc"===i&&(o.description=a)})),ms(us,Ae.a.WORKSPACE_MEMBER_LOAD,(function(e,t){var n=t.payload,r=n.members,i=n.workspaceID;e.workspaceAllMembers=r,e.isLoadingAllMembers=!1,e.memberLoadedID=i})),ms(us,Ae.a.WORKSPACE_MEMBER_LOADING,(function(e){e.isLoadingAllMembers=!0})),ms(us,Ae.a.WORKSPACE_META_EDIT,(function(e,t){var n=t.payload,r=n.workspaceID,i=n.type,a=n.value,o=e.myWorkspaceHash[r];"name"===i?o.name=a:"desc"===i&&(o.description=a)})),ms(us,Ae.a.CHANNEL_JOIN,(function(e,t){var n=t.payload;e.channelHash[n].isMember=!0,e.channelHash[n].userCount+=1})),ms(us,Ae.a.WORKSPACE_ENTER,(function(e,t){e.currentWorkspaceID=t.payload})),ms(us,Ae.a.WORKSPACE_CHANGE_ROLE,(function(e,t){var n=t.payload,r=n.memberID,i=n.role,a=e.workspaceAllMembers.findIndex((function(e){return e.userID===r}));e.workspaceAllMembers[a].role=i})),ms(us,Ae.a.CHANNEL_LEAVE,(function(e,t){var n=t.payload.channelID;e.channelHash[n].isMember=!1,e.channelHash[n].userCount-=1})),ms(us,Ae.a.WORKSPACE_LEAVE,(function(e,t){var n=t.payload;e.myWorkspaceIDList=e.myWorkspaceIDList.filter((function(e){return e!==n}))})),ms(us,Ae.a.WORKSPACE_MEMBER_REMOVE,(function(e,t){var n=t.payload;e.workspaceAllMembers=e.workspaceAllMembers.filter((function(e){return e.userID!==n}))})),ms(us,Ae.a.WORKSPACE_INFO_LOAD,(function(e,t){var n=t.payload;e.myWorkspaceHash[n.id]=n;for(var r=0;r<n.channels.length;r++)e.channelHash[n.channels[r].id]=n.channels[r];n.channels=n.channels.map((function(e){return e.id}))})),us));const ps=hs,vs=(0,ma.UY)({user:Ko,destination:Ta,connectedAccount:Da,team:Po,plan:mo,video:ls,item:no,folder:Fa,image:qa,multipleSelect:ao,trash:Zo,search:xo,comment:Na,shared:Eo,userSetting:Xo,workspace:ps,channel:xa,notification:co,ui:Go,downloadList:ka});"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js")}));var ys=(0,a.xC)({reducer:vs});r.render((0,x.jsx)(i.zt,{store:ys,children:(0,x.jsx)(re.VK,{children:(0,x.jsx)(da,{})})}),document.getElementById("app"))},43313:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Re});n(38920);var r=n(32787),i=(n(3381),n(16114)),a=(n(5e3),n(28682)),o=(n(94969),n(45777)),s=(n(38691),n(71577)),c=(n(94507),n(48086)),l=(n(76752),n(58634)),u=(n(37135),n(48889)),d=n(41609),f=n.n(d),m=n(67294),h=n(1870),p=n(44545),v=n(79508),y=n(57119),g=n(56262),b=n(21807),j=n(65497),x=n(56010),w=n(63015),I=n(97474),S=n(91829),N=n(18282),O=n(80442),E=n(7085),D=n(94184),A=n.n(D),C=n(45697),T=n.n(C),P=n(96774),_=n.n(P),k=n(84141),L=n(66140),R=n(35552),M=n(61988),Z=n(85893);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var i=B(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return V(this,n)}}function V(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(a,e);var t,n,r,i=G(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).handlePlayerPause=function(){t.playerRef.current.pause()},t.getCurrentTime=function(){return t.playerRef.current.getCurrentTime()},t.handleSeekTo=function(e){t.state.isPlaying||t.setState({isPlaying:!0}),t.playerRef.current.playVideo(),t.playerRef.current.seekTo(e)},t.handlerPlayVideo=function(){t.props.increaseView(),t.setState({isPlaying:!0}),t.playerRef.current.playVideo()},t.handleVideoInit=function(e){t.player=e},t.state={isPlaying:!1},t.playerRef=(0,m.createRef)(),t}return t=a,(n=[{key:"shouldComponentUpdate",value:function(e,t){if(this.state.isPlaying!==t.isPlaying||this.props.dataManager!==e.dataManager||this.props.annsHash!==e.annsHash)return!0;if(!_()(this.props.comments,e.comments))return!0;var n=this.props.fileURI||"",r=e.fileURI||"";if(this.props.showPrepareTip!==e.showPrepareTip)return!0;if(""===n&&""!==r)return!0;var i=this.props.thumbnailURI||"",a=e.thumbnailURI||"";return""===i&&""!==a}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=A()("video-player-wrapper",{playing:this.state.isPlaying});return(0,Z.jsxs)("div",{className:t,children:[(!this.props.fileURI||this.props.showPrepareTip)&&(0,Z.jsxs)("div",{id:"video-thumbnail-div",className:"video-thumbnail-div",children:[(0,Z.jsx)("img",{src:this.props.thumbnailURI,className:"video-thumbnail"}),(0,Z.jsx)("div",{className:"thumbnail-default-image"}),(0,Z.jsx)("div",{className:"dark-bg"}),this.props.fileURI&&!this.props.showPrepareTip?(0,Z.jsx)("div",{className:"play",onClick:this.handlerPlayVideo,children:(0,Z.jsx)(R.o1,{})}):(0,Z.jsx)("div",{children:this.props.showPrepareTip?(0,Z.jsxs)("div",{className:"loading-box",children:[(0,Z.jsx)(E.Z,{className:"loading"}),(0,Z.jsxs)("div",{className:"loading-text",children:[k.Z.webmSupport()?"Preparing":"Converting"," ","your video..."]}),k.Z.isPrevSafari()&&(0,Z.jsx)("div",{className:"browser-tip",children:"Please wait for converting or use chrome to watch immediately"})]}):""})]}),this.props.fileURI?(0,Z.jsx)(L.Z,{src:this.props.fileURI,thumbnailURI:this.props.thumbnailURI,duration:this.props.duration,ref:this.playerRef,comments:this.props.comments,handleReactionIconAnimationEnd:this.props.handleReactionIconAnimationEnd,handleAddReaction:this.props.handleAddReaction,handleScrollToComment:this.props.handleScrollToComment,handleVideoTimeChange:this.props.handleVideoTimeChange,handleToggleTheaterMode:this.props.toggleTheaterMode,increaseView:this.props.increaseView,replayLayer:this.props.replayLayer,annotationLayer:function(t,n){return(0,Z.jsx)(M.Z,{videoID:e.props.videoId,videoDimension:n,baseVersion:e.props.baseVersion,shareKey:e.props.shareKey,isOnlyBlurProcessing:e.props.isOnlyBlurProcessing,currentSec:t})}},this.props.videoId):""]})}}])&&H(t.prototype,n),r&&H(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(m.Component);W.propTypes={fileURI:T().string,thumbnailURI:T().string,showPrepareTip:T().bool};const z=W;var K=n(16514),$=n(96974),q=n(39711),Y=(n(31955),n(20495)),J=(n(69807),n(85986)),Q=(n(81361),n(12028));function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const ie=function(e){var t=ne((0,m.useState)(!1),2),n=t[0],r=t[1],i=A()("copy-btn",{copied:n});return(0,Z.jsx)(s.Z,ee(ee({},e),{},{className:i,onClick:function(){r(!0),(0,x.zp)(e.text),setTimeout((function(){r(!1)}),1500)},children:n?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(R.TI,{}),"Copied!"]}):"Copy"}))};function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r.Z.TextArea;function ue(e){var t=ae((0,m.useState)(!0),2),n=t[0],r=t[1],i=ae((0,m.useState)(360),2),a=i[0],o=i[1],s=ae((0,m.useState)(640),2),c=s[0],l=s[1],u="/embed?id=".concat(e.id,"&shareKey=").concat(e.shareKey)+(n?"":"&info=false"),d="<iframe frameBorder='0' width='".concat(c,"' height='").concat(a,"' webkitallowfullscreen mozallowfullscreen allowfullscreen src=\"https://www.awesomescreenshot.com").concat(u,'"></iframe>');return(0,Z.jsxs)("div",{className:"embed-code-panel",children:[(0,Z.jsx)("div",{className:"preview",children:(0,Z.jsx)("iframe",{frameBorder:"0",width:"540",height:"300",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0,src:u})}),(0,Z.jsxs)("div",{className:"settings",children:[(0,Z.jsxs)("div",{className:"title",children:[(0,Z.jsx)(R.FL,{}),"Embeded Code"]}),(0,Z.jsxs)("div",{className:"code-area",children:[(0,Z.jsxs)("div",{className:"code-option",children:["Show Basic informations",(0,Z.jsx)("div",{className:"option-action",children:(0,Z.jsx)(Q.Z,{className:"info-switch",defaultChecked:!0,onChange:function(e){r(e)}})})]}),(0,Z.jsxs)("div",{className:"code-option",children:["Size",(0,Z.jsxs)("div",{className:"option-action",children:[(0,Z.jsx)(J.Z,{value:c,style:{width:"70px"},size:"small",onChange:l})," ","X"," ",(0,Z.jsx)(J.Z,{value:a,style:{width:"70px"},size:"small",onChange:o})]})]}),(0,Z.jsx)("div",{className:"code-preview",children:d})]}),(0,Z.jsx)(ie,{type:"primary",className:"copy-btn",size:"large",block:!0,text:d})]})]})}const de=function(e){return(0,Z.jsx)(u.Z,{visible:e.visible,onCancel:e.onCancel,destroyOnClose:!0,footer:null,maskClosable:!1,className:"embed-code-modal",closeIcon:(0,Z.jsx)(R.Tw,{style:{fontSize:"12px"}}),children:(0,Z.jsx)(ue,ce({},e))})};var fe=n(52471),me=n(3741),he=n(8690),pe=n(17662),ve=n(28045),ye=n(26),ge=n(18621),be=n(51889);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){we(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ie(e){var t=e.handleWebmDownload,n=(0,$.s0)();return(0,Z.jsxs)("div",{className:"download-webm-panel",children:[(0,Z.jsx)("div",{className:"title",children:"Download in webm"}),(0,Z.jsxs)("div",{className:"content",children:[" ","Download in MP4 to enjoy benefits like widely accepted by multiple platforms."]}),(0,Z.jsxs)("div",{style:{marginTop:"20px"},children:[(0,Z.jsx)("div",{style:{marginBottom:"10px"},children:(0,Z.jsx)(s.Z,{type:"primary",block:!0,onClick:t,children:"Download in webm"})}),(0,Z.jsx)(s.Z,{type:"primary",block:!0,onClick:function(){n("/pricing?from=download-duration-webm")},children:"Upgrade to download in MP4"})]})]})}const Se=function(e){return(0,Z.jsx)(be.Z,{visible:e.visible,onCancel:e.onCancel,children:(0,Z.jsx)(Ie,xe({},e))})};var Ne=n(38547),Oe=n(74998),Ee=n(63611),De=n(73078),Ae=n(56244);function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pe=u.Z.confirm,_e=l.Z.TabPane,ke=!1;var Le={loadUserInfo:j.Lk,loadVideoInfo:b.cb,convertVideoToMP4Action:b.XH,generateShareLinkAction:b.i9,revokeShareLinkAction:b.DI,editTitleAction:b.mU,openEditTitleAction:b.OS,hideEditTitleAction:b.O1,deleteVideoAction:b.$J,moveToTrash:Y.B0,createComment:he.Yr,removeCommentAnimation:he.L9,loadComments:he.KT,deleteChannelItem:ye.FO,hideItemAction:fe.td};const Re=(0,De.Z)((0,g.$j)((function(e,t){var n=t.id||t.router.params.videoID;return{currentPlan:e.user.premium.currentPlan,counts:e.user.counts,permissions:e.user.permissions,userInfo:e.user.info,isUserLoaded:e.user.isLoaded,isUserLoading:e.user.isLoading,video:(0,w.yl)(e,n),comments:e.comment.comments[K.Z$.video+n]||[],total:e.user.counts?e.user.counts.video:0,videoTotalAllCreated:e.user.counts?e.user.counts.videoTotalAllCreated:0}}),Le)((function(e){var t=e.isModal,n=e.id,d=e.shareKey,g=e.loadUserInfo,b=e.loadVideoInfo,j=e.loadComments,w=e.video,E=e.currentPlan,D=e.permissions,A=e.userInfo,C=e.isUserLoaded,T=e.comments,P=e.convertVideoToMP4Action,_=e.generateShareLinkAction,L=e.revokeShareLinkAction,M=e.moveToTrash,U=e.createComment,H=e.removeCommentAnimation,F=e.deleteChannelItem,G=e.hideModal,V=e.isBrowsing,B=e.counts,W=Ce((0,m.useState)(!1),2),Y=W[0],J=W[1],Q=Ce((0,m.useState)(!1),2),X=Q[0],ee=Q[1],te=Ce((0,m.useState)(!1),2),ne=te[0],re=te[1],ie=Ce((0,m.useState)(!1),2),ae=ie[0],oe=ie[1],se=Ce((0,m.useState)(!0),2),ce=(se[0],se[1]),le=Ce((0,m.useState)(!1),2),ue=le[0],fe=le[1],he=Ce((0,m.useState)(!1),2),ye=he[0],be=he[1],je=Ce((0,m.useState)(!1),2),xe=je[0],we=je[1],Ie=Ce((0,m.useState)(!1),2),De=Ie[0],Te=Ie[1],Le=Ce((0,m.useState)(!1),2),Re=Le[0],Me=Le[1],Ze=Ce((0,m.useState)(1580),2),Ue=Ze[0],He=Ze[1],Fe=Ce((0,m.useState)(300),2),Ge=Fe[0],Ve=Fe[1],Be=Ce((0,m.useState)("0"),2),We=Be[0],ze=Be[1],Ke=Ce((0,m.useState)("0"),2),$e=Ke[0],qe=Ke[1],Ye=Ce((0,m.useState)(!1),2),Je=Ye[0],Qe=Ye[1],Xe=Ce((0,m.useState)(!1),2),et=Xe[0],tt=Xe[1],nt=Ce((0,m.useState)(!1),2),rt=nt[0],it=nt[1],at=Ce((0,m.useState)(!1),2),ot=at[0],st=at[1],ct=Ce((0,m.useState)(!1),2),lt=ct[0],ut=ct[1];(0,Ee.Z)(w.info&&!t?w.info.title:"");var dt=(0,m.useRef)(),ft=(0,m.useRef)(),mt=(0,m.useRef)(),ht=(0,m.useRef)(),pt=(0,m.useRef)(),vt=(0,m.useRef)(),yt=(0,m.useRef)(),gt=(0,$.UO)(),bt=(0,$.s0)(),jt=(0,$.TH)(),xt=(0,Oe.Z)(),wt=t?n:gt.videoID,It=t?d:xt.get("key"),St=(0,Ne.Z)(w.isLoading),Nt=(0,Ne.Z)(w.info?w.info.visitRestrict:void 0),Ot=(0,Ne.Z)(E),Et=(0,Ne.Z)(wt);function Dt(e,t){if(window.innerHeight!==window.lastHeight||t){var n=window.innerHeight,r=Math.min(1580,(n-182)/.5625+360);window.lastHeight=window.innerHeight,He(r),Ve(.5625*(r-360)-12)}else Ve(.5625*(dt.current.offsetWidth-360)-12)}function At(){var e=w.info;e&&e.canVisit&&"awecon"!=xt.f&&(0,I.ovQ)(e.id)}function Ct(){Qe((function(e){return e?vt.current.prepend(ht.current):pt.current.appendChild(ht.current),!e})),document.scrollingElement.scrollTop=0}function Tt(){var e=w.info||{};return!f()(e)&&(!1===e.s3Available||!k.Z.webmSupport()&&!1===e.mp4Available)}function Pt(){if(D.allowVideoEditor){var e=E&&("free"===E.PlanName||"basic"===E.PlanName);parseInt(w.info.durationSecond)>3600&&e?it(!0):bt("/veditor/".concat(w.info.id),t?{state:{isModal:!0}}:{state:{inApp:!0}})}else Te(!0)}function _t(e){"2"!==$e&&"0"!==$e?(qe("2"),setTimeout((function(){mt.current.scrollTo(e)}),300)):mt.current.scrollTo(e)}function kt(e){qe(e)}function Lt(){if(w.info.visitRestrict)ut(!0);else{var e=E&&("free"===E.PlanName||"basic"===E.PlanName);parseInt(w.info.durationSecond)<3600||!e?ee(!0):st(!0)}}function Rt(){oe(!0)}function Mt(){Pe({title:"Do you want to delete recording?",content:"",onOk:function(){var e=w.info;e.channel?F({workspaceID:e.channel.workspaceID,channelID:e.channel.id,itemID:e.id,id:e.channelItemId,itemType:e.itemType},(function(){t?G():bt("/workspace/"+e.channel.workspaceID+"/"+e.channel.id)})):M([w.info])},okText:"Yes, delete",okType:"danger",onCancel:function(){}})}function Zt(){w.info.visitRestrict?ut(!0):_(w.info.id)}function Ut(){Pe({title:"Are you sure to revoke share link?",okType:"danger",okText:"Yes, revoke",onOk:function(){L(w.info.id)}})}function Ht(){window.open("https://chrome.google.com/webstore/detail/awesome-screenshot-screen/nlipoenfbbikpbjkfpfillcgkoblgpmj")}function Ft(e){ft.current.handleSeekTo(e)}function Gt(){ft.current.handlePlayerPause();var e=ft.current.getCurrentTime()+"";ze(e)}function Vt(e){mt.current&&mt.current.getIsShowInput()&&ze(e+"")}function Bt(e){if(Tt())c.ZP.warning("Please wait until the video is ready.");else{var t=ft.current.getCurrentTime()+"";U("1",w.info.id,e,"1",t)}}function Wt(e){H({itemType:K.Z$.video,itemId:w.info.id,id:e})}function zt(){if(t){var e={itemType:"video",id:w.info.id,shareKey:It};localStorage.restore_modal=JSON.stringify(e)}window.location.href="/signin?redirect="+window.location.href}function Kt(){if(document.querySelector("#aws-chrome-installed")||!k.Z.isChrome()||k.Z.isSmallMobile())return null;var e=/Edg/.test(window.navigator.userAgent);return(0,Z.jsxs)("div",{className:"ext-promotion",children:[(0,Z.jsx)("div",{className:"text",children:"Want to take and share a recording like Add the extension to get started!"}),(0,Z.jsxs)(s.Z,{block:!0,className:"ext-promotion-btn",type:"primary",icon:e?(0,Z.jsx)(R.xY,{}):(0,Z.jsx)(R.eL,{}),onClick:x.nV.bind(null,"video-shared-player-click"),children:["Add to ",e?"Edge":"Chrome"]})]})}(0,m.useEffect)((function(){g(),/limit/.test(window.location.search)&&Me(!0);var e=setTimeout((function(){(0,x.LB)()||!k.Z.isChrome()||k.Z.isMobile()||ce(!0)}),1e3);return window.lastHeight=window.innerHeight,Dt(null,!0),window.addEventListener("resize",Dt,!1),function(){clearTimeout(e),window.removeEventListener("resize",Dt,!1)}}),[]),(0,m.useEffect)((function(){void 0===w.info&&!1===St&&Et===wt&&(t?G():jt.state&&jt.state.inApp?bt(-1):bt("/my_items"))}),[w.isLoading,w]),(0,m.useEffect)((function(){!E||"free"!==E.PlanName&&"basic"!==E.PlanName||!w.info||void 0!==Ot&&void 0!==Nt||!w.info.visitRestrict||ut(!0)}),[w,E]),(0,m.useEffect)((function(){V&&void 0!==w.info&&w.loaded||(b(wt,It),j(K.Z$.video,wt,It))}),[wt,It]),(0,m.useEffect)((function(){var e=w.info||{};if(e.canVisit&&!0!==e.failed)if(ke||w.isLoading||!1!==e.s3Available)if(ke||w.isLoading||!(e.isMP4Requested&&!e.mp4Available||e.isDownloadWithAnnRequested)||!1!==e.downloadAvailable)!ke&&e.isEditProcessing?(ke=!0,setTimeout((function(){b(e.id,e.shareKey,!0),ke=!1}),1500)):ke||!k.Z.isIOS()&&!k.Z.isPrevSafari()||void 0===w.info.id||w.info.mp4Available||(ke=!0,setTimeout((function(){b(e.id,e.shareKey,!0),ke=!1}),3e3));else{ke=!0;var t=5;0==e.queueLength&&0==e.queueWaitMin?t=5:0==e.queueLength&&e.queueWaitMin>0?t=(t=60*e.queueWaitMin/8+2)<20?t:20:e.queueLength>0&&(t=(t=60*e.queueWaitMin/3)<60?t:60),setTimeout((function(){b(e.id,e.shareKey,!0),ke=!1}),1e3*t)}else ke=!0,setTimeout((function(){b(e.id,e.shareKey,!0),ke=!1}),500);return function(){}}),[w]),(0,m.useEffect)((function(){void 0===A.uid&&C&&(0,x.Zf)(g)}),[A,C]);var $t=void 0===w.info||(V?!w.loaded:w.isLoading),qt=w.info||{},Yt=void 0===qt.id,Jt=A.uid+""!==qt.userID&&!qt.isChannelMember,Qt=void 0!==A.uid&&void 0!==qt.canVisit?!1===qt.canVisit&&!Jt:void 0,Xt=void 0!==qt.canVisit&&(!1===qt.canVisit&&Jt&&(!1===Qt||void 0===Qt)),en=E&&("free"===E.PlanName||"basic"===E.PlanName)&&parseInt(B.video)>=.75*B.videoLimitation&&parseInt(B.video)<B.videoLimitation,tn=E&&("free"===E.PlanName||"basic"===E.PlanName)&&parseInt(B.video)>=B.videoLimitation,nn=w.info&&("free"===w.info.planName||"basic"===w.info.planName)&&qt.queueLength>3,rn=function(e){return e.isEditProcessing||e.isOnlyBlurProcessing?{step:"wait",img:(0,Z.jsx)("div",{className:"video-img-processing",children:(0,Z.jsx)("div",{className:"loading"})}),title:"Edit processing...",content:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("span",{children:["The changes you made earlier are still being processed."," "]}),(0,Z.jsx)("br",{}),(0,Z.jsx)("span",{children:"video is unavailable for download now. Please try again later."})]})}:e.downloadAvailable?{step:"download",img:(0,Z.jsx)("div",{className:"video-img download"}),title:"The MP4 file is ready for download."}:e.mp4InQueue||e.isMP4Requested&&!e.mp4Available||e.isDownloadWithAnnRequested||ne?e.mp4InQueue?e.queueLength||e.queueWaitMin?e.queueLength?{step:"wait",title:"Waiting for conversion",img:(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("div",{className:"video-img wait",children:(0,Z.jsxs)("div",{className:"waiting",children:[(0,Z.jsx)("div",{className:"dot"}),(0,Z.jsx)("div",{className:"dot"}),(0,Z.jsx)("div",{className:"dot"}),(0,Z.jsx)("div",{className:"dot"}),(0,Z.jsx)("div",{className:"dot"}),(0,Z.jsx)("div",{className:"dot"})]})})}),content:(0,Z.jsxs)("span",{children:["There are ",e.queueLength," ",e.queueLength>1?"videos":"video"," in the"," ",nn?"regular ":"priority ","queue before this video.",(0,Z.jsx)("br",{})," It will take about ",e.queueWaitMin," ",e.queueWaitMin>1?"minutes":"minute",".",nn&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("br",{}),(0,Z.jsx)("br",{}),(0,Z.jsx)("a",{href:"/pricing?from=priority_queue",target:"_blank",children:"Upgrade to Pro"})," ","to join the priority queue for faster conversion."]})]})}:{step:"converting",title:"Converting...",img:(0,Z.jsx)("div",{className:"video-img converting",children:(0,Z.jsx)("div",{className:"loading"})}),content:(0,Z.jsxs)("span",{children:["Converting video. It will take about ",e.queueWaitMin," ",e.queueWaitMin>1?"minutes":"minute","."]})}:{step:"converting",title:"Converting...",img:(0,Z.jsx)("div",{className:"video-img converting",children:(0,Z.jsx)("div",{className:"loading"})}),content:(0,Z.jsx)("span",{children:"Converting video. It will take less than 1 minute."})}:{step:"preparing",img:(0,Z.jsx)("div",{className:"video-img convert"}),title:"Preparing...",content:""}:{step:"convert",title:"Convert & Download MP4",img:(0,Z.jsx)("div",{className:"video-img convert"}),content:""}}(qt);return(0,Z.jsxs)("div",{className:"Video ".concat(t?"modal":""),ref:yt,children:[tn&&(0,Z.jsxs)("div",{className:"discount-tip-header",children:[(0,Z.jsx)(y.Z,{}),"You’ ve reached the 20 video limit. Upgrade for unlimited videos.",(0,Z.jsx)(q.rU,{className:"btn primary",to:"/pricing?from=list_reach_limit",children:"Upgrade now"})]}),en&&(0,Z.jsxs)("div",{className:"discount-tip-header",children:[(0,Z.jsx)(y.Z,{}),"You’ ve record ",B.video,"/",B.videoLimitation," videos. Upgrade for unlimited videos.",(0,Z.jsx)(q.rU,{className:"btn primary",to:"/pricing?from=list_video_close_limit",children:"Upgrade now"})]}),(0,Z.jsx)("div",{className:"video-theator-container ".concat(Je?"active":""),ref:pt}),(0,Z.jsxs)("div",{className:"video-inner-container",style:{maxWidth:Ue+"px"},ref:dt,children:[(0,Z.jsx)("div",{className:"main",children:$t?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(Ae.Z,{})}):(0,Z.jsx)(Z.Fragment,{children:Yt?((0,x.I1)("video not found",{event_category:"video"}),(0,Z.jsxs)("div",{className:"video-error",children:[(0,Z.jsx)("div",{className:"error-404"}),(0,Z.jsx)("h3",{children:"Ooops!!"}),(0,Z.jsx)("p",{className:"error-tip",children:"We can't find a video you are looking for"}),(0,Z.jsx)(s.Z,{type:"primary",className:"add-extension",size:"large",onClick:Ht,children:"Add to Chrome It's free!"})]})):function(e,c){var u=e.thumbnailURI960||"",d=e.s3Available?e.fileWebMURI:void 0,f=e.mp4Available?e.fileMP4URI:void 0,m=f&&f.length>0?f:d,y=e.shareURI,g=e.title,b=A.uid+""!==e.userID&&!e.isChannelMember,j=A.uid+""===e.userID,I=e.channel&&A.uid===e.channel.creatorID,O=e.isEditProcessing;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{className:"video-container",ref:vt,children:[(0,Z.jsxs)("div",{className:"video-area",ref:ht,children:[(0,Z.jsx)("div",{className:"video-content",children:O&&!e.isOnlyBlurProcessing?(0,Z.jsxs)("div",{className:"cut-processing",children:[!O&&(0,Z.jsx)("img",{src:u,alt:""}),(0,Z.jsx)("div",{className:"wrapper",children:(0,Z.jsxs)("div",{className:"center",children:[(0,Z.jsx)("div",{className:"cut-processing-img",children:(0,Z.jsx)("div",{className:"loading"})}),(0,Z.jsx)("div",{className:"title",children:"Edit processing..."}),(0,Z.jsx)("div",{className:"sub-title",children:0===e.editWaitMin?"It will take less than a minute":"It will take ".concat(e.editWaitMin," minutes")})]})})]}):(0,Z.jsx)(z,{ref:ft,fileURI:m,videoId:t?n:gt.videoID,baseVersion:e.version,shareKey:It,duration:e.durationSecond,isOnlyBlurProcessing:e.isOnlyBlurProcessing,thumbnailURI:u,showPrepareTip:Tt(),increaseView:At,comments:T,handleVideoTimeChange:Vt,handleReactionIconAnimationEnd:Wt,handleAddReaction:Bt,handleScrollToComment:_t,toggleTheaterMode:Ct,replayLayer:Kt()})}),A.uid?(0,Z.jsx)("div",{className:"video-reaction-button-bar",children:K.t5.map((function(e){return(0,Z.jsx)("div",{className:"video-reaction-button",onClick:function(){Bt(e)},children:(0,Z.jsx)("div",{className:"emoji",children:e})},e)}))}):(0,Z.jsx)(o.Z,{title:"Sign in to add a reaction",placement:"bottom",children:(0,Z.jsx)("div",{className:"video-reaction-button-bar",children:K.t5.map((function(e){return(0,Z.jsx)("div",{className:"video-reaction-button",onClick:zt,children:e},e)}))})})]}),(0,Z.jsxs)("div",{className:"video-title-area",children:[A.uid==e.userID&&!e.isRecording&&(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("div",{className:"action-box",children:(0,Z.jsx)(i.Z,{placement:"topRight",trigger:"click",overlay:(0,Z.jsx)(a.Z,{children:(0,Z.jsx)(a.Z.Item,{icon:(0,Z.jsx)(R.XH,{}),onClick:Mt,children:"Remove"},"remove")}),children:(0,Z.jsx)("div",{className:"video-action-btn",children:(0,Z.jsx)(R.bv,{})})})})}),(0,Z.jsx)("div",{className:"video-title",children:A.uid==e.userID?(0,Z.jsx)(ve.Z,{item:e}):(0,Z.jsx)("div",{className:"display-title",children:g})}),(0,Z.jsxs)("div",{className:"video-author",children:[(0,Z.jsxs)("div",{className:"video-info-avatar",children:[(0,Z.jsx)(N.Z,{size:"32",username:e.userName,avatarUrl:e.userAvatar}),(0,Z.jsx)("span",{className:"username",children:e.userName})]}),(0,Z.jsx)("div",{className:"video-info-text",children:(0,Z.jsxs)("div",{className:"extra-info",children:[(0,Z.jsxs)("span",{className:"views",children:[(0,Z.jsx)("span",{children:e.views})," ",e.views>1?"views":"view"]}),(0,Z.jsx)("span",{className:"sep",children:"•"}),(0,Z.jsx)("span",{className:"create-time",children:(0,x.p6)(e.createdSec)})]})})]})]}),(0,Z.jsx)(Z.Fragment,{children:b?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("div",{className:"sidebar-area",children:(0,Z.jsxs)("div",{className:"shared-comment-container",children:[(0,Z.jsx)("div",{className:"title",children:T.length>1?"".concat(T.length," Comments"):"".concat(T.length," Comment")}),(0,Z.jsx)(me.Z,{itemType:K.Z$.video,itemId:t?n:gt.videoID,shareKey:It,ref:mt,height:Ge,handleSeekTo:Ft,currentVideoTime:We,onCommentStart:Gt,goToSignIn:zt})]})})}):(0,Z.jsx)("div",{className:"sidebar-area",children:(0,Z.jsxs)(l.Z,{defaultActiveKey:e.hasComment||e.channel?"2":"1",centered:!0,size:"default",onTabClick:kt,children:[(0,Z.jsx)(_e,{tab:"Manage",children:(0,Z.jsxs)(Z.Fragment,{children:[(j||I)&&(0,Z.jsx)("div",{className:"sidebar",children:(0,Z.jsx)(ge.Z,{item:e})}),j&&(0,Z.jsx)("div",{className:"sidebar",children:(0,Z.jsx)("div",{className:"section tiny",children:(0,Z.jsxs)("div",{className:"action-box",children:[(0,Z.jsxs)("div",{className:"action-item",onClick:Lt,children:[(0,Z.jsx)("div",{className:"icon",children:(0,Z.jsx)(R._8,{})}),(0,Z.jsx)("div",{className:"name",children:"Download MP4"})]}),(0,Z.jsxs)("div",{className:"action-item",onClick:Pt,children:[(0,Z.jsxs)("div",{className:"icon",children:[(0,Z.jsx)("div",{className:"badge",children:"Beta"}),(0,Z.jsx)(R.qz,{})]}),(0,Z.jsxs)("div",{className:"name",children:["Edit video"," ",(0,Z.jsx)(o.Z,{title:"Note: video editing is a Pro feature. For a limited time, it's free to use for everyone.",children:(0,Z.jsx)(h.Z,{})})]})]})]})})}),!b&&(0,Z.jsx)("div",{className:"sidebar",children:(0,Z.jsx)("div",{className:"section",children:y?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{className:"share-title-area",children:["Share Link",(0,Z.jsx)("div",{className:"more",children:(0,Z.jsx)(i.Z,{overlay:(0,Z.jsxs)(a.Z,{children:[(0,Z.jsx)(a.Z.Item,{children:(0,Z.jsx)("div",{onClick:Rt,children:"Embed Code"})},"0"),(0,Z.jsx)(a.Z.Item,{children:(0,Z.jsx)("div",{className:"revoke-btn",onClick:Ut,children:"Revoke share link"})},"1"),(0,Z.jsx)(a.Z.Item,{children:(0,Z.jsx)("div",{className:"revoke-btn",onClick:function(){(0,x.bw)(y)},children:"Get short url"})},"2")]}),trigger:["click"],children:(0,Z.jsx)(p.Z,{})})})]}),(0,Z.jsx)("div",{className:"share-link-input",children:(0,Z.jsx)(r.Z,{disabled:!0,value:y})}),(0,Z.jsx)("div",{className:"button-area",children:(0,Z.jsx)(s.Z,{type:"primary",block:!0,icon:Y?(0,Z.jsx)(v.Z,{}):(0,Z.jsx)(R.TI,{}),className:Y?"copy-btn copied":"copy-btn",onClick:function(){!function(e){(0,x.zp)(e),J(!0),setTimeout((function(){J(!1)}),1500)}(y)},children:Y?"Copied!":"Copy Link"})}),(0,Z.jsx)("div",{className:"sep"}),(0,Z.jsx)("div",{className:"destination-area",children:(0,Z.jsx)(S.Z,{dataURL:"fff",permissions:D,currentPlan:E,type:"video",itemId:t?n:gt.videoID,itemUrl:y})})]}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("h4",{children:"Share Your Video"}),(0,Z.jsxs)("div",{className:"button-area",children:[(0,Z.jsx)(s.Z,{className:"shareButton",onClick:Zt,loading:w.isGenerateShareLinkLoading,children:"Generate Shareable Link"}),(0,Z.jsxs)("div",{className:"support-s",children:[(0,Z.jsx)("div",{children:"Support:"}),(0,Z.jsx)("div",{className:"s-container",children:K.SX.map((function(e){return(0,Z.jsx)(o.Z,{title:e.displayName,children:(0,Z.jsx)("div",{className:"s-item ".concat(e.name)})},e.name)}))})]})]})]})})}),c&&!1]})},"1"),(0,Z.jsx)(_e,{tab:T.length>0?"Comments (".concat(T.length,")"):"Comments",children:(0,Z.jsx)("div",{className:"comment-area",children:(0,Z.jsx)(me.Z,{itemType:K.Z$.video,itemId:t?n:gt.videoID,isOwner:parseInt(w.info.userID)===A.uid,ref:mt,shareKey:It,height:Ge,handleSeekTo:Ft,currentVideoTime:We,onCommentStart:Gt,isInChannel:!!w.info.channel,channel:w.info.channel,goToSignIn:zt})})},"2")]})})})]})})}(qt,en)})}),(0,Z.jsx)(u.Z,{visible:X,onCancel:function(){ee(!1)},footer:null,className:"video-modal",width:500,closeIcon:(0,Z.jsx)(R.Tw,{style:{fontSize:"12px"}}),children:(0,Z.jsxs)("div",{className:"main",children:[rn.img,(0,Z.jsx)("div",{className:"title",children:rn.title}),(0,Z.jsx)("p",{className:"format-desc",children:rn.content}),"converting"!==rn.step&&"wait"!==rn.step&&"preparing"!==rn.step&&(0,Z.jsx)("div",{className:"download-action-area",children:qt.downloadAvailable?(0,Z.jsx)(s.Z,{type:"primary",className:"download",onClick:function(){(0,x.Cz)("/api/v1/video/download?videoID="+w.info.id,w.info.title+".mp4")},size:"large",block:!0,children:"Download MP4"}):(0,Z.jsx)(s.Z,{type:"primary",className:"download",onClick:function(){P(w.info.id),re(!0)},size:"large",block:!0,children:"Convert To MP4"})})]})}),(0,Z.jsx)(de,{visible:ae,onCancel:function(){oe(!1)},id:qt.id,shareKey:qt.shareKey}),(0,Z.jsx)(O.Z,{unClosable:!!w.info&&!w.info.restrictCanClose,visible:lt,onCancel:function(){ut(!1),(0,x.I1)("video-record-50",{event_category:"upgrade modal hide"})},type:"video-record-50"}),(0,Z.jsx)(O.Z,{onCancel:function(){be(!1)},visible:ye,type:"video-alert"}),(0,Z.jsx)(O.Z,{onCancel:function(){we(!1)},visible:xe,type:"download"}),(0,Z.jsx)(O.Z,{onCancel:function(){Te(!1)},visible:De,type:"video-editor"}),(0,Z.jsx)(O.Z,{onCancel:function(){Me(!1)},visible:Re,type:"5limit"}),(0,Z.jsx)(O.Z,{onCancel:function(){st(!1)},visible:ot,openDownloadWebmModal:function(){tt(!0)},type:"download-duration"}),(0,Z.jsx)(O.Z,{onCancel:function(){it(!1)},visible:rt,type:"edit-duration"}),(0,Z.jsx)(Se,{visible:et,onCancel:function(){tt(!1)},handleWebmDownload:function(){(0,x.Cz)("/api/v1/video/download/webm?videoID="+w.info.id,w.info.title+".webm")}}),!Jt&&(0,Z.jsx)(pe.Z,{type:"video",isInApp:!t&&jt.state,isFailed:qt.failed}),(0,Z.jsx)(u.Z,{visible:Xt,destroyOnClose:!0,closable:!1,maskClosable:!1,getContainer:!1,footer:null,centered:!0,className:"video-modal",children:(0,Z.jsx)("div",{className:"restriction-area",children:ue?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("h2",{className:"title",children:"Message sent successfully."})}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("h2",{className:"title",children:"Oops! video is not accessible. "}),(0,Z.jsxs)("p",{children:["video is locked because the owner (",qt.userName,") has reached a limit for video sharing."]}),(0,Z.jsx)("p",{children:"Want to watch video? Click the button below to let the owner know. We will send a reminder message to the video owner for you."}),(0,Z.jsx)(s.Z,{type:"primary",onClick:function(){(0,I.bG5)(w.info.id).then((function(){fe(!0)})),(0,x.I1)("tell owner restriction",{event_category:"video"})},children:"Send reminder"})]})})})]})]})})))},71943:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(18035),i=n(16514);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const s=function(e,t){var n=a((0,r.L)({accept:i.JT.ITEM,drop:function(e){t(e)},canDrop:function(t){if(null===e)return!0;for(var n=0;n<t.data.length;n++)if("folder"===t.data[n].itemType){var r=t.data[n].parentID||t.data[n].folderID;if(e.folderID===r||e.folderID===t.data[n].id)return!1}else if(e.folderID===t.data[n].folderID)return!1;return!0},collect:function(e){return{isOver:!!e.isOver()&&e.canDrop()}}}),2);return[n[0].isOver,n[1]]}},38547:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(67294);const i=function(e){var t=(0,r.useRef)();return(0,r.useEffect)((function(){t.current=e})),t.current}},74998:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(96974);const i=function(){return new URLSearchParams((0,r.TH)().search)}},71865:(e,t,n)=>{n.d(t,{Y:()=>i,Z:()=>a});var r=n(67294);function i(e,t,n,i,a){var o=(0,r.useRef)(null),s=(0,r.useRef)(null);function c(n){n.forEach((function(n){n.intersectionRatio>0&&!e&&!t&&(null==i||i())}))}return(0,r.useEffect)((function(){var e=null;if(s.current){var t={root:a||o.current,rootMargin:"0px 0px 200px 0px",threshold:.1};(e=new IntersectionObserver(c,t)).observe(s.current)}return function(){e&&(s.current&&e.unobserve(s.current),e.disconnect(),e=null)}})),[o,s]}const a=i},63611:(e,t,n)=>{n.d(t,{Z:()=>a,b:()=>i});var r=n(67294);function i(e){(0,r.useEffect)((function(){e&&e!==document.title&&(document.title=e+" - Awesome Screenshot")}),[e])}const a=i},13302:(e,t,n)=>{n.d(t,{r:()=>o});var r=n(67294);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){var t=i((0,r.useState)(e),2),n=t[0],a=t[1],o=(0,r.useRef)(n),s=function(){return o.current};return Reflect.defineProperty(s,"__v_isRef",{value:!0}),Reflect.defineProperty(s,"value",{get:function(){return o.current},set:function(e){a(o.current=e)}}),Object.freeze(s)}},93604:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(67294);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(){var e=i((0,r.useState)(!1),2),t=e[0],n=e[1],a=i((0,r.useState)(!1),2),o=a[0],s=a[1];return[t,n,function(){n(!1)},o,s]}},70001:(e,t,n)=>{n.d(t,{vU:()=>f,sc:()=>u,DK:()=>l,wD:()=>d});n(35668);var r,i=n(38648),a=n(35552),o=n(85893),s=(r=0,function(){return++r});function c(e,t){return(0,o.jsxs)("div",{className:"cus-message",children:[(0,o.jsx)("span",{className:"msg",children:e}),t&&(0,o.jsx)("div",{className:"actions",children:t.map((function(e){return(0,o.jsx)("div",{className:"action-btn",onClick:e.action,children:e.name},e.name)}))})]})}function l(){return u({msg:"Working..."})}function u(e){var t=e.msg,n=e.buttons,r=e.type,l=s();return i.Z.open({key:l+"",message:c(t,n),placement:"bottomLeft",className:"cus-notification ".concat("error"===r?"error":""),closeIcon:(0,o.jsx)(a.Tw,{}),duration:"error"===r?5:null}),l}function d(e,t){var n=t.msg,r=t.buttons,s=t.type;i.Z.open({key:e+"",message:c(n,r),placement:"bottomLeft",className:"cus-notification ".concat("error"===s?"error":""),closeIcon:(0,o.jsx)(a.Tw,{}),duration:"error"===s?5:1})}function f(e){i.Z.close(e+"")}},63015:(e,t,n)=>{n.d(t,{KU:()=>s,PW:()=>u,Yy:()=>l,sf:()=>c,yl:()=>d});var r=n(20573);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t,n;return"team"===(null===(t=e.user.premium)||void 0===t||null===(n=t.currentPlan)||void 0===n?void 0:n.PlanName.toLowerCase())},c=function(e,t){var n;return((null===(n=e.destination)||void 0===n?void 0:n.destinations)||[]).filter((function(e){return e.service===t}))},l=function(e){return(e.connectedAccount.accounts||[]).filter((function(e){return["dropbox","googleDrive","box"].includes(e.service)}))},u=function(e){return(e.connectedAccount.accounts||[]).filter((function(e){return!["dropbox","googleDrive","box"].includes(e.service)}))},d=function(e,t){var n;return(null===(n=e.video.videos)||void 0===n?void 0:n[t])||{}},f=function(e,t){return t.some((function(t){return t.id===e}))},m=(0,r.P1)([function(e){return e.multipleSelect.selectedTrashItems},function(e){return e.trash.itemIDList},function(e){return e.trash.trashItems}],(function(e,t,n){return t.map((function(t){return a(a({},n[t]),{},{checked:f(t,e)})}))}));(0,r.P1)([m],(function(e){return e.filter((function(e){return"folder"===e.itemTypeName}))})),(0,r.P1)([m],(function(e){return e.filter((function(e){return"folder"!==e.itemTypeName}))}))},16928:(e,t,n)=>{n.d(t,{D:()=>c,q:()=>l});var r=n(20573),i=n(35552),a=n(85893),o=function(e){return e.folder.folders},s=function e(t,n,r){t.forEach((function(t){n[t.folderID]&&"0"!==t.folderID&&(t.children=n[t.folderID].map((function(e,n){return{title:r[e].name,key:t.key+"-"+n,folderID:r[e].folderID,icon:function(e){return e.expanded?(0,a.jsx)(i.Hf,{}):(0,a.jsx)(i.RO,{})}}})),e(t.children,n,r))}))},c=(0,r.P1)([o,function(e){return e.folder.folderIDList}],(function(e,t){return function(e,t){var n=[],r={},o=function(n){r[n]=[],t[n].forEach((function(t){r[n].push(e[t])}))};for(var c in t)o(c);return r[0]||(r[0]=[]),r[0].unshift({name:"My Items",folderID:"0"}),r[0].forEach((function(e,t){n.push({title:e.name,key:""+t,folderID:e.folderID,icon:function(e){return e.expanded?(0,a.jsx)(i.Hf,{}):(0,a.jsx)(i.RO,{})}})})),s(n,t,e),n}(e,t)})),l=(0,r.P1)([o,function(e){return e.folder.starredFolderIDList}],(function(e,t){return t.filter((function(t){return void 0!==e[t]}))}))},2090:(e,t,n)=>{var r;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){if(!e)throw"First parameter is required.";t=new o(e,t=t||{type:"video"});var n=this;function r(n){n&&(t.initCallback=function(){n(),n=t.initCallback=null});var r=new s(e,t);(f=new r(e,t)).record(),d("recording"),t.disableLogs}function i(e){if(e=e||function(){},f){if("paused"===n.state)return n.resumeRecording(),void setTimeout((function(){i(e)}),1);"recording"!==n.state&&t.disableLogs,t.disableLogs,"gif"!==t.type?f.stop(r):(f.stop(),r()),d("stopped")}else m();function r(r){if(f){Object.keys(f).forEach((function(e){"function"!=typeof f[e]&&(n[e]=f[e])}));var i=f.blob;if(!i){if(!r)throw"Recording failed.";f.blob=i=r}if(i&&t.disableLogs,e){var a;try{a=p.createObjectURL(i)}catch(e){}"function"==typeof e.call?e.call(n,a):e(a)}t.autoWriteToDisk&&l((function(e){var n={};n[t.type+"Blob"]=e,k.Store(n)}))}else"function"==typeof e.call?e.call(n,""):e("")}}function c(e){postMessage((new FileReaderSync).readAsDataURL(e))}function l(e,n){if(!e)throw"Pass a callback function over getDataURL.";var r=n?n.blob:(f||{}).blob;if(!r)return t.disableLogs,void setTimeout((function(){l(e,n)}),1e3);if("undefined"==typeof Worker||navigator.mozGetUserMedia){var i=new FileReader;i.readAsDataURL(r),i.onload=function(t){e(t.target.result)}}else{var a=function(e){try{var t=p.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(t);return p.revokeObjectURL(t),n}catch(e){}}(c);a.onmessage=function(t){e(t.data)},a.postMessage(r)}}function u(e){e=e||0,"paused"!==n.state?"stopped"!==n.state&&(e>=n.recordingDuration?i(n.onRecordingStopped):(e+=1e3,setTimeout((function(){u(e)}),1e3))):setTimeout((function(){u(e)}),1e3)}function d(e){n&&(n.state=e,"function"==typeof n.onStateChanged.call?n.onStateChanged.call(n,e):n.onStateChanged(e))}var f;t.type;function m(){t.disableLogs}var h={startRecording:function(i){return t.disableLogs,i&&(t=new o(e,i)),t.disableLogs,f?(f.clearRecordedData(),f.record(),d("recording"),n.recordingDuration&&u(),n):(r((function(){n.recordingDuration&&u()})),n)},stopRecording:i,pauseRecording:function(){f?"recording"===n.state?(d("paused"),f.pause(),t.disableLogs):t.disableLogs:m()},resumeRecording:function(){f?"paused"===n.state?(d("recording"),f.resume(),t.disableLogs):t.disableLogs:m()},initRecorder:r,setRecordingDuration:function(e,t){if(void 0===e)throw"recordingDuration is required.";if("number"!=typeof e)throw"recordingDuration must be a number.";return n.recordingDuration=e,n.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){n.onRecordingStopped=e}}},clearRecordedData:function(){f?(f.clearRecordedData(),t.disableLogs):m()},getBlob:function(){if(f)return f.blob;m()},getDataURL:l,toURL:function(){if(f)return p.createObjectURL(f.blob);m()},getInternalRecorder:function(){return f},save:function(e){f?I(f.blob,e):m()},getFromDisk:function(e){f?a.getFromDisk(t.type,e):m()},setAdvertisementArray:function(e){t.advertisement=[];for(var n=e.length,r=0;r<n;r++)t.advertisement.push({duration:r,image:e[r]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"===n.state&&t.disableLogs,f&&"function"==typeof f.clearRecordedData&&f.clearRecordedData(),f=null,d("inactive"),n.blob=null},onStateChanged:function(e){t.disableLogs},state:"inactive",getState:function(){return n.state},destroy:function(){var e=t.disableLogs;t={disableLogs:!0},n.reset(),d("destroyed"),h=n=null,E.AudioContextConstructor&&(E.AudioContextConstructor.close(),E.AudioContextConstructor=null),t.disableLogs=e,t.disableLogs},version:"5.5.9"};if(!this)return n=h,h;for(var v in h)this[v]=h[v];return n=this,h}function o(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===P||t.recorderType===T||t.recorderType===Z?t.type="video":t.recorderType===L?t.type="gif":t.recorderType===C?t.type="audio":t.recorderType===A&&(N(e,"audio").length&&N(e,"video").length||!N(e,"audio").length&&N(e,"video").length?t.type="video":N(e,"audio").length&&!N(e,"video").length&&(t.type="audio"))),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}function s(e,t){var n;return(b||v||y)&&(n=C),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!b&&(n=A),"video"===t.type&&(b||y)&&(n=P,"undefined"!=typeof ReadableStream&&(n=Z)),"gif"===t.type&&(n=L),"canvas"===t.type&&(n=T),D()&&n!==T&&n!==L&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(N(e,"video").length||N(e,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(n=A):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(n=A)),e instanceof Array&&e.length&&(n=M),t.recorderType&&(n=t.recorderType),!t.disableLogs&&n&&n.name,!n&&j&&(n=A),n}function l(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t,n=this.mediaType,r=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof n.audio&&D()&&!N(e,"audio").length&&(n.audio=!1),"function"!=typeof n.video&&D()&&!N(e,"video").length&&(n.video=!1),"function"!=typeof n.gif&&D()&&!N(e,"video").length&&(n.gif=!1),!n.audio&&!n.video&&!n.gif)throw"MediaStream must have either audio or video tracks.";if(n.audio&&(t=null,"function"==typeof n.audio&&(t=n.audio),this.audioRecorder=new a(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:t,mimeType:r.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),n.video||this.audioRecorder.startRecording()),n.video){t=null,"function"==typeof n.video&&(t=n.video);var i=e;if(D()&&n.audio&&"function"==typeof n.audio){var o=N(e,"video")[0];g?((i=new x).addTrack(o),t&&t===P&&(t=A)):(i=new x).addTrack(o)}this.videoRecorder=new a(i,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:t,mimeType:r.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),n.audio||this.videoRecorder.startRecording()}if(n.audio&&n.video){var s=this,c=!0===D();(n.audio instanceof C&&n.video||!0!==n.audio&&!0!==n.video&&n.audio!==n.video)&&(c=!1),!0===c?(s.audioRecorder=null,s.videoRecorder.startRecording()):s.videoRecorder.initRecorder((function(){s.audioRecorder.initRecorder((function(){s.videoRecorder.startRecording(),s.audioRecorder.startRecording()}))}))}n.gif&&(t=null,"function"==typeof n.gif&&(t=n.gif),this.gifRecorder=new a(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:t,mimeType:r.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){e(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){e(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){e(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){if("undefined"!=typeof Worker){var n=function(e){var t,n=p.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),r=new Worker(n);if(void 0!==p)t=p;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(n),r}((function(e){postMessage((new FileReaderSync).readAsDataURL(e))}));n.onmessage=function(e){t(e.data)},n.postMessage(e)}else{var r=new FileReader;r.readAsDataURL(e),r.onload=function(e){t(e.target.result)}}}this.getBlob((function(n){n.audio&&n.video?t(n.audio,(function(r){t(n.video,(function(t){e({audio:r,video:t})}))})):n.audio?t(n.audio,(function(t){e({audio:t})})):n.video&&t(n.video,(function(t){e({video:t})}))}))},this.writeToDisk=function(){a.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){(e=e||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}a.version="5.5.9",e.exports=a,void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r),a.getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";k.Fetch((function(n,r){"all"!==e&&r===e+"Blob"&&t&&t(n),"all"===e&&t&&t(n,r.replace("Blob",""))}))},a.writeToDisk=function(e){(e=e||{}).audio&&e.video&&e.gif?e.audio.getDataURL((function(t){e.video.getDataURL((function(n){e.gif.getDataURL((function(e){k.Store({audioBlob:t,videoBlob:n,gifBlob:e})}))}))})):e.audio&&e.video?e.audio.getDataURL((function(t){e.video.getDataURL((function(e){k.Store({audioBlob:t,videoBlob:e})}))})):e.audio&&e.gif?e.audio.getDataURL((function(t){e.gif.getDataURL((function(e){k.Store({audioBlob:t,gifBlob:e})}))})):e.video&&e.gif?e.video.getDataURL((function(t){e.gif.getDataURL((function(e){k.Store({videoBlob:t,gifBlob:e})}))})):e.audio?e.audio.getDataURL((function(e){k.Store({audioBlob:e})})):e.video?e.video.getDataURL((function(e){k.Store({videoBlob:e})})):e.gif&&e.gif.getDataURL((function(e){k.Store({gifBlob:e})}))},l.getFromDisk=a.getFromDisk,l.writeToDisk=a.writeToDisk,a.MRecordRTC=l;var u;(u=void 0!==n.g?n.g:null)&&"undefined"==typeof window&&void 0!==n.g&&(n.g.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},n.g.console||(n.g.console={}),void 0!==n.g.console.log&&void 0!==n.g.console.error||(n.g.console.error=n.g.console.log=n.g.console.log||function(){}),"undefined"==typeof document&&(u.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},u.HTMLVideoElement=function(){}),"undefined"==typeof location&&(u.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(u.screen={width:0,height:0}),void 0===p&&(u.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),u.window=n.g);var d=window.requestAnimationFrame;if(void 0===d)if("undefined"!=typeof webkitRequestAnimationFrame)d=webkitRequestAnimationFrame;else if("undefined"!=typeof mozRequestAnimationFrame)d=mozRequestAnimationFrame;else if("undefined"!=typeof msRequestAnimationFrame)d=msRequestAnimationFrame;else if(void 0===d){var f=0;d=function(e,t){var n=(new Date).getTime(),r=Math.max(0,16-(n-f)),i=setTimeout((function(){e(n+r)}),r);return f=n+r,i}}var m=window.cancelAnimationFrame;void 0===m&&("undefined"!=typeof webkitCancelAnimationFrame?m=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?m=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?m=msCancelAnimationFrame:void 0===m&&(m=function(e){clearTimeout(e)}));var h=window.AudioContext;void 0===h&&("undefined"!=typeof webkitAudioContext&&(h=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(h=mozAudioContext));var p=window.URL;void 0===p&&"undefined"!=typeof webkitURL&&(p=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var v=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),y=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),g=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),b=!y&&!v&&!!navigator.webkitGetUserMedia||S()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),j=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);j&&!b&&-1!==navigator.userAgent.indexOf("CriOS")&&(j=!1,b=!0);var x=window.MediaStream;function w(e){if(0===e)return"0 Bytes";var t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function I(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var n=(e.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var r=t.split(".");t=r[0],n=r[1]}var i=(t||Math.round(9999999999*Math.random())+888888888)+"."+n;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,i);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(e,i);var a=document.createElement("a");a.href=p.createObjectURL(e),a.download=i,a.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(a),"function"==typeof a.click?a.click():(a.target="_blank",a.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),p.revokeObjectURL(a.href)}function S(){return"undefined"!=typeof window&&"object"===i(window.process)&&"renderer"===window.process.type||(!("undefined"==typeof process||"object"!==i(process.versions)||!process.versions.electron)||"object"===("undefined"==typeof navigator?"undefined":i(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function N(e,t){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===(t||"audio")})):[]}function O(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}void 0===x&&"undefined"!=typeof webkitMediaStream&&(x=webkitMediaStream),void 0!==x&&void 0===x.prototype.stop&&(x.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),a.invokeSaveAsDialog=I,a.getTracks=N,a.getSeekableBlob=function(e,t){if("undefined"==typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var n=new EBML.Reader,r=new EBML.Decoder,i=EBML.tools,a=new FileReader;a.onload=function(e){r.decode(this.result).forEach((function(e){n.read(e)})),n.stop();var a=i.makeMetadataSeekable(n.metadatas,n.duration,n.cues),o=this.result.slice(n.metadataSize),s=new Blob([a,o],{type:"video/webm"});t(s)},a.readAsArrayBuffer(e)},a.bytesToSize=w,a.isElectron=S;var E={};function D(){if(g||j||v)return!0;navigator.appVersion;var e,t,n=navigator.userAgent,r=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10);return(b||y)&&(e=n.indexOf("Chrome"),r=n.substring(e+7)),-1!==(t=r.indexOf(";"))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(" "))&&(r=r.substring(0,t)),i=parseInt(""+r,10),isNaN(i)&&(r=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10)),i>=49}function A(e,t){var n=this;if(void 0===e)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if("audio"===(t=t||{mimeType:"video/webm"}).type){var r;if(N(e,"video").length&&N(e,"audio").length)navigator.mozGetUserMedia?(r=new x).addTrack(N(e,"audio")[0]):r=new x(N(e,"audio")),e=r;t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=b?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}var i,a=[];function o(){n.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(n.timestamps[n.timestamps.length-1],n.timestamps)}function s(e){return i&&i.mimeType?i.mimeType:e.mimeType||"video/webm"}function c(){a=[],i=null,n.timestamps=[]}this.getArrayOfBlobs=function(){return a},this.record=function(){n.blob=null,n.clearRecordedData(),n.timestamps=[],l=[],a=[];var r=t;t.disableLogs,i&&(i=null),b&&!D()&&(r="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&r.mimeType&&(MediaRecorder.isTypeSupported(r.mimeType)||(t.disableLogs,r.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{i=new MediaRecorder(e,r),t.mimeType=r.mimeType}catch(t){i=new MediaRecorder(e)}r.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in i&&!1===i.canRecordMimeType(r.mimeType)&&t.disableLogs,i.ondataavailable=function(e){if(e.data&&l.push("ondataavailable: "+w(e.data.size)),"number"!=typeof t.timeSlice)!e.data||!e.data.size||e.data.size<100||n.blob?n.recordingCallback&&(n.recordingCallback(new Blob([],{type:s(r)})),n.recordingCallback=null):(n.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:s(r)}),n.recordingCallback&&(n.recordingCallback(n.blob),n.recordingCallback=null));else if(e.data&&e.data.size&&e.data.size>0&&(a.push(e.data),o(),"function"==typeof t.ondataavailable)){var i=t.getNativeBlob?e.data:new Blob([e.data],{type:s(r)});t.ondataavailable(i)}},i.onstart=function(){l.push("started")},i.onpause=function(){l.push("paused")},i.onresume=function(){l.push("resumed")},i.onstop=function(){l.push("stopped")},i.onerror=function(e){e&&(e.name||(e.name="UnknownError"),l.push("error: "+e),t.disableLogs||-1!==e.name.toString().toLowerCase().indexOf("invalidstate")||-1!==e.name.toString().toLowerCase().indexOf("notsupported")||-1!==e.name.toString().toLowerCase().indexOf("security")||"OutOfMemory"===e.name||"IllegalStreamModification"===e.name||"OtherRecordingError"===e.name||e.name,function(e){if(!n.manuallyStopped&&i&&"inactive"===i.state)return delete t.timeslice,void i.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==i.state&&"stopped"!==i.state&&i.stop())},"number"==typeof t.timeSlice?(o(),i.start(t.timeSlice)):i.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},n.manuallyStopped=!0,i&&(this.recordingCallback=e,"recording"===i.state&&i.stop(),"number"==typeof t.timeSlice&&setTimeout((function(){n.blob=new Blob(a,{type:s(t)}),n.recordingCallback(n.blob)}),100))},this.pause=function(){i&&"recording"===i.state&&i.pause()},this.resume=function(){i&&"paused"===i.state&&i.resume()},this.clearRecordedData=function(){i&&"recording"===i.state&&n.stop(c),c()},this.getInternalRecorder=function(){return i},this.blob=null,this.getState=function(){return i&&i.state||"inactive"};var l=[];this.getAllStates=function(){return l},void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1);n=this;!function r(){if(i&&!1!==t.checkForInactiveTracks)return!1===function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()?(t.disableLogs,void n.stop()):void setTimeout(r,1e3)}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function C(e,t){if(!N(e,"audio").length)throw"Your stream has no audio tracks.";var n,r=this,i=[],a=[],o=!1,s=0,c=2,l=(t=t||{}).desiredSampRate;function u(){if(!1===t.checkForInactiveTracks)return!0;if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function d(e,t){function n(e,t){var n,r=e.numberOfAudioChannels,i=e.leftBuffers.slice(0),a=e.rightBuffers.slice(0),o=e.sampleRate,s=e.internalInterleavedLength,c=e.desiredSampRate;function l(e,t,n){var r=Math.round(e.length*(t/n)),i=[],a=Number((e.length-1)/(r-1));i[0]=e[0];for(var o=1;o<r-1;o++){var s=o*a,c=Number(Math.floor(s)).toFixed(),l=Number(Math.ceil(s)).toFixed(),d=s-c;i[o]=u(e[c],e[l],d)}return i[r-1]=e[e.length-1],i}function u(e,t,n){return e+(t-e)*n}function d(e,t){for(var n=new Float64Array(t),r=0,i=e.length,a=0;a<i;a++){var o=e[a];n.set(o,r),r+=o.length}return n}function f(e,t,n){for(var r=n.length,i=0;i<r;i++)e.setUint8(t+i,n.charCodeAt(i))}2===r&&(i=d(i,s),a=d(a,s),c&&(i=l(i,c,o),a=l(a,c,o))),1===r&&(i=d(i,s),c&&(i=l(i,c,o))),c&&(o=c),2===r&&(n=function(e,t){for(var n=e.length+t.length,r=new Float64Array(n),i=0,a=0;a<n;)r[a++]=e[i],r[a++]=t[i],i++;return r}(i,a)),1===r&&(n=i);var m=n.length,h=new ArrayBuffer(44+2*m),p=new DataView(h);f(p,0,"RIFF"),p.setUint32(4,36+2*m,!0),f(p,8,"WAVE"),f(p,12,"fmt "),p.setUint32(16,16,!0),p.setUint16(20,1,!0),p.setUint16(22,r,!0),p.setUint32(24,o,!0),p.setUint32(28,2*o,!0),p.setUint16(32,2*r,!0),p.setUint16(34,16,!0),f(p,36,"data"),p.setUint32(40,2*m,!0);for(var v=m,y=44,g=0;g<v;g++)p.setInt16(y,32767*n[g],!0),y+=2;if(t)return t({buffer:h,view:p});postMessage({buffer:h,view:p})}if(e.noWorker)n(e,(function(e){t(e.buffer,e.view)}));else{var r,i,a,o=(r=n,i=p.createObjectURL(new Blob([r.toString(),";this.onmessage =  function (eee) {"+r.name+"(eee.data);}"],{type:"application/javascript"})),(a=new Worker(i)).workerURL=i,a);o.onmessage=function(e){t(e.data.buffer,e.data.view),p.revokeObjectURL(o.workerURL),o.terminate()},o.postMessage(e)}}if(!0===t.leftChannel&&(c=1),1===t.numberOfAudioChannels&&(c=1),(!c||c<1)&&(c=2),t.disableLogs,void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!0),this.record=function(){if(!1===u())throw"Please make sure MediaStream is active.";b(),x=g=!1,o=!0,void 0!==t.timeSlice&&I()},this.stop=function(e){e=e||function(){},o=!1,d({desiredSampRate:l,sampleRate:y,numberOfAudioChannels:c,internalInterleavedLength:s,leftBuffers:i,rightBuffers:1===c?[]:a,noWorker:t.noWorker},(function(t,n){r.blob=new Blob([n],{type:"audio/wav"}),r.buffer=new ArrayBuffer(n.buffer.byteLength),r.view=n,r.sampleRate=l||y,r.bufferSize=v,r.length=s,x=!1,e&&e(r.blob)}))},void 0===f)var f={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext};f.AudioContextConstructor||(f.AudioContextConstructor=new f.AudioContext);var m=f.AudioContextConstructor,h=m.createMediaStreamSource(e),v=void 0===t.bufferSize?4096:t.bufferSize;if(-1===[0,256,512,1024,2048,4096,8192,16384].indexOf(v)&&t.disableLogs,m.createJavaScriptNode)n=m.createJavaScriptNode(v,c,c);else{if(!m.createScriptProcessor)throw"WebAudio API has no support on this browser.";n=m.createScriptProcessor(v,c,c)}h.connect(n),t.bufferSize||(v=n.bufferSize);var y=void 0!==t.sampleRate?t.sampleRate:m.sampleRate||44100;(y<22050||y>96e3)&&t.disableLogs,t.disableLogs||t.desiredSampRate;var g=!1;function b(){i=[],a=[],s=0,x=!1,o=!1,g=!1,m=null,r.leftchannel=i,r.rightchannel=a,r.numberOfAudioChannels=c,r.desiredSampRate=l,r.sampleRate=y,r.recordingLength=s,w={left:[],right:[],recordingLength:0}}function j(){n&&(n.onaudioprocess=null,n.disconnect(),n=null),h&&(h.disconnect(),h=null),b()}this.pause=function(){g=!0},this.resume=function(){if(!1===u())throw"Please make sure MediaStream is active.";if(!o)return t.disableLogs,void this.record();g=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,o&&this.stop(j),j()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var x=!1;n.onaudioprocess=function(e){if(!g)if(!1===u()&&(t.disableLogs,n.disconnect(),o=!1),o){x||(x=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var l=e.inputBuffer.getChannelData(0),d=new Float32Array(l);if(i.push(d),2===c){var f=e.inputBuffer.getChannelData(1),m=new Float32Array(f);a.push(m)}s+=v,r.recordingLength=s,void 0!==t.timeSlice&&(w.recordingLength+=v,w.left.push(d),2===c&&w.right.push(m))}else h&&(h.disconnect(),h=null)},m.createMediaStreamDestination?n.connect(m.createMediaStreamDestination()):n.connect(m.destination),this.leftchannel=i,this.rightchannel=a,this.numberOfAudioChannels=c,this.desiredSampRate=l,this.sampleRate=y,r.recordingLength=s;var w={left:[],right:[],recordingLength:0};function I(){o&&"function"==typeof t.ondataavailable&&void 0!==t.timeSlice&&(w.left.length?(d({desiredSampRate:l,sampleRate:y,numberOfAudioChannels:c,internalInterleavedLength:w.recordingLength,leftBuffers:w.left,rightBuffers:1===c?[]:w.right},(function(e,n){var r=new Blob([n],{type:"audio/wav"});t.ondataavailable(r),setTimeout(I,t.timeSlice)})),w={left:[],right:[],recordingLength:0}):setTimeout(I,t.timeSlice))}}function T(e,t){if("undefined"==typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var n=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){e in document.createElement("canvas")&&(n=!0)}));var r,i,a,o=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),s=50,c=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(o&&c&&c[2]&&(s=parseInt(c[2],10)),o&&s<52&&(n=!1),t.useWhammyRecorder&&(n=!1),n)if(t.disableLogs,e instanceof HTMLCanvasElement)r=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";r=e.canvas}else navigator.mozGetUserMedia&&t.disableLogs;this.record=function(){if(a=!0,n&&!t.useWhammyRecorder){var e;"captureStream"in r?e=r.captureStream(25):"mozCaptureStream"in r?e=r.mozCaptureStream(25):"webkitCaptureStream"in r&&(e=r.webkitCaptureStream(25));try{var o=new x;o.addTrack(N(e,"video")[0]),e=o}catch(e){}if(!e)throw"captureStream API are NOT available.";(i=new A(e,{mimeType:t.mimeType||"video/webm"})).record()}else m.frames=[],f=(new Date).getTime(),d();t.initCallback&&t.initCallback()},this.getWebPImages=function(n){if("canvas"===e.nodeName.toLowerCase()){var r=m.frames.length;m.frames.forEach((function(e,n){var i=r-n;t.disableLogs,t.onEncodingCallback&&t.onEncodingCallback(i,r);var a=e.image.toDataURL("image/webp",1);m.frames[n].image=a})),t.disableLogs,n()}else n()},this.stop=function(e){a=!1;var r=this;n&&i?i.stop(e):this.getWebPImages((function(){m.compile((function(n){t.disableLogs,r.blob=n,r.blob.forEach&&(r.blob=new Blob([],{type:"video/webm"})),e&&e(r.blob),m.frames=[]}))}))};var l=!1;function u(){m.frames=[],a=!1,l=!1}function d(){if(l)return f=(new Date).getTime(),setTimeout(d,500);if("canvas"===e.nodeName.toLowerCase()){var n=(new Date).getTime()-f;return f=(new Date).getTime(),m.frames.push({image:(r=document.createElement("canvas"),i=r.getContext("2d"),r.width=e.width,r.height=e.height,i.drawImage(e,0,0),r),duration:n}),void(a&&setTimeout(d,t.frameInterval))}var r,i;html2canvas(e,{grabMouse:void 0===t.showMousePointer||t.showMousePointer,onrendered:function(e){var n=(new Date).getTime()-f;if(!n)return setTimeout(d,t.frameInterval);f=(new Date).getTime(),m.frames.push({image:e.toDataURL("image/webp",1),duration:n}),a&&setTimeout(d,t.frameInterval)}})}this.pause=function(){l=!0,i instanceof A&&i.pause()},this.resume=function(){l=!1,i instanceof A?i.resume():a||this.record()},this.clearRecordedData=function(){a&&this.stop(u),u()},this.name="CanvasRecorder",this.toString=function(){return this.name};var f=(new Date).getTime(),m=new _.Video(100)}function P(e,t){function n(e){e=void 0!==e?e:10;var t=(new Date).getTime()-c;return t?a?(c=(new Date).getTime(),setTimeout(n,100)):(c=(new Date).getTime(),s.paused&&s.play(),d.drawImage(s,0,0,u.width,u.height),l.frames.push({duration:t,image:u.toDataURL("image/webp")}),void(i||setTimeout(n,e,e))):setTimeout(n,e,e)}function r(e,t,n,r,i){var a=document.createElement("canvas");a.width=u.width,a.height=u.height;var o,s,c,l=a.getContext("2d"),d=[],f=-1===t,m=t&&t>0&&t<=e.length?t:e.length,h=0,p=0,v=0,y=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),g=n&&n>=0&&n<=1?n:0,b=r&&r>=0&&r<=1?r:0,j=!1;s=-1,c=(o={length:m,functionToLoop:function(t,n){var r,i,a,o=function(){!j&&a-r<=a*b||(f&&(j=!0),d.push(e[n])),t()};if(j)o();else{var s=new Image;s.onload=function(){l.drawImage(s,0,0,u.width,u.height);var e=l.getImageData(0,0,u.width,u.height);r=0,i=e.data.length,a=e.data.length/4;for(var t=0;t<i;t+=4){var n={r:e.data[t],g:e.data[t+1],b:e.data[t+2]};Math.sqrt(Math.pow(n.r-h,2)+Math.pow(n.g-p,2)+Math.pow(n.b-v,2))<=y*g&&r++}o()},s.src=e[n].image}},callback:function(){(d=d.concat(e.slice(m))).length<=0&&d.push(e[e.length-1]),i(d)}}).length,function e(){++s!==c?setTimeout((function(){o.functionToLoop(e,s)}),1):o.callback()}()}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs,this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),u.width=t.canvas.width||320,u.height=t.canvas.height||240,d=u.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(s=t.video.cloneNode(),t.initCallback&&t.initCallback()):(s=document.createElement("video"),O(e,s),s.onloadedmetadata=function(){t.initCallback&&t.initCallback()},s.width=t.video.width,s.height=t.video.height),s.muted=!0,s.play(),c=(new Date).getTime(),l=new _.Video,t.disableLogs,n(t.frameInterval)};var i=!1;this.stop=function(e){e=e||function(){},i=!0;var n=this;setTimeout((function(){r(l.frames,-1,null,null,(function(r){l.frames=r,t.advertisement&&t.advertisement.length&&(l.frames=t.advertisement.concat(l.frames)),l.compile((function(t){n.blob=t,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),e&&e(n.blob)}))}))}),10)};var a=!1;function o(){l.frames=[],i=!0,a=!1}this.pause=function(){a=!0},this.resume=function(){a=!1,i&&this.record()},this.clearRecordedData=function(){i||this.stop(o),o()},this.name="WhammyRecorder",this.toString=function(){return this.name};var s,c,l,u=document.createElement("canvas"),d=u.getContext("2d")}void 0!==h?E.AudioContext=h:"undefined"!=typeof webkitAudioContext&&(E.AudioContext=webkitAudioContext),a.Storage=E,a.MediaStreamRecorder=A,a.StereoAudioRecorder=C,a.CanvasRecorder=T,a.WhammyRecorder=P;var _=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function t(e){function t(e,t,n){return[{data:e,id:231}].concat(n.map((function(e){var n=function(e){var t=0;e.keyframe&&(t|=128);e.invisible&&(t|=8);e.lacing&&(t|=e.lacing<<1);e.discardable&&(t|=1);if(e.trackNum>127)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map((function(e){return String.fromCharCode(e)})).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:n,id:163}})))}function n(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function r(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var n=0;n<e.length;n+=8)t.push(parseInt(e.substr(n,8),2));return new Uint8Array(t)}function a(e){for(var t=[],o=0;o<e.length;o++){var s=e[o].data;"object"===i(s)&&(s=a(s)),"number"==typeof s&&(s=r(s.toString(2))),"string"==typeof s&&(s=new Uint8Array(s.split("").map((function(e){return e.charCodeAt(0)}))));var c=s.size||s.byteLength||s.length,l=Math.ceil(Math.ceil(Math.log(c)/Math.log(2))/8),u=c.toString(2),d=new Array(7*l+7+1-u.length).join("0")+u,f=new Array(l).join("0")+"1"+d;t.push(n(e[o].id)),t.push(r(f)),t.push(s)}return new Blob(t,{type:"video/webm"})}function o(e,t){return parseInt(e.substr(t+4,4).split("").map((function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t})).join(""),2)}function s(e){for(var t=0,n={};t<e.length;){var r=e.substr(t,4),i=o(e,t),a=e.substr(t+4+4,i);t+=8+i,n[r]=n[r]||[],"RIFF"===r||"LIST"===r?n[r].push(s(a)):n[r].push(a)}return n}var l=new function(e){var n=function(e){if(!e[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var t=e[0].width,n=e[0].height,r=e[0].duration,i=1;i<e.length;i++)r+=e[i].duration;return{duration:r,width:t,height:n}}(e);if(!n)return[];for(var r,i=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(r=n.duration,[].slice.call(new Uint8Array(new Float64Array([r]).buffer),0).map((function(e){return String.fromCharCode(e)})).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:n.width,id:176},{data:n.height,id:186}]}]}]}]}],o=0,s=0;o<e.length;){var c=[],l=0;do{c.push(e[o]),l+=e[o].duration,o++}while(o<e.length&&l<3e4);var u={id:524531317,data:t(s,0,c)};i[1].data.push(u),s+=l}return a(i)}(e.map((function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],n=t.indexOf("*"),r=0,i=[];r<4;r++)i[r]=t.charCodeAt(n+3+r);return{width:16383&(c[1]<<8|c[0]),height:16383&(c[3]<<8|c[2]),data:t,riff:e}}(s(atob(e.image.slice(23))));return t.duration=e.duration,t})));postMessage(l)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var n,r,i,a=(n=t,r=p.createObjectURL(new Blob([n.toString(),"this.onmessage =  function (eee) {"+n.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(r),p.revokeObjectURL(r),i);a.onmessage=function(t){t.data.error||e(t.data)},a.postMessage(this.frames)},{Video:e}}();a.Whammy=_;var k={init:function(){var e=this;if("undefined"!=typeof indexedDB&&void 0!==indexedDB.open){var t,n=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),r=indexedDB.open(n,1);r.onerror=e.onError,r.onsuccess=function(){((t=r.result).onerror=e.onError,t.setVersion)?1!==t.version?t.setVersion(1).onsuccess=function(){i(t),a()}:a():a()},r.onupgradeneeded=function(e){i(e.target.result)}}function i(t){t.createObjectStore(e.dataStoreName)}function a(){var n=t.transaction([e.dataStoreName],"readwrite");function r(t){n.objectStore(e.dataStoreName).get(t).onsuccess=function(n){e.callback&&e.callback(n.target.result,t)}}e.videoBlob&&n.objectStore(e.dataStoreName).put(e.videoBlob,"videoBlob"),e.gifBlob&&n.objectStore(e.dataStoreName).put(e.gifBlob,"gifBlob"),e.audioBlob&&n.objectStore(e.dataStoreName).put(e.audioBlob,"audioBlob"),r("audioBlob"),r("videoBlob"),r("gifBlob")}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){},dataStoreName:"recordRTC",dbName:null};function L(e,t){if("undefined"==typeof GIFEncoder){var n=document.createElement("script");n.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(n)}t=t||{};var r=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){"undefined"!=typeof GIFEncoder&&c?(r||(t.width||(t.width=l.offsetWidth||320),t.height||(t.height=l.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),o.width=t.canvas.width||320,o.height=t.canvas.height||240,l.width=t.video.width||320,l.height=t.video.height||240),(f=new GIFEncoder).setRepeat(0),f.setDelay(t.frameRate||200),f.setQuality(t.quality||10),f.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),Date.now(),h=d((function e(n){if(!0!==p.clearedRecordedData){if(a)return setTimeout((function(){e(n)}),100);h=d(e),void 0===i(u)&&(u=n),n-u<90||(!r&&l.paused&&l.play(),r||s.drawImage(l,0,0,o.width,o.height),t.onGifPreview&&t.onGifPreview(o.toDataURL("image/png")),f.addFrame(s),u=n)}})),t.initCallback&&t.initCallback()):setTimeout(p.record,1e3)},this.stop=function(e){e=e||function(){},h&&m(h),Date.now(),this.blob=new Blob([new Uint8Array(f.stream().bin)],{type:"image/gif"}),e(this.blob),f.stream().bin=[]};var a=!1;this.pause=function(){a=!0},this.resume=function(){a=!1},this.clearRecordedData=function(){p.clearedRecordedData=!0,f&&(f.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var o=document.createElement("canvas"),s=o.getContext("2d");r&&(e instanceof CanvasRenderingContext2D?o=(s=e).canvas:e instanceof HTMLCanvasElement&&(s=e.getContext("2d"),o=e));var c=!0;if(!r){var l=document.createElement("video");l.muted=!0,l.autoplay=!0,c=!1,l.onloadedmetadata=function(){c=!0},O(e,l),l.play()}var u,f,h=null,p=this}function R(e,t){void 0!==n.g&&n.g,t=t||"multi-streams-mixer";var r=[],i=!1,a=document.createElement("canvas"),o=a.getContext("2d");a.style.opacity=0,a.style.position="absolute",a.style.zIndex=-1,a.style.top="-1000em",a.style.left="-1000em",a.className=t,(document.body||document.documentElement).appendChild(a),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var s=this,c=window.AudioContext;void 0===c&&("undefined"!=typeof webkitAudioContext&&(c=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(c=mozAudioContext));var l=window.URL;void 0===l&&"undefined"!=typeof webkitURL&&(l=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var u=window.MediaStream;void 0===u&&"undefined"!=typeof webkitMediaStream&&(u=webkitMediaStream),void 0!==u&&void 0===u.prototype.stop&&(u.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var d={};function f(){if(!i){var e=r.length,t=!1,n=[];if(r.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:n.push(e)})),t)a.width=t.stream.width,a.height=t.stream.height;else if(n.length){a.width=e>1?2*n[0].width:n[0].width;var o=1;3!==e&&4!==e||(o=2),5!==e&&6!==e||(o=3),7!==e&&8!==e||(o=4),9!==e&&10!==e||(o=5),a.height=n[0].height*o}else a.width=s.width||360,a.height=s.height||240;t&&t instanceof HTMLVideoElement&&m(t),n.forEach((function(e,t){m(e,t)})),setTimeout(f,s.frameInterval)}}function m(e,t){if(!i){var n=0,r=0,a=e.width,s=e.height;1===t&&(n=e.width),2===t&&(r=e.height),3===t&&(n=e.width,r=e.height),4===t&&(r=2*e.height),5===t&&(n=e.width,r=2*e.height),6===t&&(r=3*e.height),7===t&&(n=e.width,r=3*e.height),void 0!==e.stream.left&&(n=e.stream.left),void 0!==e.stream.top&&(r=e.stream.top),void 0!==e.stream.width&&(a=e.stream.width),void 0!==e.stream.height&&(s=e.stream.height),o.drawImage(e,n,r,a,s),"function"==typeof e.stream.onRender&&e.stream.onRender(o,n,r,a,s,t)}}function h(e){var n=document.createElement("video");return function(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}(e,n),n.className=t,n.muted=!0,n.volume=0,n.width=e.width||s.width||360,n.height=e.height||s.height||240,n.play(),n}function p(t){r=[],(t=t||e).forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=h(e);t.stream=e,r.push(t)}}))}void 0!==c?d.AudioContext=c:"undefined"!=typeof webkitAudioContext&&(d.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){f()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var n=new u;if(t.getTracks().filter((function(e){return"video"===e.kind})).length){var i=h(t);i.stream=t,r.push(i),n.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){var a=s.audioContext.createMediaStreamSource(t);s.audioDestination=s.audioContext.createMediaStreamDestination(),a.connect(s.audioDestination),n.addTrack(s.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}e.push(n)}))},this.releaseStreams=function(){r=[],i=!0,s.gainNode&&(s.gainNode.disconnect(),s.gainNode=null),s.audioSources.length&&(s.audioSources.forEach((function(e){e.disconnect()})),s.audioSources=[]),s.audioDestination&&(s.audioDestination.disconnect(),s.audioDestination=null),s.audioContext&&s.audioContext.close(),s.audioContext=null,o.clearRect(0,0,a.width,a.height),a.stream&&(a.stream.stop(),a.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),p(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){i=!1;var t=function(){var e;p(),"captureStream"in a?e=a.captureStream():"mozCaptureStream"in a?e=a.mozCaptureStream():s.disableLogs;var t=new u;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),a.stream=t,t}(),n=function(){d.AudioContextConstructor||(d.AudioContextConstructor=new d.AudioContext);s.audioContext=d.AudioContextConstructor,s.audioSources=[],!0===s.useGainNode&&(s.gainNode=s.audioContext.createGain(),s.gainNode.connect(s.audioContext.destination),s.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var n=s.audioContext.createMediaStreamSource(e);!0===s.useGainNode&&n.connect(s.gainNode),s.audioSources.push(n)}})),!t)return;return s.audioDestination=s.audioContext.createMediaStreamDestination(),s.audioSources.forEach((function(e){e.connect(s.audioDestination)})),s.audioDestination.stream}();return n&&n.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){t.addTrack(e)})),e.forEach((function(e){e.fullcanvas&&!0})),t}}function M(e,t){e=e||[];var n,r,i=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){var i;n=new R(e,t.elementClass||"multi-streams-mixer"),(i=[],e.forEach((function(e){N(e,"video").forEach((function(e){i.push(e)}))})),i).length&&(n.frameInterval=t.frameInterval||10,n.width=t.video.width||360,n.height=t.video.height||240,n.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(n.getMixedStream()),(r=new A(n.getMixedStream(),t)).record()},this.stop=function(e){r&&r.stop((function(t){i.blob=t,e(t),i.clearRecordedData()}))},this.pause=function(){r&&r.pause()},this.resume=function(){r&&r.resume()},this.clearRecordedData=function(){r&&(r.clearRecordedData(),r=null),n&&(n.releaseStreams(),n=null)},this.addStreams=function(i){if(!i)throw"First parameter is required.";i instanceof Array||(i=[i]),e.concat(i),r&&n&&(n.appendStreams(i),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(n.getMixedStream()))},this.resetVideoStreams=function(e){n&&(!e||e instanceof Array||(e=[e]),n.resetVideoStreams(e))},this.getMixer=function(){return n},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function Z(e,t){function n(){return new ReadableStream({start:function(n){var r=document.createElement("canvas"),i=document.createElement("video");i.srcObject=e,i.onplaying=function(){r.width=t.width,r.height=t.height;var e=r.getContext("2d"),a=1e3/t.frameRate;setTimeout((function r(){e.drawImage(i,0,0),n.enqueue(e.getImageData(0,0,t.width,t.height)),setTimeout(r,a)}),a)},i.play()}})}var r,i;function a(e,s){if(t.workerPath||s){if(!t.workerPath&&s instanceof ArrayBuffer){var c=new Blob([s],{type:"text/javascript"});t.workerPath=p.createObjectURL(c)}t.workerPath,(r=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),r.addEventListener("message",(function(e){"READY"===e.data?(r.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:!0}),n().pipeTo(new WritableStream({write:function(e){r&&r.postMessage(e.data.buffer,[e.data.buffer])}}))):e.data&&(i||o.push(e.data))}))}else fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(t){t.arrayBuffer().then((function(t){a(e,t)}))}))}(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,this.record=function(){o=[],i=!1,this.blob=null,a(e),"function"==typeof t.initCallback&&t.initCallback()},this.pause=function(){i=!0},this.resume=function(){i=!1};var o=[];this.stop=function(e){r&&(r.postMessage(null),r.terminate(),r=null),this.blob=new Blob(o,{type:"video/webm"}),e(this.blob)},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){o=[],i=!1,this.blob=null},this.blob=null}a.DiskStorage=k,a.GifRecorder=L,a.MultiStreamRecorder=M,a.RecordRTCPromisesHandler=function(e,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===e)throw'First argument "MediaStream" is required.';var n=this;n.recordRTC=new a(e,t),this.startRecording=function(){return new Promise((function(e,t){try{n.recordRTC.startRecording(),e()}catch(e){t(e)}}))},this.stopRecording=function(){return new Promise((function(e,t){try{n.recordRTC.stopRecording((function(r){n.blob=n.recordRTC.getBlob(),n.blob&&n.blob.size?e(r):t("Empty blob.",n.blob)}))}catch(e){t(e)}}))},this.pauseRecording=function(){return new Promise((function(e,t){try{n.recordRTC.pauseRecording(),e()}catch(e){t(e)}}))},this.resumeRecording=function(){return new Promise((function(e,t){try{n.recordRTC.resumeRecording(),e()}catch(e){t(e)}}))},this.getDataURL=function(e){return new Promise((function(e,t){try{n.recordRTC.getDataURL((function(t){e(t)}))}catch(e){t(e)}}))},this.getBlob=function(){return new Promise((function(e,t){try{e(n.recordRTC.getBlob())}catch(e){t(e)}}))},this.getInternalRecorder=function(){return new Promise((function(e,t){try{e(n.recordRTC.getInternalRecorder())}catch(e){t(e)}}))},this.reset=function(){return new Promise((function(e,t){try{e(n.recordRTC.reset())}catch(e){t(e)}}))},this.destroy=function(){return new Promise((function(e,t){try{e(n.recordRTC.destroy())}catch(e){t(e)}}))},this.getState=function(){return new Promise((function(e,t){try{e(n.recordRTC.getState())}catch(e){t(e)}}))},this.blob=null,this.version="5.5.9"},a.WebAssemblyRecorder=Z},53284:(e,t,n)=>{n.d(t,{$:()=>a});var r=n(97474),i={ws:"wss",domain:"www.awesomescreenshot.com",cookie:"awesomescreenshot.com"};function a(e){this.active=!0,this.URL=i.ws+"://"+i.domain+"/websocket/video/open",this.socket=null,this.status="unconnected",this.sentQueue=[],this.willSendQueue=[],this.willSendQueueLength=0,this.currentSendId=1,this.currentSentRespId=0,this.option=e,this.retryCount=0,this.retryTimeout=null,this.videoURI="",this.paused=!1,this.lock=!1,this.videoName=null,this.needReconnect=!0,this.lastOnLine=!0,this.isPaused=!1,this.uploadSucceed=!1,this.testPercent=30,this.shouldRedirect=!0,this.updateForceReconnect=!1}i.domain=document.domain,a.prototype.isCompleted=function(){return this.videoURI&&this.videoURI.length>0&&this.uploadSucceed},a.prototype.pauseIt=function(){this.isPaused=!0,this.pause()},a.prototype.resumeIt=function(){this.isPaused=!1,this.reConnect()},a.prototype.connect=function(){var e=this;clearTimeout(e.retryTimeout),e.retryTimeout=null,e.socket=new WebSocket(e.URL+"?time="+(new Date).getTime()),e.socket.binaryType="blob",e.socket.onopen=function(){e.status="connected";var t=e.option.token,n=e.option.uid;if(e.videoName)e.socket.send(JSON.stringify({type:"recover",videoName:e.videoName,token:t,userID:n}));else{var r={type:"init",title:e.option.videoName,token:t,userID:n,extra:{userAgent:navigator.userAgent,client:e.option.client,screenSize:window.screen.width+"*"+window.screen.height,extVersion:e.option.version,recordType:e.option.recordType}};"vp8"!=e.option.videoCodec&&(r.videoCodec=e.option.videoCodec),e.option.workspaceID&&e.option.workspaceID.length>0&&e.option.channelID&&e.option.channelID.length>0?(r.workspaceID=e.option.workspaceID,r.channelID=e.option.channelID):e.option.folderID&&e.option.folderID.length>0&&(r.folderID=e.option.folderID),e.socket.send(JSON.stringify(r))}},e.socket.onclose=function(t){e.status="unconnected",!e.isPaused&&e.needReconnect&&e.reConnect(),e.needReconnect||(e.needReconnect=!0),e.uploadSucceed&&e.videoURI&&e.videoURI.length>0&&e.shouldRedirect&&e.option.goToItem},e.socket.onerror=function(e){},e.socket.onmessage=function(t){if(t.data){var n=JSON.parse(t.data);if("slice"===n.type){var r=e.sentQueue.findIndex((function(e){return e.id===Number(n.id)}));e.currentSentRespId=Number(n.id),e.sentQueue.splice(r,1)}else"init"===n.type?("1"===n.status?(e.videoURI=n.videoURI,e.videoID=n.videoID,e.videoName=n.videoName,e.option&&e.option.onopen()):(e.option&&e.option.serverError(n.message),e.needReconnect=!1),e.testPercent=30,e.retryCount=0):"recover"===n.type?("1"===n.status?((e.isPaused||e.paused)&&(e.paused=!1,e.active),e.resendSent(Number(n.id))):"2"===n.status||("true"===n.close?e.completeOperation():(e.active&&e.option&&e.option.onFailed(),e.needReconnect=!1)),e.retryCount=0):"complete"===n.type&&e.completeOperation()}}},a.prototype.completeOperation=function(){this.needReconnect=!1,this.sentQueue=[],this.willSendQueue=[],this.uploadSucceed=!0,this.close(1e3)},a.prototype.uploadRate=function(){var e=this.currentSentRespId,t=this.willSendQueue.length,n=e/(this.currentSendId-1+t);return t>0&&(this.updateForceReconnect?(this.updateForceReconnect=!1,this.reConnect()):"connected"==this.status&&0==this.active&&this.sentQueue.length<=0&&this.sendWillsend()),Math.floor(100*n)},a.prototype.reConnect=function(){var e=this;e.status="reconnecting",e.socket=null,e.retryCount<5?(0===e.retryCount?e.connect():setTimeout((function(){e.connect()}),2500),e.retryCount++):(e.needReconnect=!1,e.active,e.handleError(),e.retryCount=1,e.updateForceReconnect=!0)},a.prototype.complete=function(){var e=this;window.navigator.onLine?"connected"===e.status?(e.socket.send(JSON.stringify({type:"complete",videoName:this.videoName})),e.sentQueue.push({type:"complete",videoName:this.videoName})):e.sentQueue.length<=0&&e.willSendQueue.length<=0?a.httpComplete(e.videoName).then((function(t){1===t.code?e.active&&(localStorage.video_need_complete=""):(e.sentQueue=[],e.willSendQueue=[])})):(e.isPaused&&(e.updateForceReconnect=!0),e.willSendQueue.push(JSON.stringify({type:"complete",videoName:this.videoName}))):(e.isPaused&&(e.updateForceReconnect=!0),e.willSendQueue.push(JSON.stringify({type:"complete",videoName:this.videoName}))),e.active=!1},a.prototype.pause=function(){"connected"===this.status&&(this.socket.send(JSON.stringify({type:"pause",videoName:this.videoName})),localStorage.video_need_complete=this.videoName)},a.prototype.close=function(e){e=e||1e3,this.socket&&(this.socket.close(e),this.status="unconnected",this.socket=null)},a.prototype.sendWillsend=function(){var e=this;e.willSendQueueLength=e.willSendQueue.length;var t=e.willSendQueue.slice();e.willSendQueue=[],t.forEach((function(t){e.send(t)}))},a.prototype.resendSent=function(e){if(!this.lock){var t=this;t.lock=!0;var n=[];t.sentQueue.forEach((function(r){r.id?r.id>e&&(t.send(r.data,!0),n.push(r)):"complete"===r.type&&(t.socket.send(JSON.stringify(r)),n.push(r))})),t.sentQueue=n,t.lock=!1}},a.prototype.checkData=function(){this.sentQueue.length;this.willSendQueue.length>150&&this.handleError()},a.prototype.cancel=function(){var e={type:"cancel"};this.videoName&&(e.videoName=this.videoName),1===this.socket.readyState&&this.socket.send(JSON.stringify(e))},a.prototype.send=function(e,t){var n=this;!n.lastOnLine&&window.navigator.onLine,"connected"!==n.status?n.willSendQueue.push(e):t?window.navigator.onLine?n.socket.send(e):n.willSendQueue.unshift(e):window.navigator.onLine&&!0!==this.lock?0!==this.willSendQueue.length?(n.willSendQueue.push(e),n.sendWillsend()):(n.sentQueue.push({id:n.currentSendId,data:e}),n.socket.send(e),n.currentSendId++):(window.navigator.onLine,n.willSendQueue.push(e)),n.lastOnLine=window.navigator.onLine,n.checkData()},a.prototype.handleError=function(){this.needReconnect=!0,!this.isPaused&&this.active&&(!this.videoURI||this.videoURI.length<=0?this.option.serverError("Invalid network, please try it later!"):this.option.connectError()),this.pauseIt(),this.paused=!0},a.httpComplete=function(e,t){return(0,r.c$2)(e,t)}},91615:(e,t,n)=>{function r(e,t){if(!navigator.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(navigator.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=navigator.mediaDevices.enumerateDevices.bind(navigator)),navigator.enumerateDevices){var n=[],r=[],i=[],a=[],o=[],s=[];navigator.enumerateDevices((function(t){t.forEach((function(e){var t,c={};for(var l in e)c[l]=e[l];n.forEach((function(e){e.deviceId===c.deviceId&&(t=!0)})),t||("audio"===c.kind&&(c.kind="audioinput"),"video"===c.kind&&(c.kind="videoinput"),c.deviceId||(c.deviceId=c.id),c.id||(c.id=c.deviceId),"audioinput"!==c.kind&&"audio"!==c.kind||a.push(c),"audiooutput"===c.kind&&o.push(c),"videoinput"!==c.kind&&"video"!==c.kind||s.push(c),-1!==c.kind.indexOf("audio")&&r.push(c),-1!==c.kind.indexOf("video")&&i.push(c),n.push(c))})),e&&e({allMediaDevices:n,allVideoDevices:i,allAudioDevices:r,videoInputDevices:s,audioInputDevices:a,audioOutputDevices:o})}))}else t(null,"Neither navigator.mediaDevices.enumerateDevices NOR MediaStreamTrack.getSources are available.")}function i(e){return e.filter((function(e,t,n){return""!==e.label&&n.findIndex((function(t){return t.deviceId===e.deviceId}))===t}))}n.d(t,{D:()=>r,P:()=>i}),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)})},56010:(e,t,n)=>{n.d(t,{Ad:()=>O,Ah:()=>N,C2:()=>fe,CH:()=>$,Cz:()=>M,D3:()=>Q,DU:()=>ce,D_:()=>x,Er:()=>le,Hu:()=>te,I1:()=>de,IT:()=>K,IY:()=>ee,Jp:()=>X,LB:()=>T,MP:()=>C,MW:()=>S,OT:()=>w,Sg:()=>se,VL:()=>Y,ZQ:()=>ae,ZX:()=>F,Zf:()=>re,_v:()=>me,_x:()=>V,ab:()=>R,bw:()=>ie,fm:()=>D,kf:()=>j,nH:()=>Z,nV:()=>P,ol:()=>J,p6:()=>A,pQ:()=>ue,pd:()=>B,qc:()=>H,sI:()=>k,sZ:()=>G,vA:()=>oe,ve:()=>z,wD:()=>ne,y3:()=>q,z7:()=>U,zB:()=>E,zp:()=>_,zs:()=>I});n(37135);var r=n(48889),i=(n(94507),n(48086)),a=(n(9669),n(27484)),o=n.n(a),s=n(40705),c=n.n(s),l=n(28374),u=n(97474);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(){h=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new N(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function f(){}function m(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(O([])));y&&y!==t&&n.call(y,i)&&(p=y);var g=m.prototype=d.prototype=Object.create(p);function j(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,s){var c=l(e[i],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==b(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=m,s(g,"constructor",m),s(m,"constructor",f),f.displayName=s(m,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},j(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},j(g),s(g,o,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function p(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){y(a,r,i,o,s,"next",e)}function s(e){y(a,r,i,o,s,"throw",e)}o(void 0)}))}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function j(e){}function x(){return c()({start:new Date,ran:Math.random()}).substring(0,8)}function w(e){return e&&"object"===b(e)?c()(e):""}function I(e){return JSON.parse(JSON.stringify(e))}function S(e){var t=e/12;return Math.floor(t)===t?t:t.toFixed(2)}function N(e){window.open(e)}function O(e,t){var n=document.createElement("img");n.onload=function(){null==t||t({width:n.width,height:n.height},n)};var r=new FileReader;r.onload=function(e){var t;n.src=null===(t=e.target)||void 0===t?void 0:t.result},r.readAsDataURL(e)}function E(e,t,n,r,i,a){var o=new Image,s=(new XMLSerializer).serializeToString(e),c=null;n>=0&&n<=2&&(c=document.querySelector("#dropshadow-".concat(n)));var l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="'.concat(t.x," ").concat(t.y," ").concat(t.width," ").concat(t.height,'" width="').concat(t.width,'" height="').concat(t.height,'">');c&&(l+=c.outerHTML),l+=s,l+="</svg>";var u="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(l)));o.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(o,0,0,t.width,t.height),e.toBlob(a,i,.8)},o.src=u}function D(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function A(e){var t=o()(1e3*e);return o()(t).format("lll")}function C(e){return o()(e).format("ll")}function T(){return!!document.querySelector("#aws-chrome-installed")}function P(e){"undefined"!=typeof gtag&&gtag("event","install extension from "+e||0,{event_category:"install extenison"});var t="";t=/Edg/.test(window.navigator.userAgent)?"https://microsoftedge.microsoft.com/addons/detail/awesome-screenshot-scre/gpmljinohlbfgmeoaeceoajachkabijo":"https://chrome.google.com/webstore/detail/awesome-screenshot-screen/nlipoenfbbikpbjkfpfillcgkoblgpmj",window.open(t,"Install Awesome Screenshot")}function _(e){var t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.top="-999999px",document.body.append(t),t.select(),document.execCommand("copy"),t.remove()}function k(e,t){return L.apply(this,arguments)}function L(){return(L=g(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var i=[],a=document.createElement("img");a.crossOrigin="Anonymous",a.onload=function(){var r=a.height,o=a.width;if(r>n){for(var s=Math.ceil(r/n),c=r%n,l=0;l<s;l++){var u=document.createElement("canvas"),d=u.getContext("2d");u.width=o;var f=void 0,m=void 0;f=m=u.height=l!==s-1?n:c,d.drawImage(a,0,n*l,o,f,0,0,o,m),i.push(u.toDataURL())}e(i)}else e([t])},a.onerror=function(){return r()},a.src=t})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){function t(){return(t=g(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){return e({ele:r,height:r.height,width:r.width})},r.onerror=r.onabort=function(){return n(t)},r.src=t})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var n=e.map((function(e){return function(e){return t.apply(this,arguments)}(e)}));return Promise.all(n)}function M(e,t){var n=document.createElement("a"),r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.setAttribute("href",e.toString()),n.setAttribute("download",t),n.rel="noopener",n.dispatchEvent(r)}function Z(e){var t=Math.floor(e/3600);return(t>0?t+":":"")+Math.floor(e%3600/60)+":"+(e%60+"").padStart(2,"0")}function U(e){e=Math.floor(Number(e));var t=Math.floor(e/3600);return(t>0?t+":":"")+(Math.floor(e%3600/60)+"").padStart(2,"0")+":"+(e%60+"").padStart(2,"0")}function H(e){if(!e||e<=0)return"00:00";var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=(Math.floor(e%60)+"").padStart(2,"0");return"".concat(t>0?t+":":"").concat(n,":").concat(r)}function F(e){if(!e||e<=0)return"00:00.0";e=(0,l.NM)(e,1);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=(0,l.NM)(e%60,1);return e=r.toString(),r<10&&(e="0"+e),r==Math.floor(r)&&(e+=".0"),n<10&&(n="0"+n),(t>0?t+":":"")+n+":"+e}function G(e){return e&&"string"==typeof e?e.split(":").reduce((function(e,t){return 60*+e+parseFloat(t)})):0}function V(e,t,n){navigator.clipboard.write([new ClipboardItem(Object.defineProperty({},e.type,{value:e,enumerable:!0}))]).then(t,n)}function B(e,t,n,r){var i=document.createElement("canvas"),a=i.getContext("2d"),o=t.height,s=t.width,c=0,l=0,u=0,d=null,f=t.border.borderType;t.border.paddingSize>0&&(c=t.border.paddingSize,d=t.border.paddingColor,l+=c,u+=c,o+=2*c,s+=2*c),i.width=s,f&&(o+=t.border.height,i.height=o,"url_bottom"!==f&&(u+=t.border.height)),i.height=o,d&&(a.save(),a.fillStyle=d,a.fillRect(0,0,i.width,i.height),a.restore(),c>0&&(a.shadowOffsetX=4*window.devicePixelRatio,a.shadowOffsetY=4*window.devicePixelRatio,a.shadowBlur=4*window.devicePixelRatio,a.shadowColor="rgba(0,0,0,.15)"));var m=URL.createObjectURL(e);if("mac"===f||"windows"===f)(function(e,t,n){return new Promise((function(r){if(e){var i,a=t.paddingSize||0,o="mac"===t.borderType?"mac":"win",s="web"==n?"/static/images/":"./images/",c=s+o+"-header-left.png",l=s+o+"-header-center.png",u=s+o+"-header-right.png",d=e.width;R([c,l,u]).then((function(n){var s=e.getContext("2d"),c=a;if(i=d-t.left-t.right-2*a,n.forEach((function(e,n){var o;1===n?o=i:0===n?o=t.left:2===n&&(o=t.right),s.drawImage(e.ele,0,0,e.width,e.height,c,a,o,t.height),c+=o,2===n&&r(void 0)})),t.url)if(s.font=13*window.devicePixelRatio+"px Arial",s.fillStyle="#000000",s.measureText(t.url).width>i){var l=function(e,t,n){for(var r=t.split(""),i=r[0],a=1;a<r.length;a++){var o=r[a];if(!(e.measureText(i+" "+o).width<n))break;i+=o}return i+"..."}(s,t.url,i);s.fillText(l,140*window.devicePixelRatio+a,("mac"===o?66:70)*window.devicePixelRatio+a)}else s.fillText(t.url,140*window.devicePixelRatio+a,("mac"===o?66:70)*window.devicePixelRatio+a);if(t.captureTime){s.font=12*window.devicePixelRatio+"px sans-serif",s.fillStyle="#000000";var u=s.measureText(t.captureTime).width,f=d-a-10*window.devicePixelRatio-u,m="mac"===o?34*window.devicePixelRatio+a:39*window.devicePixelRatio+a;s.fillText(t.captureTime,f,m)}}))}}))})(i,t.border,n).then((function(){var e=document.createElement("img");e.onload=function(){a.drawImage(e,l,u);var t="png"===localStorage.format?"image/png":"image/jpeg";i.toBlob((function(e){r(e)}),t,1)},e.src=m}));else{!function(e,t,n){if("url"in t){var r=e.getContext("2d"),i="url_top"==t.borderType?0:n,a=t.paddingSize?t.paddingSize:0,o=e.width-20-2*a,s="Captured at: "+t.captureTime+(t.url&&t.url.length?"  URL: "+t.url:""),c="single",l=40;if(r.font="bold 24px Arial",r.measureText(s).width>o){c="multiple";var u=W(r,"URL:"+t.url,o);l=40*(u.length+1)}if(r.fillStyle="#000000",r.fillRect(a,i+a,e.width-2*a,l),r.restore(),r.fillStyle="#ffffff",r.textBaseline="top",r.strokeStyle="#ffffff",r.font="bold 24px Arial","single"===c)r.fillText(s,12+a,8+i+a);else{r.fillText("Captured at:"+t.captureTime,12+a,8+i+a);for(var d=0;d<u.length;d++)r.fillText(u[d],12+a,8+40*(d+1)+i+a)}}}(i,t.border,t.height);var h=document.createElement("img");h.onload=function(){a.drawImage(h,l,u);var e="png"===localStorage.format?"image/png":"image/jpeg";i.toBlob(r,e,1)},h.src=m}}function W(e,t,n){n-=10;for(var r=t.split(""),i=[],a=r[0],o=1;o<r.length;o++){var s=r[o];e.measureText(a+" "+s).width<n?a+=s:(i.push(a),a=s)}return i.push(a),i}var z=function(e,t,n){var r=document.getElementById(e);if(!r){var i=document.createElement("script");i.src=t,i.id=e,document.body.appendChild(i),i.onload=n||null}r&&(null==n||n())};function K(){var e;return-1!==["video_close_limit","video_reach_limit","videoNotify","video-alert","video-play","ext_pop_video_limit","new-banner-video","uploadVideo","web-recorder-tip","video-edit-alert"].indexOf((e="from",new URLSearchParams(window.location.search).get(e)||""))}function $(e,t){if(!e)return t;var n=e.replace(/\\/g,""),r=new RegExp(n,"ig");return t.replace(r,"<b>$&</b>")}function q(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}}))}var Y=function(e,t,n){return n.some((function(n){return n.id===e&&n.itemType===t}))};function J(e){var t=document.createElement("div");return null!=t.textContent?t.textContent=e:t.innerText=e,t.innerHTML}function Q(e,t,n){var r="",i=t+n;if(e&&!i)r=e>1?"Folders":"Folder";else if(!e&&i)r=i>1?"Items":"Item";else if(e&&i){r=(e>1?"Folders":"Folder")+" and "+(i>1?"items":"item")}return r}function X(e,t){var n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)}function ee(e,t){for(;e&&e!==document;){if(e.matches(t))return!0;e=e.parentNode}return!1}var te=function(e){var t=1e3*e;return(new Date).getTime()-t>6048e5?new Date(t).getFullYear()!==(new Date).getFullYear()?o()(t).format("MMM D"):o()(t).format("ll"):o()(t).fromNow()},ne=function(e,t){return t.some((function(t){return t.id===e.id&&t.itemType===e.itemType}))};function re(e){function t(t){(0,u.qcI)(t.credential).then((function(){e()}))}var n=document.querySelector("#google-gsi-script");if(n)Reflect.get(window,"google")?(google.accounts.id.initialize({client_id:"250015934524-rld4lndtv5m706jd1dpg4ie0jic7vqbt.apps.googleusercontent.com",cancel_on_tap_outside:!1,callback:t}),google.accounts.id.prompt()):n.onload=function(){google.accounts.id.initialize({client_id:"250015934524-rld4lndtv5m706jd1dpg4ie0jic7vqbt.apps.googleusercontent.com",cancel_on_tap_outside:!1,callback:t}),google.accounts.id.prompt()};else{var r=document.createElement("script");r.id="google-gsi-script",r.src="https://accounts.google.com/gsi/client",r.onload=function(){google.accounts.id.initialize({client_id:"250015934524-rld4lndtv5m706jd1dpg4ie0jic7vqbt.apps.googleusercontent.com",cancel_on_tap_outside:!1,callback:t}),google.accounts.id.prompt()},document.head.appendChild(r)}}function ie(e){i.ZP.loading({content:"Generating short url...",key:"shorturl",duration:0}),(0,u.HFJ)(e).then((function(e){_(e.data),i.ZP.success({content:"Copied to clipboard",key:"shorturl"})})).catch((function(e){i.ZP.error({content:e,key:"shorturl"})}))}var ae=function(e,t,n){return[].concat(m(e.slice(0,t)),m(n),m(e.slice(t)))},oe=function(e){return Array.from({length:e},(function(e,t){return t+1}))},se=function(e){return e.toLocaleString("en-US",{minimumFractionDigits:2})+" USD"};function ce(e){return parseInt(100*e+"")}var le=function(e){var t="",n=document.createElement("div");return n.innerHTML=e,n.querySelectorAll("p").forEach((function(e){""!==e.innerText&&(!function(e){e.querySelectorAll(".mention").forEach((function(e){e.classList.replace("mention","mention-user"),e.innerHTML=e.innerText,e.removeAttribute("data-index"),e.removeAttribute("data-denotation-char"),e.removeAttribute("data-value")})),e.querySelectorAll("a").forEach((function(e){e.classList.add("comment-link"),/https?:\/\//.test(e.innerText)||/https?:\/\//.test(e.href)||(e.href="://"+e.href),/https?:\/\//.test(e.innerText)&&/https?:\/\//.test(e.href)&&(e.href=e.innerText)}))}(e),t+=e.innerHTML+"<br />")})),t=t.replaceAll(/"/g,"'")};function ue(e){return"professional"===e||"team"===e?"Pro":D(e)}function de(e,t){gtag&&gtag("event",e,t)}var fe=new Proxy(Object.create(null),{get:function(e,t){return function(e){return new Promise((function(n,i){r.Z[t](function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onOk:function(){return n(void 0)},onCancel:function(){return e.rejectOnCancel&&i()}},e))}))}}});function me(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return new Promise((function(n){return setTimeout((function(){return n(null==t?void 0:t.apply(void 0,r))}),e)}))}}},e=>{e.O(0,[143],(()=>{e.E(875),e.E(29)}),5);var t=t=>e(e.s=t);e.O(0,[690,196,648,380,979,362],(()=>(t(85388),t(88773))));e.O()}]);